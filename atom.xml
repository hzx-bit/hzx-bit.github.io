<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>hzx&#39;s blog</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2025-04-08T09:48:37.977Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>huangzhixin</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>企业门户管理系统</title>
    <link href="http://example.com/2025/03/25/%E4%BC%81%E4%B8%9A%E9%97%A8%E6%88%B7%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2025/03/25/%E4%BC%81%E4%B8%9A%E9%97%A8%E6%88%B7%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/</id>
    <published>2025-03-25T06:31:35.000Z</published>
    <updated>2025-04-08T09:48:37.977Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="前端配置"><a href="#前端配置" class="headerlink" title="前端配置"></a>前端配置</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//vite.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Icons</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">IconsResolver</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/resolver&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vueDevTools <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-devtools&#x27;</span></span><br><span class="line"><span class="keyword">const</span> pathSrc = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>);<span class="comment">//src文件夹路径</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: pathSrc,<span class="comment">//配置src别名路径</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;baseUrl&quot;</span>: <span class="string">&quot;.&quot;</span>,</span><br><span class="line">      <span class="string">&quot;paths&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;@/*&quot;</span>: [<span class="string">&quot;src/*&quot;</span>]<span class="comment">//别名路径解析</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;exclude&quot;</span>: [<span class="string">&quot;node_modules&quot;</span>]<span class="comment">//不编译node_modules</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title class_">Vue</span>(),</span><br><span class="line">    <span class="title function_">vueDevTools</span>(),</span><br><span class="line">    <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">      <span class="comment">// 自动导入 Vue 相关函数，如：ref, reactive, toRef 等</span></span><br><span class="line">      <span class="attr">imports</span>: [<span class="string">&#x27;vue&#x27;</span>],</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 自动导入 Element Plus 相关函数，如：ElMessage, ElMessageBox... (带样式)</span></span><br><span class="line">      <span class="attr">resolvers</span>: [</span><br><span class="line">        <span class="title class_">ElementPlusResolver</span>(),</span><br><span class="line">        <span class="comment">// 自动导入图标组件</span></span><br><span class="line">        <span class="title class_">IconsResolver</span>(&#123;</span><br><span class="line">          <span class="attr">prefix</span>: <span class="string">&#x27;Icon&#x27;</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">vueTemplate</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">dts</span>: path.<span class="title function_">resolve</span>(pathSrc, <span class="string">&#x27;typings&#x27;</span>, <span class="string">&#x27;auto-imports.d.ts&#x27;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Components</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [</span><br><span class="line">        <span class="comment">// 自动注册图标组件</span></span><br><span class="line">        <span class="title class_">IconsResolver</span>(&#123;</span><br><span class="line">          <span class="attr">enabledCollections</span>: [<span class="string">&#x27;ep&#x27;</span>],</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="comment">// 自动导入 Element Plus 组件</span></span><br><span class="line">        <span class="title class_">ElementPlusResolver</span>(),</span><br><span class="line">      ],</span><br><span class="line"></span><br><span class="line">      <span class="attr">dts</span>: path.<span class="title function_">resolve</span>(pathSrc, <span class="string">&#x27;typings&#x27;</span>, <span class="string">&#x27;components.d.ts&#x27;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Icons</span>(&#123;</span><br><span class="line">      <span class="attr">autoInstall</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">server</span>:&#123;<span class="comment">//配置代理服务器</span></span><br><span class="line">    <span class="attr">proxy</span>:&#123;</span><br><span class="line">      <span class="string">&#x27;/adminapi&#x27;</span>:&#123;</span><br><span class="line">        <span class="attr">target</span>:<span class="string">&#x27;http://localhost:3000/&#x27;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>:<span class="literal">true</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="图片上传后产生url展示"><a href="#图片上传后产生url展示" class="headerlink" title="图片上传后产生url展示"></a>图片上传后产生url展示</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(uploadFile.<span class="property">raw</span>)</span><br></pre></td></tr></table></figure><h1 id="企业门户网站管理系统后端"><a href="#企业门户网站管理系统后端" class="headerlink" title="企业门户网站管理系统后端"></a>企业门户网站管理系统后端</h1></div><div class="story post-story"><h2 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h2><h3 id="下载express生成器"><a href="#下载express生成器" class="headerlink" title="下载express生成器"></a>下载express生成器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express-generator -g</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="创建express项目"><a href="#创建express项目" class="headerlink" title="创建express项目"></a>创建express项目</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">express server</span><br><span class="line"><span class="built_in">cd</span> ./server</span><br><span class="line">npm i</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="启动项目"><a href="#启动项目" class="headerlink" title="启动项目"></a>启动项目</h2><h3 id="修改package-json实现热重载"><a href="#修改package-json实现热重载" class="headerlink" title="修改package.json实现热重载"></a>修改package.json实现热重载</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;nodemon ./bin/www&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><p><img src="/../images/server-%E7%9B%AE%E5%BD%95.png" class="lazyload" data-srcset="/../images/server-%E7%9B%AE%E5%BD%95.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;前端配置&quot;&gt;&lt;a href=&quot;#前端配置&quot; class=&quot;headerlink&quot; title=&quot;前端配置&quot;&gt;&lt;/a&gt;前端配置&lt;/h2&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table</summary>
      
    
    
    
    <category term="项目" scheme="http://example.com/categories/%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="vue3" scheme="http://example.com/tags/vue3/"/>
    
    <category term="node.js" scheme="http://example.com/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>计算机网络</title>
    <link href="http://example.com/2025/02/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    <id>http://example.com/2025/02/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</id>
    <published>2025-02-13T06:49:08.000Z</published>
    <updated>2025-04-13T03:23:24.096Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="OSI参考模型"><a href="#OSI参考模型" class="headerlink" title="OSI参考模型"></a>OSI参考模型</h2><p>从下往上分别是物理层，数据链路层，网络层，传输层，会话层，表示层和应用层。其中</p><p>物理层在通信信道中传输原始比特流。</p><p>数据链路层进行物理寻址，并且将原始比特流转化为逻辑链路。</p><p>网络层进行路由选择和分组转发。</p><p>传输层建立端到端的数据链接。</p><p>会话层在用户间建立和管理会话，</p><p>表示层进行数据格式转化和数据加密。</p><p>应用层为应用程序提供服务。</p></div><div class="story post-story"><h2 id="TCP-IP网络模型"><a href="#TCP-IP网络模型" class="headerlink" title="TCP&#x2F;IP网络模型"></a>TCP&#x2F;IP网络模型</h2><p>链路层：负责封装和解封装IP报文，发送和接受ARP&#x2F;RARP报文等。<br>网络层：负责路由以及把分组报文发送给目标网络或主机。<br>传输层：负责对报文进行分组和重组，并以TCP或UDP协议格式封装报文。<br>应用层：负责向用户提供应用程序，比如HTTP、FTP、Telnet、DNS、SMTP等。</p></div><div class="story post-story"><h2 id="HTTP请求-响应的步骤"><a href="#HTTP请求-响应的步骤" class="headerlink" title="HTTP请求&#x2F;响应的步骤"></a>HTTP请求&#x2F;响应的步骤</h2><ol><li>用户在浏览器地址栏输入URL,URL由协议、域名、端口号、文件路径组成，没有文件路径的时候，就会访问根目录下的默认文件，例如index.html</li><li>浏览器检查本地缓存是否有该域名对应的IP地址。如果缓存中没有，浏览器会通过递归方式请求本地DNS服务器、本地DNS服务器通过迭代方式请求根域名服务器、顶级域名服务器、权威域名服务器等，最终将IP地址返回给客户端，这个过程中浏览器、操作系统、各级DNS服务器都会先查看本地缓存，没有记录再去查询</li><li>浏览器通过IP地址和端口号与服务器建立TCP连接。也就是”三次握手“过程，如果是HTTPS协议，还会进行TLS&#x2F;SSL握手，确保通信安全。</li><li>浏览器向服务器发送HTTP请求，请求头中包含浏览器信息、支持的编码格式、Cookie等。服务器接收到请求后，根据路径和参数处理请求，生成响应内容。</li><li>服务器将响应数据和HTTP状态码返回给浏览器。响应头中包含内容类型、缓存策略等信息。</li><li>览器接收到响应后，开始解析HTML文件。解析过程中，浏览器会加载HTML中的CSS、JavaScript、图片等资源。浏览器构建DOM树、CSSOM树，合并生成渲染树，最后进行布局和绘制，将页面显示在屏幕上。</li><li>当所有资源加载完毕，页面完全渲染后，浏览器触发load事件，页面加载完成。</li><li>TCP连接关闭（四次挥手）</li></ol></div><div class="story post-story"><h2 id="在浏览器中输入URL到显示页面涉及到哪些协议？"><a href="#在浏览器中输入URL到显示页面涉及到哪些协议？" class="headerlink" title="在浏览器中输入URL到显示页面涉及到哪些协议？"></a>在浏览器中输入URL到显示页面涉及到哪些协议？</h2><p>浏览器要将URL解析为IP地址，解析域名就要用到DNS协议，</p><p>DNS服务器是基于UDP的，因此会用到UDP协议。</p><p>得到IP地址后，浏览器就要与服务器建立一个http连接。因此要用到http协议。</p><p>http生成一个get请求报文，将该报文传给TCP层处理，所以还会用到TCP协议。</p><p>然后会发送给IP层，用到IP协议。IP层通过路由选路，一跳一跳发送到目的地址。</p><p>当然在一个网段内的寻址是通过以太网协议实现(也可以是其他物理层协议，比如PPP，SLIP)，</p><p>以太网协议需要直到目的IP地址的物理地址，有需要ARP协议。</p></div><div class="story post-story"><h2 id="HTTP-的-5-种方法"><a href="#HTTP-的-5-种方法" class="headerlink" title="HTTP 的 5 种方法"></a>HTTP 的 5 种方法</h2><p>GET—获取资源<br>POST—传输资源<br>PUT—更新资源<br>DELETE—删除资源<br>HEAD—获取报文首部</p></div><div class="story post-story"><h2 id="POST请求和GET请求"><a href="#POST请求和GET请求" class="headerlink" title="POST请求和GET请求"></a>POST请求和GET请求</h2><ul><li><p>GET传递的参数在url后拼接，不安全。POST传递的参数在request body中，更安全。</p></li><li><p>GET对数据进行查询，POST主要对数据进行增删改！</p></li><li><p>GET在浏览器回退时是无害的，而POST会再次提交请求</p></li><li><p>GET请求会被浏览器主动缓存，POST不会，要手动设置</p></li><li><p>GET请求长度有限制，POST没有</p></li></ul></div><div class="story post-story"><h2 id="HTTP报文的组成成分"><a href="#HTTP报文的组成成分" class="headerlink" title="HTTP报文的组成成分"></a>HTTP报文的组成成分</h2><p>请求报文{ 请求行、请求头、空行、请求体 } </p><p>响应报文{ 状态行、响应头、空行、响应体 }</p><p>Request Header:<br>GET &#x2F;sample.Jsp HTTP&#x2F;1.1 &#x2F;&#x2F;请求行：{http方法、页面地址、http协议、http版本}<br>Host: <a href="http://www.uuid.online/">www.uuid.online/</a> &#x2F;&#x2F;请求的目标域名和端口号<br>Origin: <a href="http://localhost:8081/">http://localhost:8081/</a> &#x2F;&#x2F;请求的来源域名和端口号 （跨域请求时，浏览器会自动带上这个头信息）<br>Referer: <a href="https://localhost:8081/link?query=xxxxx">https://localhost:8081/link?query=xxxxx</a> &#x2F;&#x2F;请求资源的完整URI<br>User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;67.0.3396.99 Safari&#x2F;537.36 &#x2F;&#x2F;浏览器信息<br>Cookie: BAIDUID&#x3D;FA89F036:FG&#x3D;1; BD_HOME&#x3D;1; sugstore&#x3D;0 &#x2F;&#x2F;当前域名下的Cookie<br>Accept: text&#x2F;html,image&#x2F;apng &#x2F;&#x2F;代表客户端希望接受的数据类型是html或者是png图片类型<br>Accept-Encoding: gzip, deflate &#x2F;&#x2F;代表客户端能支持gzip和deflate格式的压缩<br>Accept-Language: zh-CN,zh;q&#x3D;0.9 &#x2F;&#x2F;代表客户端可以支持语言zh-CN或者zh(值得一提的是q(0~1)是优先级权重的意思，不写默认为1，这里zh-CN是1，zh是0.9)<br>Connection: keep-alive &#x2F;&#x2F;告诉服务器，客户端需要的tcp连接是一个长连接</p><p>Response Header:<br>HTTP&#x2F;1.1 200 OK &#x2F;&#x2F; 响应状态行：{http协议、http版本 响应码 状态}<br>Date: Mon, 30 Jul 2018 02:50:55 GMT &#x2F;&#x2F;服务端发送资源时的服务器时间<br>Expires: Wed, 31 Dec 1969 23:59:59 GMT &#x2F;&#x2F;比较过时的一种验证缓存的方式，与浏览器（客户端）的时间比较，超过这个时间就不用缓存（不和服务器进行验证），适合版本比较稳定的网页<br>Cache-Control: no-cache &#x2F;&#x2F; 现在最多使用的控制缓存的方式，会和服务器进行缓存验证<br>etag: “fb8ba2f80b1d324bb997cbe188f28187-ssl-df” &#x2F;&#x2F; 一般是Nginx静态服务器发来的静态文件签名，浏览在没有“Disabled cache”情况下，接收到etag后，同一个url第二次请求就会自动带上“If-None-Match”<br>Last-Modified: Fri, 27 Jul 2018 11:04:55 GMT &#x2F;&#x2F;是服务器发来的当前资源最后一次修改的时间，下次请求时，如果服务器上当前资源的修改时间大于这个时间，就返回新的资源内容<br>Content-Type: text&#x2F;html; charset&#x3D;utf-8 &#x2F;&#x2F;如果返回是流式的数据，我们就必须告诉浏览器这个头，不然浏览器会下载这个页面，同时告诉浏览器是utf8编码，否则可能出现乱码<br>Content-Encoding: gzip &#x2F;&#x2F;告诉客户端，应该采用gzip对资源进行解码<br>Connection: keep-alive &#x2F;&#x2F;告诉客户端服务器的tcp连接也是一个长连接</p></div><div class="story post-story"><h2 id="http-和-https-的区别？"><a href="#http-和-https-的区别？" class="headerlink" title="http 和 https 的区别？"></a>http 和 https 的区别？</h2><p>• http 是超文本传输协议，信息是明文传输，https 则是具有安全性的 ssl 加密传输协议。<br>• https 协议需要 ca 证书，费用较高。<br>• http 协议的端口为 80，https 的端口为 443。<br>• http 的连接很简单，是无状态的。</p></div><div class="story post-story"><h2 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h2><ol><li>一开始，客户端和服务端都处于CLOSED状态。先是服务端主动监听某个端口(HTTP默认端口号80,HTTPS默认端口号是443),处于LISTEN状态</li><li>然后客户端主动发起连接SYN,之后处于SYN-SENT状态。</li><li>服务端收到发起的连接，返回SYN,并且ACK客户端的SYN,之后处于SYN-RCVD状态</li><li>容户端收到服务端发送的SYN和ACK之后，发送对SYN确认的ACK,之后处于ESTABLISHED状态。</li><li>服务端收到ACK的ACK之后，处于ESTABLISHED状态</li></ol></div><div class="story post-story"><h2 id="TCP-四次挥手"><a href="#TCP-四次挥手" class="headerlink" title="TCP 四次挥手"></a>TCP 四次挥手</h2><ol><li>客户端进程发出连接释放报文，进入FIN-WAIT-1状态，并且停止发送数据。服务器收到连接释放报文，发出确认报文, 此时，服务端就进入了CLOSE-WAIT状态。这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。这个状态还要持续一段时间，也就是整个CLOSE-WAIT状态持续的时间。</li><li>客户端收到服务器的确认请求后，此时，客户端就进入FIN-WAIT-2状态，等待服务器发送连接释放报文（在这之前还需要接受服务器发送的最后的数据）。</li><li>服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，此时，服务器就进入了LAST-ACK状态，等待客户端的确认。</li><li>客户端收到服务器的连接释放报文后，必须发出确认,此时，客户端就进入了TIME-WAIT状态。注意此时TCP连接还没有释放，必须经过2∗MSL（最长报文段寿命）的时间后，才进入CLOSED状态。服务器只要收到了客户端发出的确认，立即进入CLOSED状态。可以看到，服务器结束TCP连接的时间要比客户端早一些。</li></ol></div><div class="story post-story"><h2 id="Cookie、sessionStorage、localStorage-的区别"><a href="#Cookie、sessionStorage、localStorage-的区别" class="headerlink" title="Cookie、sessionStorage、localStorage 的区别"></a>Cookie、sessionStorage、localStorage 的区别</h2><p>相同点：存储在客户端<br>不同点：</p><ul><li>sessionStorage和localStorage的存储比cookie大得多</li><li>cookie设置的过期时间之前一直有效；localStorage永久存储，浏览器关闭后数据不丢失除非主动删除数据；sessionStorage数据在当前浏览器窗口关闭后自动删除</li><li>cookie的数据会自动的传递到服务器；sessionStorage和localStorage数据保存在本地</li></ul></div><div class="story post-story"><h2 id="HTTP状态码及常见状态码"><a href="#HTTP状态码及常见状态码" class="headerlink" title="HTTP状态码及常见状态码"></a>HTTP状态码及常见状态码</h2><h3 id="HTTP状态码"><a href="#HTTP状态码" class="headerlink" title="HTTP状态码"></a>HTTP状态码</h3><p>• 1xx：指示信息类，表示请求已接受，继续处理<br>• 2xx：指示成功类，表示请求已成功接受<br>• 3xx：指示重定向，表示要完成请求必须进行更近一步的操作<br>• 4xx：指示客户端错误，请求有语法错误或请求无法实现<br>• 5xx：指示服务器错误，服务器未能实现合法的请求</p><h3 id="常见状态码"><a href="#常见状态码" class="headerlink" title="常见状态码"></a>常见状态码</h3><p>• 200 OK：客户端请求成功<br>• 301 Moved Permanently：所请求的页面已经永久重定向至新的URL<br>• 302 Found：所请求的页面已经临时重定向至新的URL<br>• 304 Not Modified 未修改<br>• 403 Forbidden：对请求页面的访问被禁止<br>• 404 Not Found：请求资源不存在<br>• 500 Internal Server Error：服务器发生不可预期的错误原来缓冲的文档还可以继续使用<br>• 503 Server Unavailable：请求未完成，服务器临时过载或宕机，一段时间后可恢复正常</p></div><div class="story post-story"><h2 id="HTTP-请求跨域问题"><a href="#HTTP-请求跨域问题" class="headerlink" title="HTTP 请求跨域问题"></a>HTTP 请求跨域问题</h2><h3 id="跨域的原理"><a href="#跨域的原理" class="headerlink" title="跨域的原理"></a>跨域的原理</h3><p>跨域，是指浏览器不能执行其他网站的脚本。它是由浏览器的同源策略造成的。跨域访问是被各大浏览器所默认禁止的。<br>同源策略,是浏览器对 JavaScript 实施的安全限制，只要协议、域名、端口有任何一个不同，都被当作是不同的域。<br>跨域原理，即是通过各种方式，避开浏览器的安全限制。</p><h3 id="同源策略的作用"><a href="#同源策略的作用" class="headerlink" title="同源策略的作用"></a>同源策略的作用</h3><p>①无法用js读取非同源的Cookie、LocalStorage 和 IndexDB<br>这个主要是为了防止恶意网站通过js获取用户其他网站的cookie等用户信息。</p><p>②无法用js获取非同源的DOM<br>防止恶意网站通过iframe获取页面dom，从而窃取页面的信息。</p><p>③无法用js发送非同源的AJAX请求获取数据<br>防止恶意的请求攻击服务器窃取数据信息。</p><p>注意：</p><p>同源策略仅存在于浏览器端，服务器端不存在同源策略</p><p>即使跨域了，Ajax请求也可以正常发出，但浏览器会进行校验，不会将响应数据交给开发者</p><p><code>&lt;link&gt;</code> <code>script&gt;</code> <code>&lt;img&gt;</code>等标签发出的请求也可能发生跨域，但是浏览器对标签跨域不做限制</p><p>比方说通过内容分发网络引用jQuery</p><script src="https://cdn.staticfile.net/jquery/1.10.2/jquery.min.js">### 跨域资源共享**原理：**CORS由一系列HTTP响应头组成，这些响应头决定浏览器是否阻止前端JS代码跨域获取资源。浏览器的同源安全策略（协议、ip地址、端口号必须相同）默认会阻止网页”跨域“获取资源。但是如果接口服务器配置了CORS相关的HTTP响应头，就可以解除浏览器端的跨域访问限制。| CORS响应头部                                                 | 描述                             || ------------------------------------------------------------ | -------------------------------- || res.setHeader('Access-Control-Allow-Origin','*')             | 设置允许访问该资源的外域URL      || res.setHeader('Access-Control-Allow-Headers','X-Custom-Header') | 对额外的请求头进行声明           || res.setHeader('Access-Control-Allow-Methods','*')            | 设置实际请求所允许使用的HTTP方法 |### 预检请求只要符合以下任何条件之一，都需要进行预检请求：1. 请求方式为GET、POST、HEAD之外的请求Method类型2. 请求头中包含自定义头部字段3. 向服务器发送了application/json格式的数据在浏览器与服务器正式通信之前，浏览器会先发送OPTION请求进行预检，以获知服务器是否允许该实际请求，所以这一次的OPTION请求称为“预检请求”。服务器成功响应预检请求后，才会发送真正的请求，并携带真实数据。### JSONP接口浏览器通过`<script>`标签的src属性，请求服务器上的数据，同时，服务器返回一个函数的调用。这种请求数据的方式叫做JSONPJSONP不属于真正的Ajax请求，没有使用XMLHttpRequest这个对象。JSONP仅支持GET请求，不支持POST、PUT、DELETE请求。需要后台配合，将返回结果包装成callback(res)的形式。JSONP接口要声明在CORS接口之前</div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;OSI参考模型&quot;&gt;&lt;a href=&quot;#OSI参考模型&quot; class=&quot;headerlink&quot; title=&quot;OSI参考模型&quot;&gt;&lt;/a&gt;OSI参考模型&lt;/h2&gt;&lt;p&gt;从下往上分别是物理层，数据链路层，网络层</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="计算机网络" scheme="http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>围城</title>
    <link href="http://example.com/2025/02/08/%E5%9B%B4%E5%9F%8E/"/>
    <id>http://example.com/2025/02/08/%E5%9B%B4%E5%9F%8E/</id>
    <published>2025-02-08T05:11:43.000Z</published>
    <updated>2025-02-08T07:10:55.852Z</updated>
    
    <content type="html"><![CDATA[<hr><p>女人原是天生的政治动物。虚虚实实，以退为进，这些政治手腕，女人生下来全有。……女人不必学政治，而现在的政治家要成功，都得学女人。政治舞台上的戏剧全是反串。</p><hr><p>蛋已经下了，就不要去问母鸡是怎么下的。</p><hr><p>经过长期苦旅而彼此不讨厌的人,才可以结交作朋友。朋友如此，伴侣就更需要这样了!</p><hr><p>老实说，不管你跟谁结婚，结婚以后，你总发现你娶的不是原来的人，换了另外一个。早知道这样，结婚以前那种追求、恋爱等等，全可以剩掉。谈恋爱的时候，双方本相全收敛起来，到结婚还没有彼此认清，倒是老式婚姻干脆，索性结婚以前，谁也不认得谁。</p><hr><p>爱情多半是不成功的，要么苦于终成眷属的厌倦，要么苦于未能终成眷属的悲哀。</p><hr><p>结婚仿佛被围困的城堡，城外的人想冲出去，城里的人想逃出来。</p><hr><p>要人知道自己有个秘密，而不让人知道是个什么秘密，等他们问，要他们猜，这是人性的虚荣。</p><hr><p>假使订婚戒指是落入圈套的象征，钮扣也是扣住不放的预兆。</p><hr><p>这一张文凭仿佛有亚当夏娃下身那片树叶的功用，可以遮羞包丑；小小一张方纸能把一个人的空疏愚笨寡陋都掩盖起来。</p><hr><p>自己人之间，什么臭架子、坏脾气都行；笑容愈亲密，礼貌愈周到，彼此的猜忌或怨恨愈深。……在吵架的时候，先开口的未必占上风，后闭口才算胜利。</p><hr><p>女人有女人的聪明，轻盈活泼得跟她的举动一样。比了这种聪明，才学不过是沉淀渣滓。说女人有才学，就仿佛赞美一朵花，说它在天平上称起来有白菜番薯的斤两。真聪明的女人决不用功要做成才女，她只巧妙的偷懒。</p><hr><p>真正想一个人，记挂着他，希望跟他接近，这少得很。人事太忙了，也许我们全神贯注，无间断地怀念一个人。我们一生对于最亲爱的人的想念，加起来恐怕不到一点钟，此外不过是念头在他身上瞥过，想到而已。</p><hr><p>天下只有两种人。比如一串葡萄到手，一种人挑最好的先吃，另一种人把最好的留到最后吃。照例第一种人应该乐观，因为他每吃一颗都是吃剩的葡萄里最好的;第二种人应该悲观，因为他每吃一颗都是吃剩的葡萄里最坏的。不过事实却适得其反，缘故是第二种人还有希望，第一种人只有回忆。</p><hr><p>只有懂幸福的人才懂得进退一样精彩</p><hr><p>流言这东西，比流感蔓延的速度更快，比流星所蕴含的能量更巨大，比流氓更具有恶意，比流产更能让人心力憔悴。</p><hr><p>天下就没有偶然，那不过是化了妆的、戴了面具的必然。</p><hr><p>对于丑人，细看是一种残忍——除非他是坏人，你要惩罚他。</p><hr><p>上帝会懊悔没在人身上添一条能摇的狗尾巴，因此减低了不知多少表情的效果。</p><hr><p>泛黄的照片失了真，承诺像刀伤了人。</p><hr><p>结婚仿佛金漆的鸟笼，笼子外面的鸟想住进去，笼内的鸟想飞出去，所以结而离，离而结，没有了局</p><hr><p>不受教育的人，因为不识字，上人的当，受教育的人，因为识了字，上印刷品的当。</p><hr><p>我们对采摘不到的葡萄，不但想象它酸，也很可能想象它是分外地甜。</p><hr><p>苏文纨跟新楣的长期认识并不会日积月累得成为恋爱，好比冬季每天的气候罢，你没法把今天的温度加在昨天的上面，好等明天积成个和暖的春日。</p><hr><p>结婚无需太伟大的爱情，彼此不讨厌已经够结婚资本了。</p><hr><p>事实上，一个人的缺点正像猴子的尾巴，猴子蹲在地上的时候，尾巴是看不见的，直到他向树上爬，就把后部供大众瞻仰，可是这红臀长尾巴本来就有，并非地位爬高了的新标识。</p><hr><p>同行最不宜结婚，因为彼此是行家，谁也哄不倒谁，丈夫不会莫测高深地崇拜太太，太太也不会盲目地崇拜丈夫，婚姻的基础就不牢靠。</p><hr><p>西洋赶驴子的人，每逢驴子不肯走，鞭子没有用，就把一串胡萝卜挂在驴子眼睛之前、唇吻之上。这笨驴子以为走前一步，萝卜就能到嘴，于是一步再一步继续向前，嘴愈要咬，脚愈要赶，不知不觉中又走了一站。那时候它是否吃得到这串萝卜，得看驴夫的高兴。一切机关里，上司驾驭下属，全用这种技巧。</p><hr><p>我们在社会上一切说话全像戏院子的入场券，一边印着“过期作废”，可是那一边又不注明什么日期，随我们的便可以提早或延迟。</p><hr><p>我发现拍马屁跟恋爱一样，不容许有第三者冷眼旁观。咱们以后恭维人起来，得小心旁边没有其他的人。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;p&gt;女人原是天生的政治动物。虚虚实实，以退为进，这些政治手腕，女人生下来全有。……女人不必学政治，而现在的政治家要成功，都得学女人。政治舞台上的戏剧全是反串。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;蛋已经下了，就不要去问母鸡是怎么下的。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;经过长期苦旅而彼此不</summary>
      
    
    
    
    <category term="文摘" scheme="http://example.com/categories/%E6%96%87%E6%91%98/"/>
    
    
    <category term="《围城》" scheme="http://example.com/tags/%E3%80%8A%E5%9B%B4%E5%9F%8E%E3%80%8B/"/>
    
  </entry>
  
  <entry>
    <title>leetcode</title>
    <link href="http://example.com/2025/01/03/leetcode/"/>
    <id>http://example.com/2025/01/03/leetcode/</id>
    <published>2025-01-03T09:24:22.000Z</published>
    <updated>2025-04-20T06:19:53.527Z</updated>
    
    <content type="html"><![CDATA[<h1 id="leetcode刷题笔记"><a href="#leetcode刷题笔记" class="headerlink" title="leetcode刷题笔记"></a>leetcode刷题笔记</h1><p><a href="https://leetcode.cn/problems/happy-number/description/">202. 快乐数 - 力扣（LeetCode）</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误代码</span></span><br><span class="line"><span class="keyword">var</span> getHappy = <span class="keyword">function</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(n)&#123;</span><br><span class="line">        ans+= (n%<span class="number">10</span>) ** <span class="number">2</span>;</span><br><span class="line">        n/=<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>错误原因</strong></p><p>在 JavaScript 中，使用&#x2F;运算符进行除法运算时（如n &#x2F;&#x3D; 10这个操作），如果n原本是整数类型，这样的除法操作会将结果转换为浮点数类型。<br>例如，当n初始值为19，第一次执行n &#x2F;&#x3D; 10后，n会变成1.9，而后续在getHappy函数里期望对每一位数字进行处理（通过n % 10获取个位数字等操作），浮点数的取余等操作的行为和预期处理整数时不一致，并且不符合题目本意（通常是按整数的每一位来处理）。<br>要解决这个问题，应该使用Math.floor（向下取整）或者Math.trunc（去除小数部分）等方法来确保n在分割每一位数字的过程中依然保持整数类型，修改后的getHappy函数如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var getHappy = function(n)&#123;</span><br><span class="line">    let ans = 0;</span><br><span class="line">    while(n)&#123;</span><br><span class="line">        ans+= (n%10) ** 2;</span><br><span class="line">        n = Math.trunc(n/10);</span><br><span class="line">    &#125;</span><br><span class="line">    return ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/3sum/">15. 三数之和 - 力扣（LeetCode）</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误代码</span></span><br><span class="line"><span class="keyword">var</span> threeSum = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">    nums.<span class="title function_">sort</span>();</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>错误原因</strong></p><p>Array.sort()默认排序是将元素转换为字符串，然后按照它们的 UTF-16 码元值升序排序，所以这样写会导致整数无法按大小排序。正确代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> threeSum = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">    nums.<span class="title function_">sort</span>(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a-b);</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/reverse-string-ii/description/">541. 反转字符串 II - 力扣（LeetCode）</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误代码</span></span><br><span class="line"><span class="keyword">var</span> reverse = <span class="keyword">function</span>(<span class="params">s,<span class="keyword">from</span>,to</span>)&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">from</span>&lt;to)&#123;</span><br><span class="line">        <span class="keyword">let</span> temp = s[<span class="keyword">from</span>];</span><br><span class="line">        s[<span class="keyword">from</span>] = s[to];</span><br><span class="line">        s[t0] = temp;</span><br><span class="line">        <span class="keyword">from</span>++,to--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>错误原因</strong></p><p>JavaScript中字符串为按值传递，作为参数传递时无法改变值。应改为传递数组，正确代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reverse = <span class="keyword">function</span>(<span class="params">arr,<span class="keyword">from</span>,to</span>)&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">from</span>&lt;to)&#123;</span><br><span class="line">        <span class="keyword">let</span> temp = arr[<span class="keyword">from</span>];</span><br><span class="line">        arr[<span class="keyword">from</span>] = arr[to];</span><br><span class="line">        arr[to] = temp;</span><br><span class="line">        <span class="keyword">from</span>++,to--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> reverseStr = <span class="keyword">function</span>(<span class="params">s, k</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> arr = <span class="title class_">Array</span>.<span class="title function_">from</span>(s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>;i+=<span class="number">2</span>*k)&#123;</span><br><span class="line">        <span class="title function_">reverse</span>(arr,i,<span class="title class_">Math</span>.<span class="title function_">min</span>(arr.<span class="property">length</span>-<span class="number">1</span>,i+k-<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/description/">28. 找出字符串中第一个匹配项的下标 - 力扣（LeetCode）</a></p><p><strong>KMP算法模板</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strStr = <span class="keyword">function</span>(<span class="params">haystack, needle</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> m=haystack.<span class="property">length</span>,n=needle.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">if</span>(n===<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> next= <span class="keyword">new</span> <span class="title class_">Array</span>(n).<span class="title function_">fill</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">1</span>,j=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(j&gt;<span class="number">0</span>&amp;&amp;needle[i]!==needle[j]) j=next[j-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(needle[i]===needle[j]) j++;</span><br><span class="line">        next[i]=j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>,j=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(j&gt;<span class="number">0</span>&amp;&amp;haystack[i]!==needle[j]) j=next[j-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(haystack[i]===needle[j]) j++;</span><br><span class="line">        <span class="keyword">if</span>(j===n) <span class="keyword">return</span> i-n+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/sliding-window-maximum/">239. 滑动窗口最大值 - 力扣（LeetCode）</a></p><p><strong>数组模拟栈：</strong>const stack &#x3D; [];</p><ul><li>入栈：stack.push(x);</li><li>出栈：stack.pop();</li><li>查看栈顶：stack.at(-1);</li><li>判断栈非空：stack.length</li></ul><p><strong>数组模拟队列：</strong>const queue &#x3D; []</p><ul><li>入队：queue.push(x)</li><li>出队：queue.shift()</li><li>查看队首：queue[0]</li><li>查看队尾：queue.at(-1)</li><li>判断队非空：queue.length</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> maxSlidingWindow = <span class="keyword">function</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ans = [];</span><br><span class="line">    <span class="keyword">let</span> queue = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;k-<span class="number">1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(queue.<span class="property">length</span>&amp;&amp;nums[queue.<span class="title function_">at</span>(-<span class="number">1</span>)]&lt;nums[i]) queue.<span class="title function_">pop</span>();</span><br><span class="line">        queue.<span class="title function_">push</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=k-<span class="number">1</span>;i&lt;nums.<span class="property">length</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(queue.<span class="property">length</span>&amp;&amp;nums[queue.<span class="title function_">at</span>(-<span class="number">1</span>)]&lt;nums[i]) queue.<span class="title function_">pop</span>();</span><br><span class="line">        queue.<span class="title function_">push</span>(i);</span><br><span class="line">        <span class="keyword">while</span>(queue[<span class="number">0</span>]&lt;=i-k) queue.<span class="title function_">shift</span>();</span><br><span class="line">        ans.<span class="title function_">push</span>(nums[queue[<span class="number">0</span>]]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/combinations/">77. 组合 - 力扣（LeetCode）</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//错误代码</span><br><span class="line">const ans = [];</span><br><span class="line">const path = [];</span><br><span class="line">var backtracking = function(n,k,startIndex)&#123;</span><br><span class="line">    if(path.length===k)&#123;</span><br><span class="line">        ans.push(path);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    for(let i=startIndex;i&lt;=n-k+path.length+1;i++)&#123;</span><br><span class="line">        path.push(i);</span><br><span class="line">        backtracking(n,k,i+1);</span><br><span class="line">        path.pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var combine = function(n, k) &#123;</span><br><span class="line">    backtracking(n,k,1);</span><br><span class="line">    return ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>错误原因</strong></p><ol><li>ans和path需要初始化</li><li>需将path的副本加入ans</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ans = [];</span><br><span class="line"><span class="keyword">let</span> path = [];</span><br><span class="line"><span class="keyword">var</span> backtracking = <span class="keyword">function</span>(<span class="params">n,k,startIndex</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(path.<span class="property">length</span>===k)&#123;</span><br><span class="line">        ans.<span class="title function_">push</span>(path.<span class="title function_">concat</span>());</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=startIndex;i&lt;=n-k+path.<span class="property">length</span>+<span class="number">1</span>;i++)&#123;</span><br><span class="line">        path.<span class="title function_">push</span>(i);</span><br><span class="line">        <span class="title function_">backtracking</span>(n,k,i+<span class="number">1</span>);</span><br><span class="line">        path.<span class="title function_">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> combine = <span class="keyword">function</span>(<span class="params">n, k</span>) &#123;</span><br><span class="line">    ans = [];</span><br><span class="line">    path = [];</span><br><span class="line">    <span class="title function_">backtracking</span>(n,k,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/rotate-array/description/?envType=study-plan-v2&envId=top-interview-150">189. 轮转数组 - 力扣（LeetCode）</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误代码</span></span><br><span class="line"><span class="keyword">var</span> rotate = <span class="keyword">function</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> reverse = <span class="keyword">function</span>(<span class="params">nums,<span class="keyword">from</span>,to</span>)&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">from</span>&lt;to)&#123;</span><br><span class="line">            <span class="keyword">let</span> temp = nums[<span class="keyword">from</span>];</span><br><span class="line">            nums[<span class="keyword">from</span>] = nums [to];</span><br><span class="line">            nums[to] = temp;</span><br><span class="line">            <span class="keyword">from</span>++,to--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">reverse</span>(nums,<span class="number">0</span>,nums.<span class="property">length</span>-k-<span class="number">1</span>);</span><br><span class="line">    <span class="title function_">reverse</span>(nums,nums.<span class="property">length</span>-k,nums.<span class="property">length</span>-<span class="number">1</span>);</span><br><span class="line">    <span class="title function_">reverse</span>(nums,<span class="number">0</span>,nums.<span class="property">length</span>-<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>错误原因</strong></p><p>​元素左移、右移，传入翻转长度不能小于0或大于数组长度</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rotate = <span class="keyword">function</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">    k%=nums.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">const</span> reverse = <span class="keyword">function</span>(<span class="params">nums,<span class="keyword">from</span>,to</span>)&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">from</span>&lt;to)&#123;</span><br><span class="line">            <span class="keyword">let</span> temp = nums[<span class="keyword">from</span>];</span><br><span class="line">            nums[<span class="keyword">from</span>] = nums [to];</span><br><span class="line">            nums[to] = temp;</span><br><span class="line">            <span class="keyword">from</span>++,to--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">reverse</span>(nums,<span class="number">0</span>,nums.<span class="property">length</span>-k-<span class="number">1</span>);</span><br><span class="line">    <span class="title function_">reverse</span>(nums,nums.<span class="property">length</span>-k,nums.<span class="property">length</span>-<span class="number">1</span>);</span><br><span class="line">    <span class="title function_">reverse</span>(nums,<span class="number">0</span>,nums.<span class="property">length</span>-<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/description/?envType=study-plan-v2&envId=top-interview-150">121. 买卖股票的最佳时机 - 力扣（LeetCode）</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误代码</span></span><br><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">prices</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> preMin = <span class="number">0</span>,ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> price <span class="keyword">of</span> prices)&#123;</span><br><span class="line">        <span class="keyword">if</span>(price &gt; preMin) ans = <span class="title class_">Math</span>.<span class="title function_">max</span>(ans,price-preMin);</span><br><span class="line">        <span class="keyword">else</span> preMin = price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>错误原因</strong></p><p>​设置preMin为0会导致股票一定有price的收益，正确做法应该是设置成Number.MAX_SAFE_INTEGER</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">prices</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> preMin = <span class="title class_">Number</span>.<span class="property">MAX_SAFE_INTEGER</span>,ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> price <span class="keyword">of</span> prices)&#123;</span><br><span class="line">        <span class="keyword">if</span>(price &gt; preMin) ans = <span class="title class_">Math</span>.<span class="title function_">max</span>(ans,price-preMin);</span><br><span class="line">        <span class="keyword">else</span> preMin = price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/zigzag-conversion/?envType=study-plan-v2&envId=top-interview-150">6. Z 字形变换 - 力扣（LeetCode）</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误代码</span></span><br><span class="line"><span class="keyword">var</span> convert = <span class="keyword">function</span>(<span class="params">s, numRows</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> temp = <span class="keyword">new</span> <span class="title class_">Array</span>(numRows).<span class="title function_">fill</span>([]);</span><br><span class="line">    <span class="keyword">let</span> index=<span class="number">0</span>,flag =-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> ch <span class="keyword">of</span> s)&#123;</span><br><span class="line">        <span class="keyword">if</span>(index===<span class="number">0</span>||index === numRows-<span class="number">1</span>) flag = -flag;</span><br><span class="line">        temp[index].<span class="title function_">push</span>(ch);</span><br><span class="line">        index+=flag;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;numRows;i++)&#123;</span><br><span class="line">        ans+=temp[i].<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>错误原因</strong></p><p>​<code>new Array(numRows).fill([])</code> 这种方式会导致 <code>temp</code> 数组中的所有元素都引用同一个空数组，而不是每个元素都是独立的空数组。</p><p>​同时，当rows&#x3D;&#x3D;&#x3D;1是需要特殊处理</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> convert = <span class="keyword">function</span>(<span class="params">s, numRows</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(numRows===<span class="number">1</span>) <span class="keyword">return</span> s;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> temp = <span class="keyword">new</span> <span class="title class_">Array</span>(numRows).<span class="title function_">fill</span>().<span class="title function_">map</span>(<span class="function">()=&gt;</span>[]);</span><br><span class="line">    <span class="keyword">let</span> index=<span class="number">0</span>,flag =-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> ch <span class="keyword">of</span> s)&#123;</span><br><span class="line">        <span class="keyword">if</span>(index===<span class="number">0</span>||index === numRows-<span class="number">1</span>) flag = -flag;</span><br><span class="line">        temp[index].<span class="title function_">push</span>(ch);</span><br><span class="line">        index+=flag;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;numRows;i++)&#123;</span><br><span class="line">        ans+=temp[i].<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/largest-rectangle-in-histogram/submissions/621865583/">84. 柱状图中最大的矩形 - 力扣（LeetCode）</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">//错误代码</span><br><span class="line">var largestRectangleArea = function(heights) &#123;</span><br><span class="line">    const n = heights.length;</span><br><span class="line">    const leftLowerIndex = new Array(n).fill(0);</span><br><span class="line">    const rightLowerIndex = new Array(n).fill(n-1);</span><br><span class="line">    let ans = 0;</span><br><span class="line">    let stack = [];</span><br><span class="line">    for(let i=0;i&lt;n;i++)&#123;</span><br><span class="line">        while(stack.length&gt;0&amp;&amp;heights[stack.at(-1)]&gt;heights[i])&#123;</span><br><span class="line">            const index = stack.pop();</span><br><span class="line">            rightLowerIndex[index]=i;</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125; </span><br><span class="line">    stack = [];</span><br><span class="line">    for(let i=n-1;i&gt;=0;i--)&#123;</span><br><span class="line">        while(stack.length&gt;0&amp;&amp;heights[stack.at(-1)]&gt;heights[i])&#123;</span><br><span class="line">            const index = stack.pop();</span><br><span class="line">            leftLowerIndex[index]=i;</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    for(let i=0;i&lt;n;i++)&#123;</span><br><span class="line">        ans = Math.max(ans,heights[i]*(rightLowerIndex[i]-leftLowerIndex[i]-1));</span><br><span class="line">    &#125;</span><br><span class="line">    return ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>错误原因：</strong></p><p>左边更低高度索引初值应设为-1；右边更低高度索引初值应设为n;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">//正确代码</span><br><span class="line">var largestRectangleArea = function(heights) &#123;</span><br><span class="line">    const n = heights.length;</span><br><span class="line">    const leftLowerIndex = new Array(n).fill(-1);</span><br><span class="line">    const rightLowerIndex = new Array(n).fill(n);</span><br><span class="line">    let ans = 0;</span><br><span class="line">    let stack = [];</span><br><span class="line">    for(let i=0;i&lt;n;i++)&#123;</span><br><span class="line">        while(stack.length&gt;0&amp;&amp;heights[stack.at(-1)]&gt;heights[i])&#123;</span><br><span class="line">            const index = stack.pop();</span><br><span class="line">            rightLowerIndex[index]=i;</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125; </span><br><span class="line">    stack = [];</span><br><span class="line">    for(let i=n-1;i&gt;=0;i--)&#123;</span><br><span class="line">        while(stack.length&gt;0&amp;&amp;heights[stack.at(-1)]&gt;heights[i])&#123;</span><br><span class="line">            const index = stack.pop();</span><br><span class="line">            leftLowerIndex[index]=i;</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    for(let i=0;i&lt;n;i++)&#123;</span><br><span class="line">        ans = Math.max(ans,heights[i]*(rightLowerIndex[i]-leftLowerIndex[i]-1));</span><br><span class="line">    &#125;</span><br><span class="line">    return ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/integer-break/">343. 整数拆分 - 力扣（LeetCode）</a></p><p>考虑数值过小的边界情况，取整取余</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//正确代码</span><br><span class="line">var integerBreak = function(n) &#123;</span><br><span class="line">    if(n&lt;=3) return n-1;</span><br><span class="line">    if(n%3===1)&#123;</span><br><span class="line">        return 3**(Math.floor(n/3)-1)*4;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return 3**(Math.floor(n/3))*2**Math.floor((n%3)/2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/unique-binary-search-trees/description/">96. 不同的二叉搜索树 - 力扣（LeetCode）</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//计算组合数</span><br><span class="line">var numTrees = function(n) &#123;</span><br><span class="line">    let ans = 1,fz = 2*n,count = n-1,fm=n;</span><br><span class="line">    while(count--)&#123;</span><br><span class="line">        ans*=fz--;</span><br><span class="line">        while(ans%fm===0) ans/=fm--;</span><br><span class="line">    &#125;</span><br><span class="line">    return ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/target-sum/">494. 目标和 - 力扣（LeetCode）</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var findTargetSumWays = function(nums, target) &#123;</span><br><span class="line">    let sum = 0;</span><br><span class="line">    for(let num of nums) sum+=num;</span><br><span class="line">    if(sum+target&lt;0||(sum+target)%2===1) return 0;</span><br><span class="line">    const m=nums.length,n=(sum+target)&gt;&gt;1;</span><br><span class="line">    const dp = new Array(m+1).fill().map(()=&gt;new Array(n+1).fill(0));</span><br><span class="line">    dp[0][0]=1;</span><br><span class="line">    for(let i=1;i&lt;=m;i++)&#123;</span><br><span class="line">        for(let j=0;j&lt;=n;j++)&#123;</span><br><span class="line">            dp[i][j]+=dp[i-1][j];</span><br><span class="line">            if(nums[i-1]&lt;=j) dp[i][j]+=dp[i-1][j-nums[i-1]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return dp[m][n];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;leetcode刷题笔记&quot;&gt;&lt;a href=&quot;#leetcode刷题笔记&quot; class=&quot;headerlink&quot; title=&quot;leetcode刷题笔记&quot;&gt;&lt;/a&gt;leetcode刷题笔记&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://leetcode.cn/p</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>es6</title>
    <link href="http://example.com/2024/12/20/es6/"/>
    <id>http://example.com/2024/12/20/es6/</id>
    <published>2024-12-20T07:02:49.000Z</published>
    <updated>2025-04-10T14:38:23.261Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ES6新特性"><a href="#ES6新特性" class="headerlink" title="ES6新特性"></a>ES6新特性</h1><div class="story post-story"><h2 id="let"><a href="#let" class="headerlink" title="let"></a>let</h2><ul><li>变量不能重复声明</li><li>产生块级作用域</li><li>不存在变量提升</li><li>不影响作用域链</li></ul></div><div class="story post-story"><h2 id="const"><a href="#const" class="headerlink" title="const"></a>const</h2><ul><li>声明常量，要赋初始值，不能重复声明</li><li>产生块级作用域</li><li>对数组或对象元素的修改，不算对常量的修改</li><li>不存在变量提升</li><li>不影响作用域链</li></ul><h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><ul><li><p>局部作用域</p><ul><li>函数作用域：函数内部声明的变量只能在函数内部访问</li><li>块作用域：使用{}包裹的代码块内部声明的变量外部有可能无法访问<ul><li>let和const产生块作用域</li><li>var不会产生块作用域</li></ul></li></ul></li><li><p>全局作用域：<code>&lt;script&gt;</code>标签和js文件的最外层，声明的变量在其他任何作用域都能访问</p><ul><li>window对象动态添加的属性也是全局的</li><li>函数中未使用任何关键字声明的变量也是全局的</li></ul></li><li><p>作用域链：优先查找当前，依次查找父级作用域</p></li></ul><h3 id="变量和函数提升"><a href="#变量和函数提升" class="headerlink" title="变量和函数提升"></a>变量和函数提升</h3><p>代码执行前，所有var声明的变量被提升到当前作用域的最前面。只提升声明，不提升赋值。</p><p>代码执行前，所有函数声明被提升到当前作用域的最前面。</p></div><div class="story post-story"><h2 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//数组解构赋值</span><br><span class="line">const F4 = [&#x27;小沈阳&#x27;,&#x27;刘能&#x27;,&#x27;赵四&#x27;,&#x27;宋小宝&#x27;];</span><br><span class="line">const [xiao,liu,zhao,song]= F4;</span><br><span class="line">//对象解构赋值</span><br><span class="line">const obj = &#123;</span><br><span class="line">name:&#x27;hzx&#x27;,</span><br><span class="line">age:18,</span><br><span class="line">sayHello: function()&#123;</span><br><span class="line">console.log(&#x27;hello&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">const &#123;name,age,sayHello&#125; = obj;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h2><ul><li>声明方式：&#96;&#96; </li><li>可以直接出现换行符</li><li>${}实现字符串拼接</li></ul></div><div class="story post-story"><h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><h2 id="rest参数"><a href="#rest参数" class="headerlink" title="rest参数"></a>rest参数</h2><ul><li>func(…args){}</li><li>必须放在参数列表最后</li></ul><h3 id="与arguments的区别"><a href="#与arguments的区别" class="headerlink" title="与arguments的区别"></a>与arguments的区别</h3><ul><li>语法：arguments是一个内置对象，而rest参数是通过…语法创建的。</li><li>类型：arguments是一个类数组对象，而rest参数是一个真正的数组。</li><li>位置：rest参数必须放在函数参数列表的最后面，而arguments对象在任何函数中都可用。</li><li>功能：rest参数提供了一个数组，可以直接使用数组的方法，而arguments对象需要转换才能使用数组方法。</li></ul></div><div class="story post-story"><h2 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h2><p><code>...</code>将数组转化为逗号分隔参数序列</p></div><div class="story post-story"><h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h2><ul><li>Symbol的值是唯一的，用来解决命名冲突问题</li><li>Symbol值不能与其他数据进行运算</li><li>Symbol定义的对象属性不能使用for in或for of循环遍历，但是可以使用Object.getOwnPropertySymbols() 和 Reflect.ownKeys()来获取对象的所有键名</li></ul></div><div class="story post-story"><h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> banji = &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&quot;终极一班&quot;</span>,</span><br><span class="line">            <span class="attr">students</span>:[</span><br><span class="line">                <span class="string">&#x27;xiaoming&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;xiaoning&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;xiaotian&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;knight&#x27;</span></span><br><span class="line">            ],</span><br><span class="line">            [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]()&#123;</span><br><span class="line">                <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    <span class="attr">next</span>:<span class="function">()=&gt;</span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(index&lt;<span class="variable language_">this</span>.<span class="property">students</span>.<span class="property">length</span>)&#123;</span><br><span class="line">                            <span class="keyword">const</span> res = &#123;<span class="attr">value</span>:<span class="variable language_">this</span>.<span class="property">students</span>[index],<span class="attr">done</span>:<span class="literal">false</span>&#125;</span><br><span class="line">                            index++</span><br><span class="line">                            <span class="keyword">return</span> res</span><br><span class="line">                        &#125; </span><br><span class="line">                        <span class="keyword">return</span> &#123;<span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>:<span class="literal">true</span>&#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> banji)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(v)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> iterator = banji[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]()</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>())</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>())</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>())</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>())</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>())</span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line">xiaoming</span><br><span class="line">xiaoning</span><br><span class="line">xiaotian</span><br><span class="line">knight</span><br><span class="line">&#123;<span class="attr">value</span>: <span class="string">&#x27;xiaoming&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span>&#125;<span class="attr">done</span>: <span class="literal">false</span></span><br><span class="line">&#123;<span class="attr">value</span>: <span class="string">&#x27;xiaoning&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span>&#125;</span><br><span class="line">&#123;<span class="attr">value</span>: <span class="string">&#x27;xiaotian&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span>&#125;</span><br><span class="line">&#123;<span class="attr">value</span>: <span class="string">&#x27;knight&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span>&#125;</span><br><span class="line">&#123;<span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> * <span class="title function_">generator</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;111&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;一只没有耳朵&#x27;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;222&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;一只没有尾巴&#x27;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;333&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;真奇怪&#x27;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;444&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> iterator = <span class="title function_">generator</span>()</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> <span class="title function_">generator</span>())&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(v)</span><br><span class="line">&#125;</span><br><span class="line">iterator.<span class="title function_">next</span>()</span><br><span class="line">iterator.<span class="title function_">next</span>()</span><br><span class="line">iterator.<span class="title function_">next</span>()</span><br><span class="line">iterator.<span class="title function_">next</span>()</span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line"><span class="number">111</span></span><br><span class="line">一只没有耳朵</span><br><span class="line"><span class="number">222</span></span><br><span class="line">一只没有尾巴</span><br><span class="line"><span class="number">333</span></span><br><span class="line">真奇怪</span><br><span class="line"><span class="number">444</span></span><br><span class="line"><span class="number">111</span></span><br><span class="line"><span class="number">222</span></span><br><span class="line"><span class="number">333</span></span><br><span class="line"><span class="number">444</span></span><br></pre></td></tr></table></figure><h3 id="应用实例"><a href="#应用实例" class="headerlink" title="应用实例"></a>应用实例</h3><ol><li>解决回调地狱</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//回调地狱</span></span><br><span class="line"><span class="comment">// setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&#x27;111&#x27;)</span></span><br><span class="line"><span class="comment">//     setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">//         console.log(&#x27;222&#x27;)</span></span><br><span class="line"><span class="comment">//         setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">//             console.log(&#x27;333&#x27;)</span></span><br><span class="line"><span class="comment">//         &#125;, 3000)</span></span><br><span class="line"><span class="comment">//     &#125;, 2000)</span></span><br><span class="line"><span class="comment">// &#125;, 1000)</span></span><br><span class="line"><span class="comment">//生成器函数解决回调地狱</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">one</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;111&#x27;</span>)</span><br><span class="line">        iterator.<span class="title function_">next</span>()</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">two</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;222&#x27;</span>)</span><br><span class="line">        iterator.<span class="title function_">next</span>()</span><br><span class="line">    &#125;,<span class="number">2000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">three</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;333&#x27;</span>)</span><br><span class="line">        iterator.<span class="title function_">next</span>()</span><br><span class="line">    &#125;,<span class="number">3000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> * <span class="title function_">generator</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">one</span>()</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">two</span>()</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">three</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">generator</span>()</span><br><span class="line">iterator.<span class="title function_">next</span>()</span><br></pre></td></tr></table></figure><ol start="2"><li>异步编程</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getUsers</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;用户数据&#x27;</span></span><br><span class="line">        iterator.<span class="title function_">next</span>(data)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getOrders</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;订单数据&#x27;</span></span><br><span class="line">        iterator.<span class="title function_">next</span>(data)</span><br><span class="line">    &#125;,<span class="number">2000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getGoods</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;商品数据&#x27;</span></span><br><span class="line">        iterator.<span class="title function_">next</span>(data)</span><br><span class="line">    &#125;,<span class="number">3000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> * <span class="title function_">generator</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> users = <span class="keyword">yield</span> <span class="title function_">getUsers</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(users)</span><br><span class="line">    <span class="keyword">const</span> orders = <span class="keyword">yield</span> <span class="title function_">getOrders</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(orders)</span><br><span class="line">    <span class="keyword">const</span> goods = <span class="keyword">yield</span> <span class="title function_">getGoods</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(goods)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">generator</span>()</span><br><span class="line">iterator.<span class="title function_">next</span>()</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> p =  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./静夜思.md&#x27;</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="title function_">resolve</span>(data)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./琵琶行.md&#x27;</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">resolve</span>([...value,data])</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./滕王阁序.md&#x27;</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">resolve</span>([...value,data])</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="title function_">join</span>(<span class="string">&#x27;\n&#x27;</span>))</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr1 = [<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">2</span>,<span class="number">6</span>]</span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">4</span>,<span class="number">8</span>,<span class="number">6</span>,<span class="number">9</span>]</span><br><span class="line"><span class="keyword">const</span> s2 = <span class="keyword">new</span> <span class="title class_">Set</span>(arr2)</span><br><span class="line"><span class="comment">//数组去重</span></span><br><span class="line"><span class="keyword">let</span> result = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr1)]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line"><span class="comment">//求交集</span></span><br><span class="line"><span class="keyword">const</span> intersection = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr1)].<span class="title function_">filter</span>(<span class="function"><span class="params">item</span>=&gt;</span>s2.<span class="title function_">has</span>(item))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(intersection)</span><br><span class="line"><span class="comment">//求并集</span></span><br><span class="line"><span class="keyword">const</span> union = [...<span class="keyword">new</span> <span class="title class_">Set</span>([...arr1,...arr2])]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(union)</span><br><span class="line"><span class="comment">//求差集</span></span><br><span class="line"><span class="keyword">const</span> diff = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr1)].<span class="title function_">filter</span>(<span class="function"><span class="params">item</span>=&gt;</span>!s2.<span class="title function_">has</span>(item))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(diff)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="class"><a href="#class" class="headerlink" title="class"></a>class</h2><h3 id="构造函数执行过程"><a href="#构造函数执行过程" class="headerlink" title="构造函数执行过程"></a>构造函数执行过程</h3><ol><li>创建新对象</li><li>构造函数this指向新对象</li><li>执行构造函数代码，修改this，添加新的属性</li><li>返回新对象</li></ol><h3 id="原型对象"><a href="#原型对象" class="headerlink" title="原型对象"></a>原型对象</h3><ul><li>每个构造函数都有一个<strong>prototype属性</strong>，指向<strong>原型对象</strong></li><li>这个对象可以挂载函数，对象实例化不会多次创建原型上的函数，节约内存</li><li>构造函数通过原型分配的函数是所有对象所<strong>共享</strong>的，可以将不变的方法直接定义在prototype对象上，这样所有对象的实例就可以共享这些方法</li><li>构造函数和原型对象中的this都指向实例化的对象</li></ul><h3 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h3><p>原型对象上的构造器，指向构造函数</p><h3 id="对象原型"><a href="#对象原型" class="headerlink" title="对象原型"></a>对象原型</h3><p>实例对象的<code>__proto__</code>属性,指向构造函数的原型对象</p><h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><ol><li>当访问一个对象的属性和方法时，首先查找这个对象自身有没有该属性。</li><li>如果没有就查找它的原型（就是<code>__proto__</code>指向的prototype原型对象。</li><li>如果还没有就继续查找原型对象的原型，直至查找到null</li><li>可以用 instanceof 运算符检测构造函数的prototype属性是否出现在某个实例对象的原型链上。</li></ol></div><div class="story post-story"><h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><h3 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h3><p>babel是一个JavaScript编译器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i babel-cli babel-preset-env browserify -D</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//代码转换</span><br><span class="line">npx babel src/js -d dist/js --presets=babel-preset-env</span><br><span class="line">//打包</span><br><span class="line">npx browserify dist/app.js -o dist/bundle.js</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="async与await"><a href="#async与await" class="headerlink" title="async与await"></a>async与await</h2><p>作用：使异步代码看起来像同步代码一样</p><h3 id="async函数"><a href="#async函数" class="headerlink" title="async函数"></a>async函数</h3><ul><li>async函数的返回值为Promise对象</li><li>Promise对象的结果由async函数执行的返回值决定</li></ul><h3 id="await表达式"><a href="#await表达式" class="headerlink" title="await表达式"></a>await表达式</h3><ul><li>await必须写在async函数中</li><li>await右侧的表达式一般为Promise对象</li><li>await返回的是Promise成功的值</li><li>await的Promise失败了，就会抛出异常，需要try…catch捕获处理</li></ul></div><div class="story post-story"><h2 id="动态导入"><a href="#动态导入" class="headerlink" title="动态导入"></a>动态导入</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">()=&gt;<span class="keyword">import</span>()</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ES6新特性&quot;&gt;&lt;a href=&quot;#ES6新特性&quot; class=&quot;headerlink&quot; title=&quot;ES6新特性&quot;&gt;&lt;/a&gt;ES6新特性&lt;/h1&gt;&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;let&quot;&gt;&lt;a href=&quot;#let&quot;</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="es6" scheme="http://example.com/tags/es6/"/>
    
  </entry>
  
  <entry>
    <title>Eslint</title>
    <link href="http://example.com/2024/12/16/Eslint/"/>
    <id>http://example.com/2024/12/16/Eslint/</id>
    <published>2024-12-16T03:28:59.000Z</published>
    <updated>2024-12-16T14:11:00.772Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Eslint"><a href="#Eslint" class="headerlink" title="Eslint"></a>Eslint</h1><p>ESLint 是一个用于识别和报告在 ECMAScript&#x2F;JavaScript 代码中发现的模式的工具，其目标是使代码更加一致并避免错误。</p><div class="story post-story"><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><strong>确保事先运行 npm init,已经有 package.json 文件。</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -D @eslint/config@latest</span><br></pre></td></tr></table></figure><p>使用托管在 npm 上的特定可共享配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -D @eslint/config@latest -- --config packageName</span><br></pre></td></tr></table></figure><p>在项目中添加 eslint.config.js文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> eslint.config.js</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx eslint your-project-dir/yourfile.js</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eslint.config.js</span></span><br><span class="line"><span class="keyword">import</span> js <span class="keyword">from</span> <span class="string">&quot;@eslint/js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">    js.<span class="property">configs</span>.<span class="property">recommended</span>,</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">rules</span>: &#123;</span><br><span class="line">            <span class="string">&quot;no-unused-vars&quot;</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">            <span class="string">&quot;no-undef&quot;</span>: <span class="string">&quot;warn&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p><a href="https://eslint.nodejs.cn/docs/latest/use/configure">配置文档</a></p></div><div class="story post-story"><h2 id="实践问题"><a href="#实践问题" class="headerlink" title="实践问题"></a>实践问题</h2><h3 id="要关闭-ESLint-中的vue-multi-word-component-names提示"><a href="#要关闭-ESLint-中的vue-multi-word-component-names提示" class="headerlink" title="要关闭 ESLint 中的vue&#x2F;multi-word-component-names提示"></a>要关闭 ESLint 中的vue&#x2F;multi-word-component-names提示</h3><p>在eslint.config.js中添加</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;vue/multi-word-component-names&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Eslint&quot;&gt;&lt;a href=&quot;#Eslint&quot; class=&quot;headerlink&quot; title=&quot;Eslint&quot;&gt;&lt;/a&gt;Eslint&lt;/h1&gt;&lt;p&gt;ESLint 是一个用于识别和报告在 ECMAScript&amp;#x2F;JavaScript 代码中发现的模式</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Eslint" scheme="http://example.com/tags/Eslint/"/>
    
  </entry>
  
  <entry>
    <title>html&amp;css</title>
    <link href="http://example.com/2024/11/24/html-css/"/>
    <id>http://example.com/2024/11/24/html-css/</id>
    <published>2024-11-24T06:57:34.000Z</published>
    <updated>2025-04-12T14:55:43.065Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="语义化标签"><a href="#语义化标签" class="headerlink" title="语义化标签"></a>语义化标签</h2><p>header nav main article section aside footer</p><p>语义化的优点:</p><ul><li>在没CSS样式的情况下，页面整体也会呈现很好的结构效果</li><li>代码结构清晰，易于阅读，</li><li>利于开发和维护方便其他设备解析（如屏幕阅读器）根据语义渲染网页。</li><li>有利于搜索引擎优化（SEO），搜索引擎爬虫会根据不同的标签来赋予不同的权重</li></ul></div><div class="story post-story"><h2 id="HTML5新特性"><a href="#HTML5新特性" class="headerlink" title="HTML5新特性"></a>HTML5新特性</h2><p>语义化标签<br>音视频处理API(audio,video)<br>canvas &#x2F; webGL<br>拖拽释放(Drag and drop) API<br>history API<br>requestAnimationFrame<br>地理位置(Geolocation)API<br>webSocket<br>web存储 localStorage、SessionStorage<br>表单控件，calendar、date、time、email、url、search</p></div><div class="story post-story"><h2 id="新的HTML5文档类型和字符集"><a href="#新的HTML5文档类型和字符集" class="headerlink" title="新的HTML5文档类型和字符集"></a>新的HTML5文档类型和字符集</h2><p>HTML5文档类型是&lt;！doctype html&gt;。</p><p>HTML5使用的字符集&lt; meta charset&#x3D;“UTF8”&gt;。</p></div><div class="story post-story"><h2 id="HTML5-Canvas元素"><a href="#HTML5-Canvas元素" class="headerlink" title="HTML5 Canvas元素"></a>HTML5 Canvas元素</h2><p>Canvas元素用于在网页上绘制图形，该元素标签的强大之处在于可以直接在HTML上进行图形操作。</p></div><div class="story post-story"><h2 id="HTML5新增了哪些功能"><a href="#HTML5新增了哪些功能" class="headerlink" title="HTML5新增了哪些功能"></a>HTML5新增了哪些功能</h2><p>新增的功能API包括 Media APl、 Text Track API、 Application Cache API、User Interaction、 Data Transfer API、 Command API、 Constraint Validation API、 History API</p></div><div class="story post-story"><h2 id="HTML5的离线存储"><a href="#HTML5的离线存储" class="headerlink" title="HTML5的离线存储"></a>HTML5的离线存储</h2><p>localStorage，可长期存储数据，即浏览器关闭后数据不丢失</p><p>session Storage，数据在浏览器关闭后自动删除</p></div><div class="story post-story"><h2 id="HTML5的form如何关闭自动补全功能"><a href="#HTML5的form如何关闭自动补全功能" class="headerlink" title="HTML5的form如何关闭自动补全功能"></a>HTML5的form如何关闭自动补全功能</h2><p>将不想要提示的form元素下的 Input元素的 autocomplete属性设置为off</p></div><div class="story post-story"><h2 id="HTML5引入了哪些新的表单属性？"><a href="#HTML5引入了哪些新的表单属性？" class="headerlink" title="HTML5引入了哪些新的表单属性？"></a>HTML5引入了哪些新的表单属性？</h2><p>新增表单属性包括 datalist、 datetime、 output、 keygen、date、 month、week、time、 number、 range、 email、url</p></div><div class="story post-story"><h2 id="HTML5中的应用缓存是什么？"><a href="#HTML5中的应用缓存是什么？" class="headerlink" title="HTML5中的应用缓存是什么？"></a>HTML5中的应用缓存是什么？</h2><p>HTML5应用缓存的最终目的是帮助用户离线浏览页面。换句话说，如果网络连接不可用，打开的页面就来自浏览器缓存，离线应用缓存可以帮助用户达到这个目的。</p><p>应用缓存可以帮助用户指定哪些文件需要缓存，哪些不需要</p></div><div class="story post-story"><h2 id="HTML5应用程序缓存为应用带来什么优势？"><a href="#HTML5应用程序缓存为应用带来什么优势？" class="headerlink" title="HTML5应用程序缓存为应用带来什么优势？"></a>HTML5应用程序缓存为应用带来什么优势？</h2><p>应用程序缓存为应用带来3个优势。</p><p>（1）离线浏览，让用户可在应用离线时（网络不可用时）使用它们。</p><p>（2）速度，让已缓存资源加载得更快。</p><p>（3）减少服务器负载，让浏览器将只下载服务器更新过的资源。</p></div><div class="story post-story"><h2 id="CSS-选择器及优先级"><a href="#CSS-选择器及优先级" class="headerlink" title="CSS 选择器及优先级"></a>CSS 选择器及优先级</h2><p>选择器</p><p>id选择器(#myid)<br>类选择器(.myclass)<br>属性选择器(a[rel&#x3D;“external”])<br>伪类选择器(a:hover, li:nth-child)<br>标签选择器(div, h1,p)<br>相邻选择器（h1 + p）<br>子选择器(ul &gt; li)<br>后代选择器(li a)<br>通配符选择器(*)<br>优先级：</p><p>!important<br>内联样式（1000）<br>ID选择器（0100）<br>类选择器&#x2F;属性选择器&#x2F;伪类选择器（0010）<br>元素选择器&#x2F;伪元素选择器（0001）<br>关系选择器&#x2F;通配符选择器（0000）<br>带!important 标记的样式属性优先级最高； 样式表的来源相同时：</p><p>!important &gt; 行内样式&gt;ID选择器 &gt; 类选择器 &gt; 标签 &gt; 通配符 &gt; 继承 &gt; 浏览器默认属性</p><h3 id="CSS3新特性"><a href="#CSS3新特性" class="headerlink" title="CSS3新特性"></a>CSS3新特性</h3><p>圆角   阴影 变换</p><p>更多的CSS选择器</p><p>色彩模式，如rgba；</p><p>伪元素::selection;</p><p>媒体查询；</p><p>多栏布局；</p><p>图片边框（ border-image）。</p></div><div class="story post-story"><h2 id="CSS3新增伪类"><a href="#CSS3新增伪类" class="headerlink" title="CSS3新增伪类"></a>CSS3新增伪类</h2><p>新增伪类有以下几个：<br>p:first- of-type，选择属于其父元素的首个元素的每个元素。</p><p>p:last-of-type，选择属于其父元素的最后一个元素的每个元素。</p><p>p:only- of-type，选择属于其父元素的唯一元素的每个元素。</p><p>p:only- child，选择属于其父元素的唯一子元素的每个元素。</p><p>p:nth- child（2），选择属于其父元素的第二个子元素的每个元素。</p><p>:enabled:disabled，控制表单控件的禁用状态.</p><p>:checked，单选框或复选框被选中。</p></div><div class="story post-story"><h2 id="CSS3动画如何在动作结束时保持该状态不变"><a href="#CSS3动画如何在动作结束时保持该状态不变" class="headerlink" title="CSS3动画如何在动作结束时保持该状态不变"></a>CSS3动画如何在动作结束时保持该状态不变</h2><p>采用 animation- fill-mode。其可以设置为以下值。</p><p>none，不改变默认行为。</p><p>forwards，当动画完成后，保持最后一个属性值（在最后一个关键帧中定义）</p><p>backwards，在 animation-delay所指定的一段时间内，在动画显示之前，应用开始属性值（在第一个关键帧中定义）。</p><p>both，向前和向后填充模式都可以应用。</p></div><div class="story post-story"><h2 id="box-sizing"><a href="#box-sizing" class="headerlink" title="box- sizing"></a>box- sizing</h2><p>box-sizing属性主要用来控制元素盒模型的解析模式。默认值是 content-box。</p><p>content-box让元素维持W3C的标准盒模型。元素的宽度&#x2F;高度由 border+ padding+content的宽度&#x2F;高度决定，设置 width&#x2F;height属性指的是指定 content部分的宽度&#x2F;高度。</p><p>border-box让元素维持IE传统盒模型（IE6以下版本和IE6、IE7的怪异模式）。设置 width&#x2F;height属性指的是指定 border+ padding+ content的宽度&#x2F;高度。</p><p>标准浏览器下，按照W3C规范解析盒模型。一旦修改了元素的边框或内距，就会影响元素的盒子尺寸，就不得不重新计算元素的盒子尺寸，从而影响整个页面的布局。</p></div><div class="story post-story"><h2 id="CSS3动画的优缺点"><a href="#CSS3动画的优缺点" class="headerlink" title="CSS3动画的优缺点"></a>CSS3动画的优缺点</h2><p>优点如下:</p><p>在性能上会稍微好一些。代码相对简单。</p><p>缺点如下:</p><p>在动画控制上不够灵活，兼容性不好。</p></div><div class="story post-story"><h2 id="Animation与-Transition的异同"><a href="#Animation与-Transition的异同" class="headerlink" title="Animation与 Transition的异同"></a>Animation与 Transition的异同</h2><p>Animation与 Transition的功能相同，都是通过改变元素的属性值来实现动画效果的。</p><p>它们的区别在于，使用 Transition的功能时只能用指定属性的开始值和结束值，然后在这两个属性值之间使用平滑过渡的方式实现动画效果，因此不能实现比较复杂的动画效果。</p><p>Animation功能通过定义多个关键帧，以及定义每个关键帧中元素的属性值来实现更为复杂的动画效果。</p></div><div class="story post-story"><h2 id="Animation属性值"><a href="#Animation属性值" class="headerlink" title="Animation属性值"></a>Animation属性值</h2><p>两个必要属性如下。</p><p>animation-name，即动画名称。</p><p>animation- duration，即动画持续时间。</p><p>其他属性值如下。</p><p>animation- play-state，即播放状态（ running表示播放， paused表示暂停），可以用来控制动画暂停。</p><p>animation- timing- function，即动画运动形式。</p><p>animation- delay，即动画延迟时间。</p><p>mation-iteration- count，即重复次数。</p><p>animation-direction，即播放前重置（ alternate动画直接从上一次停止的位置开始执行）。</p></div><div class="story post-story"><h2 id="媒体查询-rem的使用方法"><a href="#媒体查询-rem的使用方法" class="headerlink" title="媒体查询+rem的使用方法"></a>媒体查询+rem的使用方法</h2><p>@media媒体类型and（媒体特性）{样式规则}<br>这通常在移动端使用。在做移动端开发的时候，为了适配多屏幕，使用rem单位，然后根据屏幕尺寸的改变动态地设置根节点HIML的font-size值。这样可以解决多屏幕适配的问题。</p><p>html{<br>font-size：20px;<br>}<br>@media （min-width：320px） {<br>html<br>{<br>font-size：12px；<br>}<br>}<br>@media （min-width：360px）{<br>html{<br>font-size：16px；<br>}<br>}<br>但是这种做法有两个缺点。</p><p>（1）适配屏幕的尺寸不是连续的。</p><p>（2）会在CSS文件中添加大段的查询代码，增加了CSS文件的大小，为改进上述缺点，可以使用 JavaScript获取移动设备屏幕的宽度，根据设计稿的原型尺寸，动态地计算font-size的值。</p></div><div class="story post-story"><h2 id="rem的原理"><a href="#rem的原理" class="headerlink" title="rem的原理"></a>rem的原理</h2><p>在做响应式布局的时候，通过调整HTML的字体大小，页面上所有使用rem单位的元素都会做相应的调整。</p></div><div class="story post-story"><h2 id="设置CSS3文本阴影"><a href="#设置CSS3文本阴影" class="headerlink" title="设置CSS3文本阴影"></a>设置CSS3文本阴影</h2><p>h1{text- shadow：水平阴影，垂直阴影，模糊距离，阴影颜色}</p></div><div class="story post-story"><h2 id="盒阴影"><a href="#盒阴影" class="headerlink" title="盒阴影"></a>盒阴影</h2><p>盒阴影的语法结构与文本阴影类似，如box- shadow：5px 5px 5px rgba（255，15，255，0.5）。</p><p>但是，盒阴影多了一个属性，即外延值 inset.，如box- -shadow：5px 5px 25px rgba（0,0,255，0.5）inset。</p><p>通过CSS3实现背景颜色线性渐变具体代码如下：</p><p>div{<br>background：-webkit-linear-gradient （left, red, green 50%， blue）；<br>}</p></div><div class="story post-story"><h2 id="CSS3中-transition属性值及含义"><a href="#CSS3中-transition属性值及含义" class="headerlink" title="CSS3中 transition属性值及含义"></a>CSS3中 transition属性值及含义</h2><p>transition属性是一个简写属性，用于设置以下4个过渡属性。</p><p>transition- property，哪个属性需要实现过渡</p><p>transition- duration，完成过渡效果需要多少秒&#x2F;毫秒</p><p>transition- timing- function，速度效果的运动曲线，如 linear、ease-in、ease、ease-out、 ease-in-out, cube-bezier。</p><p>transition- delay，规定过渡开始前的延迟时间。</p></div><div class="story post-story"><h2 id="用省略号显示超出文本的内容"><a href="#用省略号显示超出文本的内容" class="headerlink" title="用省略号显示超出文本的内容"></a>用省略号显示超出文本的内容</h2><p>使用text-overflow:ellopsis。</p><p>当文本溢出时，为了不显示省略标记（…），通过clip直接将溢出的部分裁剪掉。</p></div><div class="story post-story"><h2 id="实现文本换行"><a href="#实现文本换行" class="headerlink" title="实现文本换行"></a>实现文本换行</h2><p>使用word-wrap属性。</p><p>normal，只在允许的断字点换行（浏览器保持默认处理）。</p><p>break-word，在长单词或URL地址内部进行换行。</p></div><div class="story post-story"><h2 id="position-属性的值有哪些及其区别"><a href="#position-属性的值有哪些及其区别" class="headerlink" title="position 属性的值有哪些及其区别"></a>position 属性的值有哪些及其区别</h2><p>固定定位 fixed： 元素的位置相对于浏览器窗口是固定位置，即使窗口是滚动的它也不会移动。Fixed 定 位使元素的位置与文档流无关，因此不占据空间。 Fixed 定位的元素和其他元素重叠。</p><p>相对定位 relative： 如果对一个元素进行相对定位，它将出现在它所在的位置上。然后，可以通过设置垂直 或水平位置，让这个元素“相对于”它的起点进行移动。 在使用相对定位时，无论是 否进行移动，元素仍然占据原来的空间。因此，移动元素会导致它覆盖其它框。</p><p>绝对定位 absolute： 绝对定位的元素的位置相对于最近的已定位父元素，如果元素没有已定位的父元素，那 么它的位置相对于。absolute 定位使元素的位置与文档流无关，因此不占据空间。 absolute 定位的元素和其他元素重叠。</p><p>粘性定位 sticky： 元素先按照普通文档流定位，然后相对于该元素在流中的 flow root（BFC）和 containing block（最近的块级祖先元素）定位。而后，元素定位表现为在跨越特定阈值前为相对定 位，之后为固定定位。</p><p>默认定位 Static： 默认值。没有定位，元素出现在正常的流中（忽略 top, bottom, left, right 或者 z-index 声 明）。 inherit: 规定应该从父元素继承 position 属性的值。</p></div><div class="story post-story"><h2 id="让一个元素水平垂直居中"><a href="#让一个元素水平垂直居中" class="headerlink" title="让一个元素水平垂直居中"></a>让一个元素水平垂直居中</h2><h3 id="水平居中"><a href="#水平居中" class="headerlink" title="水平居中"></a>水平居中</h3><p>对于 行内元素 : text-align: center;<br>对于确定宽度的块级元素：<br>（1）width和margin实现。margin: 0 auto;<br>（2）绝对定位和margin-left: margin-left: (父width - 子width）&#x2F;2, 前提是父元素position: relative<br>对于宽度未知的块级元素<br>（1）table标签配合margin左右auto实现水平居中。使用table标签（或直接将块级元素设值为 display:table），再通过给该标签添加左右margin为auto。<br>（2）inline-block实现水平居中方法。display：inline-block和text-align:center实现水平居中。<br>（3）绝对定位+transform，translateX可以移动本身元素的50%。<br>（4）flex布局使用justify-content:center</p><h3 id="垂直居中"><a href="#垂直居中" class="headerlink" title="垂直居中"></a>垂直居中</h3><p>利用 line-height 实现居中，这种方法适合纯文字类<br>通过设置父容器 相对定位 ，子级设置 绝对定位，标签通过margin实现自适应居中<br>弹性布局 flex :父级设置display: flex; 子级设置margin为auto实现自适应居中<br>父级设置相对定位，子级设置绝对定位，并且通过位移 transform 实现<br>table 布局，父级通过转换成表格形式，然后子级设置 vertical-align 实现。（需要注意的是：vertical-align: middle使用的前提条件是内联元素以及display值为table-cell的元素）。</p></div><div class="story post-story"><h2 id="隐藏页面中某个元素的方法"><a href="#隐藏页面中某个元素的方法" class="headerlink" title="隐藏页面中某个元素的方法"></a>隐藏页面中某个元素的方法</h2><p>opacity：0，该元素隐藏起来了，但不会改变页面布局，并且，如果该元素已经绑定一些事件，如click 事件，那么点击该区域，也能触发点击事件的<br>visibility：hidden，该元素隐藏起来了，但不会改变页面布局，但是不会触发该元素已经绑定的事件 ，隐藏对应元素，在文档布局中仍保留原来的空间（重绘）<br>display：none，把元素隐藏起来，并且会改变页面布局， 不显示对应的元素。</p></div><div class="story post-story"><h2 id="页面布局"><a href="#页面布局" class="headerlink" title="页面布局"></a>页面布局</h2><h3 id="Flex-布局"><a href="#Flex-布局" class="headerlink" title="Flex 布局"></a>Flex 布局</h3><p>布局的传统解决方案，基于盒状模型，依赖 display 属性 + position 属性 + float 属性。它对于那些特殊布局非常不方便，比如，垂直居中就不容易实现。</p><p>Flex 是 Flexible Box 的缩写，意为”弹性布局”,用来为盒状模型提供最大的灵活性。指定容器 display: flex 即可。 简单的分为容器属性和元素属性。</p><p>容器的属性：</p><p>flex-direction：决定主轴的方向（即子 item 的排列方法）flex-direction: row | row-reverse | column | column-reverse;<br>flex-wrap：决定换行规则 flex-wrap: nowrap | wrap | wrap-reverse;<br>flex-flow： .box { flex-flow: || ; }<br>justify-content：对其方式，水平主轴对齐方式<br>align-items：对齐方式，竖直轴线方向<br>align-content</p><p>项目的属性（元素的属性）：</p><p>order 属性：定义项目的排列顺序，顺序越小，排列越靠前，默认为 0<br>flex-grow 属性：定义项目的放大比例，即使存在空间，也不会放大<br>flex-shrink 属性：定义了项目的缩小比例，当空间不足的情况下会等比例的缩小，如果 定义个 item 的 flow-shrink 为 0，则为不缩小<br>flex-basis 属性：定义了在分配多余的空间，项目占据的空间。<br>flex：是 flex-grow 和 flex-shrink、flex-basis 的简写，默认值为 0 1 auto。<br>align-self：允许单个项目与其他项目不一样的对齐方式，可以覆盖<br>align-items，默认属 性为 auto，表示继承父元素的 align-items 比如说，用 flex 实现圣杯布局</p><h3 id="Rem-布局"><a href="#Rem-布局" class="headerlink" title="Rem 布局"></a>Rem 布局</h3><p>首先 Rem 相对于根(html)的 font-size 大小来计算。简单的说它就是一个相对单例 如:font-size:10px;,那么（1rem &#x3D; 10px）了解计算原理后首先解决怎么在不同设备上设置 html 的 font-size 大小。其实 rem 布局的本质是等比缩放，一般是基于宽度。</p><p>优点：可以快速适用移动端布局，字体，图片高度<br>缺点：<br>① 目前 ie 不支持，对 pc 页面来讲使用次数不多；<br>② 数据量大：所有的图片，盒子都需要我们去给一个准确的值；才能保证不同机型的适配；<br>③ 在响应式布局中，必须通过 js 来动态控制根元素 font-size 的大小。也就是说 css 样式和 js 代码有一定的耦合性。且必须将改变 font-size 的代码放在 css 样式之前。</p><h3 id="百分比布局"><a href="#百分比布局" class="headerlink" title="百分比布局"></a>百分比布局</h3><p>通过百分比单位 “ % “ 来实现响应式的效果。通过百分比单位可以使得浏览器中的组件的宽和高随着浏览器的变化而变化，从而实现响应式的效果。 直观的理解，我们可能会认为子元素的百分比完全相对于直接父元素，height 百分比相 对于 height，width 百分比相对于 width。 padding、border、margin 等等不论是垂直方向还是水平方向，都相对于直接父元素的 width。 除了 border-radius 外，还有比如 translate、background-size 等都是相对于自身的。<br>缺点：</p><p>（1）计算困难<br>（2）各个属性中如果使用百分比，相对父元素的属性并不是唯一的。造成我们使用百分比单位容易使布局问题变得复杂。</p><h3 id="浮动布局"><a href="#浮动布局" class="headerlink" title="浮动布局"></a>浮动布局</h3><p>浮动布局:当元素浮动以后可以向左或向右移动，直到它的外边缘碰到包含它的框或者另外一个浮动元素的边框为止。元素浮动以后会脱离正常的文档流，所以文档的普通流中的框就变的好像浮动元素不存在一样。</p><p>优点<br>这样做的优点就是在图文混排的时候可以很好的使文字环绕在图片周围。另外当元素浮动了起来之后，它有着块级元素的一些性质例如可以设置宽高等，但它与inline-block还是有一些区别的，第一个就是关于横向排序的时候，float可以设置方向而inline-block方向是固定的；还有一个就是inline-block在使用时有时会有空白间隙的问题<br>缺点<br>最明显的缺点就是浮动元素一旦脱离了文档流，就无法撑起父元素，会造成父级元素高度塌陷。</p><h3 id="自适应布局（bootstrap）"><a href="#自适应布局（bootstrap）" class="headerlink" title="自适应布局（bootstrap）"></a>自适应布局（bootstrap）</h3><p>自适应布局分别为不同屏幕不同分辨率定义布局，即是创建多个静态页面，每个静态页面对应一个屏幕分辨率的一个范围内。在改变不同的屏幕分辨率可以切换到不同的静态布局上，但是布局中的元素位置会发生改变，但是在每个静态布局中，页面中的元素不会随着窗口大小的调整发生变化。使用 @media 媒体查询给不同尺寸和介质的设备切换不同的样式。在优秀的响应范围设计下可以给适配范围内的设备最好的体验，在同一个设备下实际还是固定的布局。</p><p>优点：<br>1.对网站的复杂程度兼容性更大；<br>2.对开发工程师来说制作的成本代价更低；<br>3.代码执行效果更高效；<br>4.测试时更加容易，运营相对更加精准。</p><p>缺点： 在现如今的移动端设计百花齐放的时期之下，同一个网站往往需要为不同的设备制作不同的页面，不但会增加开发成本，还会因为客户的需求改变时，可能会改动多套代码、流程相比较来说较繁琐。</p><h3 id="流式布局（fluid）"><a href="#流式布局（fluid）" class="headerlink" title="流式布局（fluid）"></a>流式布局（fluid）</h3><p>流式布局的布局方式是页面的元素的宽度按照屏幕的分辨率进行适配的调整，但是整体布局不变，也称之为栅栏系统。使用%百分比定义宽度，高度大都是用px来固定住，可以根据可视区域 (viewport) 和父元素的实时尺寸进行调整，尽可能的适应各种分辨率。往往配合 max-width&#x2F;min-width 等属性控制尺寸流动范围以免过大或者过小影响阅读。<br>缺点： 屏幕大小变化时，页面元素也随之变化但是布局不变。这就会因为如果屏幕太大或太小都会布局时元素无法正常显示。</p><h3 id="响应式布局"><a href="#响应式布局" class="headerlink" title="响应式布局"></a>响应式布局</h3><p>一个网站能够兼容多个终端——而不是为每个终端做一个特定的版本。响应式布局可以为不同终端的用户提供更加舒适的界面和更好的用户体验。<br>设计方法： 媒体查询+流式布局。通常使用@media媒体查询，和网格系统配合相对布局单位进行布局。<br>优点： 适应pc端和移动端，如果有足够的耐心，页面效果会很完美。<br>缺点：<br>1.只能适应主流的宽高；<br>2.如果匹配足够多的设备屏幕的大小，对于工程师来说工作量不小，设计更需要多个版本，工作量增大。</p></div><div class="story post-story"><h2 id="前端优化的解决方案"><a href="#前端优化的解决方案" class="headerlink" title="前端优化的解决方案"></a>前端优化的解决方案</h2><p>我们的优化原则有以下几个：</p><p>能缓存的，尽量强缓存。</p><p>引入外部资源时不要出现超时、404的状况。</p><p>减少HTTP请求数。</p><p>合理设置cookie的大小以及过期时间。</p><p>合理利用懒加载</p></div><div class="story post-story"><h2 id="网页内容的优化"><a href="#网页内容的优化" class="headerlink" title="网页内容的优化"></a>网页内容的优化</h2><p>1、懒加载数据。<br>首先根据标签的left和top属性判断是否显示在了屏幕中（如果显示在屏幕中，其left和top属性值应该是在0到窗口长宽之间）。<br>如果显示在屏幕中，则将src标签的内容替换为图片的url。</p><p>2、不要缩放图片。<br>img计算缩放也需要时间</p><p>3、避免重定向。<br>重定向会重新渲染网页。</p><p>4、使用雪碧图（精灵图）：<br>通过使用background-position：-xpx -ypx;来调整图片的位置，不过HTTP2不适用，原因为HTTP2实际上是多路复用的，只用一个TCP连接，所以多个图片的请求也是在同一个TCP连接里，这样能省下非常多的请求时间，但坏处就是单连接开销很大，如果要传多个大文件，就很麻烦。</p><p>5、要有网站小图标favicon.ico。</p><p>如果没有小图标，会引起404，拖慢网页加载进度。<br>6、能使用jpeg就不要用png，能使用png8就不要用png24。<br>（1）色彩丰富的、大的图片切成jpg的；<br>（2）尺寸小的，色彩不丰富的和背景透明的切成gif或者png8的；<br>（3）半透明的切成png24。</p><p>7、使用canvas压缩图片。</p></div><div class="story post-story"><h2 id="css的优化"><a href="#css的优化" class="headerlink" title="css的优化"></a>css的优化</h2><p>1、避免使用@import。<br>使用@import相当于将引入的css放在了页面底部，因为使用@import引用的文件只有在引用它的那个css文件被下载、解析之后，浏览器才会知道还有另外一个css需要下载，这时才去下载，然后下载后开始解析、构建render tree等一系列操作。因此使用@import会拖慢渲染的过程。</p><p>2、将样式表放在head中。<br>如果放在body中，可能出现在浏览器下载好css样式表之前，组件就已经加载好了的情况，这可能会导致重新渲染。</p><p>3、避免使用css表达式。<br>如：expression((new Date()).getHours()%2 ? “#B8D4FF” : “#F08A00” );<br>解析表达式和计算都需要时间。</p></div><div class="story post-story"><h2 id="JavaScript的优化"><a href="#JavaScript的优化" class="headerlink" title="JavaScript的优化"></a>JavaScript的优化</h2><p>1、尽量减少DOM访问。</p><p>2、使用事件代理（减少DOM操作）。</p><p>3、把脚本放在底部（加载脚本时会阻塞页面渲染）。</p><p>4、合理使用节流函数和防抖函数。</p></div><div class="story post-story"><h2 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h2><p>CDN即内容分发网络。它依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。优化加载速度。</p></div><div class="story post-story"><h2 id="水平垂直居中的几种方法"><a href="#水平垂直居中的几种方法" class="headerlink" title="水平垂直居中的几种方法"></a>水平垂直居中的几种方法</h2><p>使用flex布局<br>利用flex的alignItems:center垂直居中，justifycontent:center水平居中</p><p>利用相对定位和绝对定位的margin:auto<br>相对定位下，使用绝对定位将上下左右都设置为0，再设置margin:auto即可实现居中</p><p>利用相对定位和绝对定位，再加上外边距和平移的配合<br>相对定位下，使用绝对定位，利用margin偏移外容器的50%，再利用translate平移回补自身宽高的50%即可</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;语义化标签&quot;&gt;&lt;a href=&quot;#语义化标签&quot; class=&quot;headerlink&quot; title=&quot;语义化标签&quot;&gt;&lt;/a&gt;语义化标签&lt;/h2&gt;&lt;p&gt;header nav main article sect</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="面试八股" scheme="http://example.com/tags/%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1/"/>
    
  </entry>
  
  <entry>
    <title>数据库</title>
    <link href="http://example.com/2024/10/15/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <id>http://example.com/2024/10/15/%E6%95%B0%E6%8D%AE%E5%BA%93/</id>
    <published>2024-10-15T09:17:26.000Z</published>
    <updated>2024-10-22T12:14:50.545Z</updated>
    
    <content type="html"><![CDATA[<h1 id="数据库系统概论"><a href="#数据库系统概论" class="headerlink" title="数据库系统概论"></a>数据库系统概论</h1><div class="story post-story"><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><hr><h3 id="四个基本概念"><a href="#四个基本概念" class="headerlink" title="四个基本概念"></a>四个基本概念</h3><ul><li>数据(data)：描述事物的<strong>符号</strong>记录称为数据</li><li>数据库(DB)：<strong>长期储存</strong>在计算机内的，<strong>有组织的</strong>、<strong>可共享</strong>的大量数据的集合。</li><li>数据库管理系统(DBMS)：计算机基础软件。具有<ul><li>数据定义功能(DDL)，定义数据对象的组成和结构</li><li>数据组织存储和管理</li><li>数据操纵功能（DML），实现数据的增删改查</li><li>数据库的事务管理和运行管理</li><li>数据库的建立和维护功能</li></ul></li></ul><ol start="4"><li>数据库系统（DBS）：由数据库（DB）、数据库管理系统（DBMS）、应用程序（APP）和数据库管理员（DBA）组成的存储、管理、处理和维护数据的系统。</li></ol><h3 id="数据库系统的特点"><a href="#数据库系统的特点" class="headerlink" title="数据库系统的特点"></a>数据库系统的特点</h3><ul><li>数据结构化</li><li>数据共享性高、冗余度低且易扩充</li><li>数据独立性高 <ul><li>物理独立性：应用程序与数据库中数据的物理存储相互独立。</li><li>逻辑独立性：应用程序与数据库的逻辑结构相互独立。</li></ul></li><li>数据由数据库管理系统统一管理和控制</li></ul></div><div class="story post-story"><h2 id="数据模型——数据库系统的核心和基础"><a href="#数据模型——数据库系统的核心和基础" class="headerlink" title="数据模型——数据库系统的核心和基础"></a>数据模型——数据库系统的<font color="pink">核心</font>和<font color="pink">基础</font></h2><hr><h3 id="两类数据模型"><a href="#两类数据模型" class="headerlink" title="两类数据模型"></a>两类数据模型</h3><ul><li>概念模型<br> 按用户的观点来对数据和信息建模</li><li>逻辑模型和物理模型<ul><li>逻辑模型：按计算机系统的观点对数据建模。包括层次模型、网状模型、关系模型、面向对象模型、对象关系数据类型、半结构化数据类型等</li><li>物理模型：数据在系统内部的表示方式和方法</li><li>逻辑模型到物理模型的转换，主要由<strong>数据库管理系统</strong>实现</li></ul></li></ul><h3 id="概念模型"><a href="#概念模型" class="headerlink" title="概念模型"></a>概念模型</h3><ol><li>基本概念<ul><li>实体：客观存在并可区分的事物</li><li>属性：实体具有的某一特性</li><li>码：唯一标志实体的属性</li><li>实体型：用实体名及其属性名集合来刻画和抽象同类实体。</li><li>联系： 实体之间的联系，通常指不同实体集之间的联系。</li></ul></li><li>一种表示方法：实体-联系方法，也称为E-R模型</li></ol><h3 id="数据模型的组成要素"><a href="#数据模型的组成要素" class="headerlink" title="数据模型的组成要素"></a>数据模型的组成要素</h3><ul><li>数据结构</li><li>数据操作</li><li>数据的完整性约束条件</li></ul><h3 id="关系模型"><a href="#关系模型" class="headerlink" title="关系模型"></a>关系模型</h3><ul><li>术语：<ul><li>关系：对应一张表</li><li>元组：表中的一行</li><li>属性：表中的一列</li><li>码：某个属性组，唯一确定一个元组</li><li>域：一组具有相同数据类型是的集合</li><li>关系模式：对关系的描述</li></ul></li><li>优点<ul><li>与格式化模型不同，建立在严格的数学概念基础上</li><li>数据独立性保密性更高</li><li>概念单一、结构简单、清晰</li><li>存取路径对用户透明</li></ul></li><li>缺点<ul><li>查询效率不如格式化模型数据</li></ul></li></ul></div><div class="story post-story"><h2 id="数据库系统的结构"><a href="#数据库系统的结构" class="headerlink" title="数据库系统的结构"></a>数据库系统的结构</h2><hr><h3 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h3><ul><li>模式是相对稳定的，实例是相对变动的</li></ul><h3 id="三级模式结构"><a href="#三级模式结构" class="headerlink" title="三级模式结构"></a>三级模式结构</h3><ol><li>模式，也称逻辑模式，是所有用户的公共数据视图，模式不涉及物理存储和硬件环境，与应用程序和开发环境无关。</li><li>外模式，也称子模式或用户模式，数据库用户的数据视图，<strong>外模式通常是模式的子集</strong>。</li><li>内模式，也称存储模式，是数据在数据库内部的组织方式</li></ol><h3 id="二级映象功能与数据独立性"><a href="#二级映象功能与数据独立性" class="headerlink" title="二级映象功能与数据独立性"></a>二级映象功能与数据独立性</h3><ul><li>数据独立性是指应用程序与数据库的数据结构之间相互独立<ul><li>在物理结构改变时，尽量不影响应用程序，称为物理数据独立性</li><li>在逻辑结构改变时，尽量不影响应用程序，称为逻辑数据独立性</li></ul></li></ul><ol><li>外模式&#x2F;模式映像<br> 模式改变时，可使外模式保持不变，保证逻辑独立性</li><li>模式&#x2F;内模式映像<br> 存储结构发生改变时，可使模式保持不变，保证物理独立性</li></ol><ul><li>数据库模式是数据库的<strong>中心与关键</strong>，应首先确定。</li></ul></div><div class="story post-story"><h2 id="关系数据库结构及定义"><a href="#关系数据库结构及定义" class="headerlink" title="关系数据库结构及定义"></a>关系数据库结构及定义</h2><hr><p>在数据库中存储的是<strong>数据以及数据之间的联系</strong>。</p><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><ul><li>域</li><li>笛卡尔积<ul><li>元组和分量</li><li>基数：一个域允许的不同取值的个数</li></ul></li><li>关系<ul><li>关系的度（单元关系，二元关系）</li><li>候选码（能唯一表示一个元组的属性集）——&gt;挑一个作为主码</li><li>主属性：候选码的诸属性<br>其余——非主属性或非码属性</li><li>全码：关系模式的所有属性是这个关系模式的候选码</li><li>三种类型：<ul><li>基本关系，又称基本表</li><li>查询表</li><li>视图表</li></ul></li><li>六条性质：<ul><li>行的顺序无所谓</li><li>列的顺序无所谓</li><li>列是同质的</li><li>不同列可出自同一域</li><li>任意两个元组候选码不同</li><li>分量必须取原子值（最基本的一条，满足即为第一范式）</li></ul></li></ul></li></ul><h3 id="关系模式"><a href="#关系模式" class="headerlink" title="关系模式"></a>关系模式</h3><ul><li>关系模式是<strong>静态</strong>的、<strong>稳定</strong>的，而关系是动态的</li></ul><h3 id="基本关系操作"><a href="#基本关系操作" class="headerlink" title="基本关系操作"></a>基本关系操作</h3><ul><li>查询操作<ul><li>选择</li><li>投影</li><li>并</li><li>差</li><li>笛卡尔积&#x2F;&#x2F;以上5种基本数据操作</li><li>连接</li><li>除</li><li>交</li></ul></li><li>插入、删除、修改操作</li></ul><h3 id="结构化查询语言SQL"><a href="#结构化查询语言SQL" class="headerlink" title="结构化查询语言SQL"></a>结构化查询语言SQL</h3><p>集</p><ul><li>查询</li><li>数据定义语言</li><li>数据操纵语言</li><li>数据控制语言<br>于一体的关系数据语言。</li></ul></div><div class="story post-story"><h2 id="关系的完整性"><a href="#关系的完整性" class="headerlink" title="关系的完整性"></a>关系的完整性</h2><hr><ol><li>实体完整性：若属性A是关系R的主属性，则A不能取空值。</li><li>参照完整性：若属性F是关系R的外码，它与基本关系S的主码相对应，则对于R上的每一个元组在F上的值应该或者取空值、或者取S中某个元组的主码值。</li><li>用户定义的完整性</li></ol><p>实体完整性和参照完整性是关系的两个不变性。</p></div><div class="story post-story"><h2 id="关系代数"><a href="#关系代数" class="headerlink" title="关系代数"></a>关系代数</h2><hr><h3 id="传统集合运算"><a href="#传统集合运算" class="headerlink" title="传统集合运算"></a>传统集合运算</h3><ul><li>并</li><li>差</li><li>交</li><li>笛卡尔积</li></ul><h3 id="关系运算"><a href="#关系运算" class="headerlink" title="关系运算"></a>关系运算</h3><p>象集：给定关系R（X,Z）,x在R中的象集为Zx，表示R中属性组X上的属性值为x的诸元组在Z上分量的集合，是<strong>属性组值</strong>的子集<br>关系运算的定义：</p><ul><li>选择</li><li>投影</li><li>连接<br>常用：<ul><li>等值连接</li><li>自然连接，一种特殊的等值连接，它要求两个关系中进行比较的分量必须是同名的属性组，并且在结果中把重复的属性列去掉。</li><li>外连接：保留悬浮元组<ul><li>左外连接：只保留左边关系的悬浮元组</li><li>右外连接：只保留右边关系的悬浮元组</li></ul></li></ul></li><li>除：若T为R除以S的结果，则T包含所有在R中而不在S中的属性及其值，且T与S的所有组合均在R中。</li></ul></div><div class="story post-story"><h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><hr><h3 id="SQL的特点"><a href="#SQL的特点" class="headerlink" title="SQL的特点"></a>SQL的特点</h3><ol><li>综合统一</li><li>高度<strong>非过程化</strong></li><li><strong>面向集合</strong>的操作方式</li><li>以同一种语法结构提供<strong>多种使用方式</strong>：交互式和嵌入式</li><li>语言简洁，易学易用</li></ol><h3 id="SQL的基本概念"><a href="#SQL的基本概念" class="headerlink" title="SQL的基本概念"></a>SQL的基本概念</h3><ul><li>外模式包括视图和若干基本表，模式包括若干基本表，内模式包括若干存储文件。</li><li>在关系数据库管理系统中一个关系就对应一个基本表。一个或多个表对应一个存储文件，一个表可以带若干索引。索引也放在存储文件当中。</li></ul><h3 id="数据定义"><a href="#数据定义" class="headerlink" title="数据定义"></a>数据定义</h3><h4 id="模式的定义与删除"><a href="#模式的定义与删除" class="headerlink" title="模式的定义与删除"></a>模式的定义与删除</h4><ul><li>建立模式<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> SCHEMA <span class="operator">&lt;</span>模式名<span class="operator">&gt;</span> <span class="keyword">AUTHORIZATION</span> <span class="operator">&lt;</span>用户名<span class="operator">&gt;</span></span><br><span class="line">[<span class="operator">&lt;</span>表定义子句<span class="operator">&gt;</span><span class="operator">|</span><span class="operator">&lt;</span>视图定义子句<span class="operator">&gt;</span><span class="operator">|</span><span class="operator">&lt;</span>授权定义子句<span class="operator">&gt;</span>];</span><br></pre></td></tr></table></figure></li><li>删除模式<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> SCHEMA <span class="operator">&lt;</span>CASCADE<span class="operator">|</span>RESRICT<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li></ul><h4 id="基本表的定义、删除与修改"><a href="#基本表的定义、删除与修改" class="headerlink" title="基本表的定义、删除与修改"></a>基本表的定义、删除与修改</h4><ul><li>创建表<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> (</span><br><span class="line"><span class="operator">&lt;</span>列名<span class="operator">&gt;</span><span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>[<span class="operator">&lt;</span>列级完整性约束条件<span class="operator">&gt;</span>]</span><br><span class="line">[,<span class="operator">&lt;</span>列名<span class="operator">&gt;</span><span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>[<span class="operator">&lt;</span>列级完整性约束条件<span class="operator">&gt;</span>]]</span><br><span class="line">...</span><br><span class="line">[,<span class="operator">&lt;</span>表级完整性约束条件<span class="operator">&gt;</span>]</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li>模式与表<ol><li>在表中给出模式名，如CREATE TABLE “&lt;模式名&gt;”.&lt;表名&gt;</li><li>创建模式语句同时创建表</li><li>设置所属模式，如下<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> search_path; #显示当前搜索路径</span><br><span class="line"><span class="keyword">SET</span> search_path <span class="keyword">TO</span> &quot;&lt;模式名&gt;&quot;,PUBLIC; #设置搜索路径</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>();</span><br></pre></td></tr></table></figure></li></ol></li><li>修改基本表<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">ADD</span> [<span class="keyword">COLUMN</span>] <span class="operator">&lt;</span>新列名<span class="operator">&gt;</span><span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> [完整性约束]]</span><br><span class="line">[<span class="keyword">ADD</span> <span class="operator">&lt;</span>表级完整性约束<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">DROP</span>[<span class="keyword">COLUMN</span>]<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>[CASCADE<span class="operator">|</span>RESCTICT]]</span><br><span class="line">[<span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span><span class="operator">&lt;</span>完整性约束名<span class="operator">&gt;</span>[CASCADE<span class="operator">|</span>RESTRICT]]</span><br><span class="line">[<span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span><span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>];</span><br></pre></td></tr></table></figure></li><li>删除表<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> [RESTRICT<span class="operator">|</span>CASCADE];</span><br></pre></td></tr></table></figure></li></ul><h4 id="索引的建立与删除"><a href="#索引的建立与删除" class="headerlink" title="索引的建立与删除"></a>索引的建立与删除</h4><ul><li>建立索引<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">UNIQUE</span>] [CLUSTER] INDEX <span class="operator">&lt;</span>索引名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>(<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>[<span class="operator">&lt;</span><span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span><span class="operator">&gt;</span>][,<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>[<span class="operator">&lt;</span><span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span><span class="operator">&gt;</span>]]...);</span><br></pre></td></tr></table></figure></li><li>修改索引<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> INDEX <span class="operator">&lt;</span>旧索引名<span class="operator">&gt;</span> RENAME <span class="keyword">TO</span> <span class="operator">&lt;</span>新索引名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li><li>删除索引<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> INDEX <span class="operator">&lt;</span>索引名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li></ul><h3 id="数据操纵"><a href="#数据操纵" class="headerlink" title="数据操纵"></a>数据操纵</h3><h4 id="数据查询"><a href="#数据查询" class="headerlink" title="数据查询"></a>数据查询</h4><ul><li><p>SELECT语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span><span class="operator">|</span><span class="keyword">DISTINCT</span>]<span class="operator">&lt;</span>目标列表达式<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>目标列表达式<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>表名或视图名<span class="operator">&gt;</span> [,<span class="operator">&lt;</span>表名或视图名<span class="operator">&gt;</span>...]<span class="operator">|</span>(<span class="keyword">SELECT</span>语句)[<span class="keyword">AS</span>](别名)</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>列名<span class="number">1</span><span class="operator">&gt;</span> [<span class="keyword">HAVING</span> <span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span>]]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>列名<span class="number">2</span><span class="operator">&gt;</span> [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>]];</span><br></pre></td></tr></table></figure><ul><li>tips</li></ul><ol><li>SELECT * —-查询全部列</li><li>常用查询条件<ul><li>&#x3D;,&gt;,&lt;,&gt;&#x3D;,&lt;&#x3D;,&lt;&gt;,!&gt;,!&lt;;NOT+ 上述比较符</li><li>[NOT] BETWEEN AND</li><li>[NOT] IN</li><li>[NOT] LIKE</li><li><font color="blue">IS </font>[NOT] NULL</li><li>AND,OR,NOT</li></ul></li><li>聚集函数<ul><li>COUNT(*)    ！！！不忽略空值NULL</li><li>COUNT([DISTINCT|ALL]&lt;列名&gt;)</li><li>SUM([DISTINCT|ALL]&lt;列名&gt;)</li><li>AVG([DISTINCT|ALL]&lt;列名&gt;)</li><li>MAX([DISTINCT|ALL]&lt;列名&gt;)</li><li>MIN([DISTINCT|ALL]&lt;列名&gt;)</li></ul></li><li>GROUP BY子句 + HAVING子句</li></ol></li><li><p>连接查询</p><ol><li>等值与非等值连接查询</li><li>自身连接（要给表取两个别名）</li><li>外连接</li><li>多表连接</li></ol></li><li><p>嵌套查询<br>  相关定义：</p><ol><li>一个SELECT-FROM-WHERE语句称为一个查询块，将一个查询块嵌套在另一个查询块的WHERE子句或HAVING短语的条件中的查询称为嵌套查询</li><li>外层查询又称父查询，内层查询又称子查询</li><li>子查询不能使用ORDER BY语句</li><li>不相关子查询：子查询的查询条件不依赖于父查询</li><li>相关子查询：子查询的查询条件依赖于父查询，不能一次性将子查询的结果求解出来，而是反复求值</li><li>嵌套查询中维持ANY&#x2F;SOME表示任一，ALL表示所有（任意）</li><li>带有EXISTS谓词的子查询，产生ture或false。（！！！所有带有IN谓词，、比较运算符、ANY和ALL谓词的子查询都能用带EXISTS的子查询等价替代）</li><li>空值进行四则运算还是空值</li></ol></li><li><p>集合查询–各查询结果列数必须相同，对应数据项的数据类型也必须相同</p><ul><li>UNION–自动去掉重复元组，如要保留则用UNION ALL操作符。</li><li>INTERSECT</li><li>EXCEPT</li></ul></li><li><p>派生表查询：子查询嵌套于FROM子句中。（！！！AS关键字可以省略，但必须为派生关系指定别名）</p></li></ul><h4 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>[(<span class="operator">&lt;</span>属性列<span class="number">1</span><span class="operator">&gt;</span>[,<span class="operator">&lt;</span>属性列<span class="number">2</span><span class="operator">&gt;</span>]...)]</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="operator">&lt;</span>常量<span class="number">1</span><span class="operator">&gt;</span>[,<span class="operator">&lt;</span>常量<span class="number">2</span><span class="operator">&gt;</span>]...);</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>[(<span class="operator">&lt;</span>属性列<span class="number">1</span><span class="operator">&gt;</span>[,<span class="operator">&lt;</span>属性列<span class="number">2</span><span class="operator">&gt;</span>]...)]</span><br><span class="line">子查询;</span><br></pre></td></tr></table></figure><h4 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SET</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;=</span><span class="operator">&lt;</span>表达式<span class="operator">&gt;</span> [,<span class="operator">&lt;</span>列名<span class="operator">&gt;=</span><span class="operator">&lt;</span>表达式<span class="operator">&gt;</span>]...</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>条件<span class="operator">&gt;</span>];</span><br></pre></td></tr></table></figure><h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>条件<span class="operator">&gt;</span>];</span><br></pre></td></tr></table></figure><h3 id="视图——只存放定义，不存放数据"><a href="#视图——只存放定义，不存放数据" class="headerlink" title="视图——只存放定义，不存放数据"></a>视图——只存放定义，不存放数据</h3><ul><li>建立视图<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> <span class="operator">&lt;</span>视图名<span class="operator">&gt;</span> [<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>]...]</span><br><span class="line"><span class="keyword">AS</span> <span class="operator">&lt;</span>子查询<span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">CHECK</span> OPTION];</span><br></pre></td></tr></table></figure>创建视图时并不执行SELECT语句，对视图查询时，才将数据查出。</li><li>删除视图<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> <span class="operator">&lt;</span>视图名<span class="operator">&gt;</span> CASCADE;</span><br></pre></td></tr></table></figure></li><li>视图的作用<ol><li>视图能够简化用户操作</li><li>视图使用户能以多角度看待同一数据</li><li>视图对重构数据库提供了一定程度的逻辑独立性</li><li>视图能够对机密数据提供安全保护</li><li>更加清晰地表达查询</li></ol></li></ul></div><div class="story post-story"><h2 id="数据库安全"><a href="#数据库安全" class="headerlink" title="数据库安全"></a>数据库安全</h2><h3 id="授予与收回权限（控制类指令）–实现自主存取控制"><a href="#授予与收回权限（控制类指令）–实现自主存取控制" class="headerlink" title="授予与收回权限（控制类指令）–实现自主存取控制"></a>授予与收回权限（控制类指令）–实现自主存取控制</h3><ul><li>用户权限由两要素组成：数据库对象和操作类型</li><li>GRANT：授予用户对列的操作权限<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="operator">&lt;</span>权限<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>权限<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>对象类型<span class="operator">&gt;</span><span class="operator">&lt;</span>对象名<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>对象类型<span class="operator">&gt;</span><span class="operator">&lt;</span>对象名<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">TO</span> <span class="operator">&lt;</span>用户<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>用户<span class="operator">&gt;</span>]...</span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION];</span><br></pre></td></tr></table></figure></li><li>REVOKE<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="operator">&lt;</span>权限<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>权限<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>对象类型<span class="operator">&gt;</span><span class="operator">&lt;</span>对象名<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>对象类型<span class="operator">&gt;</span><span class="operator">&lt;</span>对象名<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>用户<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>用户<span class="operator">&gt;</span>]...</span><br><span class="line">[CASCADE<span class="operator">|</span>RESTRINCT];</span><br></pre></td></tr></table></figure></li><li>创建数据库模式的权限<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="operator">&lt;</span>username<span class="operator">&gt;</span> [<span class="keyword">WITH</span>][DBA<span class="operator">|</span>RESOURCE<span class="operator">|</span><span class="keyword">CONNECT</span>];</span><br></pre></td></tr></table></figure></li></ul><h3 id="数据库角色"><a href="#数据库角色" class="headerlink" title="数据库角色"></a>数据库角色</h3><ul><li>数据库角色是被命名的一组与数据库操作相关的权限，角色是权限的集合。</li><li>创建角色<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> ROLE <span class="operator">&lt;</span>角色名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li><li>给角色授权<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="operator">&lt;</span>权限<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>权限<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>对象类型<span class="operator">&gt;</span> <span class="operator">&lt;</span>对象名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">TO</span> <span class="operator">&lt;</span>角色<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>角色<span class="operator">&gt;</span>]...;</span><br></pre></td></tr></table></figure></li><li>将一个角色授权给其他角色或用户<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="operator">&lt;</span>角色<span class="number">1</span><span class="operator">&gt;</span>[,<span class="operator">&lt;</span>角色<span class="number">2</span><span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">TO</span> <span class="operator">&lt;</span>角色<span class="number">3</span><span class="operator">&gt;</span>[,<span class="operator">&lt;</span>用户<span class="number">1</span><span class="operator">&gt;</span>]...</span><br><span class="line">[<span class="keyword">WITH</span> ADMIN OPTION];</span><br></pre></td></tr></table></figure></li><li>角色权限的收回<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="operator">&lt;</span>权限<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>权限<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>对象类型<span class="operator">&gt;</span> <span class="operator">&lt;</span>对象名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>角色<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>角色<span class="operator">&gt;</span>]...</span><br></pre></td></tr></table></figure></li></ul><h3 id="强制存取控制"><a href="#强制存取控制" class="headerlink" title="强制存取控制"></a>强制存取控制</h3><p>敏感度标记：TS&gt;&#x3D;S&gt;&#x3D;C&gt;&#x3D;P<br>规则：</p><ul><li>仅当主体的许可证级别大于或者等于客体的密级时，改主体才能读取相应的客体。</li><li>仅当主体的许可证级别小于或者等于客体的密级时，改主体才能写相应的客体。</li></ul><h3 id="审计功能–一种事后检查的安全机制"><a href="#审计功能–一种事后检查的安全机制" class="headerlink" title="审计功能–一种事后检查的安全机制"></a>审计功能–一种事后检查的安全机制</h3><ul><li>记录一切<strong>成功</strong>和<strong>不成功</strong>的操作<br>-AUDIT&#x2F;NOAUDIT<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">NO</span>]AUDIT <span class="operator">&lt;</span>操作名<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>操作名<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li></ul><h3 id="数据加密"><a href="#数据加密" class="headerlink" title="数据加密"></a>数据加密</h3><ol><li>存储加密</li><li>传输加密</li></ol><h3 id="其他安全性保护"><a href="#其他安全性保护" class="headerlink" title="其他安全性保护"></a>其他安全性保护</h3><ul><li>推理控制</li><li>隐蔽信道</li><li>数据隐私保护</li></ul></div><div class="story post-story"><h2 id="数据库完整性——数据库的正确性和相容性"><a href="#数据库完整性——数据库的正确性和相容性" class="headerlink" title="数据库完整性——数据库的正确性和相容性"></a>数据库完整性——数据库的正确性和相容性</h2><hr><ol><li>实体完整性<ol><li>检查主码值是否唯一，如果不唯一则拒绝插入或修改</li><li>检查主码的各个属性是否为空，只要有一个空值就拒绝插入或修改。</li></ol></li><li>参照完整性</li></ol><table><thead><tr><th>（破坏参照完整性的）操作</th><th>违约处理</th></tr></thead><tbody><tr><td>参照表插入元组</td><td>拒绝</td></tr><tr><td>参照表修改外码值</td><td>拒绝</td></tr><tr><td>被参照表删除元组</td><td>拒绝&#x2F;级联删除&#x2F;设置为空值</td></tr><tr><td>被参照表修改主码值</td><td>拒绝&#x2F;级联删除&#x2F;设置为空值</td></tr><tr><td>3. 用户自定义的完整性</td><td></td></tr></tbody></table><pre><code>1. 属性上的约束条件——不满足则拒绝执行    - NOT NULL    - UNIQUE    - CHECK短语2. 元组上的约束条件——不满足则拒绝执行</code></pre><h3 id="完整性命令约束命名子句"><a href="#完整性命令约束命名子句" class="headerlink" title="完整性命令约束命名子句"></a>完整性命令约束命名子句</h3><ul><li>完整性约束命名子句(新建表时)<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>完整性约束条件名<span class="operator">&gt;</span> <span class="operator">&lt;</span>完整性约束条件<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li><li>修改表中的完整性限制</li></ul><p>删除完整性约束</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>完整性约束条件名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><p>增加完整性约束</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>完整性约束条件名<span class="operator">&gt;</span> <span class="operator">&lt;</span>完整性约束条件<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><h3 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h3><ul><li>通过声明断言来指定更具一般性的约束。可以定义涉及多个表或聚集操作的比较复杂的完整性约束，任何使断言不为真值的操作都会被拒绝执行。</li><li>创建断言语句<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> ASSERTION <span class="operator">&lt;</span>断言名<span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="keyword">CHECK</span> 子句<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li><li>删除断言语句<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> ASSERTION <span class="operator">&lt;</span>断言名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li></ul><h3 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h3><ul><li>定义触发器<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> <span class="operator">&lt;</span>触发器名<span class="operator">&gt;</span></span><br><span class="line">&#123;BEFORE<span class="operator">|</span>AFTER&#125; <span class="operator">&lt;</span>触发事件<span class="operator">&gt;</span> <span class="keyword">ON</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">REFERENCES</span> <span class="keyword">NEW</span><span class="operator">|</span><span class="keyword">OLD</span> <span class="type">ROW</span> <span class="keyword">AS</span> <span class="operator">&lt;</span>变量<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> &#123;<span class="type">ROW</span><span class="operator">|</span>STATEMENT&#125;</span><br><span class="line">[<span class="keyword">WHEN</span> <span class="operator">&lt;</span>触发条件<span class="operator">&gt;</span>] <span class="operator">&lt;</span>触发动作体<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li><li>激活触发器，<br>  多个触发器时：<ol><li>执行该表上的BEFORE触发器</li><li>激活触发器的SQL语句</li><li>执行该表上的AFTER触发器</li></ol></li><li>删除触发器<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> <span class="operator">&lt;</span>触发器名<span class="operator">&gt;</span> <span class="keyword">ON</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li></ul></div><div class="story post-story"><h2 id="关系数据理论"><a href="#关系数据理论" class="headerlink" title="关系数据理论"></a>关系数据理论</h2><hr><h3 id="相关术语"><a href="#相关术语" class="headerlink" title="相关术语"></a>相关术语</h3><ul><li>函数依赖：R(U)是属性集U上的关系模式，X，Y是U的子集。对于R的任意一个可能关系r，r中不可能存在两个元组在X上的属性值相等，在Y上的属性值不等，称Y函数依赖于X，记作X-&gt;Y。<ul><li>若Y$\subseteqq$X，为平凡的函数依赖。</li></ul></li><li>部分函数依赖：X-&gt;Y，若对于X的每一个真子集X’，X’-&#x2F;-&gt;Y，则称Y对X完全函数依赖，记作X$\frac{F}{}$&gt;Y。<strong>否则</strong>称为部分函数依赖。</li><li>传递函数依赖：X-&gt;Y,<strong>Y-&#x2F;-&gt;X</strong>，Y-&gt;Z(Z$\subsetneqq$Y，Y$\subsetneqq$X)，称Z传递函数依赖于X，记作X$\frac{传递}{}$&gt;Z。</li><li>超码：K为R&lt;U,F&gt;中的属性或属性组合，K-&gt;U，称K为超码。</li><li>候选码：K$\frac{F}{}$&gt;U,称K为候选码。(特殊的超码)</li><li>主码：选定的一个候选码。</li><li>全码：整个属性组是码。</li><li>主属性：包含在任何一个<strong>候选码</strong>中的属性。</li><li>非主属性&#x2F;非码属性：不包含在任何候选码中的属性。</li><li>多值依赖：X，Y，Z是U的子集，且Z&#x3D;U-X-Y，若给定一对(x,z)值，有一组Y值，这组值仅仅决定于x值而与z无关。称Y多值依赖于X，记作X-&gt;-&gt;Y。</li><li>闭包：$X^{+}<em>{F}$&#x3D;{A|X-&gt;A能由F导出}，$X^{+}</em>{F}$称为属性集X关于函数依赖集F的闭包。</li><li>最小依赖集&#x2F;最小覆盖：<ol><li>任一函数依赖右部仅含一个属性。</li><li>函数依赖个数精简到最少</li><li>函数依赖的左部精简到最少</li></ol></li></ul><h3 id="范式"><a href="#范式" class="headerlink" title="范式"></a>范式</h3><ul><li>第一范式（1NF）：每一个分量都是不可分的数据项</li><li>第二范式（2NF）：1NF&amp;<strong>不</strong>存在<strong>非主属性</strong>对任一<strong>候选码</strong>的<strong>部分函数依赖</strong>。</li><li>第三范式（3NF）：2NF&amp;<strong>不</strong>存在<strong>非主属性</strong>对任一<strong>候选码</strong>的<strong>传递函数依赖</strong>。<ul><li>所有属性都是主属性的模式最高一定可以达到</li></ul></li><li>BC范式（BCNF）:每一个决定因素都包含码，消除了插入、删除的异常。满足：<ul><li>3NF</li><li>所有主属性对于任一不包含它的码也是完全函数依赖</li><li>没有任何属性完全函数依赖于非码的任何一组属性。</li><li>(全码组成的关系模式最高一定可以到达||3NF+唯一候选码||二元模式最高一定可以到达)</li></ul></li><li>4NF：属性之间不允许有<strong>非平凡且非函数依赖</strong>的多值依赖</li><li>判断范式<ol><li>求候选码<ol><li>如果有属性只在函数依赖集的左边出现，则该属性一定包含在候选码中（继续求它的闭包，如果他的闭包是属性全集，则为候选码，如果不是，则需要结合其他属性求闭包，继而判断是否是候选码）</li><li>只在函数依赖集右边出现的属性，一定不属于候选码</li><li>对于左右都出现过的属性：<br>（1）先结合只在左边出现的属性求闭包，看看是否包括所有属性，如果他的闭包是属性全集，则为候选码；<br>（2）如果没有包括所有属性，就结合其他左右都出现的求闭包，看看是否包括所有属性，如果他的闭包是属性全集，则为候选码</li><li>如果有属性不在函数依赖集中出现（外部属性），那么一定包含在候选码中（继续求它的闭包，如果他的闭包是属性全集，则为候选码，如果不是，则需要结合其他属性求闭包，继而判断是否是候选码）</li></ol></li><li>分主属性、非主属性</li><li>判断范式。</li></ol></li></ul><h3 id="规范化"><a href="#规范化" class="headerlink" title="规范化"></a>规范化</h3><p>1NF$\frac{消除非主属性对码的部分函数依赖}{}$&gt;2NF$\frac{消除非主属性对码的传递函数依赖}{}$&gt;3NF$\frac{消除主属性对码的部分和传递函数依赖}{}$&gt;BCNF$\frac{消除非平凡且非函数依赖的多值依赖}{}$&gt;4NF</p><h3 id="函数依赖的公理系统"><a href="#函数依赖的公理系统" class="headerlink" title="函数依赖的公理系统"></a>函数依赖的公理系统</h3><ul><li>推理规则——Armstrong公理系统<ul><li>自反率：<br>若Y$\subseteqq$X$\subseteqq$U，则X——&gt;Y被F所蕴含</li><li>增广率：<br>若X——&gt;Y被F所蕴含，且Z$\subseteqq$U，则XZ——&gt;YZ被F所蕴含</li><li>传递率：<br>若X——&gt;Y及Y——&gt;Z被F所蕴含，则X——&gt;Z被F所蕴含</li></ul></li></ul><h3 id="模式的分解"><a href="#模式的分解" class="headerlink" title="模式的分解"></a>模式的分解</h3><h4 id="无损连接性"><a href="#无损连接性" class="headerlink" title="无损连接性"></a>无损连接性</h4><ul><li>保证不丢失信息</li><li>判断无损连接</li></ul><h4 id="保持函数依赖性"><a href="#保持函数依赖性" class="headerlink" title="保持函数依赖性"></a>保持函数依赖性</h4><ul><li>减轻或解决各种异常情况</li><li>判断保持函数依赖：<ol><li>求投影F’&#x3D;F1∪F2∪…Fn是否包含全部函数依赖。</li><li>对于缺少的函数依赖，求左侧属性在判断F’中的闭包是否蕴含右侧。（$F’^{+}$&#x3D;&#x3D;$F^{+}$?）</li></ol></li></ul><h3 id="模式分解算法"><a href="#模式分解算法" class="headerlink" title="模式分解算法"></a>模式分解算法</h3><ul><li>保持函数依赖，最多可以达到3NF。</li><li>保持无损连接性，最多可以达到4NF。</li><li>保持函数依赖和无损连接性，最多可以达到3NF</li></ul></div><div class="story post-story"><h2 id="数据库恢复技术"><a href="#数据库恢复技术" class="headerlink" title="数据库恢复技术"></a>数据库恢复技术</h2><hr><h3 id="事务的基本概念"><a href="#事务的基本概念" class="headerlink" title="事务的基本概念"></a>事务的基本概念</h3><ul><li>事务的定义：用户定义的一个数据库操作序列，这些操作要么全做，要么全不做，是一个不可分割的工作单位。</li><li>事务通常以BEGIN TRANSACTION开始，以COMMIT（提交）或ROLLBACK（回滚）结束。</li><li>事务的ACID特性：<ul><li>原子性：事务是数据库的逻辑工作单位，事务中所包括的诸操作要么都做，要么都不做。</li><li>一致性：事务执行的结果必须是使数据库从一个一致性状态变到另一个一致性状态。</li><li>隔离性：对于并发执行而言，一个事务的执行不能被其他事务干扰。</li><li>持久性：也称永久性，一个事务一旦提交，它对数据库中数据的改变就应该是永久的。</li></ul></li></ul><h3 id="故障的种类"><a href="#故障的种类" class="headerlink" title="故障的种类"></a>故障的种类</h3><ul><li>事务内部的故障：非预期的，不能由应用程序处理的。<ul><li>常见原因：<ol><li>运算溢出</li><li>并发进程发生死锁而被选中撤销该事务</li><li>违反了某些完整性限制</li></ol></li><li>恢复操作：事务撤销（UNDO）：反向扫描日志文件，查找事务的更新操作执行逆操作</li></ul></li><li>系统故障：称为软故障，指造成系统停止运转的任何事件，使得系统要重新启动<ul><li>常见原因  <ol><li>特定类型的硬件错误</li><li>操作系统故障</li><li>DBMS代码错误</li><li>系统断电</li></ol></li><li>恢复策略<ol start="5"><li>正向扫描日志文件</li><li>发生系统故障时，事务未提交：强行撤销所有未完成的事务</li><li>发生系统故障时，事务已提交，但缓冲区的信息未完全写回到磁盘上：重做所有已提交的事务。</li></ol></li></ul></li><li>介质故障：称为硬故障，指外存故障。<ul><li>常见原因<ol><li>磁盘损坏</li><li>磁头碰撞</li><li>操作系统的某种潜在错误</li><li>瞬时强磁场干扰</li></ol></li><li>恢复策略<ol><li>装入数据库发生介质故障前某个时刻的数据副本</li><li>重做此时起的所有成功事务，将这些事务已提交的结果重新记入数据库。</li></ol></li><li>使用检查点改善恢复效率</li><li>数据库镜像</li></ul></li><li>计算机病毒<ul><li>人为故障或破坏的计算机程序，可以繁殖和传播，等同于介质故障。</li></ul></li></ul><h3 id="恢复的实现技术"><a href="#恢复的实现技术" class="headerlink" title="恢复的实现技术"></a>恢复的实现技术</h3><ul><li>基本原理：冗余——利用存储在系统其他地方的冗余数据来重建数据库中已被破坏或不正确的那部分数据。</li><li>如何建立冗余数据？数据转储和登记日志文件</li></ul><h4 id="数据转储"><a href="#数据转储" class="headerlink" title="数据转储"></a>数据转储</h4><ul><li>转储方式分类<ul><li>海量转储</li><li>增量转储</li></ul></li><li>转储状态分类<ul><li>动态转储</li><li>静态转储</li></ul></li></ul><h4 id="登记日志文件——用来记录事务对数据库的更新操作的文件"><a href="#登记日志文件——用来记录事务对数据库的更新操作的文件" class="headerlink" title="登记日志文件——用来记录事务对数据库的更新操作的文件"></a>登记日志文件——用来记录事务对数据库的更新操作的文件</h4><ul><li>登记内容（每个登记内容作为日志文件的一个日志记录）：<ul><li>各个事务开始标记</li><li>各个事务结束登记</li><li>各个事务的所有更新操作</li></ul></li><li>日志记录内容<ul><li>事务标识</li><li>操作类型</li><li>操作对象</li><li>更新前数据的旧值</li><li>更新后数据的新值</li></ul></li><li>作用：<ul><li>进行事务故障和系统故障恢复</li><li>协助后备副本对介质故障进行恢复</li></ul></li><li>登记日志文件时必须遵循两条原则：<ul><li>登记的次序严格按并发事务执行的时间次序。</li><li>必须先写日志文件，后写数据库。</li></ul></li></ul></div><div class="story post-story"><h2 id="并发控制"><a href="#并发控制" class="headerlink" title="并发控制"></a>并发控制</h2><hr><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><ul><li>事务是并发控制的基本单位</li><li>并发操作带来的数据不一致性<ul><li>丢失修改</li><li>读“脏”数据</li><li>不可重复读&#x2F;幻影现象</li></ul></li><li>主要方法<ul><li>封锁</li><li>时间戳</li><li>乐观控制法</li><li>多版本控制</li></ul></li></ul><h3 id="封锁"><a href="#封锁" class="headerlink" title="封锁"></a>封锁</h3><ul><li>排他锁&#x2F;写锁（X锁）</li><li>共享锁（S锁）</li><li>封锁协议：<ul><li>一级封锁协议：修改数据之前必须加X锁，直到事务结束才释放——解决丢失修改</li><li>二级封锁协议：读数据之前必须加S锁，读完后释放——解决读脏数据</li><li>三级封锁协议：读数据之前必须加S锁，直到事务结束才释放——解决不可重复读</li></ul></li></ul><h3 id="活锁和死锁"><a href="#活锁和死锁" class="headerlink" title="活锁和死锁"></a>活锁和死锁</h3><ul><li><p>当两个（或多个）并发的事务分别等待对方释放封锁的资源，而使事务处于长期等待状态的现象称为死锁。</p></li><li><p>解决活锁的方法：先来先服务策略</p></li><li><p>解决死锁的两种方法：</p><ul><li>预防：<ul><li>一次封锁法:为了完成一个事务，一次性封锁所需要的全部表</li><li>顺序封锁法:所有的事务约定都按相同的顺序来封锁表</li></ul></li><li>诊断与解除<ul><li>超时法</li><li>事务等待图法</li></ul></li></ul></li></ul><h3 id="并发调度的可串行性——并发事务正确调度的准则"><a href="#并发调度的可串行性——并发事务正确调度的准则" class="headerlink" title="并发调度的可串行性——并发事务正确调度的准则"></a>并发调度的可串行性——并发事务正确调度的准则</h3><ul><li>冲突可串行化是可串行化的充分条件</li></ul><h3 id="两段锁协议"><a href="#两段锁协议" class="headerlink" title="两段锁协议"></a>两段锁协议</h3><ul><li>事务分为两个阶段<ol><li>扩展阶段，获得封锁</li><li>收缩阶段，释放封锁</li></ol></li><li>事务遵守两段锁协议是可串行化的充分条件</li></ul><h3 id="封锁的粒度"><a href="#封锁的粒度" class="headerlink" title="封锁的粒度"></a>封锁的粒度</h3><ul><li><p>封锁对象的大小称为<strong>封锁粒度</strong>，封锁对象可以是<strong>逻辑对象</strong>，也可以是<strong>物理对象</strong></p></li><li><p>封锁粒度越大、数据库所能封锁的数据单元就越少，并发度就越小，系统开销越小；反之，封锁粒度越小、数据库所能封锁的数据单元就越多，并发度就越大，系统开销越大</p></li><li><p>多粒度封锁</p><ul><li>显示封锁：应事务要求直接加到数据对象上的锁</li><li>隐式封锁：由于上级对象加锁而导致该数据对象加上了锁</li></ul></li></ul></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;数据库系统概论&quot;&gt;&lt;a href=&quot;#数据库系统概论&quot; class=&quot;headerlink&quot; title=&quot;数据库系统概论&quot;&gt;&lt;/a&gt;数据库系统概论&lt;/h1&gt;&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="数据库" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>node.js</title>
    <link href="http://example.com/2024/10/12/node-js/"/>
    <id>http://example.com/2024/10/12/node-js/</id>
    <published>2024-10-12T13:31:48.000Z</published>
    <updated>2025-04-12T14:46:16.032Z</updated>
    
    <content type="html"><![CDATA[<h1 id="fs文件系统"><a href="#fs文件系统" class="headerlink" title="fs文件系统"></a>fs文件系统</h1><div class="story post-story"><h2 id="读取文件内容"><a href="#读取文件内容" class="headerlink" title="读取文件内容"></a>读取文件内容</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步读取</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;input.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">    <span class="comment">//如果读取成功，则err的值为null</span></span><br><span class="line">    <span class="comment">//如果读取失败，则err的值为错误对象，dataStr的值为undefined</span></span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;异步读取: &quot;</span> + data.<span class="title function_">toString</span>());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步读取</span></span><br><span class="line"><span class="keyword">var</span> data = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;input.txt&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;同步读取: &quot;</span> + data.<span class="title function_">toString</span>());</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;程序执行完毕。&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//执行结果</span></span><br><span class="line">同步读取: 文件读取实例</span><br><span class="line"></span><br><span class="line">程序执行完毕。</span><br><span class="line">异步读取: 文件读取实例</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="写入文件内容"><a href="#写入文件内容" class="headerlink" title="写入文件内容"></a>写入文件内容</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&#x27;input.txt&#x27;</span>, <span class="string">&#x27;我是通 过fs.writeFile 写入文件的内容&#x27;</span>,  <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="处理路径问题"><a href="#处理路径问题" class="headerlink" title="处理路径问题"></a>处理路径问题</h2><p>__dirname表示当前文件所处目录</p><h3 id="path路径模块"><a href="#path路径模块" class="headerlink" title="path路径模块"></a>path路径模块</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>)</span><br></pre></td></tr></table></figure><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>path.join([path1][, path2][, …])</td><td>用于连接路径。</td></tr><tr><td>path.basename()</td><td>获取路径中的文件名</td></tr><tr><td>path.extname(p)</td><td>获取文件的扩展名</td></tr><tr><td>path.dirname(p)</td><td>返回路径中代表文件夹的部分</td></tr><tr><td>path.resolve([from …], to)</td><td>将 to 参数解析为绝对路径</td></tr><tr><td>path.relative(from, to)</td><td>xxxxxxxxxx import requestInstance from ‘.&#x2F;http’​export { requestInstance as http }typescript</td></tr></tbody></table><h1 id="http"><a href="#http" class="headerlink" title="http"></a>http</h1></div><div class="story post-story"><h2 id="创建服务器"><a href="#创建服务器" class="headerlink" title="创建服务器"></a>创建服务器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>()</span><br><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Someone visit our web server.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器启动了，运行在http://127.0.0.1:8080&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><table><thead><tr><th>req请求对象属性</th><th>描述</th></tr></thead><tbody><tr><td>req.url</td><td>客户端请求的url地址</td></tr><tr><td>req.method</td><td>客户端请求方式</td></tr><tr><td>req.session</td><td>访问和使用session对象，需要配置express-session中间件</td></tr><tr><td>req.session.destroy()</td><td>清空session对象</td></tr></tbody></table><table><thead><tr><th>res响应对象属性</th><th>描述</th></tr></thead><tbody><tr><td>res.end()</td><td>向客户端响应内容</td></tr><tr><td>res.writeHead(200, { “Content-Type”: “text&#x2F;html; charset&#x3D;utf-8” })</td><td>写入响应头</td></tr><tr><td>res.setHeader(“Content-Type”,”text&#x2F;html; charset&#x3D;utf-8”)</td><td>设置响应头的内容类型，解决中文乱码</td></tr></tbody></table><h1 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h1><h3 id="模块作用域"><a href="#模块作用域" class="headerlink" title="模块作用域"></a>模块作用域</h3><p>自定义模块中定义的方法、变量等成员，只能在当前模块内被访问，这种模块级别的访问限制，叫做模块作用域。</p><h3 id="module对象"><a href="#module对象" class="headerlink" title="module对象"></a>module对象</h3><p>在每一个.js自定义模块中都有一个module对象，它里面存储了和当前模块有关的信息</p><ul><li>module.exports可以将模块内的成员共享出去，供外界使用。外界用require()方法导入自定义模块时，得到的就是module.exports所指向的对象（也可写成exports）</li></ul><h1 id="npm命令"><a href="#npm命令" class="headerlink" title="npm命令"></a>npm命令</h1><ul><li>npm init -y：新建包管理配置文件</li><li>npm uninstall：卸载包</li><li>npm install -D：安装包到开发环境中，这些包只在项目开发环境中用到，如sass,记录在devDependencies节点中</li><li>npm install：安装到开发和生产环境中，记录在dependencies节点中</li><li>npm install -g：安装为全局包</li></ul><h1 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h1><p>封装的http模块</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express</span><br></pre></td></tr></table></figure><h3 id="创建基本的Web服务器"><a href="#创建基本的Web服务器" class="headerlink" title="创建基本的Web服务器"></a>创建基本的Web服务器</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.导入 express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">//2.创建 web 服务器</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;hzx&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;请求成功&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//3. 启动 web 服务器</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;express server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="获取请求参数"><a href="#获取请求参数" class="headerlink" title="获取请求参数"></a>获取请求参数</h3><p>req.query     通过?匹配到的参数</p><p>req.params    通过:匹配到的动态参数</p><p>req.body 请求体数据，需要调用express.json()和express.urlencoded({extended:false})中间件</p><h3 id="托管静态资源"><a href="#托管静态资源" class="headerlink" title="托管静态资源"></a>托管静态资源</h3><p>app.use(express.static(‘public’))</p><p>如果要托管多个静态资源目录，多次调用express.static()函数，访问静态资源函数时，根据目录的添加顺序查找所需的文件</p><p>挂载路径前缀：app.use(“&#x2F;public”,express.static(‘public’))</p><h1 id="nodemon"><a href="#nodemon" class="headerlink" title="nodemon"></a>nodemon</h1><p>nodemon能够监听项目文件的变动，当代码被修改后，nodemon会自动帮我们重启项目。</p><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><p>npm install -g nodemon</p><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>nodemon test.js</p><h1 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h1><p>Express中的路由分3部分组成，分别是请求的类型、请求的URL地址、处理函数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.METHOD(PATH,HANDLER(req,res))</span><br></pre></td></tr></table></figure><h3 id="模块化路由"><a href="#模块化路由" class="headerlink" title="模块化路由"></a>模块化路由</h3><p>为了方便对路由进行模块化的管理，推荐将路由抽离为单独的模块</p><ol><li>创建路由模块对应的.js文件</li><li>调用express.Router()函数创建路由对象</li><li>向路由对象上挂载具体的路由</li><li>module.exports向外共享路由对象</li><li>使用app.use()函数注册路由模块</li></ol><h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//router.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/user/list&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Get user list.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/user/add&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Add new user.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="comment">//1.导入 express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">//2.创建 web 服务器</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="comment">//注册路由模块</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">&#x27;./router&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"><span class="comment">//3. 启动 web 服务器</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;express server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h1><p>作用：对请求进行预处理</p><h3 id="中间件的格式"><a href="#中间件的格式" class="headerlink" title="中间件的格式"></a>中间件的格式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,<span class="keyword">function</span>(<span class="params">req,res,next</span>)&#123;</span><br><span class="line"><span class="title function_">next</span>()<span class="comment">//把流转关系转交给下一个中间件或者路由</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="全局生效的中间件"><a href="#全局生效的中间件" class="headerlink" title="全局生效的中间件"></a>全局生效的中间件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="keyword">const</span> mw = <span class="keyword">function</span> (<span class="params">req,res,next</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这是最简单的中间件函数&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line">app.<span class="title function_">use</span>(mw)</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Home Page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&quot;User Page&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="局部生效的中间件"><a href="#局部生效的中间件" class="headerlink" title="局部生效的中间件"></a>局部生效的中间件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="keyword">const</span> mw = <span class="keyword">function</span> (<span class="params">req,res,next</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这是最简单的中间件函数&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,mw,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Home Page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="多个局部生效的中间件"><a href="#多个局部生效的中间件" class="headerlink" title="多个局部生效的中间件"></a>多个局部生效的中间件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,mw1,mw2,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Home Page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,[mw1,mw2],<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Home Page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul><li>在路由之前注册中间件</li><li>客户端发送的请求，可以连续调用多个中间件进行处理</li><li>执行完中间件后，要调用next()函数</li><li>调用next()函数后，不要再写业务逻辑</li><li>多个中间件共享req、res对象</li></ul><h3 id="中间件的分类"><a href="#中间件的分类" class="headerlink" title="中间件的分类"></a>中间件的分类</h3><ol><li><p>应用级别：app.use(),app.get(),app.post()</p></li><li><p>路由级别：绑定在express.Router()实例上</p></li><li><p>错误级别：function处理函数中必须有4个形参，分别是(err,req,res,next)。<strong>必须注册在所有路由之后！</strong></p></li><li><p>Express内置</p><ol><li><p>express.static快速托管静态资源的内置中间件</p></li><li><p>express.json解析JSON格式的请求体数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>())</span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">body</span>)</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>express.urlencoded({extended:false})解析URL-encoded格式的请求体数据</p></li></ol></li><li><p>第三方</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义中间件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">bodyParser</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    req.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">chunk</span>) =&gt;</span> &#123;</span><br><span class="line">        str += chunk</span><br><span class="line">    &#125;)</span><br><span class="line">    req.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        req.<span class="property">body</span> = querystring.<span class="title function_">parse</span>(str)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = bodyParser</span><br><span class="line">------------------------------------</span><br><span class="line"><span class="comment">//使用中间件</span></span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;./bodyParser&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(bodyParser)</span><br></pre></td></tr></table></figure></li></ol><h1 id="基于CORS解决跨域问题"><a href="#基于CORS解决跨域问题" class="headerlink" title="基于CORS解决跨域问题"></a>基于CORS解决跨域问题</h1><h3 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cors</span><br></pre></td></tr></table></figure><h3 id="导入并配置"><a href="#导入并配置" class="headerlink" title="导入并配置"></a>导入并配置</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>())</span><br></pre></td></tr></table></figure><p><strong>注意：</strong>先配置cors（跨域资源共享）再配置路由</p><p><strong>原理：</strong>CORS由一系列HTTP响应头组成，这些响应头决定浏览器是否阻止前端JS代码跨域获取资源。浏览器的同源安全策略（协议、ip地址、端口号必须相同）默认会阻止网页”跨域“获取资源。但是如果接口服务器配置了CORS相关的HTTP响应头，就可以解除浏览器端的跨域访问限制。</p><table><thead><tr><th>CORS响应头部</th><th>描述</th></tr></thead><tbody><tr><td>res.setHeader(‘Access-Control-Allow-Origin’,’*’)</td><td>设置允许访问该资源的外域URL</td></tr><tr><td>res.setHeader(‘Access-Control-Allow-Headers’,’X-Custom-Header’)</td><td>对额外的请求头进行声明</td></tr><tr><td>res.setHeader(‘Access-Control-Allow-Methods’,’*’)</td><td>设置实际请求所允许使用的HTTP方法</td></tr></tbody></table><h3 id="预检请求"><a href="#预检请求" class="headerlink" title="预检请求"></a>预检请求</h3><p>只要符合以下任何条件之一，都需要进行预检请求：</p><ol><li>请求方式为GET、POST、HEAD之外的请求Method类型</li><li>请求头中包含自定义头部字段</li><li>向服务器发送了application&#x2F;json格式的数据</li></ol><p>在浏览器与服务器正式通信之前，浏览器会先发送OPTION请求进行预检，以获知服务器是否允许该实际请求，所以这一次的OPTION请求称为“预检请求”。服务器成功响应预检请求后，才会发送真正的请求，并携带真实数据。</p><h3 id="JSONP接口"><a href="#JSONP接口" class="headerlink" title="JSONP接口"></a>JSONP接口</h3><p>浏览器通过<code>&lt;script&gt;</code>标签的src属性，请求服务器上的数据，同时，服务器返回一个函数的调用。这种请求数据的方式叫做JSONP</p><p>JSONP不属于真正的Ajax请求，没有使用XMLHttpRequest这个对象。JSONP仅支持GET请求，不支持POST、PUT、DELETE请求。</p><p>JSONP接口要声明在CORS接口之前</p><h1 id="操作MySQL"><a href="#操作MySQL" class="headerlink" title="操作MySQL"></a>操作MySQL</h1><ol><li>安装mysql2模块</li></ol>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mysql2</span><br></pre></td></tr></table></figure><ol start="2"><li><p>配置mysql模块</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql2&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> db = mysql.<span class="title function_">createPool</span>(&#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">    <span class="attr">database</span>: <span class="string">&#x27;my_db_01&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>测试mysql模块是否正常工作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.query(&#x27;SELECT 1&#x27;,(err,results)=&gt;&#123;</span><br><span class="line">if(err) return console.log(err.message)</span><br><span class="line">console.log(results)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h3 id="xxxxxxxxxx-import-create-from-‘zustand’​-导入核心方法import-mountStoreDevtool-from-‘simple-zustand-devtools’​-省略部分代码…​​-开发环境开启调试if-process-env-NODE-ENV-‘development’-mountStoreDevtool-‘channelStore’-useChannelStore-​​export-default-useChannelStorejavascript"><a href="#xxxxxxxxxx-import-create-from-‘zustand’​-导入核心方法import-mountStoreDevtool-from-‘simple-zustand-devtools’​-省略部分代码…​​-开发环境开启调试if-process-env-NODE-ENV-‘development’-mountStoreDevtool-‘channelStore’-useChannelStore-​​export-default-useChannelStorejavascript" class="headerlink" title="xxxxxxxxxx import create from ‘zustand’​&#x2F;&#x2F; 导入核心方法import { mountStoreDevtool } from ‘simple-zustand-devtools’​&#x2F;&#x2F; 省略部分代码…​​&#x2F;&#x2F; 开发环境开启调试if (process.env.NODE_ENV &#x3D;&#x3D;&#x3D; ‘development’) {  mountStoreDevtool(‘channelStore’, useChannelStore)}​​export default useChannelStorejavascript"></a>xxxxxxxxxx import create from ‘zustand’​&#x2F;&#x2F; 导入核心方法import { mountStoreDevtool } from ‘simple-zustand-devtools’​&#x2F;&#x2F; 省略部分代码…​​&#x2F;&#x2F; 开发环境开启调试if (process.env.NODE_ENV &#x3D;&#x3D;&#x3D; ‘development’) {  mountStoreDevtool(‘channelStore’, useChannelStore)}​​export default useChannelStorejavascript</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">username</span>:<span class="string">&#x27;spider-man&#x27;</span>, <span class="attr">password</span>:<span class="string">&#x27;pcc123&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;insert into users (username,password) values (?,?)&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr,[user.<span class="property">username</span>,user.<span class="property">password</span>],<span class="function">(<span class="params">err,results</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    <span class="comment">//insert into 的返回结果为对象,select 的结果为数组</span></span><br><span class="line">    <span class="keyword">if</span>(results.<span class="property">affectedRows</span> === <span class="number">1</span>) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据插入成功！&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//若对象的属性值与数据表的字段一一对应</span></span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;insert into users set ?&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, user, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据插入成功！&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">username</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">password</span>: <span class="string">&#x27;000123&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;update users set username=?,password=? where id=?&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, [user.<span class="property">username</span>, user.<span class="property">password</span>, user.<span class="property">id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    <span class="comment">//update 的返回结果为对象</span></span><br><span class="line">    <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据修改成功！&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//若对象的属性值与数据表的字段一一对应</span></span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;update users set ? where id=?&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, [user, user.<span class="property">id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    <span class="comment">//update 的返回结果为对象</span></span><br><span class="line">    <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据修改成功！&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;delete from users where id=?&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, <span class="number">5</span>, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    <span class="comment">//update 的返回结果为对象</span></span><br><span class="line">    <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据删除成功！&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="前后端的身份认证"><a href="#前后端的身份认证" class="headerlink" title="前后端的身份认证"></a>前后端的身份认证</h1></div><div class="story post-story"><h2 id="Session认证机制"><a href="#Session认证机制" class="headerlink" title="Session认证机制"></a>Session认证机制</h2><h3 id="http的无状态性"><a href="#http的无状态性" class="headerlink" title="http的无状态性"></a>http的无状态性</h3><p>客户端的每次HTTP请求都是独立的，服务器不会主动保留每次HTTP请求的状态</p><h3 id="突破http的无状态性"><a href="#突破http的无状态性" class="headerlink" title="突破http的无状态性"></a>突破http的无状态性</h3><p>设置cookie</p><h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><p>Cookie是存储在用户浏览器中一段不超过4KB的字符串。它由一个名称、一个值和其他几个用于控制Cookie有效期、安全性、使用范围的可选属性组成。</p><p>客户端第一次请求服务器时，服务器通过响应头的形式，向客户端发送一个身份认证的Cookie。当客户端每次请求服务器时，浏览器自动将身份认证相关的Cookie，通过请求头的形式发送给服务器，服务器即可验明客户端的身份。</p><h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express-session</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> session = <span class="built_in">require</span>(<span class="string">&#x27;express-session&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">session</span>(&#123;</span><br><span class="line">    <span class="attr">secret</span>: <span class="string">&#x27;keyboard cat&#x27;</span>,<span class="comment">//可以为任意字符串</span></span><br><span class="line">    <span class="attr">resave</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">saveUninitialized</span>: <span class="literal">true</span></span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="JWT认证机制"><a href="#JWT认证机制" class="headerlink" title="JWT认证机制"></a>JWT认证机制</h2><p>session不支持跨域访问，当前端请求后端接口不跨域时，推荐使用session。当前端请求后端接口跨域时，推荐使用JWT（JSON Web Token)</p><h3 id="JWT组成成分"><a href="#JWT组成成分" class="headerlink" title="JWT组成成分"></a>JWT组成成分</h3><p>Header.Payload.Signature</p><ul><li>Payload是真正的用户信息，是用户信息经过加密后生成的字符串</li><li>Header和Signature是安全性相关的部分，只是为了保证Token的安全性</li></ul><h3 id="JWT使用方式"><a href="#JWT使用方式" class="headerlink" title="JWT使用方式"></a>JWT使用方式</h3><p>客户端收到服务器返回的JWT后，通常将它存储在localStorage和sessionStorage中</p><p>客户端把JWT放在HTTP请求头的Authorization字段中，此后每次通信都要带上这个JWT的字符串，格式如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Authorization: Bear &lt;token&gt;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="安装及使用"><a href="#安装及使用" class="headerlink" title="安装及使用"></a>安装及使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jsonwebtoken express-jwt</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.导入用于生成JWT字符串的包</span></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>)</span><br><span class="line"><span class="comment">// 2.导入将JWT字符串还原成JSON对象的包</span></span><br><span class="line"><span class="keyword">const</span> &#123;expressjwt&#125; = <span class="built_in">require</span>(<span class="string">&#x27;express-jwt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//错误级别的中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//token解析失败</span></span><br><span class="line">    <span class="keyword">if</span> (err.<span class="property">name</span> === <span class="string">&quot;UnauthorizedError&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">401</span>,</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&quot;无效的token&quot;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">        <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&quot;服务端错误&quot;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//.unless(&#123;&#125;)用来指定哪一些接口不需要访问权限，以下匹配/api/开头的路径</span></span><br><span class="line"><span class="keyword">const</span> secretKey = <span class="string">&#x27;Sherlock Holmes ^_^&#x27;</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">expressjwt</span>(&#123;<span class="attr">secret</span>:secretKey,<span class="attr">algorithms</span>:[<span class="string">&#x27;HS256&#x27;</span>]&#125;).<span class="title function_">unless</span>(&#123;<span class="attr">path</span>:[<span class="regexp">/^\/api\//</span>]&#125;))</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//登录获取token</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/api/login&#x27;</span>,<span class="keyword">function</span>(<span class="params">req,res</span>)&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">        <span class="attr">status</span>:<span class="number">200</span>,</span><br><span class="line">        <span class="attr">message</span>:<span class="string">&#x27;登录成功！&#x27;</span>,</span><br><span class="line">        <span class="comment">//参数1：用户的信息对象，参数2：加密的密钥，参数3：配置对象：可以配置当前token的有效期</span></span><br><span class="line">        <span class="attr">token</span>:jwt.<span class="title function_">sign</span>(&#123;<span class="attr">username</span>:userinfo.<span class="property">username</span>&#125;,secretKey,&#123;<span class="attr">expiresIn</span>:<span class="string">&#x27;30s&#x27;</span>&#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/admin/getinfo&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">        <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&quot;获取用户信息成功!&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: req.<span class="property">auth</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="密码加密"><a href="#密码加密" class="headerlink" title="密码加密"></a>密码加密</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i bcryptjs</span><br></pre></td></tr></table></figure><p>加密存储密码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var bcrypt = require(&#x27;bcryptjs&#x27;);</span><br><span class="line">//生成随机盐</span><br><span class="line">var salt = bcrypt.genSaltSync(10);</span><br><span class="line">//生成加密密码</span><br><span class="line">var hash = bcrypt.hashSync(&quot;B4c0/\/&quot;, salt);</span><br><span class="line">// 存入数据库</span><br></pre></td></tr></table></figure><p>检测密码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 从数据库中获取加密密码</span><br><span class="line">bcrypt.compareSync(&quot;B4c0/\/&quot;, hash); // true</span><br><span class="line">bcrypt.compareSync(&quot;not_bacon&quot;, hash); // false</span><br></pre></td></tr></table></figure><p>自动生成随机盐和哈希值:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// bcrypt.hashSync(明文密码，随机盐的长度)</span><br><span class="line">var hash = bcrypt.hashSync(&#x27;bacon&#x27;, 8);</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;fs文件系统&quot;&gt;&lt;a href=&quot;#fs文件系统&quot; class=&quot;headerlink&quot; title=&quot;fs文件系统&quot;&gt;&lt;/a&gt;fs文件系统&lt;/h1&gt;&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;读取文件内容&quot;&gt;&lt;a href=&quot;#读</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="node.js" scheme="http://example.com/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>设计模式</title>
    <link href="http://example.com/2024/10/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/2024/10/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</id>
    <published>2024-10-11T16:00:44.000Z</published>
    <updated>2024-12-21T03:15:22.704Z</updated>
    
    <content type="html"><![CDATA[<h1 id="设计模式的分类"><a href="#设计模式的分类" class="headerlink" title="设计模式的分类"></a>设计模式的分类</h1><table><thead><tr><th align="left">模式 &amp; 描述</th><th align="left">包括</th></tr></thead><tbody><tr><td align="left"><strong>创建型模式</strong> 这些设计模式提供了一种在创建对象的同时隐藏创建逻辑的方式，而不是使用 new 运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活。</td><td align="left">工厂模式（Factory Pattern）抽象工厂模式（Abstract Factory Pattern）单例模式（Singleton Pattern）建造者模式（Builder Pattern）原型模式（Prototype Pattern）</td></tr><tr><td align="left"><strong>结构型模式</strong> 这些模式关注对象之间的组合和关系，旨在解决如何构建灵活且可复用的类和对象结构。</td><td align="left">适配器模式（Adapter Pattern）桥接模式（Bridge Pattern）过滤器模式（Filter、Criteria Pattern）组合模式（Composite Pattern）装饰器模式（Decorator Pattern）外观模式（Facade Pattern）享元模式（Flyweight Pattern）代理模式（Proxy Pattern）</td></tr><tr><td align="left"><strong>行为型模式</strong> 这些模式关注对象之间的通信和交互，旨在解决对象之间的责任分配和算法的封装。</td><td align="left">责任链模式（Chain of Responsibility Pattern）命令模式（Command Pattern）解释器模式（Interpreter Pattern）迭代器模式（Iterator Pattern）中介者模式（Mediator Pattern）备忘录模式（Memento Pattern）观察者模式（Observer Pattern）状态模式（State Pattern）空对象模式（Null Object Pattern）策略模式（Strategy Pattern）模板模式（Template Pattern）访问者模式（Visitor Pattern）</td></tr></tbody></table><div class="story post-story"><h2 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h2><h3 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h3><h4 id="表现形式"><a href="#表现形式" class="headerlink" title="表现形式"></a>表现形式</h4><p>调用工厂函数返回新对象</p><h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><ol><li>Vue3-createApp：将全局改变Vue实例的行为，移到Vue实例上</li><li>axios-create：基于自定义配置新建实例</li></ol><h3 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h3><h4 id="表现形式-1"><a href="#表现形式-1" class="headerlink" title="表现形式"></a>表现形式</h4><p>整个系统只有一个单例对象</p><h4 id="使用场景-1"><a href="#使用场景-1" class="headerlink" title="使用场景"></a>使用场景</h4><p>vant中的toast和notify组件</p><p>vue中的use方法</p><h4 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h4><h4 id="表现形式-2"><a href="#表现形式-2" class="headerlink" title="表现形式"></a>表现形式</h4><p>在对象之间定义一个一对多的依赖，当一个对象状态改变的时候，所有依赖的对象都会自动收到通知</p><h4 id="使用场景-2"><a href="#使用场景-2" class="headerlink" title="使用场景"></a>使用场景</h4><p>addEventListener</p><p>vue中的watch</p><p>react中的useEffect</p><h3 id="发布订阅模式"><a href="#发布订阅模式" class="headerlink" title="发布订阅模式"></a>发布订阅模式</h3><h4 id="表现形式-3"><a href="#表现形式-3" class="headerlink" title="表现形式"></a>表现形式</h4><p>与观察者模式相似，有中间商进行发布订阅</p><h4 id="使用场景-3"><a href="#使用场景-3" class="headerlink" title="使用场景"></a>使用场景</h4><p>pubsub.js</p><p>vue的provide与inject</p><h3 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h3><h4 id="表现形式-4"><a href="#表现形式-4" class="headerlink" title="表现形式"></a>表现形式</h4><p>复制一个已经存在的实例来返回新的实例，而不是新建实例</p><h4 id="使用场景-4"><a href="#使用场景-4" class="headerlink" title="使用场景"></a>使用场景</h4><p>Object.create()</p><p>vue的数组方法重写</p><h3 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h3><h4 id="表现形式-5"><a href="#表现形式-5" class="headerlink" title="表现形式"></a>表现形式</h4><p>为一个对象提供一个代用品或占位符，以便控制对它的访问</p><h4 id="使用场景-5"><a href="#使用场景-5" class="headerlink" title="使用场景"></a>使用场景</h4><p>缓存代理：第一次查询的数据通过接口获取，重复查询通过缓存获取</p><h3 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h3><h4 id="表现形式-6"><a href="#表现形式-6" class="headerlink" title="表现形式"></a>表现形式</h4><p>遍历容器中的每一个元素</p><h4 id="使用场景-6"><a href="#使用场景-6" class="headerlink" title="使用场景"></a>使用场景</h4><p>for in 和 for of</p><blockquote><p>区别：</p><ul><li>for in 遍历的是索引，继承而来的也可以遍历</li><li>for of 遍历的是值，继承而来的无法遍历，无法遍历对象</li></ul></blockquote><p>可迭代对象：实现迭代协议</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;设计模式的分类&quot;&gt;&lt;a href=&quot;#设计模式的分类&quot; class=&quot;headerlink&quot; title=&quot;设计模式的分类&quot;&gt;&lt;/a&gt;设计模式的分类&lt;/h1&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;模式 &amp;amp; 描述&lt;/th</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="面试八股" scheme="http://example.com/tags/%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1/"/>
    
  </entry>
  
  <entry>
    <title>linux</title>
    <link href="http://example.com/2024/10/11/linux/"/>
    <id>http://example.com/2024/10/11/linux/</id>
    <published>2024-10-11T15:25:06.000Z</published>
    <updated>2024-10-14T08:47:45.124Z</updated>
    
    <content type="html"><![CDATA[<h1 id="linux常用命令"><a href="#linux常用命令" class="headerlink" title="linux常用命令"></a>linux常用命令</h1><div class="story post-story"><h2 id="处理目录的常用命令"><a href="#处理目录的常用命令" class="headerlink" title="处理目录的常用命令"></a>处理目录的常用命令</h2><ul><li>ls（英文全拼：list files）: 列出目录及文件名</li><li>cd（英文全拼：change directory）：切换目录</li><li>pwd（英文全拼：print work directory）：显示目前的目录</li><li>mkdir（英文全拼：make directory）：创建一个新的目录</li><li>rmdir（英文全拼：remove directory）：删除一个空的目录</li><li>cp（英文全拼：copy file）: 复制文件或目录</li><li>rm（英文全拼：remove）: 删除文件或目录</li><li>mv（英文全拼：move file）: 移动文件与目录，或修改文件与目录的名称</li></ul><p>可以使用 *man [命令]*来查看各个命令的使用文档，如 ：man cp。</p><h3 id="ls-列出目录"><a href="#ls-列出目录" class="headerlink" title="ls (列出目录)"></a>ls (列出目录)</h3><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# ls [-aAdfFhilnrRSt] 目录名称</span><br><span class="line">[root@www ~]# ls [--color=&#123;never,auto,always&#125;] 目录名称</span><br><span class="line">[root@www ~]# ls [--full-time] 目录名称</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li>-a ：全部的文件，连同隐藏文件( 开头为 . 的文件) 一起列出来(常用)</li><li>-d ：仅列出目录本身，而不是列出目录内的文件数据(常用)</li><li>-l ：长数据串列出，包含文件的属性与权限等等数据；(常用)</li></ul><p>将目录下的所有文件列出来(含属性与隐藏档)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# ls -al ~</span><br></pre></td></tr></table></figure><p>~为根目录</p><h3 id="cd-切换目录"><a href="#cd-切换目录" class="headerlink" title="cd (切换目录)"></a>cd (切换目录)</h3><p>cd是Change Directory的缩写，这是用来变换工作目录的命令。</p><h3 id="pwd-显示目前所在的目录"><a href="#pwd-显示目前所在的目录" class="headerlink" title="pwd (显示目前所在的目录)"></a>pwd (显示目前所在的目录)</h3><p>pwd 是 <strong>Print Working Directory</strong> 的缩写，也就是显示目前所在目录的命令。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# pwd [-P]</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li><strong>-P</strong> ：显示出确实的路径，而非使用链接 (link) 路径。</li></ul><h3 id="mkdir-创建新目录"><a href="#mkdir-创建新目录" class="headerlink" title="mkdir (创建新目录)"></a>mkdir (创建新目录)</h3><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir [-mp] 目录名称</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li>-m ：配置文件的权限喔！直接配置，不需要看默认权限 (umask) 的脸色～</li><li>-p ：帮助你直接将所需要的目录(包含上一级目录)递归创建起来！</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cd /tmp</span><br><span class="line">[root@www tmp]# mkdir test    &lt;==创建一名为 test 的新目录</span><br><span class="line">[root@www tmp]# mkdir test1/test2/test3/test4</span><br><span class="line">mkdir: cannot create directory `test1/test2/test3/test4&#x27;: </span><br><span class="line">No such file or directory       &lt;== 没办法直接创建此目录啊！</span><br><span class="line">[root@www tmp]# mkdir -p test1/test2/test3/test4</span><br></pre></td></tr></table></figure><p>加了这个 -p 的选项，可以自行帮你创建多层目录！</p><p>实例：创建权限为 <strong>rwx–x–x</strong> 的目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@www tmp]# mkdir -m 711 test2</span><br><span class="line">[root@www tmp]# ls -l</span><br><span class="line">drwxr-xr-x  3 root  root 4096 Jul 18 12:50 test</span><br><span class="line">drwxr-xr-x  3 root  root 4096 Jul 18 12:53 test1</span><br><span class="line">drwx--x--x  2 root  root 4096 Jul 18 12:54 test2</span><br></pre></td></tr></table></figure><p>上面的权限部分，如果没有加上 -m 来强制配置属性，系统会使用默认属性。</p><p>如果我们使用 -m ，如上例我们给予 -m 711 来给予新的目录 drwx–x–x 的权限。</p><h3 id="rmdir-删除空的目录"><a href="#rmdir-删除空的目录" class="headerlink" title="rmdir (删除空的目录)"></a>rmdir (删除空的目录)</h3><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmdir [-p] 目录名称</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li><strong>-p ：</strong>从该目录起，一次删除多级空目录</li></ul><p>删除 runoob 目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@www tmp]# rmdir runoob/</span><br></pre></td></tr></table></figure><p>将 mkdir 实例中创建的目录(&#x2F;tmp 底下)删除掉！</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@www tmp]# ls -l   &lt;==看看有多少目录存在？</span><br><span class="line">drwxr-xr-x  3 root  root 4096 Jul 18 12:50 test</span><br><span class="line">drwxr-xr-x  3 root  root 4096 Jul 18 12:53 test1</span><br><span class="line">drwx--x--x  2 root  root 4096 Jul 18 12:54 test2</span><br><span class="line">[root@www tmp]# rmdir test   &lt;==可直接删除掉，没问题</span><br><span class="line">[root@www tmp]# rmdir test1  &lt;==因为尚有内容，所以无法删除！</span><br><span class="line">rmdir: `test1&#x27;: Directory not empty</span><br><span class="line">[root@www tmp]# rmdir -p test1/test2/test3/test4</span><br><span class="line">[root@www tmp]# ls -l        &lt;==您看看，底下的输出中test与test1不见了！</span><br><span class="line">drwx--x--x  2 root  root 4096 Jul 18 12:54 test2</span><br></pre></td></tr></table></figure><p>利用 -p 这个选项，立刻就可以将 test1&#x2F;test2&#x2F;test3&#x2F;test4 一次删除。</p><p>要注意的是，这个 rmdir 仅能删除空的目录，可以使用 rm 命令来删除非空目录。</p><h3 id="cp-复制文件或目录"><a href="#cp-复制文件或目录" class="headerlink" title="cp (复制文件或目录)"></a>cp (复制文件或目录)</h3><p>cp 即拷贝文件和目录。</p><p>语法:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cp [-adfilprsu] 来源档(source) 目标档(destination)</span><br><span class="line">[root@www ~]# cp [options] source1 source2 source3 .... directory</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li><strong>-a：</strong>相当於 -pdr 的意思，至於 pdr 请参考下列说明；(常用)</li><li><strong>-d：</strong>若来源档为链接档的属性(link file)，则复制链接档属性而非文件本身；</li><li><strong>-f：</strong>为强制(force)的意思，若目标文件已经存在且无法开启，则移除后再尝试一次；</li><li><strong>-i：</strong>若目标档(destination)已经存在时，在覆盖时会先询问动作的进行(常用)</li><li><strong>-l：</strong>进行硬式链接(hard link)的链接档创建，而非复制文件本身；</li><li><strong>-p：</strong>连同文件的属性一起复制过去，而非使用默认属性(备份常用)；</li><li><strong>-r：</strong>递归持续复制，用于目录的复制行为；(常用)</li><li><strong>-s：</strong>复制成为符号链接档 (symbolic link)，亦即『捷径』文件；</li><li><strong>-u：</strong>若 destination 比 source 旧才升级 destination ！</li></ul><p>用 root 身份，将 root 目录下的 .bashrc 复制到 &#x2F;tmp 下，并命名为 bashrc</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cp ~/.bashrc /tmp/bashrc</span><br><span class="line">[root@www ~]# cp -i ~/.bashrc /tmp/bashrc</span><br><span class="line">cp: overwrite `/tmp/bashrc&#x27;? n  &lt;==n不覆盖，y为覆盖</span><br></pre></td></tr></table></figure><h3 id="rm-移除文件或目录"><a href="#rm-移除文件或目录" class="headerlink" title="rm (移除文件或目录)"></a>rm (移除文件或目录)</h3><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm [-fir] 文件或目录</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li>-f ：就是 force 的意思，忽略不存在的文件，不会出现警告信息；</li><li>-i ：互动模式，在删除前会询问使用者是否动作</li><li>-r ：递归删除啊！最常用在目录的删除了！这是非常危险的选项！！！</li></ul><h3 id="mv-移动文件与目录，或修改名称"><a href="#mv-移动文件与目录，或修改名称" class="headerlink" title="mv (移动文件与目录，或修改名称)"></a>mv (移动文件与目录，或修改名称)</h3><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# mv [-fiu] source destination</span><br><span class="line">[root@www ~]# mv [options] source1 source2 source3 .... directory</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li>-f ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；</li><li>-i ：若目标文件 (destination) 已经存在时，就会询问是否覆盖！</li><li>-u ：若目标文件已经存在，且 source 比较新，才会升级 (update)</li></ul><p>复制一文件，创建一目录，将文件移动到目录中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cd /tmp</span><br><span class="line">[root@www tmp]# cp ~/.bashrc bashrc</span><br><span class="line">[root@www tmp]# mkdir mvtest</span><br><span class="line">[root@www tmp]# mv bashrc mvtest</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="查看文件"><a href="#查看文件" class="headerlink" title="查看文件"></a>查看文件</h2><h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h3><p>由第一行开始显示文件内容</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat [-AbEnTv]</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li>-A ：相当於 -vET 的整合选项，可列出一些特殊字符而不是空白而已；</li><li>-b ：列出行号，仅针对非空白行做行号显示，空白行不标行号！</li><li>-E ：将结尾的断行字节 $ 显示出来；</li><li>-n ：列印出行号，连同空白行也会有行号，与 -b 的选项不同；</li><li>-T ：将 [tab] 按键以 ^I 显示出来；</li><li>-v ：列出一些看不出来的特殊字符</li></ul><p>检看 &#x2F;etc&#x2F;issue 这个文件的内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cat /etc/issue</span><br><span class="line">CentOS release 6.4 (Final)</span><br><span class="line">Kernel \r on an \m</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h2><h3 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h3><p>touch命令用于修改文件或者目录的时间属性，包括存取时间和更改时间。若文件不存在，系统会建立一个新的文件。</p><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch [-acfm][-d&lt;日期时间&gt;][-r&lt;参考文件或目录&gt;] [-t&lt;日期时间&gt;][--help][--version][文件或目录…]</span><br></pre></td></tr></table></figure><ul><li><strong>参数说明</strong>：</li><li>a 改变档案的读取时间记录。</li><li>m 改变档案的修改时间记录。</li><li>c 假如目的档案不存在，不会建立新的档案。与 –no-create 的效果一样。</li><li>f 不使用，是为了与其他 unix 系统的相容性而保留。</li><li>r 使用参考档的时间记录，与 –file 的效果一样。</li><li>d 设定时间与日期，可以使用各种不同的格式。</li><li>t 设定档案的时间记录，格式与 date 指令相同。</li><li>–no-create 不会建立新档案。</li><li>–help 列出指令格式。</li><li>–version 列出版本讯息。</li></ul></div><div class="story post-story"><h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><p><img src="/../images/vim.gif" class="lazyload" data-srcset="/../images/vim.gif" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;linux常用命令&quot;&gt;&lt;a href=&quot;#linux常用命令&quot; class=&quot;headerlink&quot; title=&quot;linux常用命令&quot;&gt;&lt;/a&gt;linux常用命令&lt;/h1&gt;&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;处理目录的常用</summary>
      
    
    
    
    
    <category term="linux" scheme="http://example.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>vue3-rabbit小兔鲜电商项目</title>
    <link href="http://example.com/2024/10/01/vue3-rabbit%E5%B0%8F%E5%85%94%E9%B2%9C%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/"/>
    <id>http://example.com/2024/10/01/vue3-rabbit%E5%B0%8F%E5%85%94%E9%B2%9C%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/</id>
    <published>2024-10-01T14:48:11.000Z</published>
    <updated>2025-04-08T09:37:01.063Z</updated>
    
    <content type="html"><![CDATA[<h1 id="创建项目并整理目录"><a href="#创建项目并整理目录" class="headerlink" title="创建项目并整理目录"></a>创建项目并整理目录</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init vue@latest</span><br></pre></td></tr></table></figure><div class="story post-story"><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><table><thead><tr><th>文件夹</th><th>作用</th></tr></thead><tbody><tr><td>apis</td><td>接口</td></tr><tr><td>assets</td><td>静态资源</td></tr><tr><td>components</td><td>通用组件</td></tr><tr><td>composables</td><td>组合函数</td></tr><tr><td>directives</td><td>全局指令</td></tr><tr><td>router</td><td>路由Router</td></tr><tr><td>stores</td><td>Pinia仓库</td></tr><tr><td>styles</td><td>全局样式文件夹</td></tr><tr><td>utils</td><td>工具函数</td></tr><tr><td>views</td><td>页面级组件</td></tr></tbody></table><h1 id="jsconfig-json配置别名路径"><a href="#jsconfig-json配置别名路径" class="headerlink" title="jsconfig.json配置别名路径"></a>jsconfig.json配置别名路径</h1><h3 id="1-安装-Path-Intellisense-插件"><a href="#1-安装-Path-Intellisense-插件" class="headerlink" title="1. 安装 Path Intellisense 插件"></a>1. 安装 <code>Path Intellisense</code> 插件</h3><p>安装一个名为 <code>Path Intellisense</code> 的插件，它可以帮助你在输入路径时自动补全。</p><h3 id="2-配置-jsconfig-json-或-tsconfig-json"><a href="#2-配置-jsconfig-json-或-tsconfig-json" class="headerlink" title="2. 配置 jsconfig.json 或 tsconfig.json"></a>2. 配置 <code>jsconfig.json</code> 或 <code>tsconfig.json</code></h3><p>为了让 VSCode 能够识别 <code>@</code> 作为 <code>src</code> 目录的别名，你需要在项目根目录下创建一个 <code>jsconfig.json</code>（适用于 JavaScript 项目）或 <code>tsconfig.json</code>（适用于 TypeScript 项目）文件。</p><h4 id="对于-JavaScript-项目-jsconfig-json"><a href="#对于-JavaScript-项目-jsconfig-json" class="headerlink" title="对于 JavaScript 项目 (jsconfig.json):"></a>对于 JavaScript 项目 (<code>jsconfig.json</code>):</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;node_modules&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="对于-TypeScript-项目-tsconfig-json"><a href="#对于-TypeScript-项目-tsconfig-json" class="headerlink" title="对于 TypeScript 项目 (tsconfig.json):"></a>对于 TypeScript 项目 (<code>tsconfig.json</code>):</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;node_modules&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="3-配置-Path-Intellisense"><a href="#3-配置-Path-Intellisense" class="headerlink" title="3. 配置 Path Intellisense"></a>3. 配置 <code>Path Intellisense</code></h3><p>为了让 <code>Path Intellisense</code> 插件能够识别 <code>@</code> 别名，需要在 VSCode 的设置中进行配置。</p><ul><li>打开 VSCode 的设置（<code>Ctrl+,</code> 或通过菜单 <code>文件 &gt; 首选项 &gt; 设置</code>）。</li><li>搜索 <code>Path Intellisense</code>。</li><li>找到 <code>Path Intellisense: Mappings</code>，点击 <code>编辑 in settings.json</code>。</li><li>在 <code>settings.json</code> 中添加以下配置：</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;path-intellisense.mappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/src&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>完成上述配置后，重启 VSCode 以确保所有配置生效。</p><h1 id="定制elementPlus主题"><a href="#定制elementPlus主题" class="headerlink" title="定制elementPlus主题"></a>定制elementPlus主题</h1></div><div class="story post-story"><h2 id="安装sass"><a href="#安装sass" class="headerlink" title="安装sass"></a>安装sass</h2><blockquote><p>基于vite的项目默认不支持css预处理器，需要开发者单独安装</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i sass -D</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="准备定制化的样式文件"><a href="#准备定制化的样式文件" class="headerlink" title="准备定制化的样式文件"></a>准备定制化的样式文件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 只需要重写你需要的即可 */</span></span><br><span class="line">@forward <span class="string">&#x27;element-plus/theme-chalk/src/common/var.scss&#x27;</span> <span class="title function_">with</span> (</span><br><span class="line">  <span class="attr">$colors</span>: (</span><br><span class="line">    <span class="string">&#x27;primary&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 主色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #27ba9b,</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">&#x27;success&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 成功色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #1dc779,</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">&#x27;warning&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 警告色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #ffb302,</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">&#x27;danger&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 危险色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #e26237,</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">&#x27;error&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 错误色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #cf4444,</span><br><span class="line">    ),</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="自动导入配置"><a href="#自动导入配置" class="headerlink" title="自动导入配置"></a>自动导入配置</h2><blockquote><p>这里自动导入需要深入到elementPlus的组件中，按照官方的配置文档来</p><ol><li>自动导入定制化样式文件进行样式覆盖</li><li>按需定制主题配置 （需要安装 unplugin-element-plus）</li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fileURLToPath, <span class="variable constant_">URL</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;node:url&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">vue</span>(),</span><br><span class="line">    <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="title class_">Components</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>(&#123;<span class="attr">importStyle</span>: <span class="string">&quot;sass&quot;</span>&#125;)],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: <span class="title function_">fileURLToPath</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;./src&#x27;</span>, <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">url</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">preprocessorOptions</span>: &#123;</span><br><span class="line">      <span class="attr">scss</span>: &#123;</span><br><span class="line">        <span class="comment">// 自动导入定制化样式文件进行样式覆盖</span></span><br><span class="line">        <span class="attr">additionalData</span>: <span class="string">`</span></span><br><span class="line"><span class="string">          @use &quot;@/styles/element/index.scss&quot; as *;</span></span><br><span class="line"><span class="string">        `</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="Error-Lens插件安装"><a href="#Error-Lens插件安装" class="headerlink" title="Error Lens插件安装"></a>Error Lens插件安装</h2><h1 id="scss变量自动导入"><a href="#scss变量自动导入" class="headerlink" title="scss变量自动导入"></a>scss变量自动导入</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//   <span class="attribute">src</span>/styles/<span class="selector-tag">var</span><span class="selector-class">.scss</span></span><br><span class="line">$xtxColor: <span class="number">#27ba9b</span>;</span><br><span class="line">$helpColor: <span class="number">#e26237</span>;</span><br><span class="line">$sucColor: <span class="number">#1dc779</span>;</span><br><span class="line">$warnColor: <span class="number">#ffb302</span>;</span><br><span class="line">$priceColor: <span class="number">#cf4444</span>;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">css<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    preprocessorOptions<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      scss<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="comment">// 自动导入scss文件</span></span><br><span class="line">        additionalData<span class="punctuation">:</span> `</span><br><span class="line">          @use <span class="string">&quot;@/styles/element/index.scss&quot;</span> as *;</span><br><span class="line">          @use <span class="string">&quot;@/styles/var.scss&quot;</span> as *;</span><br><span class="line">        `<span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="懒加载指令实现"><a href="#懒加载指令实现" class="headerlink" title="懒加载指令实现"></a>懒加载指令实现</h1></div><div class="story post-story"><h2 id="封装全局指令"><a href="#封装全局指令" class="headerlink" title="封装全局指令"></a>封装全局指令</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useIntersectionObserver &#125; <span class="keyword">from</span> <span class="string">&#x27;@vueuse/core&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> lazyPlugin = &#123;</span><br><span class="line">    <span class="title function_">install</span>(<span class="params">app</span>) &#123;</span><br><span class="line">        app.<span class="title function_">directive</span>(<span class="string">&#x27;img-lazy&#x27;</span>, &#123;</span><br><span class="line">            <span class="title function_">mounted</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">                <span class="comment">// el: 指令绑定的那个元素 img</span></span><br><span class="line">                <span class="comment">// binding: binding.value  指令等于号后面绑定的表达式的值  图片url</span></span><br><span class="line">                <span class="keyword">const</span> &#123; stop &#125; = <span class="title function_">useIntersectionObserver</span>(</span><br><span class="line">                    el,</span><br><span class="line">                    <span class="function">(<span class="params">[&#123; isIntersecting &#125;]</span>) =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (isIntersecting) &#123;</span><br><span class="line">                            el.<span class="property">src</span> = binding.<span class="property">value</span></span><br><span class="line">                            <span class="title function_">stop</span>()</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="注册全局指令"><a href="#注册全局指令" class="headerlink" title="注册全局指令"></a>注册全局指令</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局指令注册</span></span><br><span class="line"><span class="keyword">import</span> &#123; lazyPlugin &#125; <span class="keyword">from</span> <span class="string">&#x27;@/directives&#x27;</span></span><br><span class="line">app.<span class="title function_">use</span>(lazyPlugin)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="项目亮点"><a href="#项目亮点" class="headerlink" title="项目亮点"></a>项目亮点</h2><h5 id="路由缓存问题，即路由跳转时，页面没有更新"><a href="#路由缓存问题，即路由跳转时，页面没有更新" class="headerlink" title="路由缓存问题，即路由跳转时，页面没有更新"></a>路由缓存问题，即路由跳转时，页面没有更新</h5><p>什么是路由缓存问题：使用带有参数的路由时需要注意的是，当用户从／users／johnny 导航到／users／jolyne 时，相同的组件实例将被重复使用。因为两个路由都渲染同个组件，比起销毁再创建，复用则显得更加高效。不过，这也意味着组件的生命周期钩子不会被调用。</p><p>问题：一级分类的切换正好满足上面的条件，组件实例复用，导致分类数据无法更新</p><p>解决问题的思路：</p><ol><li>让组件实例不复用，强制销毁重建 。<br> 给router-view添加key属性</li><li>监听路由变化，变化之后执行数据更新操作。<br> 当router更新时重新发送页面请求 <code>onBeforeRouteUpdate((to)=&gt;&#123;getNavList(to.params.id)&#125;)</code></li></ol><h5 id="支付业务流程"><a href="#支付业务流程" class="headerlink" title="支付业务流程"></a>支付业务流程</h5><p><img src="/../images/20452763-915297011818974b.png" class="lazyload" data-srcset="/../images/20452763-915297011818974b.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="20452763-915297011818974b"></p><h5 id="定制路由滚动行为"><a href="#定制路由滚动行为" class="headerlink" title="定制路由滚动行为"></a>定制路由滚动行为</h5><p>当切换路由时，页面自动滚动到顶部，在router文件中进行配置</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  history: createWebHistory(<span class="keyword">import</span>.meta.env.BASE_URL),</span><br><span class="line">  routes: [],</span><br><span class="line">  <span class="comment">// 路由行为的配置项 切换路由时自动滚回顶部</span></span><br><span class="line">  scrollBehavior()&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      top:<span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="在路由页面，使用导航守卫，配置路由跳转前后的行为"><a href="#在路由页面，使用导航守卫，配置路由跳转前后的行为" class="headerlink" title="在路由页面，使用导航守卫，配置路由跳转前后的行为"></a>在路由页面，使用导航守卫，配置路由跳转前后的行为</h5><p>主要实现以下几点：<br> 1、配置页面跳转的loading动效<br> 2、切换路由时自动滚回页面顶部<br> 3、没有登录时，在地址栏输入url，不能直接跳转到相对应的页面<br> 4、页面标题随着meta进行变化</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElLoading</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/theme-chalk/el-loading.css&#x27;</span></span><br><span class="line"><span class="comment">// 跳转前</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="title class_">ElLoading</span>.<span class="title function_">service</span>(&#123;</span><br><span class="line">    <span class="attr">fullscreen</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&#x27;Loading...&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 跳转后</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> loadingInstance = <span class="title class_">ElLoading</span>.<span class="title function_">service</span>()</span><br><span class="line">    loadingInstance.<span class="title function_">close</span>()</span><br><span class="line">  &#125;,<span class="number">1000</span>)</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span> || <span class="string">&#x27;my project&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;创建项目并整理目录&quot;&gt;&lt;a href=&quot;#创建项目并整理目录&quot; class=&quot;headerlink&quot; title=&quot;创建项目并整理目录&quot;&gt;&lt;/a&gt;创建项目并整理目录&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td</summary>
      
    
    
    
    <category term="项目" scheme="http://example.com/categories/%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>2024-9-30</title>
    <link href="http://example.com/2024/09/30/2024-9-30/"/>
    <id>http://example.com/2024/09/30/2024-9-30/</id>
    <published>2024-09-30T12:56:07.000Z</published>
    <updated>2024-10-09T16:09:43.468Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="😀😀"><a href="#😀😀" class="headerlink" title="😀😀"></a>😀😀</h2><p><img src="/../images/30.jpg" class="lazyload" data-srcset="/../images/30.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="像动漫里的天空"></p><p><img src="/../images/31.jpg" class="lazyload" data-srcset="/../images/31.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p></div><div class="story post-story"><h2 id="发财了发财了！"><a href="#发财了发财了！" class="headerlink" title="发财了发财了！"></a>发财了发财了！</h2><p><img src="/../images/32.jpg" class="lazyload" data-srcset="/../images/32.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="研究生低保嘿嘿"></p><p><img src="/../images/33.jpg" class="lazyload" data-srcset="/../images/33.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="入学奖学金吼吼"></p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;😀😀&quot;&gt;&lt;a href=&quot;#😀😀&quot; class=&quot;headerlink&quot; title=&quot;😀😀&quot;&gt;&lt;/a&gt;😀😀&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/../images/30.jpg&quot; cla</summary>
      
    
    
    
    <category term="随笔" scheme="http://example.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>JavaScript</title>
    <link href="http://example.com/2024/09/28/JavaScript/"/>
    <id>http://example.com/2024/09/28/JavaScript/</id>
    <published>2024-09-28T03:21:13.000Z</published>
    <updated>2025-03-05T15:37:39.143Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="输入输出语句"><a href="#输入输出语句" class="headerlink" title="输入输出语句"></a>输入输出语句</h2><ul><li>prompt(info)</li><li>alert(msg)</li><li>console.log(msg)</li></ul></div><div class="story post-story"><h2 id="undefined与null"><a href="#undefined与null" class="headerlink" title="undefined与null"></a>undefined与null</h2><ul><li>undefined表示没有赋值，未定义数据类型</li><li>null表示值为空，空数据类型。如果一个变量里面确定存放的是对象，如果还没准备好对象，可以放一个null</li></ul></div><div class="story post-story"><h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><h3 id="隐式转换"><a href="#隐式转换" class="headerlink" title="隐式转换"></a>隐式转换</h3><ul><li><p>+号两边只要有一个是字符串，都会把另外一个转成字符串</p></li><li><p>-，*，&#x2F;，%：字符串转数字型后计算</p></li><li><p>+作为正号解析可以转换成数字型</p></li></ul><h3 id="显示转换"><a href="#显示转换" class="headerlink" title="显示转换"></a>显示转换</h3><ul><li><code>+|Number()|parseInt()|parseFloat()</code>:转换为数字型</li></ul></div><div class="story post-story"><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><table><thead><tr><th>方法&#x2F;属性</th><th>作用</th></tr></thead><tbody><tr><td>arr.length</td><td>获取数组长度</td></tr><tr><td>arr.at()</td><td>接收一个整数值并返回该索引对应的元素，允许正数和负数。负整数从数组中的最后一个元素开始倒数。</td></tr><tr><td>arr.concat()</td><td>合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组。可以用来拷贝数组</td></tr><tr><td>arr.every()</td><td>测试一个数组内的所有元素是否都能通过指定函数的测试。它返回一个布尔值。</td></tr><tr><td>arr.fill(element,i,j)</td><td>用一个固定值填充一个数组中从起始索引（默认为 <code>0</code>）到终止索引（默认为 <code>array.length</code>）内的全部元素。它返回修改后的数组。</td></tr><tr><td>arr.filter()</td><td>创建给定数组一部分的<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Shallow_copy">浅拷贝</a>，其包含通过所提供函数实现的测试的所有元素。</td></tr><tr><td>arr.find()</td><td>返回数组中满足提供的测试函数的第一个元素的值。否则返回 undefined。</td></tr><tr><td>arr.findIndex()</td><td>返回数组中满足提供的测试函数的第一个元素的索引。若没有找到对应元素则返回 -1。</td></tr><tr><td>arr.findLast()</td><td>反向迭代数组，并返回满足提供的测试函数的第一个元素的值。如果没有找到对应元素，则返回 undefined。</td></tr><tr><td>arr.findLastIndex()</td><td>反向迭代数组，并返回满足所提供的测试函数的第一个元素的索引。若没有找到对应元素，则返回 -1。</td></tr><tr><td>arr.flat(Infinity)</td><td>创建一个新的数组，并根据指定深度递归地将所有子数组元素拼接到新的数组中。</td></tr><tr><td>arr.forEach()</td><td>对数组的每个元素执行一次给定的函数。</td></tr><tr><td>arr.includes()</td><td>判断一个数组是否包含一个指定的值，根据情况，如果包含则返回 <code>true</code>，否则返回 <code>false</code>。</td></tr><tr><td>arr.indexOf()</td><td>返回数组中第一次出现给定元素的下标，如果不存在则返回 -1。</td></tr><tr><td>arr.join()</td><td>将一个数组（或一个类数组对象）的所有元素连接成一个字符串并返回这个字符串，用逗号或指定的分隔符字符串分隔。</td></tr><tr><td>arr.findLastIndexOf(element,fromIndex)</td><td>返回数组中给定元素最后一次出现的索引，如果不存在则返回 -1。该方法从 fromIndex 开始向前搜索数组。</td></tr><tr><td>arr.map()</td><td>创建一个新数组，这个新数组由原数组中的每个元素都调用一次提供的函数后的返回值组成。</td></tr><tr><td>arr.pop()</td><td>数组中删除最后一个元素，并返回该元素的值。</td></tr><tr><td>arr.push()</td><td>将指定的元素添加到数组的末尾，并返回新的数组长度。</td></tr><tr><td>arr.reduce((pre,current)&#x3D;&gt;func,initial)</td><td>对数组中的每个元素按序执行一个提供的 reducer 函数，每一次运行 reducer 会将先前元素的计算结果作为参数传入，最后将其结果汇总为单个返回值。</td></tr><tr><td>arr.reverse()</td><td>就地反转数组中的元素，并返回同一数组的引用。</td></tr><tr><td>arr.toReversed()</td><td>不改变原始数组的情况下反转数组中的元素。</td></tr><tr><td>arr.shift()</td><td>从数组中删除第一个元素，并返回该元素的值。</td></tr><tr><td>arr.slice(start,end)</td><td>返回一个新的数组对象，这一对象是一个由 start 和 end 决定的原数组的浅拷贝（包括 start，不包括 end），其中 start 和 end 代表了数组元素的索引。原始数组不会被改变。</td></tr><tr><td>arr.some()</td><td>测试数组中是否至少有一个元素通过了由提供的函数实现的测试。如果在数组中找到一个元素使得提供的函数返回 true，则返回 true；否则返回 false</td></tr><tr><td>arr.sort((a,b)&#x3D;&gt;a-b)</td><td>就地对数组的元素进行排序，并返回对相同数组的引用。默认排序是将元素转换为字符串，然后按照它们的 UTF-16 码元值升序排序。</td></tr><tr><td>arr.toSorted()</td><td>对数组的元素进行排序，不改变原数组，并返回新的数组。</td></tr><tr><td>arr.splice(splice(start, deleteCount, item1,……))</td><td>就地移除或者替换已存在的元素和&#x2F;或添加新的元素。</td></tr><tr><td>arr.toSpliced()</td><td>创建一个删除和&#x2F;或替换部分内容而不改变原数组的新数组。</td></tr><tr><td>arr.unshift()</td><td>将指定元素添加到数组的开头，并返回数组的新长度。</td></tr></tbody></table></div><div class="story post-story"><h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><table><thead><tr><th>属性&#x2F;方法</th><th>描述</th></tr></thead><tbody><tr><td>Object.keys(obj)</td><td>获得所有的属性名（数组）</td></tr><tr><td>Object.values(obj)</td><td>获得所有的属性值（数组）</td></tr><tr><td>Object.assign(copyObj,obj)</td><td>拷贝对象（浅拷贝）,常用以配置对象合并</td></tr><tr><td>Object.entries(obj)</td><td>返回对象的所有可枚举属性[key,value]数组</td></tr><tr><td>for(let key in obj)  obj[key]</td><td>遍历对象</td></tr><tr><td>Math.random()</td><td>生成0-1之间的随机数</td></tr><tr><td>Math.ceil()</td><td>向上取整</td></tr><tr><td>Math.floor()</td><td>向下取整</td></tr><tr><td>Math.max()</td><td>找最大值</td></tr><tr><td>Math.min()</td><td>找最小值</td></tr><tr><td>Math.pow()</td><td>幂运算</td></tr><tr><td>Math.abs()</td><td>绝对值</td></tr><tr><td>Math.sign()</td><td>获取符号</td></tr><tr><td>date.getfullYear()</td><td>以四位数字返回年份。</td></tr><tr><td>date.getMonth()</td><td>返回月份 (0 ~ 11)。</td></tr><tr><td>date.getDate()</td><td>返回一个月中的某一天 (1 ~ 31)。</td></tr><tr><td>date.getDay()</td><td>返回一周中的某一天 (0 ~ 6)。</td></tr><tr><td>date.getHours()</td><td>返回小时 (0 ~ 23)。</td></tr><tr><td>date.getMinutes()</td><td>返回分钟 (0 ~ 59)。</td></tr><tr><td>date.getSeconds()</td><td>返回秒数 (0 ~ 59)。</td></tr><tr><td>date.getTime()|+new Date()|Date.now()</td><td>获取时间戳</td></tr><tr><td>str.length</td><td>字符串的长度</td></tr><tr><td>str.concat(s)</td><td>连接两个或更多字符串，并返回新的字符串</td></tr><tr><td>str.endsWith(s[,检测位置索引号])</td><td>判断当前字符串是否是以指定的子字符串结尾的（区分大小写）</td></tr><tr><td>str.indexOf(s)</td><td>返回某个指定的字符串值在字符串中首次出现的位置</td></tr><tr><td>str.lastIndexOf(s)</td><td>从后向前搜索字符串，并从起始位置（0）开始计算返回字符串最后出现的位置。</td></tr><tr><td>str.includes(s[,检测位置索引号])</td><td>查找字符串中是否包含指定的子字符串</td></tr><tr><td>str.match(reg)</td><td>查找找到一个或多个正则表达式的匹配</td></tr><tr><td>str.split(‘分隔符’)</td><td>把字符串分割为字符串数组</td></tr><tr><td>str.substring(from,to)</td><td>提取字符串中两个指定的索引号[form,to)之间的字符</td></tr><tr><td>str.startsWith(s[,检测位置索引号])</td><td>查看字符串是否以指定的子字符串开头</td></tr><tr><td>str.toLowerCase()</td><td>把字符串转换为小写</td></tr><tr><td>str.toUpperCase()</td><td>把字符串转换为大写</td></tr><tr><td>str.substr(startIndex,n)</td><td>从起始索引号提取字符串中指定数目的字符。</td></tr><tr><td>str.replace()</td><td>在字符串中查找匹配的子串，并替换与正则表达式匹配的子串</td></tr><tr><td>str.replaceAll()</td><td>在字符串中查找匹配的子串，并替换与正则表达式匹配的所有子串</td></tr><tr><td>str.search()</td><td>查找与正则表达式相匹配的值,返回匹配的起始位置</td></tr><tr><td>str.trim()</td><td>去除字符串两边的空白</td></tr><tr><td>Number.EPSILON</td><td>JavaScript能表示的最小精度数</td></tr><tr><td>Number.isFinite()</td><td>检测是否为有限数</td></tr><tr><td>Number.isNaN()</td><td>检测是否为NaN</td></tr><tr><td>Number.parseInt()</td><td>转化为整数</td></tr><tr><td>Number.parseFloat()</td><td>转化为浮点数</td></tr><tr><td>Number.isInteger()</td><td>判断是否为整数</td></tr></tbody></table></div><div class="story post-story"><h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><h3 id="定义正则表达式"><a href="#定义正则表达式" class="headerlink" title="定义正则表达式"></a>定义正则表达式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/表达式/</span>修饰符</span><br></pre></td></tr></table></figure><h4 id="匹配字符"><a href="#匹配字符" class="headerlink" title="匹配字符"></a>匹配字符</h4><table><thead><tr><th>字符</th><th>描述</th></tr></thead><tbody><tr><td>.</td><td>匹配任意字符，除了\n、\r</td></tr><tr><td>abc</td><td>匹配对应的字符串</td></tr><tr><td>[abc]</td><td>查找方括号之间的任何字符</td></tr><tr><td>[^abc]</td><td>匹配除了括号内的字符以外的任意一个字符</td></tr><tr><td>[0-9]</td><td>查找任何从 0 至 9 的数字</td></tr><tr><td>(x|y)</td><td>查找任何以|分隔的选项，匹配不同模式</td></tr><tr><td>\d</td><td>查找数字</td></tr><tr><td>\s</td><td>查找空白字符,等于[\t\r\n\v\f]</td></tr><tr><td>\w</td><td>匹配数字、字母、下划线，等价于[0-9a-zA-Z_]</td></tr><tr><td>\D  \S  \W</td><td>与对应的小写形式相反</td></tr><tr><td>\b</td><td>匹配单词边界</td></tr><tr><td>\uxxxx</td><td>查找以十六进制数 xxxx 规定的 Unicode 字符</td></tr><tr><td>^</td><td>匹配字符串的开头</td></tr><tr><td>$</td><td>匹配字符串的结尾</td></tr></tbody></table><h4 id="量词"><a href="#量词" class="headerlink" title="量词"></a>量词</h4><ul><li><code>*</code>：匹配前面的模式零次或一次或多次。</li><li><code>+</code>：匹配前面的模式一次或多次。</li><li><code>?</code>：匹配前面的模式零次或一次。</li><li><code>&#123;n&#125;</code>：匹配前面的模式恰好 n 次。</li><li><code>&#123;n,&#125;</code>：匹配前面的模式至少 n 次。</li><li><code>&#123;n,m&#125;</code>：匹配前面的模式至少 n 次且不超过 m 次。</li></ul><h4 id="分组和捕获"><a href="#分组和捕获" class="headerlink" title="分组和捕获"></a>分组和捕获</h4><ul><li><code>( )</code>：用于分组和捕获子表达式。</li><li><code>(?: )</code>：用于分组但不捕获子表达式。</li></ul><h4 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h4><ul><li><p><code>i</code>:执行对大小写不敏感的匹配。</p></li><li><p><code>g</code>:全局匹配</p></li><li><p><code>m</code>:多行匹配</p></li></ul><h3 id="匹配"><a href="#匹配" class="headerlink" title="匹配"></a>匹配</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/she/</span></span><br><span class="line">string str = <span class="string">&#x27;sherlock-holmes&#x27;</span></span><br><span class="line">reg.<span class="title function_">test</span>(str)<span class="comment">//返回true|false</span></span><br><span class="line">reg.<span class="title function_">exec</span>(str)<span class="comment">//返回数组|null</span></span><br><span class="line">str.<span class="title function_">replace</span>(reg,<span class="string">&#x27;substitute&#x27;</span>)</span><br><span class="line">str.<span class="title function_">search</span>(reg)</span><br></pre></td></tr></table></figure><ul><li><p><strong>test()</strong> 方法用于检测一个字符串是否匹配某个模式。</p></li><li><p><strong>exec()</strong> 方法用于检索字符串中的正则表达式的匹配。</p></li><li><p><strong>search()</strong> 方法用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串，并返回子串的起始位置。</p></li><li><p><strong>replace()</strong> 方法用于在字符串中用一些字符串替换另一些字符串，或替换一个与正则表达式匹配的子串。</p></li></ul></div><div class="story post-story"><h2 id="DOM对象"><a href="#DOM对象" class="headerlink" title="DOM对象"></a>DOM对象</h2><h3 id="document对象"><a href="#document对象" class="headerlink" title="document对象"></a>document对象</h3><table><thead><tr><th>属性&#x2F;方法</th><th>描述</th></tr></thead><tbody><tr><td>document.querySelector()</td><td>返回文档中匹配指定的CSS选择器的第一元素</td></tr><tr><td>document.querySelectorAll()</td><td>返回文档中匹配的CSS选择器的所有元素节点列表</td></tr><tr><td>document.write()</td><td>向文档写 HTML 表达式 或 JavaScript 代码</td></tr><tr><td>document.createElement()</td><td>创建元素节点。</td></tr><tr><td>document.body</td><td>返回文档的body元素</td></tr><tr><td>document.documentElement</td><td>返回文档的根节点</td></tr><tr><td>document.title</td><td>返回当前文档的标题</td></tr></tbody></table><h3 id="DOM元素对象"><a href="#DOM元素对象" class="headerlink" title="DOM元素对象"></a>DOM元素对象</h3><table><thead><tr><th>属性&#x2F;方法</th><th align="left">描述</th></tr></thead><tbody><tr><td>element.innerHTML</td><td align="left">设置或者返回元素的内容（解析标签）。</td></tr><tr><td>element.innerText</td><td align="left">设置或者返回元素的文字内容（不解析标签）。</td></tr><tr><td>element.style</td><td align="left">设置或返回元素的样式属性。</td></tr><tr><td>element.src|title|value|type</td><td align="left">设置或返回元素的源|标题|值|类型。</td></tr><tr><td>element.className</td><td align="left">设置或返回元素的类名。</td></tr><tr><td>element.classList.add()|remove()|toggle()</td><td align="left">追加类名|移除类名|切换类名</td></tr><tr><td>element.dataset</td><td align="left">获取data-属性</td></tr><tr><td>element.addEventListener(‘事件类型’,Func，是否使用捕获机制)|on事件</td><td align="left">添加事件</td></tr><tr><td>element.removeEventListener(‘事件类型’,Func，是否使用捕获机制)</td><td align="left">解绑事件（匿名函数无法解绑）</td></tr><tr><td>element.parentNode</td><td align="left">返回元素的父节点</td></tr><tr><td>element.children</td><td align="left">返回元素的子元素的集合</td></tr><tr><td>element.nextElementSibling</td><td align="left">返回元素的下一个兄弟节点</td></tr><tr><td>element.previousElementSibling</td><td align="left">返回元素的上一个兄弟节点</td></tr><tr><td>element.appendChild(ele)</td><td align="left">为元素添加一个新的子元素</td></tr><tr><td>element.insertBefore(insertEle,ele)</td><td align="left">现有的子元素之前插入一个新的子元素</td></tr><tr><td>element.cloneNode(false|true)</td><td align="left">克隆某个元素,参数为true时，同时克隆子元素</td></tr><tr><td>element.removeChild(ele)</td><td align="left">删除一个子元素</td></tr></tbody></table><h3 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h3><table><thead><tr><th>属性&#x2F;方法</th><th>描述</th></tr></thead><tbody><tr><td>e.target</td><td>返回触发此事件的元素（事件的目标节点）。</td></tr><tr><td>e.type</td><td>返回当前 Event 对象表示的事件的名称。</td></tr><tr><td>e.currentTarget</td><td>返回其事件监听器触发该事件的元素。</td></tr><tr><td>e.timeStamp</td><td>返回事件生成的日期和时间。</td></tr><tr><td>e.preventDefault()</td><td>通知浏览器不要执行与事件关联的默认动作。</td></tr><tr><td>e.stopPropagation()</td><td>阻止冒泡。</td></tr></tbody></table></div><div class="story post-story"><h2 id="BOM对象"><a href="#BOM对象" class="headerlink" title="BOM对象"></a>BOM对象</h2><ul><li>window对象是一个全局对象，也可以说是JavaScript中的顶级对象</li><li>document、alert()、console都是window的属性和方法</li><li>所有通过var定义在全局作用域中的变量、函数都会变成window对象的属性和方法</li><li>window对象下的属性和方法调用时可以省略window</li></ul><h3 id="location对象"><a href="#location对象" class="headerlink" title="location对象"></a>location对象</h3><table><thead><tr><th>属性&#x2F;方法</th><th>描述</th></tr></thead><tbody><tr><td>location.href</td><td>返回完整的URL,可以用来跳转页面</td></tr><tr><td>location.hostname</td><td>返回URL的主机名</td></tr><tr><td>location.port</td><td>返回一个URL服务器使用的端口号</td></tr><tr><td>location.protocol</td><td>返回一个URL协议</td></tr><tr><td>location.search</td><td>返回一个URL的查询部分(?后部分)</td></tr><tr><td>location.hash</td><td>返回一个URL的锚部分(#后部分)</td></tr><tr><td>location.reload(true)</td><td>刷新页面</td></tr></tbody></table><h3 id="navigator对象"><a href="#navigator对象" class="headerlink" title="navigator对象"></a>navigator对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">!(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> userAgent = navigator.<span class="property">userAgent</span></span><br><span class="line">    <span class="keyword">const</span> android = userAgent.<span class="title function_">match</span>(<span class="regexp">/(Android);?[\s\/]+([\d.]+)?/</span>)</span><br><span class="line">    <span class="keyword">const</span> iphone = userAgent.<span class="title function_">match</span>(<span class="regexp">/(iPhone\sOS)\s([\d_]+)/</span>)</span><br><span class="line">    <span class="keyword">if</span>(android||iphone)&#123;</span><br><span class="line">        location.<span class="property">href</span> = <span class="string">&#x27;http://m.itcast.cn&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><h3 id="history对象"><a href="#history对象" class="headerlink" title="history对象"></a>history对象</h3><table><thead><tr><th>属性方法</th><th>作用</th></tr></thead><tbody><tr><td>history.length</td><td>返回历史列表中的网址数</td></tr><tr><td>history.back()</td><td>加载 history 列表中的前一个 URL</td></tr><tr><td>history.forword()</td><td>加载 history 列表中的下一个 URL</td></tr><tr><td>history.go(n)</td><td>加载 history 列表中的某个具体页面,正数前进、负数后退</td></tr></tbody></table><h3 id="localStorage对象"><a href="#localStorage对象" class="headerlink" title="localStorage对象"></a>localStorage对象</h3><table><thead><tr><th>属性&#x2F;方法</th><th>描述</th></tr></thead><tbody><tr><td>localStorage.length</td><td>返回存储对象中包含多少条数据</td></tr><tr><td>localStorage.key(n)</td><td>返回存储对象中第 <em>n</em> 个键的名称</td></tr><tr><td>localStorage.getItem(keyname)</td><td>返回指定键的值</td></tr><tr><td>localStorage.setItem(keyname,value)</td><td>添加键和值，如果对应的值存在，则更新该键对应的值</td></tr><tr><td>localStorage.removeItem(keyname)</td><td>移除键</td></tr><tr><td>localStorage.clear()</td><td>清除存储对象中所有的键</td></tr></tbody></table><ul><li>JSON.stringfy(复杂数据类型)</li><li>JSON.parse(json数据)</li></ul></div><div class="story post-story"><h2 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h2><ul><li>const timer &#x3D; setInterval(function(){},ms)</li><li>clearInterval(timer)</li><li>const timer &#x3D; setTimeout(Func,ms)</li><li>clearTimeout(timer)</li></ul></div><div class="story post-story"><h2 id="Base64转码"><a href="#Base64转码" class="headerlink" title="Base64转码"></a>Base64转码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fileInput&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;downloadButton&quot;</span> <span class="attr">disabled</span>&gt;</span>Download Decoded File<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> base64String = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1. 将文件转换为Base64</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;fileInput&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="title function_">async</span> (event) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> file = event.<span class="property">target</span>.<span class="property">files</span>[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (file) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 将 FileReader 包装为 Promise</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title function_">readFile</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="property">onloadstart</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;开始上传&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        base64String = e.<span class="property">target</span>.<span class="property">result</span>.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>]; <span class="comment">// 获取纯Base64部分</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Base64:&#x27;</span>, base64String);</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">resolve</span>(); <span class="comment">// 文件读取完成，解析 Promise</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;文件读取失败&#x27;</span>)); <span class="comment">// 文件读取失败，拒绝 Promise</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="title function_">readAsDataURL</span>(file); <span class="comment">// 开始读取文件</span></span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">await</span> <span class="title function_">readFile</span>(); <span class="comment">// 等待文件读取完成</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;加载完毕&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;downloadButton&#x27;</span>).<span class="property">disabled</span> = <span class="literal">false</span>; <span class="comment">// 启用下载按钮</span></span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;文件读取失败:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2. 将Base64解码为文件并下载</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;downloadButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (!base64String) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;No Base64 data available.&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 将Base64字符串解码为二进制数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> binaryString = <span class="title function_">atob</span>(base64String);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(binaryString.<span class="property">length</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; binaryString.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">            bytes[i] = binaryString.<span class="title function_">charCodeAt</span>(i);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 创建Blob对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>([bytes], &#123; <span class="attr">type</span>: <span class="string">&#x27;application/octet-stream&#x27;</span> &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 创建下载链接</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> url = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        a.<span class="property">href</span> = url;</span></span><br><span class="line"><span class="language-javascript">        a.<span class="property">download</span> = <span class="string">&#x27;decoded_file&#x27;</span>; <span class="comment">// 设置下载文件名</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(a);</span></span><br><span class="line"><span class="language-javascript">        a.<span class="title function_">click</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 清理</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(a);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable constant_">URL</span>.<span class="title function_">revokeObjectURL</span>(url);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;输入输出语句&quot;&gt;&lt;a href=&quot;#输入输出语句&quot; class=&quot;headerlink&quot; title=&quot;输入输出语句&quot;&gt;&lt;/a&gt;输入输出语句&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;prompt(info)&lt;/li&gt;
</summary>
      
    
    
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>2024-9-26</title>
    <link href="http://example.com/2024/09/26/2024-9-26/"/>
    <id>http://example.com/2024/09/26/2024-9-26/</id>
    <published>2024-09-26T14:20:07.000Z</published>
    <updated>2025-04-07T14:39:45.243Z</updated>
    
    <content type="html"><![CDATA[<p><strong>学生证发啦</strong></p><p><img src="/../images/23.jpg" class="lazyload" data-srcset="/../images/23.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="太酷辣"></p><p><strong>学校里随机刷新的🐱学长</strong></p><p><img src="/../images/24.jpg" class="lazyload" data-srcset="/../images/24.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="宿舍楼"></p><p><img src="/../images/25.jpg" class="lazyload" data-srcset="/../images/25.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="社团活动"></p><p><img src="/../images/26.jpg" class="lazyload" data-srcset="/../images/26.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="窗前"></p><p><img src="/../images/27.jpg" class="lazyload" data-srcset="/../images/27.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p><img src="/../images/28.jpg" class="lazyload" data-srcset="/../images/28.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="路边"></p><p><img src="/../images/29.jpg" class="lazyload" data-srcset="/../images/29.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p><strong>今天把css的基础课程看完了，做了一个名侦探柯南旋转海报的网页</strong></p><p><a href="http://hzxbit.3vzhuji.cc/2024-9-26/">名侦探柯南旋转海报</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;学生证发啦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/../images/23.jpg&quot; class=&quot;lazyload&quot; data-srcset=&quot;/../images/23.jpg&quot; srcset=&quot;data:image/gif;base64</summary>
      
    
    
    
    <category term="随笔" scheme="http://example.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>css</title>
    <link href="http://example.com/2024/09/23/css/"/>
    <id>http://example.com/2024/09/23/css/</id>
    <published>2024-09-23T05:03:55.000Z</published>
    <updated>2025-04-12T15:27:55.217Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="通配符选择器"><a href="#通配符选择器" class="headerlink" title="通配符选择器"></a>通配符选择器</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="字体属性"><a href="#字体属性" class="headerlink" title="字体属性"></a>字体属性</h2><ul><li><p>font-family:字体系列</p></li><li><p>font-size:字体大小 默认16px</p></li><li><p>font-weight:字体粗细 <code>normal|bold|bolder|lighter|number(默认400)</code></p></li><li><p>font-style:字体样式 <code>normal|italic</code></p></li><li><p>font: font-style font-weight font-size&#x2F;line-height font-family;</p></li><li><p>font-size:14px&#x2F;1.5      1.5倍行高</p></li></ul></div><div class="story post-story"><h2 id="文本属性"><a href="#文本属性" class="headerlink" title="文本属性"></a>文本属性</h2><ul><li>color:文本颜色</li><li>text-align:对齐方式<code> left|center|right</code></li><li>text-decoration:添加&#x2F;删除一条线<code>none|underline|overline|line-through</code></li><li>text-index:首行缩进                em为1个文字的大小</li><li>line-height:行间距    要比font-size大</li><li>text-shadow:h-shadow v-shadow blur color</li></ul></div><div class="story post-story"><h2 id="复合选择器"><a href="#复合选择器" class="headerlink" title="复合选择器"></a>复合选择器</h2><ul><li>div a     后代选择器</li><li>div&gt;a    子元素选择器</li><li>div,span  并集选择器</li><li>a:link|a:visited|a:hover|a:active 链接伪类选择器（LoVe HaTe顺序编写）</li><li>input:focus  focus伪类选择器</li><li>E:first-child</li><li>E:last-child</li><li>E:nth-child(n|even|odd|5n|n+3|-n+5)</li><li>E:first-of-type</li><li>E:last-of-type</li><li>E:nth-of-type(n|even|odd|5n|n+3|-n+5)</li></ul></div><div class="story post-story"><h2 id="显示模式"><a href="#显示模式" class="headerlink" title="显示模式"></a>显示模式</h2><ul><li><p>块元素</p><ul><li>自己独占一行</li><li>高度、宽度、外边距、内边距都可以控制</li><li>默认宽度是父级宽度的100%</li><li>（除了文字类块元素）里面可以放行内或块级元素</li></ul></li><li><p>行内元素</p><ul><li>相邻行内元素在一行上</li><li>设置宽高无效</li><li>默认宽度为内容宽度</li><li>行内元素只能容纳文本或者行内元素</li></ul></li><li><p>行内块元素：<code>&lt;img/&gt;&lt;input/&gt;&lt;td/&gt;</code></p><ul><li>相邻行内块元素在一行上</li><li>默认宽度为内容宽度</li><li>高度、宽度、外边距、内边距都可以控制</li></ul></li><li><p>显示模式切换： <code>display:none|block|inline</code></p></li><li><p>设置居中</p><table><thead><tr><th>类别</th><th>居中方法</th></tr></thead><tbody><tr><td>块级元素</td><td>margin-left:auto;margin-right auto;</td></tr><tr><td>行内元素</td><td>父级元素添加text-align:center;</td></tr><tr><td>行内块元素</td><td>父级元素添加text-align:center;</td></tr><tr><td>所有元素的垂直居中</td><td>line-height:height</td></tr><tr><td>行内块（图片）和文字居中对齐</td><td>vertical-align:middle</td></tr></tbody></table></li></ul></div><div class="story post-story"><h2 id="background"><a href="#background" class="headerlink" title="background"></a>background</h2><ul><li><p>background-image:url()</p></li><li><p>background-repeat:<code>repeat|no-repeat|repeat-x|repeat-y</code></p></li><li><p>background-attachment:<code>scroll|fixed</code></p></li><li><p>background-position: <code>x y|left center right|top center down</code></p></li><li><p>background-size:<code>x y|x|cover|contain</code>   cover可能显示不全，contain可能无法完全覆盖而显示空白</p></li><li><p>background:bg-color bg-image position&#x2F;bg-size bg-repeat bg-origin bg-attachment;</p><p>默认值为 transparent none  0% 0%&#x2F;auto repeat padding-box scroll;</p></li></ul></div><div class="story post-story"><h2 id="选择器优先级"><a href="#选择器优先级" class="headerlink" title="选择器优先级"></a>选择器优先级</h2><table><thead><tr><th>选择器</th><th>选择器权重</th></tr></thead><tbody><tr><td>继承或者*</td><td>0，0，0，0</td></tr><tr><td>元素选择器，伪元素选择器</td><td>0，0，0，1</td></tr><tr><td>类选择器，伪类选择器</td><td>0，0，1，0</td></tr><tr><td>ID选择器</td><td>0，1，0，0</td></tr><tr><td>行内样式</td><td>1，0，0，0</td></tr><tr><td>!important</td><td>∞</td></tr></tbody></table></div><div class="story post-story"><h2 id="边框"><a href="#边框" class="headerlink" title="边框"></a>边框</h2><ul><li>border-width:5px</li><li>border-style:<code>none|solid|dashed|dotted</code></li><li>border-color:</li><li>border-top|down|left|down:</li><li>border-collapse:<code>separate|collapse</code>  控制边框合并</li><li>border-radius:圆角边框</li><li>border:<code>border-width||border-style||border-color</code></li></ul></div><div class="story post-story"><h2 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h2><p>由内至外(均会影响盒子大小)：</p><ul><li>padding</li><li>border</li><li>margin：设置左右边距为auto居中盒子</li></ul><p>盒子阴影</p><p>box-shadow: h-shadow v-shadow blur spread color inset;</p></div><div class="story post-story"><h2 id="嵌套块元素的塌陷问题"><a href="#嵌套块元素的塌陷问题" class="headerlink" title="嵌套块元素的塌陷问题"></a>嵌套块元素的塌陷问题</h2><p>对于两个父子关系的块元素，父元素有上外边距同时子元素也有上外边距，此时父元素会塌陷比较大的外边距值</p><p>解决方案：</p><ol><li>为父元素定义上边框</li><li>为父元素定义内边距</li><li>为父元素添加overflow:hidden</li></ol></div><div class="story post-story"><h2 id="传统网页布局方式"><a href="#传统网页布局方式" class="headerlink" title="传统网页布局方式"></a>传统网页布局方式</h2><ul><li>标准流</li><li>浮动：多个块级元素横向排列</li><li>定位</li></ul><p>float:<code>none|left|right</code></p></div><div class="story post-story"><h2 id="浮动特性"><a href="#浮动特性" class="headerlink" title="浮动特性"></a>浮动特性</h2><ol><li>脱离标准流浮动到指定位置，不再保留原先位置</li><li>如果多个盒子设置了浮动，则它们会按照属性值一行内显示并且顶端对齐排列</li><li>浮动元素具有行内块元素特性</li></ol><p>流程：</p><ol><li>先用标准流的父元素排列上下位置，之后内部元素采取浮动排列左右位置</li><li>浮动的盒子只会影响浮动盒子后面的标准流，不会影响前面的标准流</li></ol></div><div class="story post-story"><h2 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h2><p>父元素未指定高度，子元素全部浮动，导致父元素高度为0的问题，解决方法：</p><ol><li><p>额外标签法</p><p>最后一个元素后添加块级元素清除浮动<code>&lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;</code></p></li><li><p>父元素添加overflow:hidden|auto|scroll;</p><p>缺点：无法显示溢出部分</p></li><li><p>:after伪元素法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>:<span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>:block;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">clear</span>:both;</span><br><span class="line">    <span class="attribute">visibility</span>:hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>父元素添加类名clearfix</p></li><li><p>双伪元素法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">     <span class="attribute">content</span>:<span class="string">&quot;&quot;</span>;    </span><br><span class="line">     <span class="attribute">display</span>:table;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">    <span class="attribute">clear</span>:both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></div><div class="story post-story"><h2 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h2><p>定位&#x3D;定位模式+边偏移</p><ul><li>定位模式      position:static|relative|absolute|fixed|sticky</li><li>边偏移          top|bottom|left|right</li></ul><h3 id="静态定位"><a href="#静态定位" class="headerlink" title="静态定位"></a>静态定位</h3><p>默认方式，没有边偏移。</p><h3 id="相对定位"><a href="#相对定位" class="headerlink" title="相对定位"></a>相对定位</h3><p>相对原来位置，原来的位置继续保留。</p><h3 id="绝对定位"><a href="#绝对定位" class="headerlink" title="绝对定位"></a>绝对定位</h3><p>相对最近一级祖先元素位置，若祖先元素无定位（静态定位）或无祖先元素，则相对浏览器。若要固定与祖先元素的某个位置，祖先元素应添加相对定位。原来的位置不保留。</p><h3 id="固定定位"><a href="#固定定位" class="headerlink" title="固定定位"></a>固定定位</h3><p>固定于浏览器可视区的位置，不随滚动条滚动，原来的位置不保留，特殊的绝对定位。</p><h3 id="粘性定位"><a href="#粘性定位" class="headerlink" title="粘性定位"></a>粘性定位</h3><p>相对定位+固定定位</p><p>以浏览器窗口为参照点移动元素，占有原来位置。</p><h3 id="定位叠放次序"><a href="#定位叠放次序" class="headerlink" title="定位叠放次序"></a>定位叠放次序</h3><p>z-index:取值越大越靠上</p><h3 id="定位的其他特性"><a href="#定位的其他特性" class="headerlink" title="定位的其他特性"></a>定位的其他特性</h3><p>绝对定位和固定定位也和浮动类似。</p><ol><li>行内元素添加绝对或者固定定位，可以直接设置宽度和高度。</li><li>块级元素添加绝对或者固定定位，不给宽度和高度，默认大小为内容的大小。</li><li>浮动、定位的盒子不会引起外边距合并的问题。</li><li>浮动的元素不会压住下面标准流的文字（可以用来做文字环绕），而绝对定位和固定定位会。</li></ol></div><div class="story post-story"><h2 id="元素的显示与隐藏"><a href="#元素的显示与隐藏" class="headerlink" title="元素的显示与隐藏"></a>元素的显示与隐藏</h2><ul><li>display:<code>none|block</code>  不保留位置</li><li>visibility:<code>hidden|visible</code>  保留位置</li><li>overflow:<code>visible|auto|hidden|scroll</code> （内容溢出元素框时，会发生什么。有定位的盒子慎用）</li></ul></div><div class="story post-story"><h2 id="精灵图"><a href="#精灵图" class="headerlink" title="精灵图"></a>精灵图</h2><p>将小背景图片整合到一张大图中，减少服务器接收和发送请求的次数，提高页面加载速度</p><p>background-position: -x -y;</p></div><div class="story post-story"><h2 id="字体图标"><a href="#字体图标" class="headerlink" title="字体图标"></a>字体图标</h2><ul><li><p>文件小</p></li><li><p>放大缩小不失真</p></li><li><p>灵活，可以改变颜色、产生阴影、透明效果、旋转等</p></li><li><p><a href="https://www.iconfont.cn/">iconfont-阿里巴巴矢量图标库</a></p></li></ul></div><div class="story post-story"><h2 id="三角形"><a href="#三角形" class="headerlink" title="三角形"></a>三角形</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>:<span class="number">50px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-left-color</span>:pink;//朝右的三角形</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="鼠标样式-表单轮廓线-f防止拖拽文本域"><a href="#鼠标样式-表单轮廓线-f防止拖拽文本域" class="headerlink" title="鼠标样式&amp;表单轮廓线&amp;f防止拖拽文本域"></a>鼠标样式&amp;表单轮廓线&amp;f防止拖拽文本域</h2><p>cursor:<code>default|pointer|move|text|no-allowed</code></p><p>outline:none</p><p>textarea{</p><p>​resize:none;</p><p>}</p></div><div class="story post-story"><h2 id="行内块和文字垂直居中对齐"><a href="#行内块和文字垂直居中对齐" class="headerlink" title="行内块和文字垂直居中对齐"></a>行内块和文字垂直居中对齐</h2><p>image{</p><p>​vertical-align:<code>top|bottom|middle</code>     可以解决图片底部默认空白的问题</p><p>}</p></div><div class="story post-story"><h2 id="文字省略号显示"><a href="#文字省略号显示" class="headerlink" title="文字省略号显示"></a>文字省略号显示</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">white-space</span>:norap;</span><br><span class="line">    <span class="attribute">text-overflow</span>:ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="视频-音频播放器"><a href="#视频-音频播放器" class="headerlink" title="视频&#x2F;音频播放器"></a>视频&#x2F;音频播放器</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">autoplay</span>=<span class="string">&quot;autoplay&quot;</span> <span class="attr">muted</span>=<span class="string">&quot;muted&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span> <span class="attr">loop</span>=<span class="string">&quot;loop&quot;</span> <span class="attr">poster</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">autoplay</span>=<span class="string">&quot;autoplay&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span> <span class="attr">loop</span>=<span class="string">&quot;loop&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h2><table><thead><tr><th>选择符</th><th>简介</th></tr></thead><tbody><tr><td>E[att&#x3D;”val”]</td><td>选择具有att属性的E元素</td></tr><tr><td>E[att&#x3D;”val”]]</td><td>选择具有att属性且属性值等于val的E元素</td></tr><tr><td>E[att^&#x3D;”val”]]</td><td>选择具有att属性且值以val开头的E元素</td></tr><tr><td>E[att$&#x3D;”val”]]</td><td>选择具有att属性且值以val结尾的E元素</td></tr><tr><td>E[att*&#x3D;”val”]]</td><td>选择具有att属性且值中含有val的E元素</td></tr></tbody></table></div><div class="story post-story"><h2 id="伪元素选择器"><a href="#伪元素选择器" class="headerlink" title="伪元素选择器"></a>伪元素选择器</h2><ul><li>before和after创建一个元素，但是属于行内元素</li><li>新创建的这个元素在文档树中是找不到的，所以我们称为伪元素</li><li>语法： element::before{}</li><li>before和after必须有content属性</li><li>before在父元素内容前面创建元素，after在父元素内容后面插入元素</li><li>伪元素选择器与标签选择器权重一样</li></ul></div><div class="story post-story"><h2 id="切换盒子模型"><a href="#切换盒子模型" class="headerlink" title="切换盒子模型"></a>切换盒子模型</h2><ol><li>box-sizing:content-box 盒子大小为width+padding+border</li><li>box-sizing:border-box 盒子大小为width</li></ol></div><div class="story post-story"><h2 id="CSS3过度"><a href="#CSS3过度" class="headerlink" title="CSS3过度"></a>CSS3过度</h2><p>鼠标悬浮时触发</p><p>transition:要过度的属性 花费时间(2s) 运动曲线(ease|liner) 何时开始(1s),要过度的属性 花费时间(2s) 运动曲线(ease) 何时开始(1s)；</p><p>全部变化，填all</p><h3 id="2D转换"><a href="#2D转换" class="headerlink" title="2D转换"></a>2D转换</h3><ul><li>tranform:translate(x,y);</li><li>tranform:translateX(x);</li><li>tranform:translateY(y);</li><li>transform:rotate(45deg);</li><li>transform:scale(x,y)</li><li>transform-origin: x y;     设置中心点</li></ul><h3 id="3D转换"><a href="#3D转换" class="headerlink" title="3D转换"></a>3D转换</h3><ul><li><p>transform:translate3d(x,y,z);</p></li><li><p>tranform:translateX(x);</p></li><li><p>tranform:translateY(y);</p></li><li><p>transform:translateZ(z);</p></li><li><p>perspective:   px; &#x2F;&#x2F;透视写在观察元素的父元素上</p></li><li><p>transform-style:preserve-3d; &#x2F;&#x2F;子元素开启立体空间</p></li></ul></div><div class="story post-story"><h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><ol><li><p>定义动画</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> move &#123;</span><br><span class="line">    <span class="number">0%</span>(<span class="selector-tag">from</span>) &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">0px</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span>(<span class="selector-tag">to</span>) &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">100px</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>调用动画</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">animation</span>: name duration timing-function delay <span class="built_in">iteration-count</span>(<span class="number">1</span>|infinite) <span class="built_in">direction</span>(normal|alternate) <span class="built_in">fill-mode</span>(backwords|forwords);</span><br></pre></td></tr></table></figure></li></ol></div><div class="story post-story"><h2 id="移动端常见布局"><a href="#移动端常见布局" class="headerlink" title="移动端常见布局"></a>移动端常见布局</h2><ul><li><p>单独制作移动端页面</p><ul><li>流式布局(百分比布局)</li><li>flex弹性布局</li><li>less+rem+媒体查询布局</li><li>混合布局</li></ul></li><li><p>响应式页面兼容移动端</p><ul><li>媒体查询</li><li>bootstrap</li></ul></li></ul></div><div class="story post-story"><h2 id="流式布局"><a href="#流式布局" class="headerlink" title="流式布局"></a>流式布局</h2><ul><li>max-width:   px;&#x2F;&#x2F;页面拉抻最大宽度</li><li>min-width:    px;&#x2F;&#x2F;页面拉抻最小宽度</li><li>width:x%</li></ul></div><div class="story post-story"><h2 id="flex布局"><a href="#flex布局" class="headerlink" title="flex布局"></a>flex布局</h2><p>与浮动效果相似,但默认不换行，装不下时自动缩小子元素宽度</p><p>给父元素添加 display:flex;</p><p>给子元素设置宽高或分配比例 flex:1;</p><h3 id="父元素属性"><a href="#父元素属性" class="headerlink" title="父元素属性"></a>父元素属性</h3><ul><li>flex-direction:<code>row|row-reverse|column|column-reverse</code>     设置主轴</li><li>justify-content:<code>flex-start|flex-end|center|space-around|space-between</code> 设置主轴子元素排列方式</li><li>flex-wrap:<code>nowrap|wrap</code>  是否换行</li><li>align-items:<code>flex-start|flex-end|center|stretch</code> 设置侧轴子元素排列方式(单行)</li><li>align-content:<code>flex-start|flex-end|center|space-around|space-between|stretch</code>  设置侧轴子元素排列方式(多行)</li><li>flex-flow: flex-direction flex-wrap;</li></ul><h3 id="子元素属性"><a href="#子元素属性" class="headerlink" title="子元素属性"></a>子元素属性</h3><ul><li>flex:   分配比例，可实现拉伸效果</li><li>align-self:    控制自己在侧轴的排列方式</li><li>order:     控制项目的排列顺序，越小越靠前，默认为0</li></ul></div><div class="story post-story"><h2 id="rem适配方案"><a href="#rem适配方案" class="headerlink" title="rem适配方案"></a>rem适配方案</h2><p>通过修改html里面的文字大小来改变页面中元素的大小</p><h3 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a>媒体查询</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//从小到大写，后面覆盖前面</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;style320<span class="selector-class">.css</span>&quot; media=&quot;screen and (<span class="attribute">max-width</span>:<span class="number">320px</span>)<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;link rel=&quot;</span>stylesheet<span class="string">&quot; href=&quot;</span>style640.css<span class="string">&quot; media=&quot;</span>screen and (min-width:<span class="number">640px</span>)<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;link rel=&quot;</span>stylesheet<span class="string">&quot; href=&quot;</span>style960.css<span class="string">&quot; media=&quot;</span>screen and (min-width:<span class="number">960px</span>)<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//或</span></span><br><span class="line"><span class="string">@media screen and (max-width:539px) &#123;</span></span><br><span class="line"><span class="string">    html&#123;</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@media screen and (min-width:540px) &#123;</span></span><br><span class="line"><span class="string">    html &#123;</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@media screen and (min-width:970px) &#123;</span></span><br><span class="line"><span class="string">    html &#123;</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="less"><a href="#less" class="headerlink" title="less"></a>less</h3><p>vscode插件：easy less，cssrem</p><p>基本语法</p><ul><li>@变量名:变量值</li><li>后代——嵌套</li><li>伪类&#x2F;伪元素选择器 &amp;:   &amp;::</li><li>运算符+-*&#x2F;   空格隔开</li><li>除法运算要加 ()</li><li>单位不同则取第一个值的单位</li><li>@import “” 导入less文件</li></ul><h3 id="元素大小取值方法"><a href="#元素大小取值方法" class="headerlink" title="元素大小取值方法"></a>元素大小取值方法</h3><p>页面元素的rem值&#x3D;页面元素值（px)&#x2F;font-size字体大小</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;通配符选择器&quot;&gt;&lt;a href=&quot;#通配符选择器&quot; class=&quot;headerlink&quot; title=&quot;通配符选择器&quot;&gt;&lt;/a&gt;通配符选择器&lt;/h2&gt;&lt;figure class=&quot;highlight cs</summary>
      
    
    
    
    
    <category term="css" scheme="http://example.com/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>面试八股</title>
    <link href="http://example.com/2024/09/21/%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1/"/>
    <id>http://example.com/2024/09/21/%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1/</id>
    <published>2024-09-21T12:28:26.000Z</published>
    <updated>2025-05-13T15:13:04.085Z</updated>
    
    <content type="html"><![CDATA[<h1 id="面试八股"><a href="#面试八股" class="headerlink" title="面试八股"></a>面试八股</h1><div class="story post-story"><h2 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h2><p>MVVM是一种软件架构模式，是Model、View、ViewModel的缩写。其中Model是数据层，包含数据和业务逻辑。View是UI组件。ViewModel是连接Model和View的桥梁，它一边管理数据，一边控制视图更新。</p></div><div class="story post-story"><h2 id="进程和线程"><a href="#进程和线程" class="headerlink" title="进程和线程"></a>进程和线程</h2><p>进程是是系统进行资源分配的基本单位，线程是CPU调度的基本单位。一个进程可以包含多个线程，这些线程共享进程的资源，每个线程拥有独立的栈和寄存器。进程之间相互独立，每个进程拥有自己的地址空间和系统资源，多个线程共享所属进程的资源。线程不拥有自己独立的地址空间，所以切换较快。进程之间有进程间通信机制，如共享存储、消息队列、管道等。线程可以直接访问同一进程的全局变量，通信成本较低。创建和切换进程的开销更大。一个进程崩溃不会影响其他进程，而一个线程崩溃，可能会导致整个进程崩溃。</p></div><div class="story post-story"><h2 id="面向对象和面向过程有什么区别，JavaScript是哪一种"><a href="#面向对象和面向过程有什么区别，JavaScript是哪一种" class="headerlink" title="面向对象和面向过程有什么区别，JavaScript是哪一种"></a>面向对象和面向过程有什么区别，JavaScript是哪一种</h2><p>面向对象以对象为基本单元，数据和方法绑定在对象中。强调封装继承多态。</p><p>面向过程以函数为基本单元，数据和方法分离，通过函数和流程控制组织代码。</p><p>JavaScript属于面向对象的语言，两种范式都支持。</p></div><div class="story post-story"><h2 id="什么是模块化设计"><a href="#什么是模块化设计" class="headerlink" title="什么是模块化设计"></a>什么是模块化设计</h2><p>将代码拆分为独立的、功能单一的模块，每个模块负责特定功能，通过明确的接口与其他模块通信。减少代码耦合，提高可维护性和复用性。</p><p>两种规范</p><ul><li>CommonJS Node.js默认</li><li>ES Modules 原生浏览器支持</li></ul></div><div class="story post-story"><h2 id="什么是组件化开发"><a href="#什么是组件化开发" class="headerlink" title="什么是组件化开发"></a>什么是组件化开发</h2><p>将UI界面拆分为独立的、可复用的组件，每个组件包含自身的结构（HTML）、样式（CSS）和逻辑（JS）。</p><p>提高代码的复用性，隔离性，组合性。</p></div><div class="story post-story"><h2 id="Vue和React有什么区别，有什么相同"><a href="#Vue和React有什么区别，有什么相同" class="headerlink" title="Vue和React有什么区别，有什么相同"></a>Vue和React有什么区别，有什么相同</h2><p><strong>不同：</strong></p><ul><li>模板语法：React采用JSX，Vue采用基于HTML的模板语法</li><li>数据绑定：Vue实现了双向的数据绑定，React需要手动控制组件的属性和状态</li><li>状态管理：Vue采用Vuex&#x2F;Pinia，React使用Redux</li><li>组件通信不同：Vue采用props和事件来实现父子组件通信，React采用props和回调函数实现</li><li>生命周期不同：Vue有8个生命周期钩子，React有10个</li><li>响应式原理不同：Vue使用双向数据绑定来实现数据更新，React使用单向数据流来实现</li></ul><p><strong>相同</strong>：</p><ul><li><code>Vue</code> 和 <code>React</code> 都采用了组件化开发的方式。</li><li><code>Vue</code> 和 <code>React</code> 都使用虚拟 DOM 技术。</li><li><code>Vue</code> 和 <code>React</code> 都支持响应式更新。</li><li><code>Vue</code> 和 <code>React</code> 都具有良好的集成能力。</li></ul></div><div class="story post-story"><h2 id="生命周期函数"><a href="#生命周期函数" class="headerlink" title="生命周期函数"></a>生命周期函数</h2><p>组件从创建到销毁的一些钩子函数</p><h3 id="vue3"><a href="#vue3" class="headerlink" title="vue3"></a>vue3</h3><ul><li><h3 id="setup"><a href="#setup" class="headerlink" title="setup()"></a>setup()</h3></li><li><p>onBeforemount()</p></li><li><p>onMounted()</p></li><li><p>onBeforeUpdate()</p></li><li><p>onUpdated()</p></li><li><p>onBeforeUnMount()</p></li><li><p>onUnMounted()</p></li></ul><h3 id="React"><a href="#React" class="headerlink" title="React"></a>React</h3><ul><li><p>constructor()             useState()</p></li><li><p>render()                     函数本身</p></li><li><p>componentDidMount()            useEffect()</p></li><li><p>getDerivedStateFromProps()      useState()返回的setState()函数</p></li><li><p>shouldComponentUpdate()       useMemo()</p></li><li><p>getSnapshotBeforeUpdate() </p></li><li><p>componentDidUpdate()            useEffect()</p></li><li><p>componentWillUnmount()        useEffect()的返回函数</p></li></ul></div><div class="story post-story"><h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><ul><li>函数可以捕获外部作用域的变量，即使在定义的外部作用域之外被调用。</li><li>在函数外部无法读取函数内的局部变量。出于种种原因，我们有时候需要得到函数内的局部变量。那就是在函数的内部，再定义一个函数，利用内层函数来获取外层函数的局部变量。常用于模块化编程和数据封装。</li><li>闭包可能会引起内存泄漏和性能问题</li></ul></div><div class="story post-story"><h2 id="防抖节流"><a href="#防抖节流" class="headerlink" title="防抖节流"></a>防抖节流</h2><p>防抖和节流都是前端限制函数触发频率的技术。</p><p>防抖：函数触发后的一段时间内，不再触发事件时，才执行一次。应用：搜索栏搜索历史、浏览器窗口大小调整引起的页面变化</p><p>节流：函数触发后的一段时间内，保证只触发这一次。应用：无限滚动列表加载数据、表单提交。</p></div><div class="story post-story"><h2 id="箭头函数和普通函数的区别"><a href="#箭头函数和普通函数的区别" class="headerlink" title="箭头函数和普通函数的区别"></a>箭头函数和普通函数的区别</h2><ul><li>普通函数有自己的this，由调用方式决定。对象调用指向调用，new调用指向实例；箭头函数没有自己的this，继承外部作用域的this</li><li>箭头函数不能作为构造函数，普通函数可以</li><li>箭头函数有简洁语法，函数体只有一个表达式的时候，可以省略大括号和return</li><li>普通函数可以访问隐式的arguments对象，它包含传递给函数的所有参数，而箭头函数没有</li></ul></div><div class="story post-story"><h2 id="webpack构建过程"><a href="#webpack构建过程" class="headerlink" title="webpack构建过程"></a>webpack构建过程</h2><ol><li>初始化配置项 config.js</li><li>解析依赖：模块之间的依赖关系</li><li>模块转化 ：vue文件，jsx文件等解析为对应和html、css、js文件</li><li>优化：消除未使用的代码块、代码分割、代码压缩。</li><li>输出：将优化后的代码输出到指定目录中</li></ol></div><div class="story post-story"><h2 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h2><p>跨域是指在浏览器中，当一个网页的脚本试图获取另一个源的资源的时候，由于同源策略限制协议域名端口号必须相同，可能会被浏览器阻止。解决方法CORS，JSONP，代理服务器、WebSocket</p></div><div class="story post-story"><h2 id="浏览器渲染流程"><a href="#浏览器渲染流程" class="headerlink" title="浏览器渲染流程"></a>浏览器渲染流程</h2><ol><li>解析HTML和CSS生成DOM树和CSSOM树</li><li>将两棵树合并成渲染树</li><li>布局计算和绘制生成像素</li><li>合成显示</li></ol></div><div class="story post-story"><h2 id="重排和重绘"><a href="#重排和重绘" class="headerlink" title="重排和重绘"></a>重排和重绘</h2><p>重排：DOM结构发生改变以及元素的几何属性发生变化时，重新计算元素的位置和尺寸</p><p>重绘：元素的外观发生改变但不影响布局的时候，重新绘制元素</p><p>重排的渲染消耗更大，频繁的重排和重绘都会影响页面性能。</p></div><div class="story post-story"><h2 id="面对瞬时的并发请求，如何减少后端请求压力"><a href="#面对瞬时的并发请求，如何减少后端请求压力" class="headerlink" title="面对瞬时的并发请求，如何减少后端请求压力"></a>面对瞬时的并发请求，如何减少后端请求压力</h2><ul><li>请求合并成一个请求</li><li>数据缓存</li><li>懒加载</li><li>WebSocket实时数据推送</li><li>防抖和节流</li></ul></div><div class="story post-story"><h2 id="UDP和TCP的区别、使用场景、如何让UDP变得可靠"><a href="#UDP和TCP的区别、使用场景、如何让UDP变得可靠" class="headerlink" title="UDP和TCP的区别、使用场景、如何让UDP变得可靠"></a>UDP和TCP的区别、使用场景、如何让UDP变得可靠</h2><p>UDP和TCP都是计算机网络传输层的协议，UDP是无连接、不可靠的，TCP是有链接、可靠的。UDP适合数据量小、需要实时传输、丢失数据可容忍的场景，如音视频传输、在线游戏。TCP适合于需要数据完整性和顺序性的场景，如网页浏览、文件传输。可以在应用层实现重传机制、数据校验来保证UDP的可靠性。</p></div><div class="story post-story"><h2 id="前端路由的几种方式"><a href="#前端路由的几种方式" class="headerlink" title="前端路由的几种方式"></a>前端路由的几种方式</h2><p>hash路由：利用URL中#后的哈希值变化不会引起路由跳转的特性。通过监听hashChange事件，读取hash值来实现。兼容性更好。 （最初是用来做锚点定位，滚动到页面的指定位置的）</p><p>history路由：利用history API修改URL路径并通过监听popState事件来监听浏览器前进后退。URL更简洁，使得服务器端可以解析完整路径</p></div><div class="story post-story"><h2 id="Vue的响应式原理"><a href="#Vue的响应式原理" class="headerlink" title="Vue的响应式原理"></a>Vue的响应式原理</h2><p>vue2中是通过Object.defineProperty来实现的，在页面加载时，vue会使用Object.defineProperty来重新定义data中的所有属性，劫持各个属性的setter和getter，读取属性时触发getter方法，修改属性时触发setter方法，通知组件实例对应的watch方法实现视图的更新。</p><p>defineProperty也是有缺点的：</p><ol><li>对于复杂对象需要深度监听、性能不好</li><li>对于对象的新增、删除属性无法监听这些操作。所以需要Vue.$set和Vue.$delete</li><li>需要重写数组的原生方法来实现数组监听</li></ol><p>在vue3中使用proxy来替代defineProperty,它的优势：</p><ol><li>可以直接监听整个对象、不需要遍历监听属性，性能有所提升。</li><li>可以直接监听数组的变化</li><li>拦截方法更多（13种）</li></ol></div><div class="story post-story"><h2 id="Vue2和Vue3有哪些区别"><a href="#Vue2和Vue3有哪些区别" class="headerlink" title="Vue2和Vue3有哪些区别"></a>Vue2和Vue3有哪些区别</h2><ul><li><code>Vue2</code>使用的是选项式API ，<code>Vue3</code>使用组合式API，提高代码可维护性和复用性。</li><li><code>Vue3</code>使用<code>Proxy</code>代理替代Object.defineProperty实现了新的响应式系统，提高了性能。</li><li><code>Vue3</code>引入了Teleport组件，可以将DOM元素渲染到DOM树的其他位置，用于创建模态框、弹出框等。</li><li><code>Vue3</code>全局API名称发生了变化，同时新增了<code>watchEffect</code>、<code>Hooks</code>等功能</li><li><code>Vue3</code>对<code>TypeScript</code>的支持更加友好</li><li><code>Vue3</code>核心库的依赖更少，减少打包体积</li></ul></div><div class="story post-story"><h2 id="reactive-对比-ref"><a href="#reactive-对比-ref" class="headerlink" title="reactive 对比 ref"></a>reactive 对比 ref</h2><ol><li>都是用来生成响应式数据</li><li>不同点<ol><li>reactive不能处理简单类型的数据</li><li>ref参数类型支持更好，但是必须通过.value做访问和修改</li><li>ref函数内部的实现依赖于reactive函数</li></ol></li></ol><h1 id="storeToRefs保持响应式解构"><a href="#storeToRefs保持响应式解构" class="headerlink" title="storeToRefs保持响应式解构"></a>storeToRefs保持响应式解构</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  import &#123; storeToRefs &#125; from &#x27;pinia&#x27;</span><br><span class="line">import &#123; useCounterStore &#125; from &#x27;@/stores/counter&#x27;</span><br><span class="line">  const counterStore = useCounterStore()</span><br><span class="line">  // 使用它storeToRefs包裹之后解构保持响应式</span><br><span class="line">  const &#123; count &#125; = storeToRefs(counterStore)</span><br><span class="line"></span><br><span class="line">  const &#123; increment &#125; = counterStore</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;button @click=&quot;increment&quot;&gt;</span><br><span class="line">    &#123;&#123; count &#125;&#125;</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h1 id="全局组件统一插件化"><a href="#全局组件统一插件化" class="headerlink" title="全局组件统一插件化"></a>全局组件统一插件化</h1></div><div class="story post-story"><h2 id="插件化开发"><a href="#插件化开发" class="headerlink" title="插件化开发"></a>插件化开发</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 把components中的所组件都进行全局化注册</span></span><br><span class="line"><span class="comment">// 通过插件的方式</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ImageView</span> <span class="keyword">from</span> <span class="string">&#x27;./ImageView/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Sku</span> <span class="keyword">from</span> <span class="string">&#x27;./XtxSku/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> componentPlugin = &#123;</span><br><span class="line">  <span class="title function_">install</span> (app) &#123;</span><br><span class="line">    <span class="comment">// app.component(&#x27;组件名字&#x27;，组件配置对象)</span></span><br><span class="line">    app.<span class="title function_">component</span>(<span class="string">&#x27;XtxImageView&#x27;</span>, <span class="title class_">ImageView</span>)</span><br><span class="line">    app.<span class="title function_">component</span>(<span class="string">&#x27;XtxSku&#x27;</span>, <span class="title class_">Sku</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="插件注册"><a href="#插件注册" class="headerlink" title="插件注册"></a>插件注册</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 引入全局组件插件</span><br><span class="line">import &#123; componentPlugin &#125; from &#x27;@/components&#x27;</span><br><span class="line"></span><br><span class="line">app.use(componentPlugin)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="组件通信方式"><a href="#组件通信方式" class="headerlink" title="组件通信方式"></a>组件通信方式</h2><ul><li>父子组件：props和自定义事件</li><li>祖先组件和后代组件：provide和inject</li><li>父子组件：defineExpose</li><li>Pinia</li></ul></div><div class="story post-story"><h2 id="SPA的理解，有什么优缺点"><a href="#SPA的理解，有什么优缺点" class="headerlink" title="SPA的理解，有什么优缺点"></a>SPA的理解，有什么优缺点</h2><p>SPA（单页应用）是一种前端应用程序的架构模式，它通过在加载应用程序时只加载单个 <code>HTML</code> 页面，并通过使用 <code>JavaScript</code> 动态地更新页面内容，从而实现无刷新的用户体验。</p></div><div class="story post-story"><h2 id="SPA和多页面有什么区别"><a href="#SPA和多页面有什么区别" class="headerlink" title="SPA和多页面有什么区别"></a>SPA和多页面有什么区别</h2><p><strong>区别</strong></p><ul><li><strong>页面加载方式</strong>：在多页面应用中，每个页面都是独立的 HTML 文件，每次导航时需要重新加载整个页面。而在 <code>SPA</code> 中，初始加载时只加载一个 HTML 页面，后续的导航通过 <code>JavaScript</code> 动态地更新页面内容，无需重新加载整个页面。</li><li><strong>用户体验</strong>：<code>SPA</code> 提供了流畅、快速的用户体验，因为页面切换时无需等待整个页面的重新加载，只有需要的数据和资源会被加载，减少了页面刷新的延迟。多页面应用则可能会有页面刷新的延迟，给用户带来较长的等待时间。</li><li><strong>代码复用</strong>：<code>SPA</code> 通常采用组件化开发的方式，可以在不同的页面中复用组件，提高代码的可维护性和可扩展性。多页面应用的每个页面都是独立的，组件复用的机会较少。</li><li><strong>路由管理</strong>：在多页面应用中，页面之间的导航和路由由服务器处理，每个页面对应一个不同的 <code>URL</code>。而在 <code>SPA</code> 中，前端负责管理页面的导航和路由，通过前端路由库（如 <code>React Router</code> 或 <code>Vue Router</code>）来管理不同路径对应的组件。</li><li><strong>SEO（搜索引擎优化）</strong>：由于多页面应用的每个页面都是独立的 HTML 文件，搜索引擎可以直接索引和抓取每个页面的内容，有利于搜索引擎优化。相比之下，<code>SPA</code> 的内容是通过 <code>JavaScript</code> 动态生成的，搜索引擎的爬虫可能无法正确地获取和索引页面的内容，需要采取额外的优化措施。</li><li>服务器负载：<code>SPA</code> 只需初始加载时获取 <code>HTML</code>、<code>CSS</code> 和 <code>JavaScript</code> 文件，后续的页面更新和数据获取通常通过 API 请求完成，减轻了服务器的负载。而多页面应用每次导航都需要从服务器获取整个页面的内容。</li></ul><p><strong>优点</strong></p><ul><li><strong>用户体验</strong>：<code>SPA</code> 提供了流畅、快速的用户体验，在页面加载后，只有需要的数据和资源会被加载，减少了页面刷新的延迟。</li><li><strong>响应式交互</strong>：由于 <code>SPA</code> 依赖于异步数据加载和前端路由，可以实现实时更新和动态加载内容，使用户可以快速地与应用程序交互。</li><li><strong>代码复用</strong>：<code>SPA</code> 通常采用组件化开发的方式，提高了代码的可维护性和可扩展性。</li><li><strong>服务器负载较低</strong>：由于只有初始页面加载时需要从服务器获取 <code>HTML</code>、<code>CSS</code> 和 <code>JavaScript</code> 文件，减轻了服务器的负载。</li></ul><p><strong>缺点</strong>：</p><ul><li><p><strong>首次加载时间</strong>：<code>SPA</code> 首次加载时需要下载较大的 <code>JavaScript</code> 文件，这可能导致初始加载时间较长。</p></li><li><p><strong>SEO（搜索引擎优化）问题</strong>：由于 <code>SPA</code> 的内容是通过 <code>JavaScript</code> 动态生成的，搜索引擎的爬虫可能无法正确地获取和索引页面的内容。</p></li><li><p><strong>内存占用</strong>：<code>SPA</code> 在用户浏览应用程序时保持单个页面的状态，这可能导致较高的内存占用。</p></li></ul></div><div class="story post-story"><h2 id="Vue的性能优化有哪些"><a href="#Vue的性能优化有哪些" class="headerlink" title="Vue的性能优化有哪些"></a>Vue的性能优化有哪些</h2><h3 id="编码阶段"><a href="#编码阶段" class="headerlink" title="编码阶段"></a>编码阶段</h3><ul><li><code>v-if</code>和<code>v-for</code>不一起使用</li><li><code>v-for</code>保证<code>key</code>的唯一性</li><li>使用<code>keep-alive</code>缓存组件</li><li><code>v-if</code>和<code>v-show</code>酌情使用</li><li>路由懒加载、异步组件</li><li>图片懒加载</li><li>节流防抖</li><li>第三方模块按需引入</li></ul><h3 id="打包优化"><a href="#打包优化" class="headerlink" title="打包优化"></a>打包优化</h3><ul><li>压缩代码</li><li>使用CDN加载第三方模块</li><li>抽离公共文件</li></ul><h3 id="用户体验"><a href="#用户体验" class="headerlink" title="用户体验"></a>用户体验</h3><ul><li>骨架屏</li><li>客户端缓存</li></ul><h3 id="SEO优化"><a href="#SEO优化" class="headerlink" title="SEO优化"></a>SEO优化</h3><ul><li>预渲染</li><li>服务端渲染</li><li>合理使用 <code>meta</code> 标签</li></ul></div><div class="story post-story"><h2 id="常用的vue2属性、指令有哪些"><a href="#常用的vue2属性、指令有哪些" class="headerlink" title="常用的vue2属性、指令有哪些"></a>常用的vue2属性、指令有哪些</h2><p><strong>属性</strong>：</p><ul><li><code>data</code>：用于定义组件的初始数据。</li><li><code>props</code>：用于传递数据给子组件。</li><li><code>computed</code>：用于定义计算属性。</li><li><code>methods</code>：用于定义组件的方法。</li><li><code>watch</code>：用于监听组件的数据变化。</li><li><code>components</code>：用于注册子组件。可以通过 <code>components</code> 属性将其他组件注册为当前组件的子组件，从而在模板中使用这些子组件。</li></ul><p><strong>指令</strong>：</p><ul><li><code>v-if</code>：条件渲染指令，根据表达式的真假来决定是否渲染元素。</li><li><code>v-show</code>：条件显示指令，根据表达式的真假来决定元素的显示和隐藏。</li><li><code>v-for</code>：列表渲染指令，用于根据数据源循环渲染元素列表。</li><li><code>v-bind</code>：属性绑定指令，用于动态绑定元素属性到 <code>Vue</code> 实例的数据。</li><li><code>v-on</code>：事件绑定指令，用于监听 <code>DOM</code> 事件，并执行对应的 <code>Vue</code> 方法。</li><li><code>v-model</code>：双向数据绑定指令，用于在表单元素和 <code>Vue</code> 实例的数据之间建立双向绑定关系。</li><li><code>v-text</code>：文本插值指令，用于将数据插入到元素的文本内容中。</li><li><code>v-html</code>：<code>HTML</code> 插值指令，用于将数据作为 <code>HTML</code> 解析并插入到元素中。</li></ul></div><div class="story post-story"><h2 id="Computed-和-Watch-的区别"><a href="#Computed-和-Watch-的区别" class="headerlink" title="Computed 和 Watch 的区别"></a>Computed 和 Watch 的区别</h2><p><code>computed</code>计算属性，通过对已有的属性值进行计算得到一个新值。它需要依赖于其他的数据，当数据发生变化时，<code>computed</code>会自动计算更新。<code>computed</code>属性值会被缓存，只有当依赖数据发生变化时才会重新计算，这样可以避免重复计算提高性能。</p><p><code>watch</code>用于监听数据的变化，并在变化时执行一些操作。它可以监听单个数据或者数组，当数据发生变化时会执行对应的回调函数，和<code>computed</code>不同的是<code>watch</code>不会有缓存。</p></div><div class="story post-story"><h2 id="常见的事件修饰符及其作用"><a href="#常见的事件修饰符及其作用" class="headerlink" title="常见的事件修饰符及其作用"></a>常见的事件修饰符及其作用</h2><ul><li><code>.stop</code>阻止冒泡</li><li><code>.prevent</code>阻止默认事件</li><li><code>.capture</code> ：与事件冒泡的方向相反，事件捕获由外到内；</li><li>.<code>self</code> ：只会触发自己范围内的事件，不包含子元素；</li><li><code>.once</code>：只会触发一次。</li></ul></div><div class="story post-story"><h2 id="v-if和v-show的区别"><a href="#v-if和v-show的区别" class="headerlink" title="v-if和v-show的区别"></a>v-if和v-show的区别</h2><p>v-if条件渲染，v-show条件显示。v-if切换条件时会通过响应式系统销毁或渲染整个条件块，有更高的切换消耗，适用于初始不存在或不频繁切换可见性的组件； v-show通过设置元素display属性控制显示隐藏，更高的初始渲染消耗，适用于频繁切换可见性的组件。</p></div><div class="story post-story"><h2 id="v-html-的原理"><a href="#v-html-的原理" class="headerlink" title="v-html 的原理"></a>v-html 的原理</h2><p>会先移除节点下的所有节点，调用<code>html</code>方法，通过<code>addProp</code>添加<code>innerHTML</code>属性，归根结底还是设置<code>innerHTML</code>为<code>v-html</code>的值。</p></div><div class="story post-story"><h2 id="v-model-是如何实现的，语法糖实际是什么？"><a href="#v-model-是如何实现的，语法糖实际是什么？" class="headerlink" title="v-model 是如何实现的，语法糖实际是什么？"></a>v-model 是如何实现的，语法糖实际是什么？</h2><ul><li><p><strong>当作用在表单上</strong>：通过<code>v-bind:value</code>绑定数据，<code>v-on:input</code>来监听数据变化并修改<code>value</code></p></li><li><p><strong>当作用在组件上</strong>：本质上是一个父子通信语法糖，通过<code>props</code>和<code>$emit</code>实现。</p></li></ul></div><div class="story post-story"><h2 id="data为什么是一个函数而不是对象"><a href="#data为什么是一个函数而不是对象" class="headerlink" title="data为什么是一个函数而不是对象"></a>data为什么是一个函数而不是对象</h2><p>因为对象是一个引用类型，如果<code>data</code>是一个对象的情况下会造成多个组件共用一个<code>data</code>，<code>data</code>为一个函数，每个组件都会有自己的私有数据空间，不会干扰其他组件的运行。</p></div><div class="story post-story"><h2 id="router和route的区别"><a href="#router和route的区别" class="headerlink" title="router和route的区别"></a>router和route的区别</h2><ul><li><p><code>$route</code> 是路由信息，包括<code>path</code>、<code>params</code>、<code>query</code>、<code>name</code>等路由信息参数</p></li><li><p><code>$router</code> 是路由实例，包含了路由跳转方法、钩子函数等</p></li></ul></div><div class="story post-story"><h2 id="如何设置动态路由"><a href="#如何设置动态路由" class="headerlink" title="如何设置动态路由"></a>如何设置动态路由</h2><ul><li>params传参<ul><li>路由配置： <code>/index/:id</code></li><li>路由跳转：<code>this.$router.push(&#123;name: &#39;index&#39;, params: &#123;id: &quot;zs&quot;&#125;&#125;);</code></li><li>路由参数获取：<code>$route.params.id</code></li><li>最后形成的路由：<code>/index/zs</code></li></ul></li><li>query传参<ul><li>路由配置：<code>/index</code>正常的路由配置</li><li>路由跳转：<code>this.$rouetr.push(&#123;path: &#39;index&#39;, query:&#123;id: &quot;zs&quot;&#125;&#125;);</code></li><li>路由参数获取：<code>$route.query.id</code></li><li>最后形成的路由：<code>/index?id=zs</code></li></ul></li></ul><p><strong>区别</strong></p><ul><li><p>获取参数方式不一样，一个通过<code>$route.params</code>，一个通过 <code>$route.query</code></p></li><li><p>参数的生命周期不一样，<code>query</code>参数在URL地址栏中显示不容易丢失，<code>params</code>参数不会在地址栏显示，刷新后会消失</p></li></ul></div><div class="story post-story"><h2 id="路由守卫"><a href="#路由守卫" class="headerlink" title="路由守卫"></a>路由守卫</h2><ul><li>全局前置钩子：<code>beforeEach</code>、<code>beforeResolve</code>、<code>afterEach</code></li><li>路由独享守卫：<code>beforeEnter</code></li><li>组件内钩子：<code>beforeRouterEnter</code>、<code>beforeRouterUpdate</code>、<code>beforeRouterLeave</code></li></ul></div><div class="story post-story"><h2 id="Vue中key的作用"><a href="#Vue中key的作用" class="headerlink" title="Vue中key的作用"></a>Vue中key的作用</h2><p><code>key</code>的作用主要是为了高效的更新虚拟DOM，其原理是<code>vue</code>在<code>patch</code>过程中通过<code>key</code>可以精准判断两个节点是否是同一个，从而避免频繁更新不同元素，减少<code>DOM</code>操作量，提高性能。</p></div><div class="story post-story"><h2 id="为什么不建议用index作为key"><a href="#为什么不建议用index作为key" class="headerlink" title="为什么不建议用index作为key?"></a>为什么不建议用index作为key?</h2><p>当删除或添加列表元素时，其后面的所有元素的下标都会发生改变，导致<code>Vue</code>重新渲染整个列表。导致性能问题。</p></div><div class="story post-story"><h2 id="v-for和v-if优先级"><a href="#v-for和v-if优先级" class="headerlink" title="v-for和v-if优先级"></a>v-for和v-if优先级</h2><p>vue2中for大于if</p><p>vue3中if大于for</p></div><div class="story post-story"><h2 id="slot是什么？有什么作用？"><a href="#slot是什么？有什么作用？" class="headerlink" title="slot是什么？有什么作用？"></a>slot是什么？有什么作用？</h2><p><code>slot</code>插槽，一般在封装组件的时候使用，在组件内不知道以那种形式来展示内容时，可以用<code>slot</code>来占据位置，最终展示形式由父组件以内容形式传递过来，主要分为三种：</p><ul><li><strong>默认插槽</strong>：又名匿名插槽，当<code>slot</code>没有指定<code>name</code>属性值的时候一个默认显示插槽，一个组件内只有有一个匿名插槽。</li><li><strong>具名插槽</strong>：带有具体名字的插槽，也就是带有<code>name</code>属性的<code>slot</code>，一个组件可以出现多个具名插槽。</li><li><strong>作用域插槽</strong>：默认插槽、具名插槽的一个变体，可以是匿名插槽，也可以是具名插槽，该插槽的不同点是在子组件渲染作用域插槽时，可以将子组件内部的数据传递给父组件，让父组件根据子组件的传递过来的数据决定如何渲染该插槽。</li></ul></div><div class="story post-story"><h2 id="对keep-alive的理解，它是如何实现的，具体缓存的是什么？"><a href="#对keep-alive的理解，它是如何实现的，具体缓存的是什么？" class="headerlink" title="对keep-alive的理解，它是如何实现的，具体缓存的是什么？"></a>对keep-alive的理解，它是如何实现的，具体缓存的是什么？</h2><p><code>keep-alive</code>是Vue.js的一个内置组件。它能够将不活动的组件实例保存在内存中，而不是直接将其销毁，它是一个抽象组件，不会被渲染到真实DOM中，也不会出现在父组件链中。</p><ul><li><code>include</code> 字符串或正则表达式，只有名称匹配的组件会被匹配；</li><li><code>exclude</code> 字符串或正则表达式，任何名称匹配的组件都不会被缓存；</li><li><code>max</code> 数字，最多可以缓存多少组件实例。</li></ul><p><strong>2 个生命周期 activated ， deactivated</strong></p><ul><li><code>activated</code>：当缓存的组件被激活时，该钩子函数被调用。可以在该钩子函数中进行一些状态恢复、数据更新等操作。</li><li><code>deactivated</code>：当缓存的组件被停用时，该钩子函数被调用。可以在该钩子函数中进行一些状态保存、数据清理等操作。</li></ul><p><code>keep-alive</code>内部其实是一个函数式组件，没有<code>template</code>标签。在<code>render</code>中通过获取组件的<code>name</code>和<code>include、exclude</code>进行匹配。匹配不成功，则不需要进行缓存，直接返回该组件的<code>vnode</code>。</p><p>匹配成功就进行缓存，获取组件的<code>key</code>在<code>cache</code>中进行查找，如果存在，则将他原来位置上的<code> key</code> 给移除，同时将这个组件的 <code>key</code> 放到数组最后面（<code>LRU</code>）也就实现了<code>max</code>功能。</p><p>不存在的话，就需要对组件进行缓存。将当前组件<code>push(key)</code>添加到尾部，然后再判断当前缓存的<code>max</code>是否超出指定个数，如果超出直接将第一个组件销毁（缓存淘汰策略LRU）。</p></div><div class="story post-story"><h2 id="nextTick-原理及作用"><a href="#nextTick-原理及作用" class="headerlink" title="$nextTick 原理及作用"></a>$nextTick 原理及作用</h2><p>Vue 的 <code>nextTick</code> 其本质是对 <code>JavaScript</code> 执行原理 <code>EventLoop</code> 的一种应用。 <code>nextTick</code>是将回调函数放到一个异步队列中，保证在异步更新DOM的<code>watcher</code>后面，从而获取到更新后的DOM。</p><p>因为在<code>created()</code>钩子函数中，页面的DOM还未渲染，这时候也没办法操作DOM，所以，此时如果想要操作DOM，必须将操作的代码放在<code>nextTick()</code>的回调函数中。</p></div><div class="story post-story"><h2 id="对虚拟DOM的理解"><a href="#对虚拟DOM的理解" class="headerlink" title="对虚拟DOM的理解"></a>对虚拟DOM的理解</h2><p>虚拟DOM就是用JS对象来表述DOM节点，是对真实DOM的一层抽象。可以通过一些列操作使这个棵树映射到真实DOM上。</p><p>如在<code>Vue</code>中，会把代码转换为虚拟DOM，在最终渲染到页面，在每次数据发生变化前，都会缓存一份虚拟DOM，通过<code>diff</code>算法来对比新旧虚拟DOM记录到一个对象中按需更新，最后创建真实DOM，从而提升页面渲染性能。</p></div><div class="story post-story"><h2 id="虚拟DOM就一定比真实DOM更快吗"><a href="#虚拟DOM就一定比真实DOM更快吗" class="headerlink" title="虚拟DOM就一定比真实DOM更快吗"></a>虚拟DOM就一定比真实DOM更快吗</h2><p><strong>虚拟DOM不一定比真实DOM更快，而是在特定情况下可以提供更好的性能。</strong></p><p>在复杂情况下，虚拟DOM可以比真实DOM操作更快，因为它是在内存中维护一个虚拟的DOM树，将真实DOM操作转换为对虚拟DOM的操作，然后通过<code>diff</code>算法找出需要更新的部分，最后只变更这部分到真实DOM就可以。在频繁变更下，它可以批量处理这些变化从而减少对真实DOM的访问和操作，减少浏览器的回流重绘，提高页面渲染性能。</p><p>而在一下简单场景下，直接操作真实DOM可能会更快，当更新操作很少或者只是局部改变时，直接操作真实DOM比操作虚拟DOM更高效，省去了虚拟DOM的计算、对比开销。</p></div><div class="story post-story"><h2 id="虚拟DOM的解析过程"><a href="#虚拟DOM的解析过程" class="headerlink" title="虚拟DOM的解析过程"></a>虚拟DOM的解析过程</h2><ul><li>首先对将要插入到文档中的 DOM 树结构进行分析，使用 js 对象将其表示出来，比如一个元素对象，包含 <code>TagName</code>、<code>props</code> 和 <code>Children</code> 这些属性。然后将这个 js 对象树给保存下来，最后再将 DOM 片段插入到文档中。</li><li>当页面的状态发生改变，需要对页面的 DOM 的结构进行调整的时候，首先根据变更的状态，重新构建起一棵对象树，然后将这棵新的对象树和旧的对象树进行比较，记录下两棵树的的差异。</li><li>最后将记录的有差异的地方应用到真正的 DOM 树中去，这样视图就更新了。</li></ul></div><div class="story post-story"><h2 id="DIFF算法原理"><a href="#DIFF算法原理" class="headerlink" title="DIFF算法原理"></a>DIFF算法原理</h2><p><code>diff</code>的目的是找出差异，最小化的更新视图。 <code>diff</code>算法发生在视图更新阶段，当数据发生变化的时候，<code>diff</code>会对新旧虚拟DOM进行对比，只渲染有变化的部分。</p></div><div class="story post-story"><h2 id="确定this的值"><a href="#确定this的值" class="headerlink" title="确定this的值"></a>确定this的值</h2><p>在非严格模式下，总是指向同一个对象，在严格模式下可以是任意值</p><table><thead><tr><th></th><th>非严格模式</th><th>严格模式</th></tr></thead><tbody><tr><td>全局环境</td><td>window</td><td>window</td></tr><tr><td>直接调用</td><td>window</td><td>undefined</td></tr><tr><td>对象方法调用</td><td>调用者</td><td>调用者</td></tr></tbody></table><p>开启严格模式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;面试八股&quot;&gt;&lt;a href=&quot;#面试八股&quot; class=&quot;headerlink&quot; title=&quot;面试八股&quot;&gt;&lt;/a&gt;面试八股&lt;/h1&gt;&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;MVVM&quot;&gt;&lt;a href=&quot;#MVVM&quot; class</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="面试八股" scheme="http://example.com/tags/%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1/"/>
    
  </entry>
  
  <entry>
    <title>git</title>
    <link href="http://example.com/2024/09/20/git/"/>
    <id>http://example.com/2024/09/20/git/</id>
    <published>2024-09-20T13:23:00.000Z</published>
    <updated>2025-05-11T11:39:22.178Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><ul><li><p>git init 初始化git仓库</p></li><li><p>git clone [本地目录] 克隆仓库到本地</p></li><li><p>git add (file) 添加工作区文件到暂存区</p></li><li><p>git commit -m (“message”) 从暂存区提交到本地仓库</p></li><li><p>git push [-f] [–set-upstream] [远端仓库名称 [本地分支名] [:远端分支名]] 推送到远程分支（同名可省略远端分支名）</p><p>–set-upstream 推送的同时建立起和远程分支的关联关系</p></li><li><p>git status 查看仓库状态</p></li><li><p>git reset –hard (commitId) 版本回退</p></li><li><p>git-log&#x2F;git log 查看版本</p></li><li><p>git branch 查看分支</p></li><li><p>git branch (dev) 创建分支</p></li><li><p>git branch -d (dev) 删除分支   -D 强制删除</p></li><li><p>git checkout (dev) 切换分支</p></li><li><p>git checkout -b (dev) 创建并切换分支</p></li><li><p>git merge (dev) 将某分支合并到当前分支</p></li><li><p>git fetch [remote name] [branch name] 抓取仓库里的更新到本地，不会进行合并</p></li><li><p>git pull [remote name] [branch name] 拉取远程仓库里的更新到本地,自动进行合并</p></li></ul></div><div class="story post-story"><h2 id="常见分支"><a href="#常见分支" class="headerlink" title="常见分支"></a>常见分支</h2><ul><li><p>master分支</p><p>线上运行分支，主分支</p></li><li><p>dev分支</p><p>从master创建的分支，开发分支，开发完成后合并到master分支</p></li><li><p>feature分支 </p><p>从dev创建的分支，同期并行开发一些功能，完成后合并到dev分支</p></li><li><p>hotfix分支</p><p>master派生的分支，线上bug修复使用，修复完成后合并到master、test、develop分支</p></li></ul></div><div class="story post-story"><h2 id="配置公-私钥"><a href="#配置公-私钥" class="headerlink" title="配置公&#x2F;私钥"></a>配置公&#x2F;私钥</h2><ul><li>用户（hzx）目录下</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br><span class="line"><span class="built_in">cat</span> .ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><ul><li>到代码托管平台粘贴公钥</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="关联远程仓库"><a href="#关联远程仓库" class="headerlink" title="关联远程仓库"></a>关联远程仓库</h2><ul><li>创建仓库时<strong>README,.gitignore，liscence</strong>都不要添加</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin(远端仓库名称) git@github.com:hzx-bit/git_test.git(远程仓库地址)</span><br></pre></td></tr></table></figure><ul><li>git remote 查看远程仓库</li><li>git push origin main 本地仓库推送到远程仓库</li></ul></div><div class="story post-story"><h2 id="同步远程仓库，远程解决冲突"><a href="#同步远程仓库，远程解决冲突" class="headerlink" title="同步远程仓库，远程解决冲突"></a>同步远程仓库，远程解决冲突</h2><ul><li>git fetch+git merge：拉取远程仓库+合并</li><li>git pull</li></ul></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;常用命令&quot;&gt;&lt;a href=&quot;#常用命令&quot; class=&quot;headerlink&quot; title=&quot;常用命令&quot;&gt;&lt;/a&gt;常用命令&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;git init 初始化git仓库&lt;/p&gt;
&lt;</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="git" scheme="http://example.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>《我与地坛》文摘</title>
    <link href="http://example.com/2024/09/18/%E3%80%8A%E6%88%91%E4%B8%8E%E5%9C%B0%E5%9D%9B%E3%80%8B%E6%96%87%E6%91%98/"/>
    <id>http://example.com/2024/09/18/%E3%80%8A%E6%88%91%E4%B8%8E%E5%9C%B0%E5%9D%9B%E3%80%8B%E6%96%87%E6%91%98/</id>
    <published>2024-09-18T06:02:32.000Z</published>
    <updated>2025-02-13T06:47:17.663Z</updated>
    
    <content type="html"><![CDATA[<p>一个人，出生了，这就不再是一个可以辩论的问题，而只是上帝交给他的一个事实；上帝在交给我们这件事实的时候，已经顺便保证了它的结果，所以死是一件不必急于求成的事，死是一个必然会降临的节日。这样想过之后我安心多了，眼前的一切不再那么可怕。比如你起早熬夜准备考试的时候，忽然想起有一个长长的假期在前面等待你，你会不会觉得轻松一点儿？并且庆幸并且感激这样的安排？</p><hr><p>有一年，十月的风又翻动起安详的落叶，我在园中读书，听见两个散步的老人说：“没想到这园子有这么大。”我放下书，想，这么大一座园子，要在其中找到她的儿子，母亲走过了多少焦灼的路。多年来我头一次意识到，这园中不单是处处都有过我的车辙，有过我的车辙的地方也都有过母亲的脚印。</p><hr><p>谁又能把这世界想个明白呢？世上的很多事是不堪说的。你可以抱怨上帝何以要降诸多苦难给这人间，你也可以为消灭种种苦难而奋斗，并为此享有崇高与骄傲，但只要你再多想一步你就会坠入深深的迷茫了：假如世界上没有了苦难，世界还能够存在么？要是没有愚钝，机智还有什么光荣呢？要是没了丑陋，漂亮又怎么维系自己的幸运？要是没有了恶劣和卑下，善良与高尚又将如何界定自己又如何成为美德呢？要是没有了残疾，健全会否因其司空见惯而变得腻烦和乏味呢？我常梦想着在人间彻底消灭残疾，但可以相信，那时将由患病者代替残疾人去承担同样的苦难。如果能够把疾病也全数消灭，那么这份苦难又将由(比如说)相貌丑陋的人去承担了。就算我们连丑陋，连愚昧和卑鄙和一切我们所不喜欢的事物和行为，也都可以统统消灭掉，所有的人都一样健康、漂亮、聪慧、高尚，结果会怎样呢？怕是人间的剧目就全要收场了，一个失去差别的世界将是一潭死水，是一块没有感觉没有肥力的沙漠。</p><p>看来差别永远是要有的。看来就只好接受苦难——人类的全部剧目需要它，存在的本身需要它。看来上帝又一次对了。</p><p>于是就有一个最令人绝望的结论等在这里：由谁去充任那些苦难的角色？又有谁去体现这世间的幸福、骄傲和快乐？只好听凭偶然，是没有道理好讲的。</p><p>就命运而言，休论公道。</p><p>那么，一切不幸命运的救赎之路在哪里呢？</p><p>设若智慧或悟性可以引领我们去找到救赎之路，难道所有的人都能够获得这样的智慧和悟性吗？</p><p>我常以为是丑女造就了美人。我常以为是愚氓举出了智者。我常以为是懦夫衬照了英雄。我常以为是众生度化了佛祖。</p><hr><p>这下好了，您不再恐慌了不再是个人质了，您自由了。算了吧你，我怎么可能自由呢？别忘了人真正的名字是：欲望。所以您得知道，消灭恐慌的最有效的办法就是消灭欲望。可是我还知道，消灭人性的最有效的办法也是消灭欲望。那么，是消灭欲望同时也消灭恐慌呢？还是保留欲望同时也保留人生？</p><p>我在这园子里坐着，我听见园神告诉我：每一个有激情的演员都难免是一个人质。每一个懂得欣赏的观众都巧妙地粉碎了一场阴谋。每一个乏味的演员都是因为他老以为这戏剧与自己无关。每一个倒霉的观众都是因为他总是坐得离舞台太近了。<br>我在这园子里坐着，园神成年累月地对我说：孩子，这不是别的，这是你的罪孽和福祉。</p><hr><p>要是有些事我没说，地坛，你别以为是我忘了，我什么也没忘，但是有些事只适合收藏。不能说，也不能想，却又不能忘。它们不能变成语言，它们无法变成语言，一旦变成语言就不再是它们了。它们是一片朦胧的温馨与寂寥，是一片成熟的希望与绝望，它们的领地只有两处：心与坟墓。比如说邮票，有些是用于寄信的，有些仅仅是为了收藏。</p><hr><p>我说不好我想不想回去。我说不好是想还是不想，还是无所谓。我说不好我是像那个孩子，还是像那个老人，还是像一个热恋中的情人。很可能是这样：我同时是他们三个。我来的时候是个孩子，他有那么多孩子气的念头所以才哭着喊着闹着要来，他一来一见到这个世界便立刻成了不要命的情人，而对一个情人来说，不管多么漫长的时光也是稍纵即逝，那时他便明白，每一步每一步，其实一步步都是走在回去的路上。当牵牛花初开的时节，葬礼的号角就已吹响。</p><p>但是太阳，它每时每刻都是夕阳也都是旭日。当它熄灭着走下山去收尽苍凉残照之际，正是它在另一面燃烧着爬上山巅布散烈烈朝辉之时。那一天，我也将沉静着走下山去，扶着我的拐杖。有一天，在某一处山洼里，势必会跑上来一个欢蹦的孩子，抱着他的玩具。</p><p>当然，那不是我。</p><p>但是，那不是我吗？</p><p>宇宙以其不息的欲望将一个歌舞炼为永恒。这欲望有怎样一个人间的姓名，大可忽略不计。</p><hr><p>因此偶尔有人说我是活在世外桃源，语气中不免流露了一点儿讥讽，仿佛这全是出于我的自娱甚至自欺。我颇不以为然。我既非活在世外桃源，也从不相信有什么世外桃源。但我相信世间桃源，世间确有此源，如果没有恐怕谁也就不想再活；倘此源有时弱小下去，依我看，至少讥讽并不能使其强大。千万年来它作为现实，更作为信念，这才不断。它源于心中再流入心中，它施于心又由于心，这才不断。欲其强大，舍心之虔诚又向何求呢？</p><p>也有人说我是不是一直活在童话里？语气中既有赞许又有告诫。赞许并且告诫，这很让我信服。赞许既在，告诫并不意指人们之间应该加固一条防线，而只是提醒我：童话的缺憾不在于它太美，而在于它必要走进一个更为纷繁而且严酷的世界，那时只怕它太娇嫩。</p><hr><p>我想，倘有来世，我先要占住几项先天的优越：聪明、漂亮和一副好身体。命运从一开始就不公平，人一生下来就有走运的和不走运的。譬如说一个人很笨，这该怨他自己吗？然而由此所导致的一切后果却完全要由他自己负责——他可能因此在兄弟姐妹之中是最不被父母喜爱的一个，他可能因此常受教师的斥责和同学们的嘲笑，他于是便更加自卑、更加委顿，饱受了轻蔑终也不知这事到底该怨谁。再譬如说，一个人生来就丑，相当丑，再怎么想办法去美容都无济于事，这难道是他的错误是他的罪过？不是，好，不是。那为什么就该他难得姑娘们的喜欢呢？因而婚事就变得格外困难，一旦有个漂亮姑娘爱上他却又赢得多少人的惊诧和不解，终于有了孩子，不要说别人就连他自己都希望孩子千万别长得像他自己。为什么就该他是这样呢？为什么就该他常遭取笑，常遭哭笑不得的外号，或者常遭怜悯，常遭好心人小心翼翼地对待呢？再说身体，有的人生来就肩宽腿长潇洒英俊（或者婀娜妩媚娉娉婷婷），生来就有一身好筋骨，跑得也快跳得也高，气力足耐力又好，精力旺盛，而且很少生病，可有的人却与此相反生来就样样都不如人。对于身体，我的体会尤甚。譬如写文章，有的人写一整天都不觉得累，可我连续写上三四个钟头眼前就要发黑。譬如和朋友们一起去野游，满心欢喜妙想联翩地到了地方，大家的热情正高雅趣正浓，可我已经累得只剩了让大家扫兴的份儿了。所以我真希望来世能有一副好身体。今生就不去想它了，只盼下辈子能够谨慎投胎，有健壮优美如卡尔·刘易斯一般的身材和体质，有潇洒漂亮如周恩来一般的相貌和风度，有聪明智慧如阿尔伯特·爱因斯坦一般的大脑和灵感。</p><p>既然是梦想不妨就让它完美些罢。何必连梦想也那么拘谨那么谦虚呢？我便如醉如痴并且极端自私自利地梦想下去。</p><hr><p>其实秘密就已经是墙了。肚皮和眼皮都是墙，假笑和伪哭都是墙，只因这样的墙嫌软嫌累，要弄些坚实耐久的来加密。就算这心灵之墙可以轻易拆除，但山和水都是墙，天和地都是墙，时间和空间都是墙，命运是无穷的限制，上帝的秘密是不尽的墙。真要把这秘密之墙也都拆除，虽然很像是由来已久的理想接近了实现，但是等着瞧吧，满地球都怕要因为失去趣味而响起昏昏欲睡的鼾声，梦话亦不知从何说起。</p><p>趣味是要紧而又要紧的。秘密要好好保存。</p><p>探秘的欲望终于要探到意义的墙下。</p><hr><p>真是神奇。很可能，生和死都不过取决于观察，取决于观察的远与近。比如，当一颗距离我们数十万光年的星星实际早已熄灭，它却正在我们的视野里度着它的青年时光。</p><p>时间限制了我们，习惯限制了我们，谣言般的舆论让我们陷于实际，让我们在白昼的魔法中闭目塞听不敢妄为。白昼是一种魔法，一种符咒，让僵死的规则畅行无阻，让实际消磨掉神奇。所有的人都在白昼的魔法之下扮演着紧张、呆板的角色，一切言谈举止，一切思绪与梦想，都仿佛被预设的程序所圈定。</p><p>因而我盼望夜晚，盼望黑夜，盼望寂静中自由的到来。</p><p>甚至盼望站到死中，去看生。</p><hr><p>历史的每一瞬间，都有无数的历史蔓展，都有无限的时间延伸。我们生来孤单，无数的历史和无限的时间因破碎而成片断。互相埋没的心流，在孤单中祈祷，在破碎处眺望，或可指望在梦中团圆。记忆，所以是一个牢笼。印象是牢笼以外的天空。</p><hr><p>谁说我没有死过?<br>出生以前，太阳<br>已无数次起落<br>悠久的时光被悠久的虚无吞并<br>又以我生日的名义<br>卷土重来。</p><hr><p>然而，终于这一天到来之时，时间已经远远地超过了暂时。我独自看那“编剧”后面的三个字，早已懂得:有为，与爱情，原是风马牛不相及的两个领域。但暂时，亦可在心中长久，而写作，却永远地不能与爱情无关。</p><hr><p>但要是“爱”也喧嚣，“美”也招摇，“真诚”沦为一句时髦的广告，那怎么办?惟柔弱是爱愿的识别，正如放弃是喧嚣的解剂。人一活脱便要嚣张，天生的这么一种动物。这动物适合在地坛放养些时日——我是说当年的地坛。<br>回望地坛，回望它的安静，想念中坐在不管它的哪一个角落，重新铺开一张纸吧。写，真是个办法，油然地通向着安静。写，这形式，注定是个人的，容易撞见诚实，容易被诚实揪住不放，容易在市场之外遭遇心中的阴暗，在自以为是时回归零度。把一切污浊、畸形、歧路，重新放回到那儿去检查，勿使伪劣的心魂流布。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;一个人，出生了，这就不再是一个可以辩论的问题，而只是上帝交给他的一个事实；上帝在交给我们这件事实的时候，已经顺便保证了它的结果，所以死是一件不必急于求成的事，死是一个必然会降临的节日。这样想过之后我安心多了，眼前的一切不再那么可怕。比如你起早熬夜准备考试的时候，忽然想起有一</summary>
      
    
    
    
    <category term="文摘" scheme="http://example.com/categories/%E6%96%87%E6%91%98/"/>
    
    
    <category term="《我与地坛》" scheme="http://example.com/tags/%E3%80%8A%E6%88%91%E4%B8%8E%E5%9C%B0%E5%9D%9B%E3%80%8B/"/>
    
  </entry>
  
  <entry>
    <title>react</title>
    <link href="http://example.com/2024/09/16/react/"/>
    <id>http://example.com/2024/09/16/react/</id>
    <published>2024-09-16T02:24:16.000Z</published>
    <updated>2025-04-12T02:56:04.095Z</updated>
    
    <content type="html"><![CDATA[<h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><table><thead><tr><th>文件夹</th><th>作用</th></tr></thead><tbody><tr><td>apis</td><td>接口</td></tr><tr><td>assets</td><td>静态资源</td></tr><tr><td>components</td><td>通用组件</td></tr><tr><td>pages</td><td>页面级组件</td></tr><tr><td>router</td><td>路由Router</td></tr><tr><td>store</td><td>Redux状态</td></tr><tr><td>utils</td><td>工具函数</td></tr></tbody></table><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i sass @craco/craco -D</span><br><span class="line">npm i antd react-router-dom axios @reduxjs/toolkit react-redux </span><br></pre></td></tr></table></figure><h3 id="配置别名路径"><a href="#配置别名路径" class="headerlink" title="配置别名路径"></a>配置别名路径</h3><ul><li>项目根目录创建craco.config.js，添加路径解析配置</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">webpack</span>:&#123;</span><br><span class="line">        <span class="attr">alias</span>:&#123;</span><br><span class="line">            <span class="string">&#x27;@&#x27;</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>package.json中配置启动和打包配置</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;start&quot;</span>: <span class="string">&quot;craco start&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;craco build&quot;</span>,</span><br><span class="line">    <span class="string">&quot;test&quot;</span>: <span class="string">&quot;craco test&quot;</span>,</span><br><span class="line">    <span class="string">&quot;eject&quot;</span>: <span class="string">&quot;react-scripts eject&quot;</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h3 id="配置路由"><a href="#配置路由" class="headerlink" title="配置路由"></a>配置路由</h3><ul><li><p>page文件夹放置路由组件<code>&lt;Outlet/&gt;</code>,或navigate&#x3D;useNavigate()，调用navigate()函数</p></li><li><p>router文件夹配置路由 createBrowserRouter</p></li><li><p>index.js 提供路由 <code>&lt;RouterProvider router=&#123;router&#125;/&gt;</code></p></li><li><p>获取parameter</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">navigate</span>(<span class="string">&#x27;/article?id=1001&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> [params] = <span class="title function_">useSearchParams</span>()</span><br><span class="line"><span class="keyword">let</span> id = params.<span class="title function_">get</span>(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/article/:id/:name&#x27;</span></span><br><span class="line"><span class="title function_">navigate</span>(<span class="string">&#x27;/article/1001/jack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> params = <span class="title function_">useParams</span>()</span><br><span class="line"><span class="keyword">let</span> id = params.<span class="property">id</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="刷新页面"><a href="#刷新页面" class="headerlink" title="刷新页面"></a>刷新页面</h3><p>window.location.reload()</p><h3 id="项目打包"><a href="#项目打包" class="headerlink" title="项目打包"></a>项目打包</h3><ul><li>npm run build</li><li>serve -s build</li></ul><h3 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Home</span> = <span class="title function_">lazy</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&quot;@/pages/Home&quot;</span>))</span><br><span class="line">&lt;<span class="title class_">Suspense</span>  fallback=&#123;<span class="string">&#x27;加载中&#x27;</span>&#125;&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">Home</span>/&gt;</span></span>&lt;/<span class="title class_">Suspense</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="包体积可视化分析"><a href="#包体积可视化分析" class="headerlink" title="包体积可视化分析"></a>包体积可视化分析</h3><ul><li><p>npm i source-map-explore</p></li><li><p>package.json中配置</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;craco start&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;craco build&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;craco test&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eject&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-scripts eject&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;analyze&quot;</span><span class="punctuation">:</span><span class="string">&quot;source-map-explorer &#x27;build/static/js/*.js&#x27;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></li><li><p>npm run analyze</p></li></ul><h3 id="CDN优化"><a href="#CDN优化" class="headerlink" title="CDN优化"></a>CDN优化</h3><ul><li><p>CDN是一种内容分发网络服务，当用户请求网站内容时，由离用户最近的服务器将缓存的资源内容传递给用户</p></li><li><p>体积较大的非业务js文件，比如react、react-dom可以放到CDN服务器</p><ol><li>体积较大，需要利用CDN文件在浏览器的缓存特性，加快加载时间</li><li>非业务JS文件，不需要经常做变动，CDN不用频繁更新缓存</li></ol></li><li><p>具体做法</p><ul><li>把需要做CDN缓存的文件排除在打包之外</li><li>以CDN的方式重新引入资源</li></ul></li></ul><h3 id="跨域代理配置"><a href="#跨域代理配置" class="headerlink" title="跨域代理配置"></a>跨域代理配置</h3><ul><li><p>npm install http-proxy-middleware –save</p></li><li><p>npm install axios</p></li><li><p>新建setupProxy.js文件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createProxyMiddleware &#125; = <span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">app</span>) &#123;</span><br><span class="line">  app.<span class="title function_">use</span>(</span><br><span class="line">    <span class="string">&#x27;/api1&#x27;</span>,</span><br><span class="line">    <span class="title function_">createProxyMiddleware</span>(&#123;</span><br><span class="line">      <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5000&#x27;</span>,</span><br><span class="line">      <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">pathRewrite</span>:&#123;<span class="string">&#x27;^/api1&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h3 id="发布订阅"><a href="#发布订阅" class="headerlink" title="发布订阅"></a>发布订阅</h3><blockquote><p>xxxxxxxxxx import { ElLoading } from ‘element-plus’import ‘element-plus&#x2F;theme-chalk&#x2F;el-loading.css’&#x2F;&#x2F; 跳转前router.beforeEach((to,from,next)&#x3D;&gt;{  ElLoading.service({    fullscreen: true,    text: ‘Loading…’  })  window.scrollTo(0,0)  next()})&#x2F;&#x2F; 跳转后router.afterEach((to)&#x3D;&gt;{  setTimeout(()&#x3D;&gt;{    const loadingInstance &#x3D; ElLoading.service()    loadingInstance.close()  },1000)  document.title &#x3D; to.meta.title || ‘my project’})jsx</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">PubSub</span> <span class="keyword">from</span> <span class="string">&#x27;pubsub-js&#x27;</span><span class="comment">//引入</span></span><br><span class="line"><span class="title class_">PubSub</span>.<span class="title function_">publish</span>(<span class="string">&#x27;atguigu&#x27;</span>,&#123;<span class="attr">isFirst</span>:<span class="literal">false</span>,<span class="attr">isLoading</span>:<span class="literal">true</span>&#125;)<span class="comment">//发布</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">token</span> = <span class="title class_">PubSub</span>.<span class="title function_">subscribe</span>(<span class="string">&#x27;atguigu&#x27;</span>,<span class="function">(<span class="params">_,data</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setState</span>(data);</span><br><span class="line">    &#125;)<span class="comment">//订阅</span></span><br><span class="line"><span class="title class_">PubSub</span>.<span class="title function_">unsubscribe</span>(<span class="variable language_">this</span>.<span class="property">token</span>);<span class="comment">//取消订阅</span></span><br></pre></td></tr></table></figure><h3 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">async</span>()=&gt;&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`/api1/search/user2?q=<span class="subst">$&#123;KeyWord&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(error)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求出错&#x27;</span>,error);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="classNames（高亮切换）"><a href="#classNames（高亮切换）" class="headerlink" title="classNames（高亮切换）"></a>classNames（高亮切换）</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span></span><br><span class="line">&lt;className=&#123;<span class="title function_">classNames</span>(<span class="string">&#x27;normal-style&#x27;</span>,&#123;<span class="string">&#x27;active&#x27;</span>:type===item.<span class="property">type</span>&#125;)&#125;&gt;</span><br><span class="line">&lt;className=&#123;<span class="title function_">classNames</span>(<span class="string">&#x27;normal-style&#x27;</span>,type===item.<span class="property">type</span>&amp;&amp;<span class="string">&#x27;active&#x27;</span>)&#125;&gt;</span><br></pre></td></tr></table></figure><h3 id="uuid"><a href="#uuid" class="headerlink" title="uuid"></a>uuid</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; v4 <span class="keyword">as</span> uuidv4 &#125; <span class="keyword">from</span> <span class="string">&#x27;uuid&#x27;</span>;</span><br><span class="line"><span class="title function_">uuidv4</span>();</span><br></pre></td></tr></table></figure><h3 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRef&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">const</span> inputRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">/&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">inputRef.<span class="property">current</span><span class="comment">//拿到节点</span></span><br></pre></td></tr></table></figure><h3 id="跨级传递信息"><a href="#跨级传递信息" class="headerlink" title="跨级传递信息"></a>跨级传递信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//封装上下文对象给生产者和消费者</span><br><span class="line">//MsgContext.js</span><br><span class="line">import &#123;createContext&#125; from &#x27;react&#x27;</span><br><span class="line">export default const MsgContext = createContext()</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//顶层组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MsgContext</span> <span class="keyword">from</span> <span class="string">&#x27;./MsgContext.js&#x27;</span></span><br><span class="line">&lt;<span class="title class_">MsgContext</span>.<span class="property">Provider</span> value=&#123;<span class="string">&#x27;this is a msg&#x27;</span>&#125;&gt;</span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">Component</span>/&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">MsgContext</span>.<span class="property">Provider</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//底层组件</span></span><br><span class="line"><span class="keyword">import</span> &#123;useContext&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MsgContext</span> <span class="keyword">from</span> <span class="string">&#x27;./MsgContext.js&#x27;</span></span><br><span class="line"><span class="keyword">const</span> msg = <span class="title function_">useContext</span>(<span class="title class_">MsgContext</span>);</span><br></pre></td></tr></table></figure><h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><ul><li>无参：初始和更新</li><li>空数组：初始</li><li>依赖项：初始和依赖项发生变化</li><li>返回的函数在组件销毁时调用</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useEffect,useState&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">URL</span>=<span class="string">&#x27;http://geek.itheima.net/v1_0/channels&#x27;</span></span><br><span class="line"><span class="keyword">const</span> [list, setList] = <span class="title function_">useState</span>([]);</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getList</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> res =<span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="variable constant_">URL</span>);</span><br><span class="line">      <span class="keyword">const</span> jsonRes =<span class="keyword">await</span> res.<span class="title function_">json</span>();</span><br><span class="line">      <span class="title function_">setList</span>(jsonRes.<span class="property">data</span>.<span class="property">channels</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">getList</span>();</span><br><span class="line">    <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;............&#x27;</span>)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(timer)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,[]);</span><br></pre></td></tr></table></figure><h3 id="json-server"><a href="#json-server" class="headerlink" title="json-server"></a>json-server</h3><ul><li>npm install json-server</li><li>根目录下新建db.json</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;posts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;json-server&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typicode&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;comments&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;body&quot;</span><span class="punctuation">:</span> <span class="string">&quot;some comment&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;postId&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;profile&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typicode&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;rpid&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;uid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;13258165&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;avatar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://tse3-mm.cn.bing.net/th/id/OIP-C.FY7sfLpXX6K8x4SfSxFA0gHaHa?w=200&amp;h=199&amp;c=7&amp;r=0&amp;o=5&amp;dpr=2&amp;pid=1.7&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;uname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;周杰伦&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;哎哟，不错哦&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ctime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;10-18 08:15&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;like&quot;</span><span class="punctuation">:</span> <span class="number">99</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;rpid&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;uid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;36080105&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;avatar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://tse4-mm.cn.bing.net/th/id/OIP-C.B7PjPsZql8BH1LLnLZawvgAAAA?w=195&amp;h=195&amp;c=7&amp;r=0&amp;o=5&amp;dpr=2&amp;pid=1.7&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;uname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;许嵩&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我寻你千百度 日出到迟暮&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;ctime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;11-13 11:29&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;like&quot;</span><span class="punctuation">:</span> <span class="number">88</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;rpid&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;uid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;30009257&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;avatar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://tse3-mm.cn.bing.net/th/id/OIP-C.FY7sfLpXX6K8x4SfSxFA0gHaHa?w=200&amp;h=199&amp;c=7&amp;r=0&amp;o=5&amp;dpr=2&amp;pid=1.7&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;uname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;黑马前端&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;学前端就来黑马&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ctime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;10-19 09:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;like&quot;</span><span class="punctuation">:</span> <span class="number">66</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>package.json 配置</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;serve&quot;</span><span class="punctuation">:</span> <span class="string">&quot;json-server db.json --port 3004&quot;</span></span><br></pre></td></tr></table></figure><ul><li>npm run serve</li></ul><h3 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h3><ul><li>npm i @reduxjs&#x2F;toolkit react-redux</li></ul><ol><li>在modules文件夹下创建不同的store切片，每个store有自己的name、initialState和reducers，reducers有管理状态的方法（与actions同名）。从store中解构出actions和reducer并导出</li><li>在index.js中导入reducer，配置store中的reducer</li><li><code>&lt;Provider store=&#123;store&#125;&gt;</code>包裹根节点</li><li>在App.js中用useSelector取出数据，用useDispatch产生dispatch函数，导入actions，需要时调用dispatch（action)</li></ol><h3 id="useMemo"><a href="#useMemo" class="headerlink" title="useMemo"></a>useMemo</h3><p>使用场景：缓存性能消耗大的计算</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useMemo, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fib</span> (<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;计算函数执行了&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (n &lt; <span class="number">3</span>) <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">fib</span>(n - <span class="number">2</span>) + <span class="title function_">fib</span>(n - <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="comment">// 计算斐波那契之和</span></span><br><span class="line">  <span class="comment">// const sum = fib(count)</span></span><br><span class="line">  <span class="comment">// 通过useMemo缓存计算结果，只有count发生变化时才重新计算</span></span><br><span class="line">  <span class="keyword">const</span> sum = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fib</span>(count)</span><br><span class="line">  &#125;, [count])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [num, setNum] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;sum&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;+count:&#123;count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setNum(num + 1)&#125;&gt;+num:&#123;num&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h1 id="React-memo"><a href="#React-memo" class="headerlink" title="React.memo"></a>React.memo</h1><p>作用：允许组件在props没有改变的情况下跳过重新渲染</p><blockquote><p>机制：只有props发生变化时才重新渲染<br>下面的子组件通过 memo 进行包裹之后，返回一个新的组件MemoSon, 只有传给MemoSon的props参数发生变化时才会重新渲染</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoSon</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;子组件被重新渲染了&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>this is span<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [, forceUpdate] = <span class="title function_">useState</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;父组件重新渲染了&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MemoSon</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> forceUpdate(Math.random())&#125;&gt;update<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><div class="story post-story"><h2 id="props变化重新渲染"><a href="#props变化重新渲染" class="headerlink" title="props变化重新渲染"></a>props变化重新渲染</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoSon</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;子组件被重新渲染了&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>this is span<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;父组件重新渲染了&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MemoSon</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;+&#123;count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>对于props的比较，进行的是‘浅比较’，底层使用 <code>Object.is</code> 进行比较，针对于对象数据类型，只会对比俩次的引用是否相等，如果不相等就会重新渲染，React并不关心对象中的具体属性</p></div><div class="story post-story"><h2 id="useCallback缓存函数"><a href="#useCallback缓存函数" class="headerlink" title="useCallback缓存函数"></a>useCallback缓存函数</h2><blockquote><p>useCallback缓存之后的函数可以在组件渲染时保持引用稳定，也就是返回同一个引用</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// useCallBack</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; memo, useCallback, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoSon</span> = <span class="title function_">memo</span>(<span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Son组件渲染了&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>this is son<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [, forceUpate] = <span class="title function_">useState</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;父组件重新渲染了&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> onGetSonMessage = <span class="title function_">useCallback</span>(<span class="function">(<span class="params">message</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(message)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MemoSon</span> <span class="attr">onGetSonMessage</span>=<span class="string">&#123;onGetSonMessage&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> forceUpate(Math.random())&#125;&gt;update<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h1 id="forwardRef"><a href="#forwardRef" class="headerlink" title="forwardRef"></a>forwardRef</h1><p>作用：允许组件使用ref将一个DOM节点暴露给父组件</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; forwardRef, useRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyInput</span> = <span class="title function_">forwardRef</span>(<span class="keyword">function</span> <span class="title function_">Input</span>(<span class="params">props, ref</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> /&gt;</span></span></span><br><span class="line">&#125;, [])</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> ref = <span class="title function_">useRef</span>(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">focusHandle</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(ref.<span class="property">current</span>.<span class="title function_">focus</span>())</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MyInput</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;focusHandle&#125;</span>&gt;</span>focus<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h1 id="useImperativeHandle"><a href="#useImperativeHandle" class="headerlink" title="useImperativeHandle"></a>useImperativeHandle</h1><p>作用：如果我们并不想暴露子组件中的DOM而是想暴露子组件内部的方法</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; forwardRef, useImperativeHandle, useRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyInput</span> = <span class="title function_">forwardRef</span>(<span class="keyword">function</span> <span class="title function_">Input</span>(<span class="params">props, ref</span>) &#123;</span><br><span class="line">  <span class="comment">// 实现内部的聚焦逻辑</span></span><br><span class="line">  <span class="keyword">const</span> inputRef = <span class="title function_">useRef</span>(<span class="literal">null</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">focus</span> = (<span class="params"></span>) =&gt; inputRef.<span class="property">current</span>.<span class="title function_">focus</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 暴露子组件内部的聚焦方法</span></span><br><span class="line">  <span class="title function_">useImperativeHandle</span>(ref, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      focus,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> ref = <span class="title function_">useRef</span>(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">focusHandle</span> = (<span class="params"></span>) =&gt; ref.<span class="property">current</span>.<span class="title function_">focus</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MyInput</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;focusHandle&#125;</span>&gt;</span>focus<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h3 id="Zustand"><a href="#Zustand" class="headerlink" title="Zustand"></a>Zustand</h3><p><a href="https://docs.pmnd.rs/zustand/getting-started/introduction">Zustand Documentation</a></p><h4 id="store-index-js-创建store"><a href="#store-index-js-创建store" class="headerlink" title="store&#x2F;index.js - 创建store"></a>store&#x2F;index.js - 创建store</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span></span><br><span class="line"><span class="comment">//1. 使用create方法创建store</span></span><br><span class="line"><span class="comment">//2. 函数参数必须返回一个对象，包含状态数据和方法</span></span><br><span class="line"><span class="comment">//3. set是用来修改数据的专门方法</span></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">inc</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">set</span>(<span class="function"><span class="params">state</span> =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useStore</span><br></pre></td></tr></table></figure><h4 id="app-js-绑定组件"><a href="#app-js-绑定组件" class="headerlink" title="app.js - 绑定组件"></a>app.js - 绑定组件</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> useStore <span class="keyword">from</span> <span class="string">&#x27;./store/useCounterStore.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; count, inc &#125; = <span class="title function_">useStore</span>()</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;inc&#125;</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h4 id="异步支持"><a href="#异步支持" class="headerlink" title="异步支持"></a>异步支持</h4><p>对于异步操作的支持不需要特殊的操作，直接在函数中编写异步逻辑，最后把接口的数据放到set函数中返回即可</p><h4 id="store-index-js-创建store-1"><a href="#store-index-js-创建store-1" class="headerlink" title="store&#x2F;index.js - 创建store"></a>store&#x2F;index.js - 创建store</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">URL</span> = <span class="string">&#x27;http://geek.itheima.net/v1_0/channels&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">ins</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">set</span>(<span class="function"><span class="params">state</span> =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">channelList</span>: [],</span><br><span class="line">    <span class="attr">fetchChannelList</span>: <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="variable constant_">URL</span>)</span><br><span class="line">      <span class="keyword">const</span> jsonData = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">      <span class="title function_">set</span>(&#123;<span class="attr">channelList</span>: jsonData.<span class="property">data</span>.<span class="property">channels</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useStore</span><br></pre></td></tr></table></figure><h4 id="app-js-绑定组件-1"><a href="#app-js-绑定组件-1" class="headerlink" title="app.js - 绑定组件"></a>app.js - 绑定组件</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> useChannelStore <span class="keyword">from</span> <span class="string">&#x27;./store/channelStore&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; channelList, fetchChannelList &#125; = <span class="title function_">useChannelStore</span>()</span><br><span class="line"> </span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">fetchChannelList</span>()</span><br><span class="line">  &#125;, [fetchChannelList])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;channelList.map((item) =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h4 id="切片模式"><a href="#切片模式" class="headerlink" title="切片模式"></a>切片模式</h4><p>场景：当我们单个store比较大的时候，可以采用一种<code>切片模式</code>进行模块拆分再组合</p><h4 id="拆分并组合切片"><a href="#拆分并组合切片" class="headerlink" title="拆分并组合切片"></a>拆分并组合切片</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建counter相关切片</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">createCounterStore</span> = (<span class="params">set</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">setCount</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">set</span>(<span class="function"><span class="params">state</span> =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建channel相关切片</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">createChannelStore</span> = (<span class="params">set</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">channelList</span>: [],</span><br><span class="line">    <span class="attr">fetchGetList</span>: <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="variable constant_">URL</span>)</span><br><span class="line">      <span class="keyword">const</span> jsonData = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">      <span class="title function_">set</span>(&#123; <span class="attr">channelList</span>: jsonData.<span class="property">data</span>.<span class="property">channels</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 组合切片</span></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">...a</span>) =&gt;</span> (&#123;</span><br><span class="line">  ...<span class="title function_">createCounterStore</span>(...a),</span><br><span class="line">  ...<span class="title function_">createChannelStore</span>(...a)</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure><h4 id="组件使用"><a href="#组件使用" class="headerlink" title="组件使用"></a>组件使用</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;count, inc, channelList, fetchChannelList &#125; = <span class="title function_">useStore</span>()</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;inc&#125;</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;channelList.map((item) =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h4 id="对接DevTools"><a href="#对接DevTools" class="headerlink" title="对接DevTools"></a>对接DevTools</h4><blockquote><p>简单的调试我们可以安装一个 名称为 simple-zustand-devtools 的调试工具</p></blockquote><h4 id="安装调试包"><a href="#安装调试包" class="headerlink" title="安装调试包"></a>安装调试包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i simple-zustand-devtools -D</span><br></pre></td></tr></table></figure><h4 id="配置调试工具"><a href="#配置调试工具" class="headerlink" title="配置调试工具"></a>配置调试工具</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> create <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入核心方法</span></span><br><span class="line"><span class="keyword">import</span> &#123; mountStoreDevtool &#125; <span class="keyword">from</span> <span class="string">&#x27;simple-zustand-devtools&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 省略部分代码...</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 开发环境开启调试</span></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;development&#x27;</span>) &#123;</span><br><span class="line">  <span class="title function_">mountStoreDevtool</span>(<span class="string">&#x27;channelStore&#x27;</span>, useChannelStore)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useChannelStore</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;目录结构&quot;&gt;&lt;a href=&quot;#目录结构&quot; class=&quot;headerlink&quot; title=&quot;目录结构&quot;&gt;&lt;/a&gt;目录结构&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;文件夹&lt;/th&gt;
&lt;th&gt;作用&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbo</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="react" scheme="http://example.com/tags/react/"/>
    
  </entry>
  
</feed>
