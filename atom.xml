<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>hzx&#39;s blog</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2025-03-03T13:26:18.129Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>huangzhixin</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>计算机网络</title>
    <link href="http://example.com/2025/02/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    <id>http://example.com/2025/02/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</id>
    <published>2025-02-13T06:49:08.000Z</published>
    <updated>2025-03-03T13:26:18.129Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="OSI参考模型"><a href="#OSI参考模型" class="headerlink" title="OSI参考模型"></a>OSI参考模型</h2><p>从下往上分别是物理层，数据链路层，网络层，传输层，会话层，表示层和应用层。其中</p><p>物理层在通信信道中传输原始比特流。</p><p>数据链路层进行物理寻址，并且将原始比特流转化为逻辑链路。</p><p>网络层进行路由选择和分组转发。</p><p>传输层建立端到端的数据链接。</p><p>会话层在用户间建立和管理会话，</p><p>表示层进行数据格式转化和数据加密。</p><p>应用层为应用程序提供服务。</p></div><div class="story post-story"><h2 id="TCP-IP网络模型"><a href="#TCP-IP网络模型" class="headerlink" title="TCP&#x2F;IP网络模型"></a>TCP&#x2F;IP网络模型</h2><p>链路层：负责封装和解封装IP报文，发送和接受ARP&#x2F;RARP报文等。<br>网络层：负责路由以及把分组报文发送给目标网络或主机。<br>传输层：负责对报文进行分组和重组，并以TCP或UDP协议格式封装报文。<br>应用层：负责向用户提供应用程序，比如HTTP、FTP、Telnet、DNS、SMTP等。</p></div><div class="story post-story"><h2 id="HTTP请求-响应的步骤"><a href="#HTTP请求-响应的步骤" class="headerlink" title="HTTP请求&#x2F;响应的步骤"></a>HTTP请求&#x2F;响应的步骤</h2><ol><li>用户在浏览器地址栏输入URL,URL由协议、域名、端口号、文件路径组成，没有文件路径的时候，就会访问根目录下的默认文件，例如index.html</li><li>浏览器检查本地缓存是否有该域名对应的IP地址。如果缓存中没有，浏览器会通过递归方式请求本地DNS服务器、本地DNS服务器通过迭代方式请求根域名服务器、顶级域名服务器、权威域名服务器等，最终将IP地址返回给客户端，这个过程中浏览器、操作系统、各级DNS服务器都会先查看本地缓存，没有记录再去查询</li><li>浏览器通过IP地址和端口号与服务器建立TCP连接。也就是”三次握手“过程，如果是HTTPS协议，还会进行TLS&#x2F;SSL握手，确保通信安全。</li><li>浏览器向服务器发送HTTP请求，请求头中包含浏览器信息、支持的编码格式、Cookie等。服务器接收到请求后，根据路径和参数处理请求，生成响应内容。</li><li>服务器将响应数据和HTTP状态码返回给浏览器。响应头中包含内容类型、缓存策略等信息。</li><li>览器接收到响应后，开始解析HTML文件。解析过程中，浏览器会加载HTML中的CSS、JavaScript、图片等资源。浏览器构建DOM树、CSSOM树，合并生成渲染树，最后进行布局和绘制，将页面显示在屏幕上。</li><li>当所有资源加载完毕，页面完全渲染后，浏览器触发load事件，页面加载完成。</li><li>TCP连接关闭（四次挥手）</li></ol></div><div class="story post-story"><h2 id="在浏览器中输入URL到显示页面经历哪些过程，涉及到哪些协议？"><a href="#在浏览器中输入URL到显示页面经历哪些过程，涉及到哪些协议？" class="headerlink" title="在浏览器中输入URL到显示页面经历哪些过程，涉及到哪些协议？"></a>在浏览器中输入URL到显示页面经历哪些过程，涉及到哪些协议？</h2><p>浏览器要将URL解析为IP地址，解析域名就要用到DNS协议，</p><p>DNS服务器是基于UDP的，因此会用到UDP协议。</p><p>得到IP地址后，浏览器就要与服务器建立一个http连接。因此要用到http协议。</p><p>http生成一个get请求报文，将该报文传给TCP层处理，所以还会用到TCP协议。</p><p>然后会发送给IP层，用到IP协议。IP层通过路由选路，一跳一跳发送到目的地址。</p><p>当然在一个网段内的寻址是通过以太网协议实现(也可以是其他物理层协议，比如PPP，SLIP)，</p><p>以太网协议需要直到目的IP地址的物理地址，有需要ARP协议。</p></div><div class="story post-story"><h2 id="HTTP-的-5-种方法"><a href="#HTTP-的-5-种方法" class="headerlink" title="HTTP 的 5 种方法"></a>HTTP 的 5 种方法</h2><p>GET—获取资源<br>POST—传输资源<br>PUT—更新资源<br>DELETE—删除资源<br>HEAD—获取报文首部</p></div><div class="story post-story"><h2 id="POST请求和GET请求"><a href="#POST请求和GET请求" class="headerlink" title="POST请求和GET请求"></a>POST请求和GET请求</h2><ul><li><p>GET传递的参数在url后拼接，不安全。POST传递的参数在request body中，更安全。</p></li><li><p>GET对数据进行查询，POST主要对数据进行增删改！</p></li><li><p>GET在浏览器回退时是无害的，而POST会再次提交请求</p></li><li><p>GET请求会被浏览器主动缓存，POST不会，要手动设置</p></li><li><p>GET请求长度有限制，POST没有</p></li></ul></div><div class="story post-story"><h2 id="HTTP报文的组成成分"><a href="#HTTP报文的组成成分" class="headerlink" title="HTTP报文的组成成分"></a>HTTP报文的组成成分</h2><p>请求报文{ 请求行、请求头、空行、请求体 } </p><p>响应报文{ 状态行、响应头、空行、响应体 }</p><p>Request Header:<br>GET &#x2F;sample.Jsp HTTP&#x2F;1.1 &#x2F;&#x2F;请求行：{http方法、页面地址、http协议、http版本}<br>Host: <a href="http://www.uuid.online/">www.uuid.online/</a> &#x2F;&#x2F;请求的目标域名和端口号<br>Origin: <a href="http://localhost:8081/">http://localhost:8081/</a> &#x2F;&#x2F;请求的来源域名和端口号 （跨域请求时，浏览器会自动带上这个头信息）<br>Referer: <a href="https://localhost:8081/link?query=xxxxx">https://localhost:8081/link?query=xxxxx</a> &#x2F;&#x2F;请求资源的完整URI<br>User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;67.0.3396.99 Safari&#x2F;537.36 &#x2F;&#x2F;浏览器信息<br>Cookie: BAIDUID&#x3D;FA89F036:FG&#x3D;1; BD_HOME&#x3D;1; sugstore&#x3D;0 &#x2F;&#x2F;当前域名下的Cookie<br>Accept: text&#x2F;html,image&#x2F;apng &#x2F;&#x2F;代表客户端希望接受的数据类型是html或者是png图片类型<br>Accept-Encoding: gzip, deflate &#x2F;&#x2F;代表客户端能支持gzip和deflate格式的压缩<br>Accept-Language: zh-CN,zh;q&#x3D;0.9 &#x2F;&#x2F;代表客户端可以支持语言zh-CN或者zh(值得一提的是q(0~1)是优先级权重的意思，不写默认为1，这里zh-CN是1，zh是0.9)<br>Connection: keep-alive &#x2F;&#x2F;告诉服务器，客户端需要的tcp连接是一个长连接</p><p>Response Header:<br>HTTP&#x2F;1.1 200 OK &#x2F;&#x2F; 响应状态行：{http协议、http版本 响应码 状态}<br>Date: Mon, 30 Jul 2018 02:50:55 GMT &#x2F;&#x2F;服务端发送资源时的服务器时间<br>Expires: Wed, 31 Dec 1969 23:59:59 GMT &#x2F;&#x2F;比较过时的一种验证缓存的方式，与浏览器（客户端）的时间比较，超过这个时间就不用缓存（不和服务器进行验证），适合版本比较稳定的网页<br>Cache-Control: no-cache &#x2F;&#x2F; 现在最多使用的控制缓存的方式，会和服务器进行缓存验证<br>etag: “fb8ba2f80b1d324bb997cbe188f28187-ssl-df” &#x2F;&#x2F; 一般是Nginx静态服务器发来的静态文件签名，浏览在没有“Disabled cache”情况下，接收到etag后，同一个url第二次请求就会自动带上“If-None-Match”<br>Last-Modified: Fri, 27 Jul 2018 11:04:55 GMT &#x2F;&#x2F;是服务器发来的当前资源最后一次修改的时间，下次请求时，如果服务器上当前资源的修改时间大于这个时间，就返回新的资源内容<br>Content-Type: text&#x2F;html; charset&#x3D;utf-8 &#x2F;&#x2F;如果返回是流式的数据，我们就必须告诉浏览器这个头，不然浏览器会下载这个页面，同时告诉浏览器是utf8编码，否则可能出现乱码<br>Content-Encoding: gzip &#x2F;&#x2F;告诉客户端，应该采用gzip对资源进行解码<br>Connection: keep-alive &#x2F;&#x2F;告诉客户端服务器的tcp连接也是一个长连接</p></div><div class="story post-story"><h2 id="http-和-https-的区别？"><a href="#http-和-https-的区别？" class="headerlink" title="http 和 https 的区别？"></a>http 和 https 的区别？</h2><p>• http 是超文本传输协议，信息是明文传输，https 则是具有安全性的 ssl 加密传输协议。<br>• https 协议需要 ca 证书，费用较高。<br>• http 协议的端口为 80，https 的端口为 443。<br>• http 的连接很简单，是无状态的。</p></div><div class="story post-story"><h2 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h2><ol><li>一开始，客户端和服务端都处于CLOSED状态。先是服务端主动监听某个端口(HTTP默认端口号80,HTTPS默认端口号是443),处于LISTEN状态</li><li>然后客户端主动发起连接SYN,之后处于SYN-SENT状态。</li><li>服务端收到发起的连接，返回SYN,并且ACK客户端的SYN,之后处于SYN-RCVD状态</li><li>容户端收到服务端发送的SYN和ACK之后，发送对SYN确认的ACK,之后处于ESTABLISHED状态。</li><li>服务端收到ACK的ACK之后，处于ESTABLISHED状态</li></ol></div><div class="story post-story"><h2 id="TCP-四次挥手"><a href="#TCP-四次挥手" class="headerlink" title="TCP 四次挥手"></a>TCP 四次挥手</h2><ol><li>客户端进程发出连接释放报文，进入FIN-WAIT-1状态，并且停止发送数据。服务器收到连接释放报文，发出确认报文, 此时，服务端就进入了CLOSE-WAIT状态。这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。这个状态还要持续一段时间，也就是整个CLOSE-WAIT状态持续的时间。</li><li>客户端收到服务器的确认请求后，此时，客户端就进入FIN-WAIT-2状态，等待服务器发送连接释放报文（在这之前还需要接受服务器发送的最后的数据）。</li><li>服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，此时，服务器就进入了LAST-ACK状态，等待客户端的确认。</li><li>客户端收到服务器的连接释放报文后，必须发出确认,此时，客户端就进入了TIME-WAIT状态。注意此时TCP连接还没有释放，必须经过2∗MSL（最长报文段寿命）的时间后，才进入CLOSED状态。服务器只要收到了客户端发出的确认，立即进入CLOSED状态。可以看到，服务器结束TCP连接的时间要比客户端早一些。</li></ol></div><div class="story post-story"><h2 id="TCP和UDP的区别"><a href="#TCP和UDP的区别" class="headerlink" title="TCP和UDP的区别"></a>TCP和UDP的区别</h2><p>TCP的三次握手保证了连接的可靠性; UDP是无连接的、不可靠的一种数据传输协议。</p><p>TCP仅支持单播传输，UDP 提供了单播，多播，广播的功能。</p><p>UDP的头部开销比TCP的更小，数据传输速率更高，实时性更好。</p></div><div class="story post-story"><h2 id="Cookie、sessionStorage、localStorage-的区别"><a href="#Cookie、sessionStorage、localStorage-的区别" class="headerlink" title="Cookie、sessionStorage、localStorage 的区别"></a>Cookie、sessionStorage、localStorage 的区别</h2><p>相同点：存储在客户端<br>不同点：</p><p>cookie数据大小不能超过4k；sessionStorage和localStorage的存储比cookie大得多，可以达到5M+<br>cookie设置的过期时间之前一直有效；localStorage永久存储，浏览器关闭后数据不丢失除非主动删除数据；sessionStorage数据在当前浏览器窗口关闭后自动删除<br>cookie的数据会自动的传递到服务器；sessionStorage和localStorage数据保存在本地</p></div><div class="story post-story"><h2 id="HTTP状态码及常见状态码"><a href="#HTTP状态码及常见状态码" class="headerlink" title="HTTP状态码及常见状态码"></a>HTTP状态码及常见状态码</h2><h3 id="HTTP状态码"><a href="#HTTP状态码" class="headerlink" title="HTTP状态码"></a>HTTP状态码</h3><p>• 1xx：指示信息类，表示请求已接受，继续处理<br>• 2xx：指示成功类，表示请求已成功接受<br>• 3xx：指示重定向，表示要完成请求必须进行更近一步的操作<br>• 4xx：指示客户端错误，请求有语法错误或请求无法实现<br>• 5xx：指示服务器错误，服务器未能实现合法的请求</p><h3 id="常见状态码"><a href="#常见状态码" class="headerlink" title="常见状态码"></a>常见状态码</h3><p>• 200 OK：客户端请求成功<br>• 301 Moved Permanently：所请求的页面已经永久重定向至新的URL<br>• 302 Found：所请求的页面已经临时重定向至新的URL<br>• 304 Not Modified 未修改<br>• 403 Forbidden：对请求页面的访问被禁止<br>• 404 Not Found：请求资源不存在<br>• 500 Internal Server Error：服务器发生不可预期的错误原来缓冲的文档还可以继续使用<br>• 503 Server Unavailable：请求未完成，服务器临时过载或宕机，一段时间后可恢复正常</p></div><div class="story post-story"><h2 id="HTTP-请求跨域问题"><a href="#HTTP-请求跨域问题" class="headerlink" title="HTTP 请求跨域问题"></a>HTTP 请求跨域问题</h2><h3 id="跨域的原理"><a href="#跨域的原理" class="headerlink" title="跨域的原理"></a>跨域的原理</h3><p>跨域，是指浏览器不能执行其他网站的脚本。它是由浏览器的同源策略造成的。跨域访问是被各大浏览器所默认禁止的。<br>同源策略,是浏览器对 JavaScript 实施的安全限制，只要协议、域名、端口有任何一个不同，都被当作是不同的域。<br>跨域原理，即是通过各种方式，避开浏览器的安全限制。</p><h3 id="同源策略的作用"><a href="#同源策略的作用" class="headerlink" title="同源策略的作用"></a>同源策略的作用</h3><p>①无法用js读取非同源的Cookie、LocalStorage 和 IndexDB<br>这个主要是为了防止恶意网站通过js获取用户其他网站的cookie等用户信息。</p><p>②无法用js获取非同源的DOM<br>防止恶意网站通过iframe获取页面dom，从而窃取页面的信息。</p><p>③无法用js发送非同源的AJAX请求<br>防止恶意的请求攻击服务器窃取数据信息。</p><h3 id="跨域资源共享"><a href="#跨域资源共享" class="headerlink" title="跨域资源共享"></a>跨域资源共享</h3><p><strong>原理：</strong>CORS由一系列HTTP响应头组成，这些响应头决定浏览器是否阻止前端JS代码跨域获取资源。浏览器的同源安全策略（协议、ip地址、端口号必须相同）默认会阻止网页”跨域“获取资源。但是如果接口服务器配置了CORS相关的HTTP响应头，就可以解除浏览器端的跨域访问限制。</p><table><thead><tr><th>CORS响应头部</th><th>描述</th></tr></thead><tbody><tr><td>res.setHeader(‘Access-Control-Allow-Origin’,’*’)</td><td>设置允许访问该资源的外域URL</td></tr><tr><td>res.setHeader(‘Access-Control-Allow-Headers’,’X-Custom-Header’)</td><td>对额外的请求头进行声明</td></tr><tr><td>res.setHeader(‘Access-Control-Allow-Methods’,’*’)</td><td>设置实际请求所允许使用的HTTP方法</td></tr></tbody></table><h3 id="预检请求"><a href="#预检请求" class="headerlink" title="预检请求"></a>预检请求</h3><p>只要符合以下任何条件之一，都需要进行预检请求：</p><ol><li>请求方式为GET、POST、HEAD之外的请求Method类型</li><li>请求头中包含自定义头部字段</li><li>向服务器发送了application&#x2F;json格式的数据</li></ol><p>在浏览器与服务器正式通信之前，浏览器会先发送OPTION请求进行预检，以获知服务器是否允许该实际请求，所以这一次的OPTION请求称为“预检请求”。服务器成功响应预检请求后，才会发送真正的请求，并携带真实数据。</p><h3 id="JSONP接口"><a href="#JSONP接口" class="headerlink" title="JSONP接口"></a>JSONP接口</h3><p>浏览器通过<code>&lt;script&gt;</code>标签的src属性，请求服务器上的数据，同时，服务器返回一个函数的调用。这种请求数据的方式叫做JSONP</p><p>JSONP不属于真正的Ajax请求，没有使用XMLHttpRequest这个对象。JSONP仅支持GET请求，不支持POST、PUT、DELETE请求。需要后台配合，将返回结果包装成callback(res)的形式。</p><p>JSONP接口要声明在CORS接口之前</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;OSI参考模型&quot;&gt;&lt;a href=&quot;#OSI参考模型&quot; class=&quot;headerlink&quot; title=&quot;OSI参考模型&quot;&gt;&lt;/a&gt;OSI参考模型&lt;/h2&gt;&lt;p&gt;从下往上分别是物理层，数据链路层，网络层</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="计算机网络" scheme="http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>围城</title>
    <link href="http://example.com/2025/02/08/%E5%9B%B4%E5%9F%8E/"/>
    <id>http://example.com/2025/02/08/%E5%9B%B4%E5%9F%8E/</id>
    <published>2025-02-08T05:11:43.000Z</published>
    <updated>2025-02-08T07:10:55.852Z</updated>
    
    <content type="html"><![CDATA[<hr><p>女人原是天生的政治动物。虚虚实实，以退为进，这些政治手腕，女人生下来全有。……女人不必学政治，而现在的政治家要成功，都得学女人。政治舞台上的戏剧全是反串。</p><hr><p>蛋已经下了，就不要去问母鸡是怎么下的。</p><hr><p>经过长期苦旅而彼此不讨厌的人,才可以结交作朋友。朋友如此，伴侣就更需要这样了!</p><hr><p>老实说，不管你跟谁结婚，结婚以后，你总发现你娶的不是原来的人，换了另外一个。早知道这样，结婚以前那种追求、恋爱等等，全可以剩掉。谈恋爱的时候，双方本相全收敛起来，到结婚还没有彼此认清，倒是老式婚姻干脆，索性结婚以前，谁也不认得谁。</p><hr><p>爱情多半是不成功的，要么苦于终成眷属的厌倦，要么苦于未能终成眷属的悲哀。</p><hr><p>结婚仿佛被围困的城堡，城外的人想冲出去，城里的人想逃出来。</p><hr><p>要人知道自己有个秘密，而不让人知道是个什么秘密，等他们问，要他们猜，这是人性的虚荣。</p><hr><p>假使订婚戒指是落入圈套的象征，钮扣也是扣住不放的预兆。</p><hr><p>这一张文凭仿佛有亚当夏娃下身那片树叶的功用，可以遮羞包丑；小小一张方纸能把一个人的空疏愚笨寡陋都掩盖起来。</p><hr><p>自己人之间，什么臭架子、坏脾气都行；笑容愈亲密，礼貌愈周到，彼此的猜忌或怨恨愈深。……在吵架的时候，先开口的未必占上风，后闭口才算胜利。</p><hr><p>女人有女人的聪明，轻盈活泼得跟她的举动一样。比了这种聪明，才学不过是沉淀渣滓。说女人有才学，就仿佛赞美一朵花，说它在天平上称起来有白菜番薯的斤两。真聪明的女人决不用功要做成才女，她只巧妙的偷懒。</p><hr><p>真正想一个人，记挂着他，希望跟他接近，这少得很。人事太忙了，也许我们全神贯注，无间断地怀念一个人。我们一生对于最亲爱的人的想念，加起来恐怕不到一点钟，此外不过是念头在他身上瞥过，想到而已。</p><hr><p>天下只有两种人。比如一串葡萄到手，一种人挑最好的先吃，另一种人把最好的留到最后吃。照例第一种人应该乐观，因为他每吃一颗都是吃剩的葡萄里最好的;第二种人应该悲观，因为他每吃一颗都是吃剩的葡萄里最坏的。不过事实却适得其反，缘故是第二种人还有希望，第一种人只有回忆。</p><hr><p>只有懂幸福的人才懂得进退一样精彩</p><hr><p>流言这东西，比流感蔓延的速度更快，比流星所蕴含的能量更巨大，比流氓更具有恶意，比流产更能让人心力憔悴。</p><hr><p>天下就没有偶然，那不过是化了妆的、戴了面具的必然。</p><hr><p>对于丑人，细看是一种残忍——除非他是坏人，你要惩罚他。</p><hr><p>上帝会懊悔没在人身上添一条能摇的狗尾巴，因此减低了不知多少表情的效果。</p><hr><p>泛黄的照片失了真，承诺像刀伤了人。</p><hr><p>结婚仿佛金漆的鸟笼，笼子外面的鸟想住进去，笼内的鸟想飞出去，所以结而离，离而结，没有了局</p><hr><p>不受教育的人，因为不识字，上人的当，受教育的人，因为识了字，上印刷品的当。</p><hr><p>我们对采摘不到的葡萄，不但想象它酸，也很可能想象它是分外地甜。</p><hr><p>苏文纨跟新楣的长期认识并不会日积月累得成为恋爱，好比冬季每天的气候罢，你没法把今天的温度加在昨天的上面，好等明天积成个和暖的春日。</p><hr><p>结婚无需太伟大的爱情，彼此不讨厌已经够结婚资本了。</p><hr><p>事实上，一个人的缺点正像猴子的尾巴，猴子蹲在地上的时候，尾巴是看不见的，直到他向树上爬，就把后部供大众瞻仰，可是这红臀长尾巴本来就有，并非地位爬高了的新标识。</p><hr><p>同行最不宜结婚，因为彼此是行家，谁也哄不倒谁，丈夫不会莫测高深地崇拜太太，太太也不会盲目地崇拜丈夫，婚姻的基础就不牢靠。</p><hr><p>西洋赶驴子的人，每逢驴子不肯走，鞭子没有用，就把一串胡萝卜挂在驴子眼睛之前、唇吻之上。这笨驴子以为走前一步，萝卜就能到嘴，于是一步再一步继续向前，嘴愈要咬，脚愈要赶，不知不觉中又走了一站。那时候它是否吃得到这串萝卜，得看驴夫的高兴。一切机关里，上司驾驭下属，全用这种技巧。</p><hr><p>我们在社会上一切说话全像戏院子的入场券，一边印着“过期作废”，可是那一边又不注明什么日期，随我们的便可以提早或延迟。</p><hr><p>我发现拍马屁跟恋爱一样，不容许有第三者冷眼旁观。咱们以后恭维人起来，得小心旁边没有其他的人。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;p&gt;女人原是天生的政治动物。虚虚实实，以退为进，这些政治手腕，女人生下来全有。……女人不必学政治，而现在的政治家要成功，都得学女人。政治舞台上的戏剧全是反串。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;蛋已经下了，就不要去问母鸡是怎么下的。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;经过长期苦旅而彼此不</summary>
      
    
    
    
    <category term="文摘" scheme="http://example.com/categories/%E6%96%87%E6%91%98/"/>
    
    
    <category term="《围城》" scheme="http://example.com/tags/%E3%80%8A%E5%9B%B4%E5%9F%8E%E3%80%8B/"/>
    
  </entry>
  
  <entry>
    <title>leetcode</title>
    <link href="http://example.com/2025/01/03/leetcode/"/>
    <id>http://example.com/2025/01/03/leetcode/</id>
    <published>2025-01-03T09:24:22.000Z</published>
    <updated>2025-03-02T14:49:37.674Z</updated>
    
    <content type="html"><![CDATA[<h1 id="leetcode刷题笔记"><a href="#leetcode刷题笔记" class="headerlink" title="leetcode刷题笔记"></a>leetcode刷题笔记</h1><p><a href="https://leetcode.cn/problems/happy-number/description/">202. 快乐数 - 力扣（LeetCode）</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误代码</span></span><br><span class="line"><span class="keyword">var</span> getHappy = <span class="keyword">function</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(n)&#123;</span><br><span class="line">        ans+= (n%<span class="number">10</span>) ** <span class="number">2</span>;</span><br><span class="line">        n/=<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>错误原因</strong></p><p>在 JavaScript 中，使用&#x2F;运算符进行除法运算时（如n &#x2F;&#x3D; 10这个操作），如果n原本是整数类型，这样的除法操作会将结果转换为浮点数类型。<br>例如，当n初始值为19，第一次执行n &#x2F;&#x3D; 10后，n会变成1.9，而后续在getHappy函数里期望对每一位数字进行处理（通过n % 10获取个位数字等操作），浮点数的取余等操作的行为和预期处理整数时不一致，并且不符合题目本意（通常是按整数的每一位来处理）。<br>要解决这个问题，应该使用Math.floor（向下取整）或者Math.trunc（去除小数部分）等方法来确保n在分割每一位数字的过程中依然保持整数类型，修改后的getHappy函数如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var getHappy = function(n)&#123;</span><br><span class="line">    let ans = 0;</span><br><span class="line">    while(n)&#123;</span><br><span class="line">        ans+= (n%10) ** 2;</span><br><span class="line">        n = Math.trunc(n/10);</span><br><span class="line">    &#125;</span><br><span class="line">    return ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/3sum/">15. 三数之和 - 力扣（LeetCode）</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误代码</span></span><br><span class="line"><span class="keyword">var</span> threeSum = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">    nums.<span class="title function_">sort</span>();</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>错误原因</strong></p><p>Array.sort()默认排序是将元素转换为字符串，然后按照它们的 UTF-16 码元值升序排序，所以这样写会导致整数无法按大小排序。正确代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> threeSum = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">    nums.<span class="title function_">sort</span>(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a-b);</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/reverse-string-ii/description/">541. 反转字符串 II - 力扣（LeetCode）</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误代码</span></span><br><span class="line"><span class="keyword">var</span> reverse = <span class="keyword">function</span>(<span class="params">s,<span class="keyword">from</span>,to</span>)&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">from</span>&lt;to)&#123;</span><br><span class="line">        <span class="keyword">let</span> temp = s[<span class="keyword">from</span>];</span><br><span class="line">        s[<span class="keyword">from</span>] = s[to];</span><br><span class="line">        s[t0] = temp;</span><br><span class="line">        <span class="keyword">from</span>++,to--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>错误原因</strong></p><p>JavaScript中字符串为按值传递，作为参数传递时无法改变值。应改为传递数组，正确代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reverse = <span class="keyword">function</span>(<span class="params">arr,<span class="keyword">from</span>,to</span>)&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">from</span>&lt;to)&#123;</span><br><span class="line">        <span class="keyword">let</span> temp = arr[<span class="keyword">from</span>];</span><br><span class="line">        arr[<span class="keyword">from</span>] = arr[to];</span><br><span class="line">        arr[to] = temp;</span><br><span class="line">        <span class="keyword">from</span>++,to--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> reverseStr = <span class="keyword">function</span>(<span class="params">s, k</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> arr = <span class="title class_">Array</span>.<span class="title function_">from</span>(s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>;i+=<span class="number">2</span>*k)&#123;</span><br><span class="line">        <span class="title function_">reverse</span>(arr,i,<span class="title class_">Math</span>.<span class="title function_">min</span>(arr.<span class="property">length</span>-<span class="number">1</span>,i+k-<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/description/">28. 找出字符串中第一个匹配项的下标 - 力扣（LeetCode）</a></p><p><strong>KMP算法模板</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> strStr = <span class="keyword">function</span>(<span class="params">haystack, needle</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> m=haystack.<span class="property">length</span>,n=needle.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">if</span>(n===<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> next= <span class="keyword">new</span> <span class="title class_">Array</span>(n).<span class="title function_">fill</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">1</span>,j=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(j&gt;<span class="number">0</span>&amp;&amp;needle[i]!==needle[j]) j=next[j-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(needle[i]===needle[j]) j++;</span><br><span class="line">        next[i]=j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>,j=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(j&gt;<span class="number">0</span>&amp;&amp;haystack[i]!==needle[j]) j=next[j-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(haystack[i]===needle[j]) j++;</span><br><span class="line">        <span class="keyword">if</span>(j===n) <span class="keyword">return</span> i-n+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/sliding-window-maximum/">239. 滑动窗口最大值 - 力扣（LeetCode）</a></p><p><strong>数组模拟栈：</strong>const stack &#x3D; [];</p><ul><li>入栈：stack.push(x);</li><li>出栈：stack.pop();</li><li>查看栈顶：stack.at(-1);</li><li>判断栈非空：stack.length</li></ul><p><strong>数组模拟队列：</strong>const queue &#x3D; []</p><ul><li>入队：queue.push(x)</li><li>出队：queue.shift()</li><li>查看队首：queue[0]</li><li>查看队尾：queue.at(-1)</li><li>判断队非空：queue.length</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> maxSlidingWindow = <span class="keyword">function</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ans = [];</span><br><span class="line">    <span class="keyword">let</span> queue = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;k-<span class="number">1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(queue.<span class="property">length</span>&amp;&amp;nums[queue.<span class="title function_">at</span>(-<span class="number">1</span>)]&lt;nums[i]) queue.<span class="title function_">pop</span>();</span><br><span class="line">        queue.<span class="title function_">push</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=k-<span class="number">1</span>;i&lt;nums.<span class="property">length</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(queue.<span class="property">length</span>&amp;&amp;nums[queue.<span class="title function_">at</span>(-<span class="number">1</span>)]&lt;nums[i]) queue.<span class="title function_">pop</span>();</span><br><span class="line">        queue.<span class="title function_">push</span>(i);</span><br><span class="line">        <span class="keyword">while</span>(queue[<span class="number">0</span>]&lt;=i-k) queue.<span class="title function_">shift</span>();</span><br><span class="line">        ans.<span class="title function_">push</span>(nums[queue[<span class="number">0</span>]]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/combinations/">77. 组合 - 力扣（LeetCode）</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//错误代码</span><br><span class="line">const ans = [];</span><br><span class="line">const path = [];</span><br><span class="line">var backtracking = function(n,k,startIndex)&#123;</span><br><span class="line">    if(path.length===k)&#123;</span><br><span class="line">        ans.push(path);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    for(let i=startIndex;i&lt;=n-k+path.length+1;i++)&#123;</span><br><span class="line">        path.push(i);</span><br><span class="line">        backtracking(n,k,i+1);</span><br><span class="line">        path.pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var combine = function(n, k) &#123;</span><br><span class="line">    backtracking(n,k,1);</span><br><span class="line">    return ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>错误原因</strong></p><ol><li>ans和path需要初始化</li><li>需将path的副本加入ans</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ans = [];</span><br><span class="line"><span class="keyword">let</span> path = [];</span><br><span class="line"><span class="keyword">var</span> backtracking = <span class="keyword">function</span>(<span class="params">n,k,startIndex</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(path.<span class="property">length</span>===k)&#123;</span><br><span class="line">        ans.<span class="title function_">push</span>(path.<span class="title function_">concat</span>());</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=startIndex;i&lt;=n-k+path.<span class="property">length</span>+<span class="number">1</span>;i++)&#123;</span><br><span class="line">        path.<span class="title function_">push</span>(i);</span><br><span class="line">        <span class="title function_">backtracking</span>(n,k,i+<span class="number">1</span>);</span><br><span class="line">        path.<span class="title function_">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> combine = <span class="keyword">function</span>(<span class="params">n, k</span>) &#123;</span><br><span class="line">    ans = [];</span><br><span class="line">    path = [];</span><br><span class="line">    <span class="title function_">backtracking</span>(n,k,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/rotate-array/description/?envType=study-plan-v2&envId=top-interview-150">189. 轮转数组 - 力扣（LeetCode）</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误代码</span></span><br><span class="line"><span class="keyword">var</span> rotate = <span class="keyword">function</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> reverse = <span class="keyword">function</span>(<span class="params">nums,<span class="keyword">from</span>,to</span>)&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">from</span>&lt;to)&#123;</span><br><span class="line">            <span class="keyword">let</span> temp = nums[<span class="keyword">from</span>];</span><br><span class="line">            nums[<span class="keyword">from</span>] = nums [to];</span><br><span class="line">            nums[to] = temp;</span><br><span class="line">            <span class="keyword">from</span>++,to--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">reverse</span>(nums,<span class="number">0</span>,nums.<span class="property">length</span>-k-<span class="number">1</span>);</span><br><span class="line">    <span class="title function_">reverse</span>(nums,nums.<span class="property">length</span>-k,nums.<span class="property">length</span>-<span class="number">1</span>);</span><br><span class="line">    <span class="title function_">reverse</span>(nums,<span class="number">0</span>,nums.<span class="property">length</span>-<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>错误原因</strong></p><p>​元素左移、右移，传入翻转长度不能小于0或大于数组长度</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rotate = <span class="keyword">function</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">    k%=nums.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">const</span> reverse = <span class="keyword">function</span>(<span class="params">nums,<span class="keyword">from</span>,to</span>)&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">from</span>&lt;to)&#123;</span><br><span class="line">            <span class="keyword">let</span> temp = nums[<span class="keyword">from</span>];</span><br><span class="line">            nums[<span class="keyword">from</span>] = nums [to];</span><br><span class="line">            nums[to] = temp;</span><br><span class="line">            <span class="keyword">from</span>++,to--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">reverse</span>(nums,<span class="number">0</span>,nums.<span class="property">length</span>-k-<span class="number">1</span>);</span><br><span class="line">    <span class="title function_">reverse</span>(nums,nums.<span class="property">length</span>-k,nums.<span class="property">length</span>-<span class="number">1</span>);</span><br><span class="line">    <span class="title function_">reverse</span>(nums,<span class="number">0</span>,nums.<span class="property">length</span>-<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/description/?envType=study-plan-v2&envId=top-interview-150">121. 买卖股票的最佳时机 - 力扣（LeetCode）</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误代码</span></span><br><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">prices</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> preMin = <span class="number">0</span>,ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> price <span class="keyword">of</span> prices)&#123;</span><br><span class="line">        <span class="keyword">if</span>(price &gt;preMin) ans = <span class="title class_">Math</span>.<span class="title function_">max</span>(ans,price-preMin);</span><br><span class="line">        <span class="keyword">else</span> preMin = price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>错误原因</strong></p><p>​设置preMin为0会导致股票一定有price的收益，正确做法应该是设置成Number.MAX_SAFE_INTEGER</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> maxProfit = <span class="keyword">function</span>(<span class="params">prices</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> preMin = <span class="title class_">Number</span>.<span class="property">MAX_SAFE_INTEGER</span>,ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> price <span class="keyword">of</span> prices)&#123;</span><br><span class="line">        <span class="keyword">if</span>(price &gt;preMin) ans = <span class="title class_">Math</span>.<span class="title function_">max</span>(ans,price-preMin);</span><br><span class="line">        <span class="keyword">else</span> preMin = price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;leetcode刷题笔记&quot;&gt;&lt;a href=&quot;#leetcode刷题笔记&quot; class=&quot;headerlink&quot; title=&quot;leetcode刷题笔记&quot;&gt;&lt;/a&gt;leetcode刷题笔记&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://leetcode.cn/p</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>es6</title>
    <link href="http://example.com/2024/12/20/es6/"/>
    <id>http://example.com/2024/12/20/es6/</id>
    <published>2024-12-20T07:02:49.000Z</published>
    <updated>2025-02-09T14:40:18.168Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ES6新特性"><a href="#ES6新特性" class="headerlink" title="ES6新特性"></a>ES6新特性</h1><div class="story post-story"><h2 id="let"><a href="#let" class="headerlink" title="let"></a>let</h2><ul><li>变量不能重复声明</li><li>产生块级作用域</li><li>不存在变量提升</li><li>不影响作用域链</li></ul></div><div class="story post-story"><h2 id="const"><a href="#const" class="headerlink" title="const"></a>const</h2><ul><li>声明常量，要赋初始值，不能重复声明</li><li>产生块级作用域</li><li>对数组或对象元素的修改，不算对常量的修改</li><li>不存在变量提升</li><li>不影响作用域链</li></ul><h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><ul><li><p>局部作用域</p><ul><li>函数作用域：函数内部声明的变量只能在函数内部访问</li><li>块作用域：使用{}包裹的代码块内部声明的变量外部有可能无法访问<ul><li>let和const产生块作用域</li><li>var不会产生块作用域</li></ul></li></ul></li><li><p>全局作用域：<code>&lt;script&gt;</code>标签和js文件的最外层，声明的变量在其他任何作用域都能访问</p><ul><li>window对象动态添加的属性也是全局的</li><li>函数中未使用任何关键字声明的变量也是全局的</li></ul></li><li><p>作用域链：优先查找当前，依次查找父级作用域</p></li></ul><h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><ul><li>闭包 &#x3D; 内层函数+外层函数的变量</li><li>在函数外部无法读取函数内的局部变量。出于种种原因，我们有时候需要得到函数内的局部变量。那就是在函数的内部，再定义一个函数，利用内层函数来获取外层函数的局部变量</li><li>闭包可能会引起内存泄漏</li></ul><h3 id="变量和函数提升"><a href="#变量和函数提升" class="headerlink" title="变量和函数提升"></a>变量和函数提升</h3><p>代码执行前，所有var声明的变量被提升到当前作用域的最前面。只提升声明，不提升赋值。</p><p>代码执行前，所有函数声明被提升到当前作用域的最前面。</p></div><div class="story post-story"><h2 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//数组解构赋值</span><br><span class="line">const F4 = [&#x27;小沈阳&#x27;,&#x27;刘能&#x27;,&#x27;赵四&#x27;,&#x27;宋小宝&#x27;];</span><br><span class="line">const [xiao,liu,zhao,song]= F4;</span><br><span class="line">//对象解构赋值</span><br><span class="line">const obj = &#123;</span><br><span class="line">name:&#x27;hzx&#x27;,</span><br><span class="line">age:18,</span><br><span class="line">sayHello: function()&#123;</span><br><span class="line">console.log(&#x27;hello&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">const &#123;name,age,sayHello&#125; = obj;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h2><ul><li>声明方式：&#96;&#96; </li><li>可以直接出现换行符</li><li>${}实现字符串拼接</li></ul></div><div class="story post-story"><h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><ul><li>func &#x3D; ()&#x3D;&gt;{}</li><li>this是静态的，始终指向函数声明时所在作用域下的this</li><li>不能作为构造函数</li><li>不能使用arguments参数</li><li>形参只有一个可以省略(),代码语句只有一句return可以省略{return}</li><li>适用于定时器和数组方法，不适用于函数回调和对象方法</li></ul></div><div class="story post-story"><h2 id="rest参数"><a href="#rest参数" class="headerlink" title="rest参数"></a>rest参数</h2><ul><li>func(…args){}</li><li>必须放在参数列表最后</li></ul><h3 id="与arguments的区别"><a href="#与arguments的区别" class="headerlink" title="与arguments的区别"></a>与arguments的区别</h3><ul><li>语法：arguments是一个内置对象，而rest参数是通过…语法创建的。</li><li>类型：arguments是一个类数组对象，而rest参数是一个真正的数组。</li><li>位置：rest参数必须放在函数参数列表的最后面，而arguments对象在任何函数中都可用。</li><li>功能：rest参数提供了一个数组，可以直接使用数组的方法，而arguments对象需要转换才能使用数组方法。</li></ul></div><div class="story post-story"><h2 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h2><p><code>...</code>将数组转化为逗号分隔参数序列</p></div><div class="story post-story"><h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h2><ul><li>Symbol的值是唯一的，用来解决命名冲突问题</li><li>Symbol值不能与其他数据进行运算</li><li>Symbol定义的对象属性不能使用for in或for of循环遍历，但是可以使用Object.getOwnPropertySymbols() 和 Reflect.ownKeys()来获取对象的所有键名</li></ul></div><div class="story post-story"><h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> banji = &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&quot;终极一班&quot;</span>,</span><br><span class="line">            <span class="attr">students</span>:[</span><br><span class="line">                <span class="string">&#x27;xiaoming&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;xiaoning&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;xiaotian&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;knight&#x27;</span></span><br><span class="line">            ],</span><br><span class="line">            [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]()&#123;</span><br><span class="line">                <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    <span class="attr">next</span>:<span class="function">()=&gt;</span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(index&lt;<span class="variable language_">this</span>.<span class="property">students</span>.<span class="property">length</span>)&#123;</span><br><span class="line">                            <span class="keyword">const</span> res = &#123;<span class="attr">value</span>:<span class="variable language_">this</span>.<span class="property">students</span>[index],<span class="attr">done</span>:<span class="literal">false</span>&#125;</span><br><span class="line">                            index++</span><br><span class="line">                            <span class="keyword">return</span> res</span><br><span class="line">                        &#125; </span><br><span class="line">                        <span class="keyword">return</span> &#123;<span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>:<span class="literal">true</span>&#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> banji)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(v)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> iterator = banji[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]()</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>())</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>())</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>())</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>())</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>())</span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line">xiaoming</span><br><span class="line">xiaoning</span><br><span class="line">xiaotian</span><br><span class="line">knight</span><br><span class="line">&#123;<span class="attr">value</span>: <span class="string">&#x27;xiaoming&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span>&#125;<span class="attr">done</span>: <span class="literal">false</span></span><br><span class="line">&#123;<span class="attr">value</span>: <span class="string">&#x27;xiaoning&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span>&#125;</span><br><span class="line">&#123;<span class="attr">value</span>: <span class="string">&#x27;xiaotian&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span>&#125;</span><br><span class="line">&#123;<span class="attr">value</span>: <span class="string">&#x27;knight&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span>&#125;</span><br><span class="line">&#123;<span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> * <span class="title function_">generator</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;111&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;一只没有耳朵&#x27;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;222&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;一只没有尾巴&#x27;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;333&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;真奇怪&#x27;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;444&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> iterator = <span class="title function_">generator</span>()</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> <span class="title function_">generator</span>())&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(v)</span><br><span class="line">&#125;</span><br><span class="line">iterator.<span class="title function_">next</span>()</span><br><span class="line">iterator.<span class="title function_">next</span>()</span><br><span class="line">iterator.<span class="title function_">next</span>()</span><br><span class="line">iterator.<span class="title function_">next</span>()</span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line"><span class="number">111</span></span><br><span class="line">一只没有耳朵</span><br><span class="line"><span class="number">222</span></span><br><span class="line">一只没有尾巴</span><br><span class="line"><span class="number">333</span></span><br><span class="line">真奇怪</span><br><span class="line"><span class="number">444</span></span><br><span class="line"><span class="number">111</span></span><br><span class="line"><span class="number">222</span></span><br><span class="line"><span class="number">333</span></span><br><span class="line"><span class="number">444</span></span><br></pre></td></tr></table></figure><h3 id="应用实例"><a href="#应用实例" class="headerlink" title="应用实例"></a>应用实例</h3><ol><li>解决回调地狱</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//回调地狱</span></span><br><span class="line"><span class="comment">// setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&#x27;111&#x27;)</span></span><br><span class="line"><span class="comment">//     setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">//         console.log(&#x27;222&#x27;)</span></span><br><span class="line"><span class="comment">//         setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">//             console.log(&#x27;333&#x27;)</span></span><br><span class="line"><span class="comment">//         &#125;, 3000)</span></span><br><span class="line"><span class="comment">//     &#125;, 2000)</span></span><br><span class="line"><span class="comment">// &#125;, 1000)</span></span><br><span class="line"><span class="comment">//生成器函数解决回调地狱</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">one</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;111&#x27;</span>)</span><br><span class="line">        iterator.<span class="title function_">next</span>()</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">two</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;222&#x27;</span>)</span><br><span class="line">        iterator.<span class="title function_">next</span>()</span><br><span class="line">    &#125;,<span class="number">2000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">three</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;333&#x27;</span>)</span><br><span class="line">        iterator.<span class="title function_">next</span>()</span><br><span class="line">    &#125;,<span class="number">3000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> * <span class="title function_">generator</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">one</span>()</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">two</span>()</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">three</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">generator</span>()</span><br><span class="line">iterator.<span class="title function_">next</span>()</span><br></pre></td></tr></table></figure><ol start="2"><li>异步编程</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getUsers</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;用户数据&#x27;</span></span><br><span class="line">        iterator.<span class="title function_">next</span>(data)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getOrders</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;订单数据&#x27;</span></span><br><span class="line">        iterator.<span class="title function_">next</span>(data)</span><br><span class="line">    &#125;,<span class="number">2000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getGoods</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;商品数据&#x27;</span></span><br><span class="line">        iterator.<span class="title function_">next</span>(data)</span><br><span class="line">    &#125;,<span class="number">3000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> * <span class="title function_">generator</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> users = <span class="keyword">yield</span> <span class="title function_">getUsers</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(users)</span><br><span class="line">    <span class="keyword">const</span> orders = <span class="keyword">yield</span> <span class="title function_">getOrders</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(orders)</span><br><span class="line">    <span class="keyword">const</span> goods = <span class="keyword">yield</span> <span class="title function_">getGoods</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(goods)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">generator</span>()</span><br><span class="line">iterator.<span class="title function_">next</span>()</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> p =  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./静夜思.md&#x27;</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="title function_">resolve</span>(data)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./琵琶行.md&#x27;</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">resolve</span>([...value,data])</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./滕王阁序.md&#x27;</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">resolve</span>([...value,data])</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="title function_">join</span>(<span class="string">&#x27;\n&#x27;</span>))</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr1 = [<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">2</span>,<span class="number">6</span>]</span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">4</span>,<span class="number">8</span>,<span class="number">6</span>,<span class="number">9</span>]</span><br><span class="line"><span class="keyword">const</span> s2 = <span class="keyword">new</span> <span class="title class_">Set</span>(arr2)</span><br><span class="line"><span class="comment">//数组去重</span></span><br><span class="line"><span class="keyword">let</span> result = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr1)]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line"><span class="comment">//求交集</span></span><br><span class="line"><span class="keyword">const</span> intersection = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr1)].<span class="title function_">filter</span>(<span class="function"><span class="params">item</span>=&gt;</span>s2.<span class="title function_">has</span>(item))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(intersection)</span><br><span class="line"><span class="comment">//求并集</span></span><br><span class="line"><span class="keyword">const</span> union = [...<span class="keyword">new</span> <span class="title class_">Set</span>([...arr1,...arr2])]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(union)</span><br><span class="line"><span class="comment">//求差集</span></span><br><span class="line"><span class="keyword">const</span> diff = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr1)].<span class="title function_">filter</span>(<span class="function"><span class="params">item</span>=&gt;</span>!s2.<span class="title function_">has</span>(item))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(diff)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="class"><a href="#class" class="headerlink" title="class"></a>class</h2><h3 id="构造函数执行过程"><a href="#构造函数执行过程" class="headerlink" title="构造函数执行过程"></a>构造函数执行过程</h3><ol><li>创建新对象</li><li>构造函数this指向新对象</li><li>执行构造函数代码，修改this，添加新的属性</li><li>返回新对象</li></ol><h3 id="原型对象"><a href="#原型对象" class="headerlink" title="原型对象"></a>原型对象</h3><ul><li>每个构造函数都有一个<strong>prototype属性</strong>，指向<strong>原型对象</strong></li><li>这个对象可以挂载函数，对象实例化不会多次创建原型上的函数，节约内存</li><li>构造函数通过原型分配的函数是所有对象所<strong>共享</strong>的，可以将不变的方法直接定义在prototype对象上，这样所有对象的实例就可以共享这些方法</li><li>构造函数和原型对象中的this都指向实例化的对象</li></ul><h3 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h3><p>原型对象上的构造器，指向构造函数</p><h3 id="对象原型"><a href="#对象原型" class="headerlink" title="对象原型"></a>对象原型</h3><p>实例对象的<code>__proto__</code>属性,指向构造函数的原型对象</p><h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><ol><li>当访问一个对象的属性和方法时，首先查找这个对象自身有没有该属性。</li><li>如果没有就查找它的原型（就是<code>__proto__</code>指向的prototype原型对象。</li><li>如果还没有就继续查找原型对象的原型，直至查找到null</li><li>可以用 instanceof 运算符检测构造函数的prototype属性是否出现在某个实例对象的原型链上。</li></ol></div><div class="story post-story"><h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><h3 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h3><p>babel是一个JavaScript编译器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i babel-cli babel-preset-env browserify -D</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//代码转换</span><br><span class="line">npx babel src/js -d dist/js --presets=babel-preset-env</span><br><span class="line">//打包</span><br><span class="line">npx browserify dist/app.js -o dist/bundle.js</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="async与await"><a href="#async与await" class="headerlink" title="async与await"></a>async与await</h2><p>作用：使异步代码看起来像同步代码一样</p><h3 id="async函数"><a href="#async函数" class="headerlink" title="async函数"></a>async函数</h3><ul><li>async函数的返回值为Promise对象</li><li>Promise对象的结果由async函数执行的返回值决定</li></ul><h3 id="await表达式"><a href="#await表达式" class="headerlink" title="await表达式"></a>await表达式</h3><ul><li>await必须写在async函数中</li><li>await右侧的表达式一般为Promise对象</li><li>await返回的是Promise成功的值</li><li>await的Promise失败了，就会抛出异常，需要try…catch捕获处理</li></ul></div><div class="story post-story"><h2 id="动态导入"><a href="#动态导入" class="headerlink" title="动态导入"></a>动态导入</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">()=&gt;<span class="keyword">import</span>()</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ES6新特性&quot;&gt;&lt;a href=&quot;#ES6新特性&quot; class=&quot;headerlink&quot; title=&quot;ES6新特性&quot;&gt;&lt;/a&gt;ES6新特性&lt;/h1&gt;&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;let&quot;&gt;&lt;a href=&quot;#let&quot;</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="es6" scheme="http://example.com/tags/es6/"/>
    
  </entry>
  
  <entry>
    <title>Eslint</title>
    <link href="http://example.com/2024/12/16/Eslint/"/>
    <id>http://example.com/2024/12/16/Eslint/</id>
    <published>2024-12-16T03:28:59.000Z</published>
    <updated>2024-12-16T14:11:00.772Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Eslint"><a href="#Eslint" class="headerlink" title="Eslint"></a>Eslint</h1><p>ESLint 是一个用于识别和报告在 ECMAScript&#x2F;JavaScript 代码中发现的模式的工具，其目标是使代码更加一致并避免错误。</p><div class="story post-story"><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><strong>确保事先运行 npm init,已经有 package.json 文件。</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -D @eslint/config@latest</span><br></pre></td></tr></table></figure><p>使用托管在 npm 上的特定可共享配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -D @eslint/config@latest -- --config packageName</span><br></pre></td></tr></table></figure><p>在项目中添加 eslint.config.js文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> eslint.config.js</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx eslint your-project-dir/yourfile.js</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eslint.config.js</span></span><br><span class="line"><span class="keyword">import</span> js <span class="keyword">from</span> <span class="string">&quot;@eslint/js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">    js.<span class="property">configs</span>.<span class="property">recommended</span>,</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">rules</span>: &#123;</span><br><span class="line">            <span class="string">&quot;no-unused-vars&quot;</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">            <span class="string">&quot;no-undef&quot;</span>: <span class="string">&quot;warn&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p><a href="https://eslint.nodejs.cn/docs/latest/use/configure">配置文档</a></p></div><div class="story post-story"><h2 id="实践问题"><a href="#实践问题" class="headerlink" title="实践问题"></a>实践问题</h2><h3 id="要关闭-ESLint-中的vue-multi-word-component-names提示"><a href="#要关闭-ESLint-中的vue-multi-word-component-names提示" class="headerlink" title="要关闭 ESLint 中的vue&#x2F;multi-word-component-names提示"></a>要关闭 ESLint 中的vue&#x2F;multi-word-component-names提示</h3><p>在eslint.config.js中添加</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;vue/multi-word-component-names&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Eslint&quot;&gt;&lt;a href=&quot;#Eslint&quot; class=&quot;headerlink&quot; title=&quot;Eslint&quot;&gt;&lt;/a&gt;Eslint&lt;/h1&gt;&lt;p&gt;ESLint 是一个用于识别和报告在 ECMAScript&amp;#x2F;JavaScript 代码中发现的模式</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Eslint" scheme="http://example.com/tags/Eslint/"/>
    
  </entry>
  
  <entry>
    <title>html&amp;css</title>
    <link href="http://example.com/2024/11/24/html-css/"/>
    <id>http://example.com/2024/11/24/html-css/</id>
    <published>2024-11-24T06:57:34.000Z</published>
    <updated>2025-01-21T08:30:26.320Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="语义化标签"><a href="#语义化标签" class="headerlink" title="语义化标签"></a>语义化标签</h2><p>header nav main article section aside footer</p><p>语义化的优点:</p><ul><li>在没CSS样式的情况下，页面整体也会呈现很好的结构效果</li><li>代码结构清晰，易于阅读，</li><li>利于开发和维护方便其他设备解析（如屏幕阅读器）根据语义渲染网页。</li><li>有利于搜索引擎优化（SEO），搜索引擎爬虫会根据不同的标签来赋予不同的权重</li></ul></div><div class="story post-story"><h2 id="HTML5新特性"><a href="#HTML5新特性" class="headerlink" title="HTML5新特性"></a>HTML5新特性</h2><p>语义化标签<br>音视频处理API(audio,video)<br>canvas &#x2F; webGL<br>拖拽释放(Drag and drop) API<br>history API<br>requestAnimationFrame<br>地理位置(Geolocation)API<br>webSocket<br>web存储 localStorage、SessionStorage<br>表单控件，calendar、date、time、email、url、search</p></div><div class="story post-story"><h2 id="新的HTML5文档类型和字符集"><a href="#新的HTML5文档类型和字符集" class="headerlink" title="新的HTML5文档类型和字符集"></a>新的HTML5文档类型和字符集</h2><p>HTML5文档类型是&lt;！doctype html&gt;。</p><p>HTML5使用的字符集&lt; meta charset&#x3D;“UTF8”&gt;。</p></div><div class="story post-story"><h2 id="HTML5-Canvas元素"><a href="#HTML5-Canvas元素" class="headerlink" title="HTML5 Canvas元素"></a>HTML5 Canvas元素</h2><p>Canvas元素用于在网页上绘制图形，该元素标签的强大之处在于可以直接在HTML上进行图形操作。</p></div><div class="story post-story"><h2 id="HTML5新增了哪些功能"><a href="#HTML5新增了哪些功能" class="headerlink" title="HTML5新增了哪些功能"></a>HTML5新增了哪些功能</h2><p>新增的功能API包括 Media APl、 Text Track API、 Application Cache API、User Interaction、 Data Transfer API、 Command API、 Constraint Validation API、 History API</p></div><div class="story post-story"><h2 id="HTML5的离线存储"><a href="#HTML5的离线存储" class="headerlink" title="HTML5的离线存储"></a>HTML5的离线存储</h2><p>localStorage，可长期存储数据，即浏览器关闭后数据不丢失</p><p>session Storage，数据在浏览器关闭后自动删除</p></div><div class="story post-story"><h2 id="HTML5的form如何关闭自动补全功能"><a href="#HTML5的form如何关闭自动补全功能" class="headerlink" title="HTML5的form如何关闭自动补全功能"></a>HTML5的form如何关闭自动补全功能</h2><p>将不想要提示的form元素下的 Input元素的 autocomplete属性设置为off</p></div><div class="story post-story"><h2 id="HTML5引入了哪些新的表单属性？"><a href="#HTML5引入了哪些新的表单属性？" class="headerlink" title="HTML5引入了哪些新的表单属性？"></a>HTML5引入了哪些新的表单属性？</h2><p>新增表单属性包括 datalist、 datetime、 output、 keygen、date、 month、week、time、 number、 range、 email、url</p></div><div class="story post-story"><h2 id="HTML5中的应用缓存是什么？"><a href="#HTML5中的应用缓存是什么？" class="headerlink" title="HTML5中的应用缓存是什么？"></a>HTML5中的应用缓存是什么？</h2><p>HTML5应用缓存的最终目的是帮助用户离线浏览页面。换句话说，如果网络连接不可用，打开的页面就来自浏览器缓存，离线应用缓存可以帮助用户达到这个目的。</p><p>应用缓存可以帮助用户指定哪些文件需要缓存，哪些不需要</p></div><div class="story post-story"><h2 id="HTML5应用程序缓存为应用带来什么优势？"><a href="#HTML5应用程序缓存为应用带来什么优势？" class="headerlink" title="HTML5应用程序缓存为应用带来什么优势？"></a>HTML5应用程序缓存为应用带来什么优势？</h2><p>应用程序缓存为应用带来3个优势。</p><p>（1）离线浏览，让用户可在应用离线时（网络不可用时）使用它们。</p><p>（2）速度，让已缓存资源加载得更快。</p><p>（3）减少服务器负载，让浏览器将只下载服务器更新过的资源。</p></div><div class="story post-story"><h2 id="CSS-选择器及优先级"><a href="#CSS-选择器及优先级" class="headerlink" title="CSS 选择器及优先级"></a>CSS 选择器及优先级</h2><p>选择器</p><p>id选择器(#myid)<br>类选择器(.myclass)<br>属性选择器(a[rel&#x3D;“external”])<br>伪类选择器(a:hover, li:nth-child)<br>标签选择器(div, h1,p)<br>相邻选择器（h1 + p）<br>子选择器(ul &gt; li)<br>后代选择器(li a)<br>通配符选择器(*)<br>优先级：</p><p>!important<br>内联样式（1000）<br>ID选择器（0100）<br>类选择器&#x2F;属性选择器&#x2F;伪类选择器（0010）<br>元素选择器&#x2F;伪元素选择器（0001）<br>关系选择器&#x2F;通配符选择器（0000）<br>带!important 标记的样式属性优先级最高； 样式表的来源相同时：</p><p>!important &gt; 行内样式&gt;ID选择器 &gt; 类选择器 &gt; 标签 &gt; 通配符 &gt; 继承 &gt; 浏览器默认属性</p><h3 id="CSS3新特性"><a href="#CSS3新特性" class="headerlink" title="CSS3新特性"></a>CSS3新特性</h3><p>圆角   阴影 变换</p><p>更多的CSS选择器</p><p>色彩模式，如rgba；</p><p>伪元素::selection;</p><p>媒体查询；</p><p>多栏布局；</p><p>图片边框（ border-image）。</p></div><div class="story post-story"><h2 id="CSS3新增伪类"><a href="#CSS3新增伪类" class="headerlink" title="CSS3新增伪类"></a>CSS3新增伪类</h2><p>新增伪类有以下几个：<br>p:first- of-type，选择属于其父元素的首个元素的每个元素。</p><p>p:last-of-type，选择属于其父元素的最后一个元素的每个元素。</p><p>p:only- of-type，选择属于其父元素的唯一元素的每个元素。</p><p>p:only- child，选择属于其父元素的唯一子元素的每个元素。</p><p>p:nth- child（2），选择属于其父元素的第二个子元素的每个元素。</p><p>:enabled:disabled，控制表单控件的禁用状态.</p><p>:checked，单选框或复选框被选中。</p></div><div class="story post-story"><h2 id="CSS3动画如何在动作结束时保持该状态不变"><a href="#CSS3动画如何在动作结束时保持该状态不变" class="headerlink" title="CSS3动画如何在动作结束时保持该状态不变"></a>CSS3动画如何在动作结束时保持该状态不变</h2><p>采用 animation- fill-mode。其可以设置为以下值。</p><p>none，不改变默认行为。</p><p>forwards，当动画完成后，保持最后一个属性值（在最后一个关键帧中定义）</p><p>backwards，在 animation-delay所指定的一段时间内，在动画显示之前，应用开始属性值（在第一个关键帧中定义）。</p><p>both，向前和向后填充模式都可以应用。</p></div><div class="story post-story"><h2 id="box-sizing"><a href="#box-sizing" class="headerlink" title="box- sizing"></a>box- sizing</h2><p>box-sizing属性主要用来控制元素盒模型的解析模式。默认值是 content-box。</p><p>content-box让元素维持W3C的标准盒模型。元素的宽度&#x2F;高度由 border+ padding+content的宽度&#x2F;高度决定，设置 width&#x2F;height属性指的是指定 content部分的宽度&#x2F;高度。</p><p>border-box让元素维持IE传统盒模型（IE6以下版本和IE6、IE7的怪异模式）。设置 width&#x2F;height属性指的是指定 border+ padding+ content的宽度&#x2F;高度。</p><p>标准浏览器下，按照W3C规范解析盒模型。一旦修改了元素的边框或内距，就会影响元素的盒子尺寸，就不得不重新计算元素的盒子尺寸，从而影响整个页面的布局。</p></div><div class="story post-story"><h2 id="CSS3动画的优缺点"><a href="#CSS3动画的优缺点" class="headerlink" title="CSS3动画的优缺点"></a>CSS3动画的优缺点</h2><p>优点如下:</p><p>在性能上会稍微好一些。代码相对简单。</p><p>缺点如下:</p><p>在动画控制上不够灵活，兼容性不好。</p></div><div class="story post-story"><h2 id="Animation与-Transition的异同"><a href="#Animation与-Transition的异同" class="headerlink" title="Animation与 Transition的异同"></a>Animation与 Transition的异同</h2><p>Animation与 Transition的功能相同，都是通过改变元素的属性值来实现动画效果的。</p><p>它们的区别在于，使用 Transition的功能时只能用指定属性的开始值和结束值，然后在这两个属性值之间使用平滑过渡的方式实现动画效果，因此不能实现比较复杂的动画效果。</p><p>Animation功能通过定义多个关键帧，以及定义每个关键帧中元素的属性值来实现更为复杂的动画效果。</p></div><div class="story post-story"><h2 id="Animation属性值"><a href="#Animation属性值" class="headerlink" title="Animation属性值"></a>Animation属性值</h2><p>两个必要属性如下。</p><p>animation-name，即动画名称。</p><p>animation- duration，即动画持续时间。</p><p>其他属性值如下。</p><p>animation- play-state，即播放状态（ running表示播放， paused表示暂停），可以用来控制动画暂停。</p><p>animation- timing- function，即动画运动形式。</p><p>animation- delay，即动画延迟时间。</p><p>mation-iteration- count，即重复次数。</p><p>animation-direction，即播放前重置（ alternate动画直接从上一次停止的位置开始执行）。</p></div><div class="story post-story"><h2 id="媒体查询-rem的使用方法"><a href="#媒体查询-rem的使用方法" class="headerlink" title="媒体查询+rem的使用方法"></a>媒体查询+rem的使用方法</h2><p>@media媒体类型and（媒体特性）{样式规则}<br>这通常在移动端使用。在做移动端开发的时候，为了适配多屏幕，使用rem单位，然后根据屏幕尺寸的改变动态地设置根节点HIML的font-size值。这样可以解决多屏幕适配的问题。</p><p>html{<br>font-size：20px;<br>}<br>@media （min-width：320px） {<br>html<br>{<br>font-size：12px；<br>}<br>}<br>@media （min-width：360px）{<br>html{<br>font-size：16px；<br>}<br>}<br>但是这种做法有两个缺点。</p><p>（1）适配屏幕的尺寸不是连续的。</p><p>（2）会在CSS文件中添加大段的查询代码，增加了CSS文件的大小，为改进上述缺点，可以使用 JavaScript获取移动设备屏幕的宽度，根据设计稿的原型尺寸，动态地计算font-size的值。</p></div><div class="story post-story"><h2 id="rem的原理"><a href="#rem的原理" class="headerlink" title="rem的原理"></a>rem的原理</h2><p>在做响应式布局的时候，通过调整HTML的字体大小，页面上所有使用rem单位的元素都会做相应的调整。</p></div><div class="story post-story"><h2 id="设置CSS3文本阴影"><a href="#设置CSS3文本阴影" class="headerlink" title="设置CSS3文本阴影"></a>设置CSS3文本阴影</h2><p>h1{text- shadow：水平阴影，垂直阴影，模糊距离，阴影颜色}</p></div><div class="story post-story"><h2 id="盒阴影"><a href="#盒阴影" class="headerlink" title="盒阴影"></a>盒阴影</h2><p>盒阴影的语法结构与文本阴影类似，如box- shadow：5px 5px 5px rgba（255，15，255，0.5）。</p><p>但是，盒阴影多了一个属性，即外延值 inset.，如box- -shadow：5px 5px 25px rgba（0,0,255，0.5）inset。</p><p>通过CSS3实现背景颜色线性渐变具体代码如下：</p><p>div{<br>background：-webkit-linear-gradient （left, red, green 50%， blue）；<br>}</p></div><div class="story post-story"><h2 id="CSS3中-transition属性值及含义"><a href="#CSS3中-transition属性值及含义" class="headerlink" title="CSS3中 transition属性值及含义"></a>CSS3中 transition属性值及含义</h2><p>transition属性是一个简写属性，用于设置以下4个过渡属性。</p><p>transition- property，哪个属性需要实现过渡</p><p>transition- duration，完成过渡效果需要多少秒&#x2F;毫秒</p><p>transition- timing- function，速度效果的运动曲线，如 linear、ease-in、ease、ease-out、 ease-in-out, cube-bezier。</p><p>transition- delay，规定过渡开始前的延迟时间。</p></div><div class="story post-story"><h2 id="用省略号显示超出文本的内容"><a href="#用省略号显示超出文本的内容" class="headerlink" title="用省略号显示超出文本的内容"></a>用省略号显示超出文本的内容</h2><p>使用text-overflow:ellopsis。</p><p>当文本溢出时，为了不显示省略标记（…），通过clip直接将溢出的部分裁剪掉。</p></div><div class="story post-story"><h2 id="实现文本换行"><a href="#实现文本换行" class="headerlink" title="实现文本换行"></a>实现文本换行</h2><p>使用word-wrap属性。</p><p>normal，只在允许的断字点换行（浏览器保持默认处理）。</p><p>break-word，在长单词或URL地址内部进行换行。</p></div><div class="story post-story"><h2 id="position-属性的值有哪些及其区别"><a href="#position-属性的值有哪些及其区别" class="headerlink" title="position 属性的值有哪些及其区别"></a>position 属性的值有哪些及其区别</h2><p>固定定位 fixed： 元素的位置相对于浏览器窗口是固定位置，即使窗口是滚动的它也不会移动。Fixed 定 位使元素的位置与文档流无关，因此不占据空间。 Fixed 定位的元素和其他元素重叠。</p><p>相对定位 relative： 如果对一个元素进行相对定位，它将出现在它所在的位置上。然后，可以通过设置垂直 或水平位置，让这个元素“相对于”它的起点进行移动。 在使用相对定位时，无论是 否进行移动，元素仍然占据原来的空间。因此，移动元素会导致它覆盖其它框。</p><p>绝对定位 absolute： 绝对定位的元素的位置相对于最近的已定位父元素，如果元素没有已定位的父元素，那 么它的位置相对于。absolute 定位使元素的位置与文档流无关，因此不占据空间。 absolute 定位的元素和其他元素重叠。</p><p>粘性定位 sticky： 元素先按照普通文档流定位，然后相对于该元素在流中的 flow root（BFC）和 containing block（最近的块级祖先元素）定位。而后，元素定位表现为在跨越特定阈值前为相对定 位，之后为固定定位。</p><p>默认定位 Static： 默认值。没有定位，元素出现在正常的流中（忽略 top, bottom, left, right 或者 z-index 声 明）。 inherit: 规定应该从父元素继承 position 属性的值。</p></div><div class="story post-story"><h2 id="让一个元素水平垂直居中"><a href="#让一个元素水平垂直居中" class="headerlink" title="让一个元素水平垂直居中"></a>让一个元素水平垂直居中</h2><h3 id="水平居中"><a href="#水平居中" class="headerlink" title="水平居中"></a>水平居中</h3><p>对于 行内元素 : text-align: center;<br>对于确定宽度的块级元素：<br>（1）width和margin实现。margin: 0 auto;<br>（2）绝对定位和margin-left: margin-left: (父width - 子width）&#x2F;2, 前提是父元素position: relative<br>对于宽度未知的块级元素<br>（1）table标签配合margin左右auto实现水平居中。使用table标签（或直接将块级元素设值为 display:table），再通过给该标签添加左右margin为auto。<br>（2）inline-block实现水平居中方法。display：inline-block和text-align:center实现水平居中。<br>（3）绝对定位+transform，translateX可以移动本身元素的50%。<br>（4）flex布局使用justify-content:center</p><h3 id="垂直居中"><a href="#垂直居中" class="headerlink" title="垂直居中"></a>垂直居中</h3><p>利用 line-height 实现居中，这种方法适合纯文字类<br>通过设置父容器 相对定位 ，子级设置 绝对定位，标签通过margin实现自适应居中<br>弹性布局 flex :父级设置display: flex; 子级设置margin为auto实现自适应居中<br>父级设置相对定位，子级设置绝对定位，并且通过位移 transform 实现<br>table 布局，父级通过转换成表格形式，然后子级设置 vertical-align 实现。（需要注意的是：vertical-align: middle使用的前提条件是内联元素以及display值为table-cell的元素）。<br>传送门 ☞ # 图解CSS水平垂直居中常见面试方法</p></div><div class="story post-story"><h2 id="隐藏页面中某个元素的方法"><a href="#隐藏页面中某个元素的方法" class="headerlink" title="隐藏页面中某个元素的方法"></a>隐藏页面中某个元素的方法</h2><p>opacity：0，该元素隐藏起来了，但不会改变页面布局，并且，如果该元素已经绑定 一些事件，如click 事件，那么点击该区域，也能触发点击事件的<br>visibility：hidden，该元素隐藏起来了，但不会改变页面布局，但是不会触发该元素已 经绑定的事件 ，隐藏对应元素，在文档布局中仍保留原来的空间（重绘）<br>display：none，把元素隐藏起来，并且会改变页面布局，可以理解成在页面中把该元素。 不显示对应的元素，在文档布局中不再分配空间43、用CSS实现三角符号</p></div><div class="story post-story"><h2 id="页面布局"><a href="#页面布局" class="headerlink" title="页面布局"></a>页面布局</h2><h3 id="Flex-布局"><a href="#Flex-布局" class="headerlink" title="Flex 布局"></a>Flex 布局</h3><p>布局的传统解决方案，基于盒状模型，依赖 display 属性 + position 属性 + float 属性。它对于那些特殊布局非常不方便，比如，垂直居中就不容易实现。</p><p>Flex 是 Flexible Box 的缩写，意为”弹性布局”,用来为盒状模型提供最大的灵活性。指定容器 display: flex 即可。 简单的分为容器属性和元素属性。</p><p>容器的属性：</p><p>flex-direction：决定主轴的方向（即子 item 的排列方法）flex-direction: row | row-reverse | column | column-reverse;<br>flex-wrap：决定换行规则 flex-wrap: nowrap | wrap | wrap-reverse;<br>flex-flow： .box { flex-flow: || ; }<br>justify-content：对其方式，水平主轴对齐方式<br>align-items：对齐方式，竖直轴线方向<br>align-content</p><p>项目的属性（元素的属性）：</p><p>order 属性：定义项目的排列顺序，顺序越小，排列越靠前，默认为 0<br>flex-grow 属性：定义项目的放大比例，即使存在空间，也不会放大<br>flex-shrink 属性：定义了项目的缩小比例，当空间不足的情况下会等比例的缩小，如果 定义个 item 的 flow-shrink 为 0，则为不缩小<br>flex-basis 属性：定义了在分配多余的空间，项目占据的空间。<br>flex：是 flex-grow 和 flex-shrink、flex-basis 的简写，默认值为 0 1 auto。<br>align-self：允许单个项目与其他项目不一样的对齐方式，可以覆盖<br>align-items，默认属 性为 auto，表示继承父元素的 align-items 比如说，用 flex 实现圣杯布局</p><h3 id="Rem-布局"><a href="#Rem-布局" class="headerlink" title="Rem 布局"></a>Rem 布局</h3><p>首先 Rem 相对于根(html)的 font-size 大小来计算。简单的说它就是一个相对单例 如:font-size:10px;,那么（1rem &#x3D; 10px）了解计算原理后首先解决怎么在不同设备上设置 html 的 font-size 大小。其实 rem 布局的本质是等比缩放，一般是基于宽度。</p><p>优点：可以快速适用移动端布局，字体，图片高度<br>缺点：<br>① 目前 ie 不支持，对 pc 页面来讲使用次数不多；<br>② 数据量大：所有的图片，盒子都需要我们去给一个准确的值；才能保证不同机型的适配；<br>③ 在响应式布局中，必须通过 js 来动态控制根元素 font-size 的大小。也就是说 css 样式和 js 代码有一定的耦合性。且必须将改变 font-size 的代码放在 css 样式之前。</p><h3 id="百分比布局"><a href="#百分比布局" class="headerlink" title="百分比布局"></a>百分比布局</h3><p>通过百分比单位 “ % “ 来实现响应式的效果。通过百分比单位可以使得浏览器中的组件的宽和高随着浏览器的变化而变化，从而实现响应式的效果。 直观的理解，我们可能会认为子元素的百分比完全相对于直接父元素，height 百分比相 对于 height，width 百分比相对于 width。 padding、border、margin 等等不论是垂直方向还是水平方向，都相对于直接父元素的 width。 除了 border-radius 外，还有比如 translate、background-size 等都是相对于自身的。<br>缺点：</p><p>（1）计算困难<br>（2）各个属性中如果使用百分比，相对父元素的属性并不是唯一的。造成我们使用百分比单位容易使布局问题变得复杂。</p><h3 id="浮动布局"><a href="#浮动布局" class="headerlink" title="浮动布局"></a>浮动布局</h3><p>浮动布局:当元素浮动以后可以向左或向右移动，直到它的外边缘碰到包含它的框或者另外一个浮动元素的边框为止。元素浮动以后会脱离正常的文档流，所以文档的普通流中的框就变的好像浮动元素不存在一样。</p><p>优点<br>这样做的优点就是在图文混排的时候可以很好的使文字环绕在图片周围。另外当元素浮动了起来之后，它有着块级元素的一些性质例如可以设置宽高等，但它与inline-block还是有一些区别的，第一个就是关于横向排序的时候，float可以设置方向而inline-block方向是固定的；还有一个就是inline-block在使用时有时会有空白间隙的问题<br>缺点<br>最明显的缺点就是浮动元素一旦脱离了文档流，就无法撑起父元素，会造成父级元素高度塌陷。</p><h3 id="自适应布局（bootstrap）"><a href="#自适应布局（bootstrap）" class="headerlink" title="自适应布局（bootstrap）"></a>自适应布局（bootstrap）</h3><p>自适应布局分别为不同屏幕不同分辨率定义布局，即是创建多个静态页面，每个静态页面对应一个屏幕分辨率的一个范围内。在改变不同的屏幕分辨率可以切换到不同的静态布局上，但是布局中的元素位置会发生改变，但是在每个静态布局中，页面中的元素不会随着窗口大小的调整发生变化。使用 @media 媒体查询给不同尺寸和介质的设备切换不同的样式。在优秀的响应范围设计下可以给适配范围内的设备最好的体验，在同一个设备下实际还是固定的布局。</p><p>优点：<br>1.对网站的复杂程度兼容性更大；<br>2.对开发工程师来说制作的成本代价更低；<br>3.代码执行效果更高效；<br>4.测试时更加容易，运营相对更加精准。</p><p>缺点： 在现如今的移动端设计百花齐放的时期之下，同一个网站往往需要为不同的设备制作不同的页面，不但会增加开发成本，还会因为客户的需求改变时，可能会改动多套代码、流程相比较来说较繁琐。</p><h3 id="流式布局（fluid）"><a href="#流式布局（fluid）" class="headerlink" title="流式布局（fluid）"></a>流式布局（fluid）</h3><p>流式布局的布局方式是页面的元素的宽度按照屏幕的分辨率进行适配的调整，但是整体布局不变，也称之为栅栏系统。使用%百分比定义宽度，高度大都是用px来固定住，可以根据可视区域 (viewport) 和父元素的实时尺寸进行调整，尽可能的适应各种分辨率。往往配合 max-width&#x2F;min-width 等属性控制尺寸流动范围以免过大或者过小影响阅读。<br>缺点： 屏幕大小变化时，页面元素也随之变化但是布局不变。这就会因为如果屏幕太大或太小都会布局时元素无法正常显示。</p><h3 id="响应式布局"><a href="#响应式布局" class="headerlink" title="响应式布局"></a>响应式布局</h3><p>响应式布局是css3增加的新布局方式，该布局方式2010年提出来的一个概念，说白了就是一个网站能够兼容多个终端——而不是为每个终端做一个特定的版本。这个概念是为解决移动互联网浏览而诞生的。响应式布局可以为不同终端的用户提供更加舒适的界面和更好的用户体验，而且随着目前大屏幕移动设备的普及，用“大势所趋”来形容也不为过。响应式几乎成为优秀页面布局的标准。<br>设计方法： 媒体查询+流式布局。通常使用@media媒体查询，和网格系统配合相对布局单位进行布局，实际上说白了就是综合响应式等技术通过css给单一网页不同设备分辨率返回不式时的技术。<br>优点： 适应pc端和移动端，如果有足够的耐心，页面效果会很完美。<br>缺点：<br>1.只能适应主流的宽高；<br>2.如果匹配足够多的设备屏幕的大小，对于工程师来说工作量不小，设计更需要多个版本，工作量增大。</p></div><div class="story post-story"><h2 id="前端优化的解决方案"><a href="#前端优化的解决方案" class="headerlink" title="前端优化的解决方案"></a>前端优化的解决方案</h2><p>我们的优化原则有以下几个：</p><p>能缓存的，尽量强缓存。</p><p>引入外部资源时不要出现超时、404的状况。</p><p>减少HTTP请求数。</p><p>合理设置cookie的大小以及过期时间。</p><p>合理利用懒加载</p></div><div class="story post-story"><h2 id="网页内容的优化"><a href="#网页内容的优化" class="headerlink" title="网页内容的优化"></a>网页内容的优化</h2><p>1、懒加载数据。<br>首先根据标签的left和top属性判断是否显示在了屏幕中（如果显示在屏幕中，其left和top属性值应该是在0到窗口长宽之间）。<br>如果显示在屏幕中，则将src标签的内容替换为图片的url。</p><p>2、不要缩放图片。<br>img计算缩放也需要时间</p><p>3、避免重定向。<br>重定向会重新渲染网页。</p><p>4、使用雪碧图（精灵图）：<br>通过使用background-position：-xpx -ypx;来调整图片的位置，不过HTTP2不适用，原因为HTTP2实际上是多路复用的，只用一个TCP连接，所以多个图片的请求也是在同一个TCP连接里，这样能省下非常多的请求时间，但坏处就是单连接开销很大，如果要传多个大文件，就很麻烦。</p><p>5、要有网站小图标favicon.ico。</p><p>如果没有小图标，会引起404，拖慢网页加载进度。<br>6、能使用jpeg就不要用png，能使用png8就不要用png24。<br>（1）色彩丰富的、大的图片切成jpg的；<br>（2）尺寸小的，色彩不丰富的和背景透明的切成gif或者png8的；<br>（3）半透明的切成png24。</p><p>7、使用canvas压缩图片。</p></div><div class="story post-story"><h2 id="css的优化"><a href="#css的优化" class="headerlink" title="css的优化"></a>css的优化</h2><p>1、避免使用@import。<br>使用@import相当于将引入的css放在了页面底部，因为使用@import引用的文件只有在引用它的那个css文件被下载、解析之后，浏览器才会知道还有另外一个css需要下载，这时才去下载，然后下载后开始解析、构建render tree等一系列操作。因此使用@import会拖慢渲染的过程。</p><p>2、将样式表放在head中。<br>如果放在body中，可能出现在浏览器下载好css样式表之前，组件就已经加载好了的情况，这可能会导致重新渲染。</p><p>3、避免使用css表达式。<br>如：expression((new Date()).getHours()%2 ? “#B8D4FF” : “#F08A00” );<br>解析表达式和计算都需要时间。</p></div><div class="story post-story"><h2 id="JavaScript的优化"><a href="#JavaScript的优化" class="headerlink" title="JavaScript的优化"></a>JavaScript的优化</h2><p>1、尽量减少DOM访问。</p><p>2、使用事件代理（减少DOM操作）。</p><p>3、把脚本放在底部（加载脚本时会阻塞页面渲染）。</p><p>4、合理使用节流函数和防抖函数。</p></div><div class="story post-story"><h2 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h2><p>CDN即内容分发网络。它依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。优化加载速度。</p></div><div class="story post-story"><h2 id="水平垂直居中的几种方法"><a href="#水平垂直居中的几种方法" class="headerlink" title="水平垂直居中的几种方法"></a>水平垂直居中的几种方法</h2><p>使用flex布局<br>利用flex的alignItems:center垂直居中，justifycontent:center水平居中</p><p>利用相对定位和绝对定位的margin:auto<br>相对定位下，使用绝对定位将上下左右都设置为0，再设置margin:auto即可实现居中</p><p>利用相对定位和绝对定位，再加上外边距和平移的配合<br>相对定位下，使用绝对定位，利用margin偏移外容器的50%，再利用translate平移回补自身宽高的50%即可</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;语义化标签&quot;&gt;&lt;a href=&quot;#语义化标签&quot; class=&quot;headerlink&quot; title=&quot;语义化标签&quot;&gt;&lt;/a&gt;语义化标签&lt;/h2&gt;&lt;p&gt;header nav main article sect</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="面试八股" scheme="http://example.com/tags/%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1/"/>
    
  </entry>
  
  <entry>
    <title>uni-app</title>
    <link href="http://example.com/2024/10/24/uni-app/"/>
    <id>http://example.com/2024/10/24/uni-app/</id>
    <published>2024-10-24T03:02:00.000Z</published>
    <updated>2024-12-07T13:29:52.495Z</updated>
    
    <content type="html"><![CDATA[<h1 id="uniapp小兔鲜项目"><a href="#uniapp小兔鲜项目" class="headerlink" title="uniapp小兔鲜项目"></a>uniapp小兔鲜项目</h1><div class="story post-story"><h2 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h2><p>vue+pinia+TypeScript+ESLint+Prettier+git</p></div><div class="story post-story"><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><ul><li><p>pages：业务页面存放的目录</p><ul><li>index<ul><li>index.vue：index页面</li></ul></li></ul></li><li><p>static：存放应用引用的本地静态资源的目录</p></li><li><p>unpackage：非工程代码，一般存放运行或发行的编译结果</p></li><li><p>index.html：H5端页面</p></li><li><p>main.js：Vue初始化入口文件</p></li><li><p>App.vue：配置App全局样式、监听应用生命周期</p></li><li><p>pages.json：配置页面路由、导航栏、tabBar等页面类信息</p></li><li><p>manifest.json：配置appid、应用名称、logo、版本等打包信息</p></li><li><p>uni.scss：uni-app内置的常用样式变量</p></li></ul></div><div class="story post-story"><h2 id="pages-json"><a href="#pages-json" class="headerlink" title="pages.json"></a>pages.json</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">//页面路由及窗口表现</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;path&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;pages/my/my&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;style&quot;</span> <span class="punctuation">:</span> </span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;navigationBarTitleText&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;我的&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;globalStyle&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="comment">//默认窗口表现</span></span><br><span class="line"><span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;white&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni-app&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#27BA9B&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F8F8F8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;selectedColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#27BA9B&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/tabs/home_default.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/tabs/home_selected.png&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/my/my&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我的&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/tabs/user_default.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/tabs/user_selected.png&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;uniIdRouter&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="创建工程"><a href="#创建工程" class="headerlink" title="创建工程"></a>创建工程</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/dcloudio/uni-preset-vue.git</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="安装uni-app插件和ts类型校验"><a href="#安装uni-app插件和ts类型校验" class="headerlink" title="安装uni-app插件和ts类型校验"></a>安装uni-app插件和ts类型校验</h2><ul><li>uni-create-view</li><li>uni-helper</li><li>uniapp小程序扩展</li><li>Vue - Official</li><li><strong>工作区禁用</strong> @builtin typescript 插件（禁用后开启 Vue3 的 TS 托管模式）</li></ul><blockquote><p>pnpm i -D miniprogram-api-typings @uni-helper&#x2F;uni-app-types</p></blockquote><ul><li>配置tsconfig.json</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;sourceMap&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;./src/*&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;esnext&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;dom&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 类型声明文件</span></span><br><span class="line">    <span class="attr">&quot;types&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;@dcloudio/types&quot;</span><span class="punctuation">,</span> <span class="comment">// uni-app API 类型</span></span><br><span class="line">      <span class="string">&quot;miniprogram-api-typings&quot;</span><span class="punctuation">,</span> <span class="comment">// 原生微信小程序类型</span></span><br><span class="line">      <span class="string">&quot;@uni-helper/uni-app-types&quot;</span> <span class="comment">// uni-app 组件类型</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// vue 编译器类型，校验标签类型</span></span><br><span class="line">  <span class="attr">&quot;vueCompilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;@uni-helper/uni-app-types/volar-plugin&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;src/**/*.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;src/**/*.d.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;src/**/*.tsx&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;src/**/*.vue&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="配置文件关联"><a href="#配置文件关联" class="headerlink" title="配置文件关联"></a>配置文件关联</h2><table><thead><tr><th>项</th><th>值</th></tr></thead><tbody><tr><td>manifest.json</td><td>jsonc</td></tr><tr><td>pages.json</td><td>jsonc</td></tr></tbody></table></div><div class="story post-story"><h2 id="引入-uni-ui-组件库"><a href="#引入-uni-ui-组件库" class="headerlink" title="引入 uni-ui 组件库"></a>引入 uni-ui 组件库</h2><h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><p>安装 <a href="https://uniapp.dcloud.net.cn/component/uniui/quickstart.html#npm%E5%AE%89%E8%A3%85">uni-ui 组件库</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i @dcloudio/uni-ui</span><br></pre></td></tr></table></figure><p><strong>配置自动导入组件</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// 组件自动导入</span></span><br><span class="line">  <span class="attr">&quot;easycom&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;autoscan&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;custom&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="comment">// uni-ui 规则如下配置  // [!code ++]</span></span><br><span class="line">      <span class="attr">&quot;^uni-(.*)&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@dcloudio/uni-ui/lib/uni-$1/uni-$1.vue&quot;</span> <span class="comment">// [!code ++]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="comment">// …省略</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>安装类型声明文件</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i -D @uni-helper/uni-ui-types</span><br></pre></td></tr></table></figure><p><strong>配置类型声明文件</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tsconfig.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">&quot;types&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;@dcloudio/types&quot;</span><span class="punctuation">,</span> <span class="comment">// uni-app API 类型</span></span><br><span class="line">      <span class="string">&quot;miniprogram-api-typings&quot;</span><span class="punctuation">,</span> <span class="comment">// 原生微信小程序类型</span></span><br><span class="line">      <span class="string">&quot;@uni-helper/uni-app-types&quot;</span><span class="punctuation">,</span> <span class="comment">// uni-app 组件类型</span></span><br><span class="line">      <span class="string">&quot;@uni-helper/uni-ui-types&quot;</span> <span class="comment">// uni-ui 组件类型  // [!code ++]</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// vue 编译器类型，校验标签类型</span></span><br><span class="line">  <span class="attr">&quot;vueCompilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;@uni-helper/uni-app-types/volar-plugin&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="小程序端-Pinia-持久化"><a href="#小程序端-Pinia-持久化" class="headerlink" title="小程序端 Pinia 持久化"></a>小程序端 Pinia 持久化</h2><p>说明：<code>Pinia</code> 用法与 <code>Vue3</code> 项目完全一致，<code>uni-app</code> 项目仅需解决<strong>持久化插件兼容性</strong>问题。</p><h3 id="持久化存储插件"><a href="#持久化存储插件" class="headerlink" title="持久化存储插件"></a>持久化存储插件</h3><p>安装持久化存储插件： <a href="https://prazdevs.github.io/pinia-plugin-persistedstate/zh/guide/config.html#storage">pinia-plugin-persistedstate</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i pinia-plugin-persistedstate</span><br></pre></td></tr></table></figure><p>插件默认使用 <code>localStorage</code> 实现持久化，小程序端不兼容，需要替换持久化 API。</p><h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><figure class="highlight ts"><figcaption><span>&#123;28-31&#125; [stores/modules/member.ts]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义 Store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useMemberStore = <span class="title function_">defineStore</span>(</span><br><span class="line">  <span class="string">&#x27;member&#x27;</span>,</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 会员信息</span></span><br><span class="line">    <span class="keyword">const</span> profile = ref&lt;<span class="built_in">any</span>&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 保存会员信息，登录时使用</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">setProfile</span> = (<span class="params"><span class="attr">val</span>: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">      profile.<span class="property">value</span> = val</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 清理会员信息，退出时使用</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">clearProfile</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      profile.<span class="property">value</span> = <span class="literal">undefined</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 记得 return</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      profile,</span><br><span class="line">      setProfile,</span><br><span class="line">      clearProfile,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> 持久化</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">persist</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight ts"><figcaption><span>&#123;2,7&#125; [stores/index.ts]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> persist <span class="keyword">from</span> <span class="string">&#x27;pinia-plugin-persistedstate&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建 pinia 实例</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"><span class="comment">// 使用持久化存储插件</span></span><br><span class="line">pinia.<span class="title function_">use</span>(persist)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认导出，给 main.ts 使用</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> pinia</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模块统一导出</span></span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&#x27;./modules/member&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><figcaption><span>&#123;2,8&#125; [main.ts]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createSSRApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> pinia <span class="keyword">from</span> <span class="string">&#x27;./stores&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createApp</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> app = <span class="title function_">createSSRApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">  app.<span class="title function_">use</span>(pinia)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    app,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="多端兼容"><a href="#多端兼容" class="headerlink" title="多端兼容"></a>多端兼容</h3><p><strong>网页端持久化 API</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 网页端API</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>()</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>()</span><br></pre></td></tr></table></figure><p><strong>多端持久化 API</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 兼容多端API</span></span><br><span class="line">uni.<span class="title function_">setStorageSync</span>()</span><br><span class="line">uni.<span class="title function_">getStorageSync</span>()</span><br></pre></td></tr></table></figure><p><strong>参考代码</strong></p><figure class="highlight ts"><figcaption><span>&#123;7-20&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/modules/member.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useMemberStore = <span class="title function_">defineStore</span>(</span><br><span class="line">  <span class="string">&#x27;member&#x27;</span>,</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//…省略</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// 配置持久化</span></span><br><span class="line">    <span class="attr">persist</span>: &#123;</span><br><span class="line">      <span class="comment">// 调整为兼容多端的API</span></span><br><span class="line">      <span class="attr">storage</span>: &#123;</span><br><span class="line">        <span class="title function_">setItem</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line">          uni.<span class="title function_">setStorageSync</span>(key, value) <span class="comment">// [!code warning]</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">getItem</span>(<span class="params">key</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> uni.<span class="title function_">getStorageSync</span>(key) <span class="comment">// [!code warning]</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="uni-request-请求封装"><a href="#uni-request-请求封装" class="headerlink" title="uni.request 请求封装"></a>uni.request 请求封装</h2><h3 id="请求和上传文件拦截器"><a href="#请求和上传文件拦截器" class="headerlink" title="请求和上传文件拦截器"></a>请求和上传文件拦截器</h3><p><strong>uniapp 拦截器</strong>： <a href="https://uniapp.dcloud.net.cn/api/interceptor.html">uni.addInterceptor</a></p><p><strong>接口说明</strong>：<a href="https://www.apifox.cn/apidoc/shared-0e6ee326-d646-41bd-9214-29dbf47648fa/doc-1521513">接口文档</a></p><p>::: tip 实现需求</p><ol><li>拼接基础地址</li><li>设置超时时间</li><li>添加请求头标识</li><li>添加 token<br>:::</li></ol><p><strong>参考代码</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/utils/http.ts</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求基地址</span></span><br><span class="line"><span class="keyword">const</span> baseURL = <span class="string">&#x27;https://pcapi-xiaotuxian-front-devtest.itheima.net&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 拦截器配置</span></span><br><span class="line"><span class="keyword">const</span> httpInterceptor = &#123;</span><br><span class="line">  <span class="comment">// 拦截前触发</span></span><br><span class="line">  <span class="title function_">invoke</span>(<span class="params"><span class="attr">options</span>: <span class="title class_">UniApp</span>.<span class="title class_">RequestOptions</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 1. 非 http 开头需拼接地址</span></span><br><span class="line">    <span class="keyword">if</span> (!options.<span class="property">url</span>.<span class="title function_">startsWith</span>(<span class="string">&#x27;http&#x27;</span>)) &#123;</span><br><span class="line">      options.<span class="property">url</span> = baseURL + options.<span class="property">url</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2. 请求超时</span></span><br><span class="line">    options.<span class="property">timeout</span> = <span class="number">10000</span></span><br><span class="line">    <span class="comment">// 3. 添加小程序端请求头标识</span></span><br><span class="line">    options.<span class="property">header</span> = &#123;</span><br><span class="line">      <span class="string">&#x27;source-client&#x27;</span>: <span class="string">&#x27;miniapp&#x27;</span>,</span><br><span class="line">      ...options.<span class="property">header</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4. 添加 token 请求头标识</span></span><br><span class="line">    <span class="keyword">const</span> memberStore = <span class="title function_">useMemberStore</span>()</span><br><span class="line">    <span class="keyword">const</span> token = memberStore.<span class="property">profile</span>?.<span class="property">token</span></span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">      options.<span class="property">header</span>.<span class="property">Authorization</span> = token</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拦截 request 请求</span></span><br><span class="line">uni.<span class="title function_">addInterceptor</span>(<span class="string">&#x27;request&#x27;</span>, httpInterceptor)</span><br><span class="line"><span class="comment">// 拦截 uploadFile 文件上传</span></span><br><span class="line">uni.<span class="title function_">addInterceptor</span>(<span class="string">&#x27;uploadFile&#x27;</span>, httpInterceptor)</span><br></pre></td></tr></table></figure><p><strong>warning 注意事项</strong></p><p>微信小程序端，需登录 <a href="https://mp.weixin.qq.com/">微信公众平台</a> 配置合法域名 👇</p><p><code>https://pcapi-xiaotuxian-front-devtest.itheima.net</code></p><h3 id="封装-Promise-请求函数"><a href="#封装-Promise-请求函数" class="headerlink" title="封装 Promise 请求函数"></a>封装 Promise 请求函数</h3><ol><li>返回 Promise 对象，用于处理返回值类型</li><li>成功 resolve<ol><li>提取数据</li><li>添加泛型</li></ol></li><li>失败 reject<ol><li>401 错误</li><li>其他错误</li><li>网络错误</li></ol></li></ol><p><strong>参考代码</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 请求函数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  UniApp.RequestOptions</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> <span class="variable">Promise</span></span></span><br><span class="line"><span class="comment"> *  1. 返回 Promise 对象，用于处理返回值类型</span></span><br><span class="line"><span class="comment"> *  2. 获取数据成功</span></span><br><span class="line"><span class="comment"> *    2.1 提取核心数据 res.data</span></span><br><span class="line"><span class="comment"> *    2.2 添加类型，支持泛型</span></span><br><span class="line"><span class="comment"> *  3. 获取数据失败</span></span><br><span class="line"><span class="comment"> *    3.1 401错误  -&gt; 清理用户信息，跳转到登录页</span></span><br><span class="line"><span class="comment"> *    3.2 其他错误 -&gt; 根据后端错误信息轻提示</span></span><br><span class="line"><span class="comment"> *    3.3 网络错误 -&gt; 提示用户换网络</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Data</span>&lt;T&gt; = &#123;</span><br><span class="line">  <span class="attr">code</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">msg</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">result</span>: T</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2.2 添加类型，支持泛型</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> http = &lt;T&gt;<span class="function">(<span class="params"><span class="attr">options</span>: <span class="title class_">UniApp</span>.<span class="title class_">RequestOptions</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1. 返回 Promise 对象</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;<span class="title class_">Data</span>&lt;T&gt;&gt;(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    uni.<span class="title function_">request</span>(&#123;</span><br><span class="line">      ...options,</span><br><span class="line">      <span class="comment">// 响应成功</span></span><br><span class="line">      <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="comment">// 状态码 2xx，参考 axios 的设计</span></span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">statusCode</span> &gt;= <span class="number">200</span> &amp;&amp; res.<span class="property">statusCode</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">          <span class="comment">// 2.1 提取核心数据 res.data</span></span><br><span class="line">          <span class="title function_">resolve</span>(res.<span class="property">data</span> <span class="keyword">as</span> <span class="title class_">Data</span>&lt;T&gt;)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res.<span class="property">statusCode</span> === <span class="number">401</span>) &#123;</span><br><span class="line">          <span class="comment">// 401错误  -&gt; 清理用户信息，跳转到登录页</span></span><br><span class="line">          <span class="keyword">const</span> memberStore = <span class="title function_">useMemberStore</span>()</span><br><span class="line">          memberStore.<span class="title function_">clearProfile</span>()</span><br><span class="line">          uni.<span class="title function_">navigateTo</span>(&#123; <span class="attr">url</span>: <span class="string">&#x27;/pages/login/login&#x27;</span> &#125;)</span><br><span class="line">          <span class="title function_">reject</span>(res)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 其他错误 -&gt; 根据后端错误信息轻提示</span></span><br><span class="line">          uni.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">            <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">            <span class="attr">title</span>: (res.<span class="property">data</span> <span class="keyword">as</span> <span class="title class_">Data</span>&lt;T&gt;).<span class="property">msg</span> || <span class="string">&#x27;请求错误&#x27;</span>,</span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="title function_">reject</span>(res)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 响应失败</span></span><br><span class="line">      <span class="title function_">fail</span>(<span class="params">err</span>) &#123;</span><br><span class="line">        uni.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">          <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;网络错误，换个网络试试&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title function_">reject</span>(err)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="代码规范"><a href="#代码规范" class="headerlink" title="代码规范"></a>代码规范</h2><p>如果没有统一代码风格，团队协作不便于查看代码提交时所做的修改。</p><h3 id="统一代码风格"><a href="#统一代码风格" class="headerlink" title="统一代码风格"></a>统一代码风格</h3><ul><li>安装 <code>eslint</code> + <code>prettier</code></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i -D eslint prettier eslint-plugin-vue @vue/eslint-config-prettier @vue/eslint-config-typescript @rushstack/eslint-patch @vue/tsconfig</span><br></pre></td></tr></table></figure><ul><li>xxxxxxxxxx import create from ‘zustand’​&#x2F;&#x2F; 导入核心方法import { mountStoreDevtool } from ‘simple-zustand-devtools’​&#x2F;&#x2F; 省略部分代码…​​&#x2F;&#x2F; 开发环境开启调试if (process.env.NODE_ENV &#x3D;&#x3D;&#x3D; ‘development’) {  mountStoreDevtool(‘channelStore’, useChannelStore)}​​export default useChannelStorejavascript</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-env node */</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;@rushstack/eslint-patch/modern-module-resolution&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;plugin:vue/vue3-essential&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@vue/eslint-config-typescript&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@vue/eslint-config-prettier&#x27;</span>,</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 小程序全局变量</span></span><br><span class="line">  <span class="attr">globals</span>: &#123;</span><br><span class="line">    <span class="attr">uni</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">wx</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="title class_">WechatMiniprogram</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">getCurrentPages</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">getApp</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="title class_">UniApp</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="title class_">UniHelper</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="title class_">App</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="title class_">Page</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="title class_">Component</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="title class_">AnyObject</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="string">&#x27;latest&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;prettier/prettier&#x27;</span>: [</span><br><span class="line">      <span class="string">&#x27;warn&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">singleQuote</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">semi</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">printWidth</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="attr">trailingComma</span>: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">        <span class="attr">endOfLine</span>: <span class="string">&#x27;auto&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;vue/multi-word-component-names&#x27;</span>: [<span class="string">&#x27;off&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;vue/no-setup-props-destructure&#x27;</span>: [<span class="string">&#x27;off&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;vue/no-deprecated-html-element-is&#x27;</span>: [<span class="string">&#x27;off&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/no-unused-vars&#x27;</span>: [<span class="string">&#x27;off&#x27;</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>配置 <code>package.json</code></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;script&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ... 省略 ...</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint . --ext .vue,.js,.ts --fix --ignore-path .gitignore&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>运行</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm lint</span><br></pre></td></tr></table></figure><h3 id="Git-工作流规范"><a href="#Git-工作流规范" class="headerlink" title="Git 工作流规范"></a>Git 工作流规范</h3><ul><li>安装并初始化 <code>husky</code></li></ul><figure class="highlight sh"><figcaption><span>[pnpx]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm dlx husky-init</span><br></pre></td></tr></table></figure><figure class="highlight sh"><figcaption><span>[npx]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky-init</span><br></pre></td></tr></table></figure><ul><li>安装 <code>lint-staged</code></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i -D lint-staged</span><br></pre></td></tr></table></figure><ul><li>配置 <code>package.json</code></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;script&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ... 省略 ...</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;*.&#123;vue,ts,js&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;eslint --fix&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>修改 <code>.husky/pre-commit</code> 文件</li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm test   // [!code --]</span><br><span class="line">npm run lint-staged     // [!code ++]</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="自定义导航配置"><a href="#自定义导航配置" class="headerlink" title="自定义导航配置"></a>自定义导航配置</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/pages.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;navigationStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;custom&quot;</span><span class="punctuation">,</span> <span class="comment">// 隐藏默认导航</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;white&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="组件安全区适配"><a href="#组件安全区适配" class="headerlink" title="组件安全区适配"></a>组件安全区适配</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- src/pages/index/componets/CustomNavbar.vue --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 获取屏幕边界到安全区域距离</span><br><span class="line">const &#123; safeAreaInsets &#125; = uni.getSystemInfoSync()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 顶部占位 --&gt;</span><br><span class="line">  &lt;view class=&quot;navbar&quot; :style=&quot;&#123; paddingTop: safeAreaInsets?.top + &#x27;px&#x27; &#125;&quot;&gt;</span><br><span class="line">    &lt;!-- ...省略 --&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;uniapp小兔鲜项目&quot;&gt;&lt;a href=&quot;#uniapp小兔鲜项目&quot; class=&quot;headerlink&quot; title=&quot;uniapp小兔鲜项目&quot;&gt;&lt;/a&gt;uniapp小兔鲜项目&lt;/h1&gt;&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=</summary>
      
    
    
    
    <category term="项目" scheme="http://example.com/categories/%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>api_server后端项目</title>
    <link href="http://example.com/2024/10/17/api-server%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE/"/>
    <id>http://example.com/2024/10/17/api-server%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE/</id>
    <published>2024-10-17T02:43:35.000Z</published>
    <updated>2024-10-17T08:51:58.483Z</updated>
    
    <content type="html"><![CDATA[<h1 id="项目初始化"><a href="#项目初始化" class="headerlink" title="项目初始化"></a>项目初始化</h1><div class="story post-story"><h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express cors mysql2</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="配置跨域、处理表单数据的中间件、路由"><a href="#配置跨域、处理表单数据的中间件、路由" class="headerlink" title="配置跨域、处理表单数据的中间件、路由"></a>配置跨域、处理表单数据的中间件、路由</h2><ol><li>在项目根目录中，新建router文件夹，用来存放路由</li><li>在项目根目录中，新建router_handler文件夹，用来存放所有的路由处理函数模块</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//     /router_handler/user.js</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">regUser</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;regUser ok&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">login</span> = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;login ok&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    /router/user.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> userHandler = <span class="built_in">require</span>(<span class="string">&#x27;../router_handler/user&#x27;</span>)</span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/reguser&#x27;</span>, userHandler.<span class="property">regUser</span>)</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, userHandler.<span class="property">login</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//   app.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">//创建服务器的实例对象</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//配置cors跨域</span></span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>())</span><br><span class="line"><span class="comment">//配置解析application/x-www-form-urlencoded格式的表单数据的中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useRouter = <span class="built_in">require</span>(<span class="string">&#x27;./router/user.js&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api&#x27;</span>, useRouter)</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3007</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;api server running at http://127.0.0.1:3007&#x27;</span>);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="安装并配置mysql模块"><a href="#安装并配置mysql模块" class="headerlink" title="安装并配置mysql模块"></a>安装并配置mysql模块</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//     /db/index.js</span><br><span class="line">const mysql = require(&#x27;mysql2&#x27;)</span><br><span class="line">const db = mysql.createPool(&#123;</span><br><span class="line">    host: &#x27;127.0.0.1&#x27;,</span><br><span class="line">    user: &#x27;root&#x27;,</span><br><span class="line">    password: &#x27;123456&#x27;,</span><br><span class="line">    database: &#x27;my_db_01&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">module.exports = db</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const db = require(&#x27;./db&#x27;)</span><br><span class="line">const bcrypt = require(&#x27;bcryptjs&#x27;)</span><br><span class="line">const userInfo = &#123;</span><br><span class="line">    account: &#x27;sherlock&#x27;,</span><br><span class="line">    password: &#x27;aptx4869&#x27;</span><br><span class="line">&#125;</span><br><span class="line">const sqlStr = &#x27;select * from rabbit_users where account=?&#x27;</span><br><span class="line">db.query(sqlStr, userInfo.account, (err, results) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err.message)</span><br><span class="line">    &#125;</span><br><span class="line">    if (results.length === 1 &amp;&amp; bcrypt.compareSync(userInfo.password, results[0].password)) &#123;</span><br><span class="line">        console.log(&#x27;登录成功&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        res.cc(&#x27;登录失败！&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="加密解密"><a href="#加密解密" class="headerlink" title="加密解密"></a>加密解密</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i bcryptjs</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bcrypt = <span class="built_in">require</span>(<span class="string">&#x27;bcryptjs&#x27;</span>)</span><br><span class="line">userinfo.<span class="property">password</span> = bcrypt.<span class="title function_">hashSync</span>(userinfo.<span class="property">password</span>,<span class="number">10</span>)</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;项目初始化&quot;&gt;&lt;a href=&quot;#项目初始化&quot; class=&quot;headerlink&quot; title=&quot;项目初始化&quot;&gt;&lt;/a&gt;项目初始化&lt;/h1&gt;&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;安装依赖&quot;&gt;&lt;a href=&quot;#安装依赖&quot; c</summary>
      
    
    
    
    <category term="项目" scheme="http://example.com/categories/%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="node.js" scheme="http://example.com/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>数据库</title>
    <link href="http://example.com/2024/10/15/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <id>http://example.com/2024/10/15/%E6%95%B0%E6%8D%AE%E5%BA%93/</id>
    <published>2024-10-15T09:17:26.000Z</published>
    <updated>2024-10-22T12:14:50.545Z</updated>
    
    <content type="html"><![CDATA[<h1 id="数据库系统概论"><a href="#数据库系统概论" class="headerlink" title="数据库系统概论"></a>数据库系统概论</h1><div class="story post-story"><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><hr><h3 id="四个基本概念"><a href="#四个基本概念" class="headerlink" title="四个基本概念"></a>四个基本概念</h3><ul><li>数据(data)：描述事物的<strong>符号</strong>记录称为数据</li><li>数据库(DB)：<strong>长期储存</strong>在计算机内的，<strong>有组织的</strong>、<strong>可共享</strong>的大量数据的集合。</li><li>数据库管理系统(DBMS)：计算机基础软件。具有<ul><li>数据定义功能(DDL)，定义数据对象的组成和结构</li><li>数据组织存储和管理</li><li>数据操纵功能（DML），实现数据的增删改查</li><li>数据库的事务管理和运行管理</li><li>数据库的建立和维护功能</li></ul></li></ul><ol start="4"><li>数据库系统（DBS）：由数据库（DB）、数据库管理系统（DBMS）、应用程序（APP）和数据库管理员（DBA）组成的存储、管理、处理和维护数据的系统。</li></ol><h3 id="数据库系统的特点"><a href="#数据库系统的特点" class="headerlink" title="数据库系统的特点"></a>数据库系统的特点</h3><ul><li>数据结构化</li><li>数据共享性高、冗余度低且易扩充</li><li>数据独立性高 <ul><li>物理独立性：应用程序与数据库中数据的物理存储相互独立。</li><li>逻辑独立性：应用程序与数据库的逻辑结构相互独立。</li></ul></li><li>数据由数据库管理系统统一管理和控制</li></ul></div><div class="story post-story"><h2 id="数据模型——数据库系统的核心和基础"><a href="#数据模型——数据库系统的核心和基础" class="headerlink" title="数据模型——数据库系统的核心和基础"></a>数据模型——数据库系统的<font color="pink">核心</font>和<font color="pink">基础</font></h2><hr><h3 id="两类数据模型"><a href="#两类数据模型" class="headerlink" title="两类数据模型"></a>两类数据模型</h3><ul><li>概念模型<br> 按用户的观点来对数据和信息建模</li><li>逻辑模型和物理模型<ul><li>逻辑模型：按计算机系统的观点对数据建模。包括层次模型、网状模型、关系模型、面向对象模型、对象关系数据类型、半结构化数据类型等</li><li>物理模型：数据在系统内部的表示方式和方法</li><li>逻辑模型到物理模型的转换，主要由<strong>数据库管理系统</strong>实现</li></ul></li></ul><h3 id="概念模型"><a href="#概念模型" class="headerlink" title="概念模型"></a>概念模型</h3><ol><li>基本概念<ul><li>实体：客观存在并可区分的事物</li><li>属性：实体具有的某一特性</li><li>码：唯一标志实体的属性</li><li>实体型：用实体名及其属性名集合来刻画和抽象同类实体。</li><li>联系： 实体之间的联系，通常指不同实体集之间的联系。</li></ul></li><li>一种表示方法：实体-联系方法，也称为E-R模型</li></ol><h3 id="数据模型的组成要素"><a href="#数据模型的组成要素" class="headerlink" title="数据模型的组成要素"></a>数据模型的组成要素</h3><ul><li>数据结构</li><li>数据操作</li><li>数据的完整性约束条件</li></ul><h3 id="关系模型"><a href="#关系模型" class="headerlink" title="关系模型"></a>关系模型</h3><ul><li>术语：<ul><li>关系：对应一张表</li><li>元组：表中的一行</li><li>属性：表中的一列</li><li>码：某个属性组，唯一确定一个元组</li><li>域：一组具有相同数据类型是的集合</li><li>关系模式：对关系的描述</li></ul></li><li>优点<ul><li>与格式化模型不同，建立在严格的数学概念基础上</li><li>数据独立性保密性更高</li><li>概念单一、结构简单、清晰</li><li>存取路径对用户透明</li></ul></li><li>缺点<ul><li>查询效率不如格式化模型数据</li></ul></li></ul></div><div class="story post-story"><h2 id="数据库系统的结构"><a href="#数据库系统的结构" class="headerlink" title="数据库系统的结构"></a>数据库系统的结构</h2><hr><h3 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h3><ul><li>模式是相对稳定的，实例是相对变动的</li></ul><h3 id="三级模式结构"><a href="#三级模式结构" class="headerlink" title="三级模式结构"></a>三级模式结构</h3><ol><li>模式，也称逻辑模式，是所有用户的公共数据视图，模式不涉及物理存储和硬件环境，与应用程序和开发环境无关。</li><li>外模式，也称子模式或用户模式，数据库用户的数据视图，<strong>外模式通常是模式的子集</strong>。</li><li>内模式，也称存储模式，是数据在数据库内部的组织方式</li></ol><h3 id="二级映象功能与数据独立性"><a href="#二级映象功能与数据独立性" class="headerlink" title="二级映象功能与数据独立性"></a>二级映象功能与数据独立性</h3><ul><li>数据独立性是指应用程序与数据库的数据结构之间相互独立<ul><li>在物理结构改变时，尽量不影响应用程序，称为物理数据独立性</li><li>在逻辑结构改变时，尽量不影响应用程序，称为逻辑数据独立性</li></ul></li></ul><ol><li>外模式&#x2F;模式映像<br> 模式改变时，可使外模式保持不变，保证逻辑独立性</li><li>模式&#x2F;内模式映像<br> 存储结构发生改变时，可使模式保持不变，保证物理独立性</li></ol><ul><li>数据库模式是数据库的<strong>中心与关键</strong>，应首先确定。</li></ul></div><div class="story post-story"><h2 id="关系数据库结构及定义"><a href="#关系数据库结构及定义" class="headerlink" title="关系数据库结构及定义"></a>关系数据库结构及定义</h2><hr><p>在数据库中存储的是<strong>数据以及数据之间的联系</strong>。</p><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><ul><li>域</li><li>笛卡尔积<ul><li>元组和分量</li><li>基数：一个域允许的不同取值的个数</li></ul></li><li>关系<ul><li>关系的度（单元关系，二元关系）</li><li>候选码（能唯一表示一个元组的属性集）——&gt;挑一个作为主码</li><li>主属性：候选码的诸属性<br>其余——非主属性或非码属性</li><li>全码：关系模式的所有属性是这个关系模式的候选码</li><li>三种类型：<ul><li>基本关系，又称基本表</li><li>查询表</li><li>视图表</li></ul></li><li>六条性质：<ul><li>行的顺序无所谓</li><li>列的顺序无所谓</li><li>列是同质的</li><li>不同列可出自同一域</li><li>任意两个元组候选码不同</li><li>分量必须取原子值（最基本的一条，满足即为第一范式）</li></ul></li></ul></li></ul><h3 id="关系模式"><a href="#关系模式" class="headerlink" title="关系模式"></a>关系模式</h3><ul><li>关系模式是<strong>静态</strong>的、<strong>稳定</strong>的，而关系是动态的</li></ul><h3 id="基本关系操作"><a href="#基本关系操作" class="headerlink" title="基本关系操作"></a>基本关系操作</h3><ul><li>查询操作<ul><li>选择</li><li>投影</li><li>并</li><li>差</li><li>笛卡尔积&#x2F;&#x2F;以上5种基本数据操作</li><li>连接</li><li>除</li><li>交</li></ul></li><li>插入、删除、修改操作</li></ul><h3 id="结构化查询语言SQL"><a href="#结构化查询语言SQL" class="headerlink" title="结构化查询语言SQL"></a>结构化查询语言SQL</h3><p>集</p><ul><li>查询</li><li>数据定义语言</li><li>数据操纵语言</li><li>数据控制语言<br>于一体的关系数据语言。</li></ul></div><div class="story post-story"><h2 id="关系的完整性"><a href="#关系的完整性" class="headerlink" title="关系的完整性"></a>关系的完整性</h2><hr><ol><li>实体完整性：若属性A是关系R的主属性，则A不能取空值。</li><li>参照完整性：若属性F是关系R的外码，它与基本关系S的主码相对应，则对于R上的每一个元组在F上的值应该或者取空值、或者取S中某个元组的主码值。</li><li>用户定义的完整性</li></ol><p>实体完整性和参照完整性是关系的两个不变性。</p></div><div class="story post-story"><h2 id="关系代数"><a href="#关系代数" class="headerlink" title="关系代数"></a>关系代数</h2><hr><h3 id="传统集合运算"><a href="#传统集合运算" class="headerlink" title="传统集合运算"></a>传统集合运算</h3><ul><li>并</li><li>差</li><li>交</li><li>笛卡尔积</li></ul><h3 id="关系运算"><a href="#关系运算" class="headerlink" title="关系运算"></a>关系运算</h3><p>象集：给定关系R（X,Z）,x在R中的象集为Zx，表示R中属性组X上的属性值为x的诸元组在Z上分量的集合，是<strong>属性组值</strong>的子集<br>关系运算的定义：</p><ul><li>选择</li><li>投影</li><li>连接<br>常用：<ul><li>等值连接</li><li>自然连接，一种特殊的等值连接，它要求两个关系中进行比较的分量必须是同名的属性组，并且在结果中把重复的属性列去掉。</li><li>外连接：保留悬浮元组<ul><li>左外连接：只保留左边关系的悬浮元组</li><li>右外连接：只保留右边关系的悬浮元组</li></ul></li></ul></li><li>除：若T为R除以S的结果，则T包含所有在R中而不在S中的属性及其值，且T与S的所有组合均在R中。</li></ul></div><div class="story post-story"><h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><hr><h3 id="SQL的特点"><a href="#SQL的特点" class="headerlink" title="SQL的特点"></a>SQL的特点</h3><ol><li>综合统一</li><li>高度<strong>非过程化</strong></li><li><strong>面向集合</strong>的操作方式</li><li>以同一种语法结构提供<strong>多种使用方式</strong>：交互式和嵌入式</li><li>语言简洁，易学易用</li></ol><h3 id="SQL的基本概念"><a href="#SQL的基本概念" class="headerlink" title="SQL的基本概念"></a>SQL的基本概念</h3><ul><li>外模式包括视图和若干基本表，模式包括若干基本表，内模式包括若干存储文件。</li><li>在关系数据库管理系统中一个关系就对应一个基本表。一个或多个表对应一个存储文件，一个表可以带若干索引。索引也放在存储文件当中。</li></ul><h3 id="数据定义"><a href="#数据定义" class="headerlink" title="数据定义"></a>数据定义</h3><h4 id="模式的定义与删除"><a href="#模式的定义与删除" class="headerlink" title="模式的定义与删除"></a>模式的定义与删除</h4><ul><li>建立模式<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> SCHEMA <span class="operator">&lt;</span>模式名<span class="operator">&gt;</span> <span class="keyword">AUTHORIZATION</span> <span class="operator">&lt;</span>用户名<span class="operator">&gt;</span></span><br><span class="line">[<span class="operator">&lt;</span>表定义子句<span class="operator">&gt;</span><span class="operator">|</span><span class="operator">&lt;</span>视图定义子句<span class="operator">&gt;</span><span class="operator">|</span><span class="operator">&lt;</span>授权定义子句<span class="operator">&gt;</span>];</span><br></pre></td></tr></table></figure></li><li>删除模式<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> SCHEMA <span class="operator">&lt;</span>CASCADE<span class="operator">|</span>RESRICT<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li></ul><h4 id="基本表的定义、删除与修改"><a href="#基本表的定义、删除与修改" class="headerlink" title="基本表的定义、删除与修改"></a>基本表的定义、删除与修改</h4><ul><li>创建表<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> (</span><br><span class="line"><span class="operator">&lt;</span>列名<span class="operator">&gt;</span><span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>[<span class="operator">&lt;</span>列级完整性约束条件<span class="operator">&gt;</span>]</span><br><span class="line">[,<span class="operator">&lt;</span>列名<span class="operator">&gt;</span><span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>[<span class="operator">&lt;</span>列级完整性约束条件<span class="operator">&gt;</span>]]</span><br><span class="line">...</span><br><span class="line">[,<span class="operator">&lt;</span>表级完整性约束条件<span class="operator">&gt;</span>]</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li>模式与表<ol><li>在表中给出模式名，如CREATE TABLE “&lt;模式名&gt;”.&lt;表名&gt;</li><li>创建模式语句同时创建表</li><li>设置所属模式，如下<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> search_path; #显示当前搜索路径</span><br><span class="line"><span class="keyword">SET</span> search_path <span class="keyword">TO</span> &quot;&lt;模式名&gt;&quot;,PUBLIC; #设置搜索路径</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>();</span><br></pre></td></tr></table></figure></li></ol></li><li>修改基本表<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">ADD</span> [<span class="keyword">COLUMN</span>] <span class="operator">&lt;</span>新列名<span class="operator">&gt;</span><span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> [完整性约束]]</span><br><span class="line">[<span class="keyword">ADD</span> <span class="operator">&lt;</span>表级完整性约束<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">DROP</span>[<span class="keyword">COLUMN</span>]<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>[CASCADE<span class="operator">|</span>RESCTICT]]</span><br><span class="line">[<span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span><span class="operator">&lt;</span>完整性约束名<span class="operator">&gt;</span>[CASCADE<span class="operator">|</span>RESTRICT]]</span><br><span class="line">[<span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span><span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>];</span><br></pre></td></tr></table></figure></li><li>删除表<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> [RESTRICT<span class="operator">|</span>CASCADE];</span><br></pre></td></tr></table></figure></li></ul><h4 id="索引的建立与删除"><a href="#索引的建立与删除" class="headerlink" title="索引的建立与删除"></a>索引的建立与删除</h4><ul><li>建立索引<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">UNIQUE</span>] [CLUSTER] INDEX <span class="operator">&lt;</span>索引名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>(<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>[<span class="operator">&lt;</span><span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span><span class="operator">&gt;</span>][,<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>[<span class="operator">&lt;</span><span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span><span class="operator">&gt;</span>]]...);</span><br></pre></td></tr></table></figure></li><li>修改索引<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> INDEX <span class="operator">&lt;</span>旧索引名<span class="operator">&gt;</span> RENAME <span class="keyword">TO</span> <span class="operator">&lt;</span>新索引名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li><li>删除索引<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> INDEX <span class="operator">&lt;</span>索引名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li></ul><h3 id="数据操纵"><a href="#数据操纵" class="headerlink" title="数据操纵"></a>数据操纵</h3><h4 id="数据查询"><a href="#数据查询" class="headerlink" title="数据查询"></a>数据查询</h4><ul><li><p>SELECT语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span><span class="operator">|</span><span class="keyword">DISTINCT</span>]<span class="operator">&lt;</span>目标列表达式<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>目标列表达式<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>表名或视图名<span class="operator">&gt;</span> [,<span class="operator">&lt;</span>表名或视图名<span class="operator">&gt;</span>...]<span class="operator">|</span>(<span class="keyword">SELECT</span>语句)[<span class="keyword">AS</span>](别名)</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>列名<span class="number">1</span><span class="operator">&gt;</span> [<span class="keyword">HAVING</span> <span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span>]]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>列名<span class="number">2</span><span class="operator">&gt;</span> [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>]];</span><br></pre></td></tr></table></figure><ul><li>tips</li></ul><ol><li>SELECT * —-查询全部列</li><li>常用查询条件<ul><li>&#x3D;,&gt;,&lt;,&gt;&#x3D;,&lt;&#x3D;,&lt;&gt;,!&gt;,!&lt;;NOT+ 上述比较符</li><li>[NOT] BETWEEN AND</li><li>[NOT] IN</li><li>[NOT] LIKE</li><li><font color="blue">IS </font>[NOT] NULL</li><li>AND,OR,NOT</li></ul></li><li>聚集函数<ul><li>COUNT(*)    ！！！不忽略空值NULL</li><li>COUNT([DISTINCT|ALL]&lt;列名&gt;)</li><li>SUM([DISTINCT|ALL]&lt;列名&gt;)</li><li>AVG([DISTINCT|ALL]&lt;列名&gt;)</li><li>MAX([DISTINCT|ALL]&lt;列名&gt;)</li><li>MIN([DISTINCT|ALL]&lt;列名&gt;)</li></ul></li><li>GROUP BY子句 + HAVING子句</li></ol></li><li><p>连接查询</p><ol><li>等值与非等值连接查询</li><li>自身连接（要给表取两个别名）</li><li>外连接</li><li>多表连接</li></ol></li><li><p>嵌套查询<br>  相关定义：</p><ol><li>一个SELECT-FROM-WHERE语句称为一个查询块，将一个查询块嵌套在另一个查询块的WHERE子句或HAVING短语的条件中的查询称为嵌套查询</li><li>外层查询又称父查询，内层查询又称子查询</li><li>子查询不能使用ORDER BY语句</li><li>不相关子查询：子查询的查询条件不依赖于父查询</li><li>相关子查询：子查询的查询条件依赖于父查询，不能一次性将子查询的结果求解出来，而是反复求值</li><li>嵌套查询中维持ANY&#x2F;SOME表示任一，ALL表示所有（任意）</li><li>带有EXISTS谓词的子查询，产生ture或false。（！！！所有带有IN谓词，、比较运算符、ANY和ALL谓词的子查询都能用带EXISTS的子查询等价替代）</li><li>空值进行四则运算还是空值</li></ol></li><li><p>集合查询–各查询结果列数必须相同，对应数据项的数据类型也必须相同</p><ul><li>UNION–自动去掉重复元组，如要保留则用UNION ALL操作符。</li><li>INTERSECT</li><li>EXCEPT</li></ul></li><li><p>派生表查询：子查询嵌套于FROM子句中。（！！！AS关键字可以省略，但必须为派生关系指定别名）</p></li></ul><h4 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>[(<span class="operator">&lt;</span>属性列<span class="number">1</span><span class="operator">&gt;</span>[,<span class="operator">&lt;</span>属性列<span class="number">2</span><span class="operator">&gt;</span>]...)]</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="operator">&lt;</span>常量<span class="number">1</span><span class="operator">&gt;</span>[,<span class="operator">&lt;</span>常量<span class="number">2</span><span class="operator">&gt;</span>]...);</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>[(<span class="operator">&lt;</span>属性列<span class="number">1</span><span class="operator">&gt;</span>[,<span class="operator">&lt;</span>属性列<span class="number">2</span><span class="operator">&gt;</span>]...)]</span><br><span class="line">子查询;</span><br></pre></td></tr></table></figure><h4 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SET</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;=</span><span class="operator">&lt;</span>表达式<span class="operator">&gt;</span> [,<span class="operator">&lt;</span>列名<span class="operator">&gt;=</span><span class="operator">&lt;</span>表达式<span class="operator">&gt;</span>]...</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>条件<span class="operator">&gt;</span>];</span><br></pre></td></tr></table></figure><h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>条件<span class="operator">&gt;</span>];</span><br></pre></td></tr></table></figure><h3 id="视图——只存放定义，不存放数据"><a href="#视图——只存放定义，不存放数据" class="headerlink" title="视图——只存放定义，不存放数据"></a>视图——只存放定义，不存放数据</h3><ul><li>建立视图<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> <span class="operator">&lt;</span>视图名<span class="operator">&gt;</span> [<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>]...]</span><br><span class="line"><span class="keyword">AS</span> <span class="operator">&lt;</span>子查询<span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">CHECK</span> OPTION];</span><br></pre></td></tr></table></figure>创建视图时并不执行SELECT语句，对视图查询时，才将数据查出。</li><li>删除视图<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> <span class="operator">&lt;</span>视图名<span class="operator">&gt;</span> CASCADE;</span><br></pre></td></tr></table></figure></li><li>视图的作用<ol><li>视图能够简化用户操作</li><li>视图使用户能以多角度看待同一数据</li><li>视图对重构数据库提供了一定程度的逻辑独立性</li><li>视图能够对机密数据提供安全保护</li><li>更加清晰地表达查询</li></ol></li></ul></div><div class="story post-story"><h2 id="数据库安全"><a href="#数据库安全" class="headerlink" title="数据库安全"></a>数据库安全</h2><h3 id="授予与收回权限（控制类指令）–实现自主存取控制"><a href="#授予与收回权限（控制类指令）–实现自主存取控制" class="headerlink" title="授予与收回权限（控制类指令）–实现自主存取控制"></a>授予与收回权限（控制类指令）–实现自主存取控制</h3><ul><li>用户权限由两要素组成：数据库对象和操作类型</li><li>GRANT：授予用户对列的操作权限<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="operator">&lt;</span>权限<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>权限<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>对象类型<span class="operator">&gt;</span><span class="operator">&lt;</span>对象名<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>对象类型<span class="operator">&gt;</span><span class="operator">&lt;</span>对象名<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">TO</span> <span class="operator">&lt;</span>用户<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>用户<span class="operator">&gt;</span>]...</span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION];</span><br></pre></td></tr></table></figure></li><li>REVOKE<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="operator">&lt;</span>权限<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>权限<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>对象类型<span class="operator">&gt;</span><span class="operator">&lt;</span>对象名<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>对象类型<span class="operator">&gt;</span><span class="operator">&lt;</span>对象名<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>用户<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>用户<span class="operator">&gt;</span>]...</span><br><span class="line">[CASCADE<span class="operator">|</span>RESTRINCT];</span><br></pre></td></tr></table></figure></li><li>创建数据库模式的权限<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="operator">&lt;</span>username<span class="operator">&gt;</span> [<span class="keyword">WITH</span>][DBA<span class="operator">|</span>RESOURCE<span class="operator">|</span><span class="keyword">CONNECT</span>];</span><br></pre></td></tr></table></figure></li></ul><h3 id="数据库角色"><a href="#数据库角色" class="headerlink" title="数据库角色"></a>数据库角色</h3><ul><li>数据库角色是被命名的一组与数据库操作相关的权限，角色是权限的集合。</li><li>创建角色<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> ROLE <span class="operator">&lt;</span>角色名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li><li>给角色授权<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="operator">&lt;</span>权限<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>权限<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>对象类型<span class="operator">&gt;</span> <span class="operator">&lt;</span>对象名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">TO</span> <span class="operator">&lt;</span>角色<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>角色<span class="operator">&gt;</span>]...;</span><br></pre></td></tr></table></figure></li><li>将一个角色授权给其他角色或用户<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="operator">&lt;</span>角色<span class="number">1</span><span class="operator">&gt;</span>[,<span class="operator">&lt;</span>角色<span class="number">2</span><span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">TO</span> <span class="operator">&lt;</span>角色<span class="number">3</span><span class="operator">&gt;</span>[,<span class="operator">&lt;</span>用户<span class="number">1</span><span class="operator">&gt;</span>]...</span><br><span class="line">[<span class="keyword">WITH</span> ADMIN OPTION];</span><br></pre></td></tr></table></figure></li><li>角色权限的收回<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="operator">&lt;</span>权限<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>权限<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>对象类型<span class="operator">&gt;</span> <span class="operator">&lt;</span>对象名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>角色<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>角色<span class="operator">&gt;</span>]...</span><br></pre></td></tr></table></figure></li></ul><h3 id="强制存取控制"><a href="#强制存取控制" class="headerlink" title="强制存取控制"></a>强制存取控制</h3><p>敏感度标记：TS&gt;&#x3D;S&gt;&#x3D;C&gt;&#x3D;P<br>规则：</p><ul><li>仅当主体的许可证级别大于或者等于客体的密级时，改主体才能读取相应的客体。</li><li>仅当主体的许可证级别小于或者等于客体的密级时，改主体才能写相应的客体。</li></ul><h3 id="审计功能–一种事后检查的安全机制"><a href="#审计功能–一种事后检查的安全机制" class="headerlink" title="审计功能–一种事后检查的安全机制"></a>审计功能–一种事后检查的安全机制</h3><ul><li>记录一切<strong>成功</strong>和<strong>不成功</strong>的操作<br>-AUDIT&#x2F;NOAUDIT<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">NO</span>]AUDIT <span class="operator">&lt;</span>操作名<span class="operator">&gt;</span>[,<span class="operator">&lt;</span>操作名<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li></ul><h3 id="数据加密"><a href="#数据加密" class="headerlink" title="数据加密"></a>数据加密</h3><ol><li>存储加密</li><li>传输加密</li></ol><h3 id="其他安全性保护"><a href="#其他安全性保护" class="headerlink" title="其他安全性保护"></a>其他安全性保护</h3><ul><li>推理控制</li><li>隐蔽信道</li><li>数据隐私保护</li></ul></div><div class="story post-story"><h2 id="数据库完整性——数据库的正确性和相容性"><a href="#数据库完整性——数据库的正确性和相容性" class="headerlink" title="数据库完整性——数据库的正确性和相容性"></a>数据库完整性——数据库的正确性和相容性</h2><hr><ol><li>实体完整性<ol><li>检查主码值是否唯一，如果不唯一则拒绝插入或修改</li><li>检查主码的各个属性是否为空，只要有一个空值就拒绝插入或修改。</li></ol></li><li>参照完整性</li></ol><table><thead><tr><th>（破坏参照完整性的）操作</th><th>违约处理</th></tr></thead><tbody><tr><td>参照表插入元组</td><td>拒绝</td></tr><tr><td>参照表修改外码值</td><td>拒绝</td></tr><tr><td>被参照表删除元组</td><td>拒绝&#x2F;级联删除&#x2F;设置为空值</td></tr><tr><td>被参照表修改主码值</td><td>拒绝&#x2F;级联删除&#x2F;设置为空值</td></tr><tr><td>3. 用户自定义的完整性</td><td></td></tr></tbody></table><pre><code>1. 属性上的约束条件——不满足则拒绝执行    - NOT NULL    - UNIQUE    - CHECK短语2. 元组上的约束条件——不满足则拒绝执行</code></pre><h3 id="完整性命令约束命名子句"><a href="#完整性命令约束命名子句" class="headerlink" title="完整性命令约束命名子句"></a>完整性命令约束命名子句</h3><ul><li>完整性约束命名子句(新建表时)<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>完整性约束条件名<span class="operator">&gt;</span> <span class="operator">&lt;</span>完整性约束条件<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li><li>修改表中的完整性限制</li></ul><p>删除完整性约束</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>完整性约束条件名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><p>增加完整性约束</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>完整性约束条件名<span class="operator">&gt;</span> <span class="operator">&lt;</span>完整性约束条件<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><h3 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h3><ul><li>通过声明断言来指定更具一般性的约束。可以定义涉及多个表或聚集操作的比较复杂的完整性约束，任何使断言不为真值的操作都会被拒绝执行。</li><li>创建断言语句<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> ASSERTION <span class="operator">&lt;</span>断言名<span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="keyword">CHECK</span> 子句<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li><li>删除断言语句<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> ASSERTION <span class="operator">&lt;</span>断言名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li></ul><h3 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h3><ul><li>定义触发器<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> <span class="operator">&lt;</span>触发器名<span class="operator">&gt;</span></span><br><span class="line">&#123;BEFORE<span class="operator">|</span>AFTER&#125; <span class="operator">&lt;</span>触发事件<span class="operator">&gt;</span> <span class="keyword">ON</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">REFERENCES</span> <span class="keyword">NEW</span><span class="operator">|</span><span class="keyword">OLD</span> <span class="type">ROW</span> <span class="keyword">AS</span> <span class="operator">&lt;</span>变量<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> &#123;<span class="type">ROW</span><span class="operator">|</span>STATEMENT&#125;</span><br><span class="line">[<span class="keyword">WHEN</span> <span class="operator">&lt;</span>触发条件<span class="operator">&gt;</span>] <span class="operator">&lt;</span>触发动作体<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li><li>激活触发器，<br>  多个触发器时：<ol><li>执行该表上的BEFORE触发器</li><li>激活触发器的SQL语句</li><li>执行该表上的AFTER触发器</li></ol></li><li>删除触发器<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> <span class="operator">&lt;</span>触发器名<span class="operator">&gt;</span> <span class="keyword">ON</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li></ul></div><div class="story post-story"><h2 id="关系数据理论"><a href="#关系数据理论" class="headerlink" title="关系数据理论"></a>关系数据理论</h2><hr><h3 id="相关术语"><a href="#相关术语" class="headerlink" title="相关术语"></a>相关术语</h3><ul><li>函数依赖：R(U)是属性集U上的关系模式，X，Y是U的子集。对于R的任意一个可能关系r，r中不可能存在两个元组在X上的属性值相等，在Y上的属性值不等，称Y函数依赖于X，记作X-&gt;Y。<ul><li>若Y$\subseteqq$X，为平凡的函数依赖。</li></ul></li><li>部分函数依赖：X-&gt;Y，若对于X的每一个真子集X’，X’-&#x2F;-&gt;Y，则称Y对X完全函数依赖，记作X$\frac{F}{}$&gt;Y。<strong>否则</strong>称为部分函数依赖。</li><li>传递函数依赖：X-&gt;Y,<strong>Y-&#x2F;-&gt;X</strong>，Y-&gt;Z(Z$\subsetneqq$Y，Y$\subsetneqq$X)，称Z传递函数依赖于X，记作X$\frac{传递}{}$&gt;Z。</li><li>超码：K为R&lt;U,F&gt;中的属性或属性组合，K-&gt;U，称K为超码。</li><li>候选码：K$\frac{F}{}$&gt;U,称K为候选码。(特殊的超码)</li><li>主码：选定的一个候选码。</li><li>全码：整个属性组是码。</li><li>主属性：包含在任何一个<strong>候选码</strong>中的属性。</li><li>非主属性&#x2F;非码属性：不包含在任何候选码中的属性。</li><li>多值依赖：X，Y，Z是U的子集，且Z&#x3D;U-X-Y，若给定一对(x,z)值，有一组Y值，这组值仅仅决定于x值而与z无关。称Y多值依赖于X，记作X-&gt;-&gt;Y。</li><li>闭包：$X^{+}<em>{F}$&#x3D;{A|X-&gt;A能由F导出}，$X^{+}</em>{F}$称为属性集X关于函数依赖集F的闭包。</li><li>最小依赖集&#x2F;最小覆盖：<ol><li>任一函数依赖右部仅含一个属性。</li><li>函数依赖个数精简到最少</li><li>函数依赖的左部精简到最少</li></ol></li></ul><h3 id="范式"><a href="#范式" class="headerlink" title="范式"></a>范式</h3><ul><li>第一范式（1NF）：每一个分量都是不可分的数据项</li><li>第二范式（2NF）：1NF&amp;<strong>不</strong>存在<strong>非主属性</strong>对任一<strong>候选码</strong>的<strong>部分函数依赖</strong>。</li><li>第三范式（3NF）：2NF&amp;<strong>不</strong>存在<strong>非主属性</strong>对任一<strong>候选码</strong>的<strong>传递函数依赖</strong>。<ul><li>所有属性都是主属性的模式最高一定可以达到</li></ul></li><li>BC范式（BCNF）:每一个决定因素都包含码，消除了插入、删除的异常。满足：<ul><li>3NF</li><li>所有主属性对于任一不包含它的码也是完全函数依赖</li><li>没有任何属性完全函数依赖于非码的任何一组属性。</li><li>(全码组成的关系模式最高一定可以到达||3NF+唯一候选码||二元模式最高一定可以到达)</li></ul></li><li>4NF：属性之间不允许有<strong>非平凡且非函数依赖</strong>的多值依赖</li><li>判断范式<ol><li>求候选码<ol><li>如果有属性只在函数依赖集的左边出现，则该属性一定包含在候选码中（继续求它的闭包，如果他的闭包是属性全集，则为候选码，如果不是，则需要结合其他属性求闭包，继而判断是否是候选码）</li><li>只在函数依赖集右边出现的属性，一定不属于候选码</li><li>对于左右都出现过的属性：<br>（1）先结合只在左边出现的属性求闭包，看看是否包括所有属性，如果他的闭包是属性全集，则为候选码；<br>（2）如果没有包括所有属性，就结合其他左右都出现的求闭包，看看是否包括所有属性，如果他的闭包是属性全集，则为候选码</li><li>如果有属性不在函数依赖集中出现（外部属性），那么一定包含在候选码中（继续求它的闭包，如果他的闭包是属性全集，则为候选码，如果不是，则需要结合其他属性求闭包，继而判断是否是候选码）</li></ol></li><li>分主属性、非主属性</li><li>判断范式。</li></ol></li></ul><h3 id="规范化"><a href="#规范化" class="headerlink" title="规范化"></a>规范化</h3><p>1NF$\frac{消除非主属性对码的部分函数依赖}{}$&gt;2NF$\frac{消除非主属性对码的传递函数依赖}{}$&gt;3NF$\frac{消除主属性对码的部分和传递函数依赖}{}$&gt;BCNF$\frac{消除非平凡且非函数依赖的多值依赖}{}$&gt;4NF</p><h3 id="函数依赖的公理系统"><a href="#函数依赖的公理系统" class="headerlink" title="函数依赖的公理系统"></a>函数依赖的公理系统</h3><ul><li>推理规则——Armstrong公理系统<ul><li>自反率：<br>若Y$\subseteqq$X$\subseteqq$U，则X——&gt;Y被F所蕴含</li><li>增广率：<br>若X——&gt;Y被F所蕴含，且Z$\subseteqq$U，则XZ——&gt;YZ被F所蕴含</li><li>传递率：<br>若X——&gt;Y及Y——&gt;Z被F所蕴含，则X——&gt;Z被F所蕴含</li></ul></li></ul><h3 id="模式的分解"><a href="#模式的分解" class="headerlink" title="模式的分解"></a>模式的分解</h3><h4 id="无损连接性"><a href="#无损连接性" class="headerlink" title="无损连接性"></a>无损连接性</h4><ul><li>保证不丢失信息</li><li>判断无损连接</li></ul><h4 id="保持函数依赖性"><a href="#保持函数依赖性" class="headerlink" title="保持函数依赖性"></a>保持函数依赖性</h4><ul><li>减轻或解决各种异常情况</li><li>判断保持函数依赖：<ol><li>求投影F’&#x3D;F1∪F2∪…Fn是否包含全部函数依赖。</li><li>对于缺少的函数依赖，求左侧属性在判断F’中的闭包是否蕴含右侧。（$F’^{+}$&#x3D;&#x3D;$F^{+}$?）</li></ol></li></ul><h3 id="模式分解算法"><a href="#模式分解算法" class="headerlink" title="模式分解算法"></a>模式分解算法</h3><ul><li>保持函数依赖，最多可以达到3NF。</li><li>保持无损连接性，最多可以达到4NF。</li><li>保持函数依赖和无损连接性，最多可以达到3NF</li></ul></div><div class="story post-story"><h2 id="数据库恢复技术"><a href="#数据库恢复技术" class="headerlink" title="数据库恢复技术"></a>数据库恢复技术</h2><hr><h3 id="事务的基本概念"><a href="#事务的基本概念" class="headerlink" title="事务的基本概念"></a>事务的基本概念</h3><ul><li>事务的定义：用户定义的一个数据库操作序列，这些操作要么全做，要么全不做，是一个不可分割的工作单位。</li><li>事务通常以BEGIN TRANSACTION开始，以COMMIT（提交）或ROLLBACK（回滚）结束。</li><li>事务的ACID特性：<ul><li>原子性：事务是数据库的逻辑工作单位，事务中所包括的诸操作要么都做，要么都不做。</li><li>一致性：事务执行的结果必须是使数据库从一个一致性状态变到另一个一致性状态。</li><li>隔离性：对于并发执行而言，一个事务的执行不能被其他事务干扰。</li><li>持久性：也称永久性，一个事务一旦提交，它对数据库中数据的改变就应该是永久的。</li></ul></li></ul><h3 id="故障的种类"><a href="#故障的种类" class="headerlink" title="故障的种类"></a>故障的种类</h3><ul><li>事务内部的故障：非预期的，不能由应用程序处理的。<ul><li>常见原因：<ol><li>运算溢出</li><li>并发进程发生死锁而被选中撤销该事务</li><li>违反了某些完整性限制</li></ol></li><li>恢复操作：事务撤销（UNDO）：反向扫描日志文件，查找事务的更新操作执行逆操作</li></ul></li><li>系统故障：称为软故障，指造成系统停止运转的任何事件，使得系统要重新启动<ul><li>常见原因  <ol><li>特定类型的硬件错误</li><li>操作系统故障</li><li>DBMS代码错误</li><li>系统断电</li></ol></li><li>恢复策略<ol start="5"><li>正向扫描日志文件</li><li>发生系统故障时，事务未提交：强行撤销所有未完成的事务</li><li>发生系统故障时，事务已提交，但缓冲区的信息未完全写回到磁盘上：重做所有已提交的事务。</li></ol></li></ul></li><li>介质故障：称为硬故障，指外存故障。<ul><li>常见原因<ol><li>磁盘损坏</li><li>磁头碰撞</li><li>操作系统的某种潜在错误</li><li>瞬时强磁场干扰</li></ol></li><li>恢复策略<ol><li>装入数据库发生介质故障前某个时刻的数据副本</li><li>重做此时起的所有成功事务，将这些事务已提交的结果重新记入数据库。</li></ol></li><li>使用检查点改善恢复效率</li><li>数据库镜像</li></ul></li><li>计算机病毒<ul><li>人为故障或破坏的计算机程序，可以繁殖和传播，等同于介质故障。</li></ul></li></ul><h3 id="恢复的实现技术"><a href="#恢复的实现技术" class="headerlink" title="恢复的实现技术"></a>恢复的实现技术</h3><ul><li>基本原理：冗余——利用存储在系统其他地方的冗余数据来重建数据库中已被破坏或不正确的那部分数据。</li><li>如何建立冗余数据？数据转储和登记日志文件</li></ul><h4 id="数据转储"><a href="#数据转储" class="headerlink" title="数据转储"></a>数据转储</h4><ul><li>转储方式分类<ul><li>海量转储</li><li>增量转储</li></ul></li><li>转储状态分类<ul><li>动态转储</li><li>静态转储</li></ul></li></ul><h4 id="登记日志文件——用来记录事务对数据库的更新操作的文件"><a href="#登记日志文件——用来记录事务对数据库的更新操作的文件" class="headerlink" title="登记日志文件——用来记录事务对数据库的更新操作的文件"></a>登记日志文件——用来记录事务对数据库的更新操作的文件</h4><ul><li>登记内容（每个登记内容作为日志文件的一个日志记录）：<ul><li>各个事务开始标记</li><li>各个事务结束登记</li><li>各个事务的所有更新操作</li></ul></li><li>日志记录内容<ul><li>事务标识</li><li>操作类型</li><li>操作对象</li><li>更新前数据的旧值</li><li>更新后数据的新值</li></ul></li><li>作用：<ul><li>进行事务故障和系统故障恢复</li><li>协助后备副本对介质故障进行恢复</li></ul></li><li>登记日志文件时必须遵循两条原则：<ul><li>登记的次序严格按并发事务执行的时间次序。</li><li>必须先写日志文件，后写数据库。</li></ul></li></ul></div><div class="story post-story"><h2 id="并发控制"><a href="#并发控制" class="headerlink" title="并发控制"></a>并发控制</h2><hr><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><ul><li>事务是并发控制的基本单位</li><li>并发操作带来的数据不一致性<ul><li>丢失修改</li><li>读“脏”数据</li><li>不可重复读&#x2F;幻影现象</li></ul></li><li>主要方法<ul><li>封锁</li><li>时间戳</li><li>乐观控制法</li><li>多版本控制</li></ul></li></ul><h3 id="封锁"><a href="#封锁" class="headerlink" title="封锁"></a>封锁</h3><ul><li>排他锁&#x2F;写锁（X锁）</li><li>共享锁（S锁）</li><li>封锁协议：<ul><li>一级封锁协议：修改数据之前必须加X锁，直到事务结束才释放——解决丢失修改</li><li>二级封锁协议：读数据之前必须加S锁，读完后释放——解决读脏数据</li><li>三级封锁协议：读数据之前必须加S锁，直到事务结束才释放——解决不可重复读</li></ul></li></ul><h3 id="活锁和死锁"><a href="#活锁和死锁" class="headerlink" title="活锁和死锁"></a>活锁和死锁</h3><ul><li><p>当两个（或多个）并发的事务分别等待对方释放封锁的资源，而使事务处于长期等待状态的现象称为死锁。</p></li><li><p>解决活锁的方法：先来先服务策略</p></li><li><p>解决死锁的两种方法：</p><ul><li>预防：<ul><li>一次封锁法:为了完成一个事务，一次性封锁所需要的全部表</li><li>顺序封锁法:所有的事务约定都按相同的顺序来封锁表</li></ul></li><li>诊断与解除<ul><li>超时法</li><li>事务等待图法</li></ul></li></ul></li></ul><h3 id="并发调度的可串行性——并发事务正确调度的准则"><a href="#并发调度的可串行性——并发事务正确调度的准则" class="headerlink" title="并发调度的可串行性——并发事务正确调度的准则"></a>并发调度的可串行性——并发事务正确调度的准则</h3><ul><li>冲突可串行化是可串行化的充分条件</li></ul><h3 id="两段锁协议"><a href="#两段锁协议" class="headerlink" title="两段锁协议"></a>两段锁协议</h3><ul><li>事务分为两个阶段<ol><li>扩展阶段，获得封锁</li><li>收缩阶段，释放封锁</li></ol></li><li>事务遵守两段锁协议是可串行化的充分条件</li></ul><h3 id="封锁的粒度"><a href="#封锁的粒度" class="headerlink" title="封锁的粒度"></a>封锁的粒度</h3><ul><li><p>封锁对象的大小称为<strong>封锁粒度</strong>，封锁对象可以是<strong>逻辑对象</strong>，也可以是<strong>物理对象</strong></p></li><li><p>封锁粒度越大、数据库所能封锁的数据单元就越少，并发度就越小，系统开销越小；反之，封锁粒度越小、数据库所能封锁的数据单元就越多，并发度就越大，系统开销越大</p></li><li><p>多粒度封锁</p><ul><li>显示封锁：应事务要求直接加到数据对象上的锁</li><li>隐式封锁：由于上级对象加锁而导致该数据对象加上了锁</li></ul></li></ul></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;数据库系统概论&quot;&gt;&lt;a href=&quot;#数据库系统概论&quot; class=&quot;headerlink&quot; title=&quot;数据库系统概论&quot;&gt;&lt;/a&gt;数据库系统概论&lt;/h1&gt;&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="数据库" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>node.js</title>
    <link href="http://example.com/2024/10/12/node-js/"/>
    <id>http://example.com/2024/10/12/node-js/</id>
    <published>2024-10-12T13:31:48.000Z</published>
    <updated>2025-03-03T13:26:46.344Z</updated>
    
    <content type="html"><![CDATA[<h1 id="fs文件系统"><a href="#fs文件系统" class="headerlink" title="fs文件系统"></a>fs文件系统</h1><div class="story post-story"><h2 id="读取文件内容"><a href="#读取文件内容" class="headerlink" title="读取文件内容"></a>读取文件内容</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步读取</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;input.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">    <span class="comment">//如果读取成功，则err的值为null</span></span><br><span class="line">    <span class="comment">//如果读取失败，则err的值为错误对象，dataStr的值为undefined</span></span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;异步读取: &quot;</span> + data.<span class="title function_">toString</span>());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步读取</span></span><br><span class="line"><span class="keyword">var</span> data = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;input.txt&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;同步读取: &quot;</span> + data.<span class="title function_">toString</span>());</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;程序执行完毕。&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//执行结果</span></span><br><span class="line">同步读取: 文件读取实例</span><br><span class="line"></span><br><span class="line">程序执行完毕。</span><br><span class="line">异步读取: 文件读取实例</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="写入文件内容"><a href="#写入文件内容" class="headerlink" title="写入文件内容"></a>写入文件内容</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&#x27;input.txt&#x27;</span>, <span class="string">&#x27;我是通 过fs.writeFile 写入文件的内容&#x27;</span>,  <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="处理路径问题"><a href="#处理路径问题" class="headerlink" title="处理路径问题"></a>处理路径问题</h2><p>__dirname表示当前文件所处目录</p><h3 id="path路径模块"><a href="#path路径模块" class="headerlink" title="path路径模块"></a>path路径模块</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>)</span><br></pre></td></tr></table></figure><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>path.join([path1][, path2][, …])</td><td>用于连接路径。</td></tr><tr><td>path.basename()</td><td>获取路径中的文件名</td></tr><tr><td>path.extname(p)</td><td>获取文件的扩展名</td></tr><tr><td>path.dirname(p)</td><td>返回路径中代表文件夹的部分</td></tr><tr><td>path.resolve([from …], to)</td><td>将 to 参数解析为绝对路径</td></tr><tr><td>path.relative(from, to)</td><td>xxxxxxxxxx import requestInstance from ‘.&#x2F;http’​export { requestInstance as http }typescript</td></tr></tbody></table><h1 id="http"><a href="#http" class="headerlink" title="http"></a>http</h1></div><div class="story post-story"><h2 id="创建服务器"><a href="#创建服务器" class="headerlink" title="创建服务器"></a>创建服务器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>()</span><br><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Someone visit our web server.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器启动了，运行在http://127.0.0.1:8080&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><table><thead><tr><th>req请求对象属性</th><th>描述</th></tr></thead><tbody><tr><td>req.url</td><td>客户端请求的url地址</td></tr><tr><td>req.method</td><td>客户端请求方式</td></tr><tr><td>req.session</td><td>访问和使用session对象，需要配置express-session中间件</td></tr><tr><td>req.session.destroy()</td><td>清空session对象</td></tr></tbody></table><table><thead><tr><th>res响应对象属性</th><th>描述</th></tr></thead><tbody><tr><td>res.end()</td><td>向客户端响应内容</td></tr><tr><td>res.writeHead(200, { “Content-Type”: “text&#x2F;html; charset&#x3D;utf-8” })</td><td>写入响应头</td></tr><tr><td>res.setHeader(“Content-Type”,”text&#x2F;html; charset&#x3D;utf-8”)</td><td>设置响应头的内容类型，解决中文乱码</td></tr></tbody></table><h1 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h1><h3 id="模块作用域"><a href="#模块作用域" class="headerlink" title="模块作用域"></a>模块作用域</h3><p>自定义模块中定义的方法、变量等成员，只能在当前模块内被访问，这种模块级别的访问限制，叫做模块作用域。</p><h3 id="module对象"><a href="#module对象" class="headerlink" title="module对象"></a>module对象</h3><p>在每一个.js自定义模块中都有一个module对象，它里面存储了和当前模块有关的信息</p><ul><li>module.exports可以将模块内的成员共享出去，供外界使用。外界用require()方法导入自定义模块时，得到的就是module.exports所指向的对象（也可写成exports）</li></ul><h1 id="npm命令"><a href="#npm命令" class="headerlink" title="npm命令"></a>npm命令</h1><ul><li>npm init -y：新建包管理配置文件</li><li>npm uninstall：卸载包</li><li>npm install -D：安装包到开发环境中，这些包只在项目开发环境中用到，如sass,记录在devDependencies节点中</li><li>npm install：安装到开发和生产环境中，记录在dependencies节点中</li><li>npm install -g：安装为全局包</li></ul><h1 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h1><p>封装的http模块</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express</span><br></pre></td></tr></table></figure><h3 id="创建基本的Web服务器"><a href="#创建基本的Web服务器" class="headerlink" title="创建基本的Web服务器"></a>创建基本的Web服务器</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.导入 express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">//2.创建 web 服务器</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;hzx&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;请求成功&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//3. 启动 web 服务器</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;express server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="获取请求参数"><a href="#获取请求参数" class="headerlink" title="获取请求参数"></a>获取请求参数</h3><p>req.query     通过?匹配到的参数</p><p>req.params    通过:匹配到的动态参数</p><p>req.body 请求体数据，需要调用express.json()和express.urlencoded({extended:false})中间件</p><h3 id="托管静态资源"><a href="#托管静态资源" class="headerlink" title="托管静态资源"></a>托管静态资源</h3><p>app.use(express.static(‘public’))</p><p>如果要托管多个静态资源目录，多次调用express.static()函数，访问静态资源函数时，根据目录的添加顺序查找所需的文件</p><p>挂载路径前缀：app.use(“&#x2F;public”,express.static(‘public’))</p><h1 id="nodemon"><a href="#nodemon" class="headerlink" title="nodemon"></a>nodemon</h1><p>nodemon能够监听项目文件的变动，当代码被修改后，nodemon会自动帮我们重启项目。</p><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><p>npm install -g nodemon</p><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>nodemon test.js</p><h1 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h1><p>Express中的路由分3部分组成，分别是请求的类型、请求的URL地址、处理函数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.METHOD(PATH,HANDLER(req,res))</span><br></pre></td></tr></table></figure><h3 id="模块化路由"><a href="#模块化路由" class="headerlink" title="模块化路由"></a>模块化路由</h3><p>为了方便对路由进行模块化的管理，推荐将路由抽离为单独的模块</p><ol><li>创建路由模块对应的.js文件</li><li>调用express.Router()函数创建路由对象</li><li>向路由对象上挂载具体的路由</li><li>module.exports向外共享路由对象</li><li>使用app.use()函数注册路由模块</li></ol><h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//router.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/user/list&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Get user list.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/user/add&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Add new user.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="comment">//1.导入 express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">//2.创建 web 服务器</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="comment">//注册路由模块</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">&#x27;./router&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"><span class="comment">//3. 启动 web 服务器</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;express server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h1><p>作用：对请求进行预处理</p><h3 id="中间件的格式"><a href="#中间件的格式" class="headerlink" title="中间件的格式"></a>中间件的格式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,<span class="keyword">function</span>(<span class="params">req,res,next</span>)&#123;</span><br><span class="line"><span class="title function_">next</span>()<span class="comment">//把流转关系转交给下一个中间件或者路由</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="全局生效的中间件"><a href="#全局生效的中间件" class="headerlink" title="全局生效的中间件"></a>全局生效的中间件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="keyword">const</span> mw = <span class="keyword">function</span> (<span class="params">req,res,next</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这是最简单的中间件函数&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line">app.<span class="title function_">use</span>(mw)</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Home Page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&quot;User Page&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="局部生效的中间件"><a href="#局部生效的中间件" class="headerlink" title="局部生效的中间件"></a>局部生效的中间件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"><span class="keyword">const</span> mw = <span class="keyword">function</span> (<span class="params">req,res,next</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这是最简单的中间件函数&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,mw,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Home Page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="多个局部生效的中间件"><a href="#多个局部生效的中间件" class="headerlink" title="多个局部生效的中间件"></a>多个局部生效的中间件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,mw1,mw2,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Home Page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,[mw1,mw2],<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Home Page.&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul><li>在路由之前注册中间件</li><li>客户端发送的请求，可以连续调用多个中间件进行处理</li><li>执行完中间件后，要调用next()函数</li><li>调用next()函数后，不要再写业务逻辑</li><li>多个中间件共享req、res对象</li></ul><h3 id="中间件的分类"><a href="#中间件的分类" class="headerlink" title="中间件的分类"></a>中间件的分类</h3><ol><li><p>应用级别：app.use(),app.get(),app.post()</p></li><li><p>路由级别：绑定在express.Router()实例上</p></li><li><p>错误级别：function处理函数中必须有4个形参，分别是(err,req,res,next)。<strong>必须注册在所有路由之后！</strong></p></li><li><p>Express内置</p><ol><li><p>express.static快速托管静态资源的内置中间件</p></li><li><p>express.json解析JSON格式的请求体数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>())</span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">body</span>)</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>express.urlencoded({extended:false})解析URL-encoded格式的请求体数据</p></li></ol></li><li><p>第三方</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义中间件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">bodyParser</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    req.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">chunk</span>) =&gt;</span> &#123;</span><br><span class="line">        str += chunk</span><br><span class="line">    &#125;)</span><br><span class="line">    req.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        req.<span class="property">body</span> = querystring.<span class="title function_">parse</span>(str)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = bodyParser</span><br><span class="line">------------------------------------</span><br><span class="line"><span class="comment">//使用中间件</span></span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;./bodyParser&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(bodyParser)</span><br></pre></td></tr></table></figure></li></ol><h1 id="基于CORS解决跨域问题"><a href="#基于CORS解决跨域问题" class="headerlink" title="基于CORS解决跨域问题"></a>基于CORS解决跨域问题</h1><h3 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cors</span><br></pre></td></tr></table></figure><h3 id="导入并配置"><a href="#导入并配置" class="headerlink" title="导入并配置"></a>导入并配置</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>())</span><br></pre></td></tr></table></figure><p><strong>注意：</strong>先配置cors（跨域资源共享）再配置路由</p><p><strong>原理：</strong>CORS由一系列HTTP响应头组成，这些响应头决定浏览器是否阻止前端JS代码跨域获取资源。浏览器的同源安全策略（协议、ip地址、端口号必须相同）默认会阻止网页”跨域“获取资源。但是如果接口服务器配置了CORS相关的HTTP响应头，就可以解除浏览器端的跨域访问限制。</p><table><thead><tr><th>CORS响应头部</th><th>描述</th></tr></thead><tbody><tr><td>res.setHeader(‘Access-Control-Allow-Origin’,’*’)</td><td>设置允许访问该资源的外域URL</td></tr><tr><td>res.setHeader(‘Access-Control-Allow-Headers’,’X-Custom-Header’)</td><td>对额外的请求头进行声明</td></tr><tr><td>res.setHeader(‘Access-Control-Allow-Methods’,’*’)</td><td>设置实际请求所允许使用的HTTP方法</td></tr></tbody></table><h3 id="预检请求"><a href="#预检请求" class="headerlink" title="预检请求"></a>预检请求</h3><p>只要符合以下任何条件之一，都需要进行预检请求：</p><ol><li>请求方式为GET、POST、HEAD之外的请求Method类型</li><li>请求头中包含自定义头部字段</li><li>向服务器发送了application&#x2F;json格式的数据</li></ol><p>在浏览器与服务器正式通信之前，浏览器会先发送OPTION请求进行预检，以获知服务器是否允许该实际请求，所以这一次的OPTION请求称为“预检请求”。服务器成功响应预检请求后，才会发送真正的请求，并携带真实数据。</p><h3 id="JSONP接口"><a href="#JSONP接口" class="headerlink" title="JSONP接口"></a>JSONP接口</h3><p>浏览器通过<code>&lt;script&gt;</code>标签的src属性，请求服务器上的数据，同时，服务器返回一个函数的调用。这种请求数据的方式叫做JSONP</p><p>JSONP不属于真正的Ajax请求，没有使用XMLHttpRequest这个对象。JSONP仅支持GET请求，不支持POST、PUT、DELETE请求。</p><p>JSONP接口要声明在CORS接口之前</p><h1 id="操作MySQL"><a href="#操作MySQL" class="headerlink" title="操作MySQL"></a>操作MySQL</h1><ol><li>安装mysql2模块</li></ol>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mysql2</span><br></pre></td></tr></table></figure><ol start="2"><li><p>配置mysql模块</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql2&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> db = mysql.<span class="title function_">createPool</span>(&#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">    <span class="attr">database</span>: <span class="string">&#x27;my_db_01&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>测试mysql模块是否正常工作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.query(&#x27;SELECT 1&#x27;,(err,results)=&gt;&#123;</span><br><span class="line">if(err) return console.log(err.message)</span><br><span class="line">console.log(results)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h3 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">username</span>:<span class="string">&#x27;spider-man&#x27;</span>, <span class="attr">password</span>:<span class="string">&#x27;pcc123&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;insert into users (username,password) values (?,?)&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr,[user.<span class="property">username</span>,user.<span class="property">password</span>],<span class="function">(<span class="params">err,results</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    <span class="comment">//insert into 的返回结果为对象,select 的结果为数组</span></span><br><span class="line">    <span class="keyword">if</span>(results.<span class="property">affectedRows</span> === <span class="number">1</span>) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据插入成功！&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//若对象的属性值与数据表的字段一一对应</span></span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;insert into users set ?&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, user, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据插入成功！&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">username</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">password</span>: <span class="string">&#x27;000123&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;update users set username=?,password=? where id=?&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, [user.<span class="property">username</span>, user.<span class="property">password</span>, user.<span class="property">id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    <span class="comment">//update 的返回结果为对象</span></span><br><span class="line">    <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据修改成功！&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//若对象的属性值与数据表的字段一一对应</span></span><br><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;update users set ? where id=?&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, [user, user.<span class="property">id</span>], <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    <span class="comment">//update 的返回结果为对象</span></span><br><span class="line">    <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据修改成功！&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sqlStr = <span class="string">&#x27;delete from users where id=?&#x27;</span></span><br><span class="line">db.<span class="title function_">query</span>(sqlStr, <span class="number">5</span>, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    <span class="comment">//update 的返回结果为对象</span></span><br><span class="line">    <span class="keyword">if</span> (results.<span class="property">affectedRows</span> === <span class="number">1</span>) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据删除成功！&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="前后端的身份认证"><a href="#前后端的身份认证" class="headerlink" title="前后端的身份认证"></a>前后端的身份认证</h1></div><div class="story post-story"><h2 id="Session认证机制"><a href="#Session认证机制" class="headerlink" title="Session认证机制"></a>Session认证机制</h2><h3 id="http的无状态性"><a href="#http的无状态性" class="headerlink" title="http的无状态性"></a>http的无状态性</h3><p>客户端的每次HTTP请求都是独立的，服务器不会主动保留每次HTTP请求的状态</p><h3 id="突破http的无状态性"><a href="#突破http的无状态性" class="headerlink" title="突破http的无状态性"></a>突破http的无状态性</h3><p>设置cookie</p><h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><p>Cookie是存储在用户浏览器中一段不超过4KB的字符串。它由一个名称、一个值和其他几个用于控制Cookie有效期、安全性、使用范围的可选属性组成。</p><p>客户端第一次请求服务器时，服务器通过响应头的形式，向客户端发送一个身份认证的Cookie。当客户端每次请求服务器时，浏览器自动将身份认证相关的Cookie，通过请求头的形式发送给服务器，服务器即可验明客户端的身份。</p><h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express-session</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> session = <span class="built_in">require</span>(<span class="string">&#x27;express-session&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">session</span>(&#123;</span><br><span class="line">    <span class="attr">secret</span>: <span class="string">&#x27;keyboard cat&#x27;</span>,<span class="comment">//可以为任意字符串</span></span><br><span class="line">    <span class="attr">resave</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">saveUninitialized</span>: <span class="literal">true</span></span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="JWT认证机制"><a href="#JWT认证机制" class="headerlink" title="JWT认证机制"></a>JWT认证机制</h2><p>session不支持跨域访问，当前端请求后端接口不跨域时，推荐使用session。当前端请求后端接口跨域时，推荐使用JWT（JSON Web Token)</p><h3 id="JWT组成成分"><a href="#JWT组成成分" class="headerlink" title="JWT组成成分"></a>JWT组成成分</h3><p>Header.Payload.Signature</p><ul><li>Payload是真正的用户信息，是用户信息经过加密后生成的字符串</li><li>Header和Signature是安全性相关的部分，只是为了保证Token的安全性</li></ul><h3 id="JWT使用方式"><a href="#JWT使用方式" class="headerlink" title="JWT使用方式"></a>JWT使用方式</h3><p>客户端收到服务器返回的JWT后，通常将它存储在localStorage和sessionStorage中</p><p>客户端把JWT放在HTTP请求头的Authorization字段中，此后每次通信都要带上这个JWT的字符串，格式如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Authorization: Bear &lt;token&gt;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="安装及使用"><a href="#安装及使用" class="headerlink" title="安装及使用"></a>安装及使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jsonwebtoken express-jwt</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.导入用于生成JWT字符串的包</span></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>)</span><br><span class="line"><span class="comment">// 2.导入将JWT字符串还原成JSON对象的包</span></span><br><span class="line"><span class="keyword">const</span> &#123;expressjwt&#125; = <span class="built_in">require</span>(<span class="string">&#x27;express-jwt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//错误级别的中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//token解析失败</span></span><br><span class="line">    <span class="keyword">if</span> (err.<span class="property">name</span> === <span class="string">&quot;UnauthorizedError&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">401</span>,</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&quot;无效的token&quot;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">        <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&quot;服务端错误&quot;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//.unless(&#123;&#125;)用来指定哪一些接口不需要访问权限，以下匹配/api/开头的路径</span></span><br><span class="line"><span class="keyword">const</span> secretKey = <span class="string">&#x27;Sherlock Holmes ^_^&#x27;</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">expressjwt</span>(&#123;<span class="attr">secret</span>:secretKey,<span class="attr">algorithms</span>:[<span class="string">&#x27;HS256&#x27;</span>]&#125;).<span class="title function_">unless</span>(&#123;<span class="attr">path</span>:[<span class="regexp">/^\/api\//</span>]&#125;))</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//登录获取token</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/api/login&#x27;</span>,<span class="keyword">function</span>(<span class="params">req,res</span>)&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">        <span class="attr">status</span>:<span class="number">200</span>,</span><br><span class="line">        <span class="attr">message</span>:<span class="string">&#x27;登录成功！&#x27;</span>,</span><br><span class="line">        <span class="comment">//参数1：用户的信息对象，参数2：加密的密钥，参数3：配置对象：可以配置当前token的有效期</span></span><br><span class="line">        <span class="attr">token</span>:jwt.<span class="title function_">sign</span>(&#123;<span class="attr">username</span>:userinfo.<span class="property">username</span>&#125;,secretKey,&#123;<span class="attr">expiresIn</span>:<span class="string">&#x27;30s&#x27;</span>&#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/admin/getinfo&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">        <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&quot;获取用户信息成功!&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: req.<span class="property">auth</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="密码加密"><a href="#密码加密" class="headerlink" title="密码加密"></a>密码加密</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i bcryptjs</span><br></pre></td></tr></table></figure><p>加密存储密码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var bcrypt = require(&#x27;bcryptjs&#x27;);</span><br><span class="line">//生成随机盐</span><br><span class="line">var salt = bcrypt.genSaltSync(10);</span><br><span class="line">//生成加密密码</span><br><span class="line">var hash = bcrypt.hashSync(&quot;B4c0/\/&quot;, salt);</span><br><span class="line">// 存入数据库</span><br></pre></td></tr></table></figure><p>检测密码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 从数据库中获取加密密码</span><br><span class="line">bcrypt.compareSync(&quot;B4c0/\/&quot;, hash); // true</span><br><span class="line">bcrypt.compareSync(&quot;not_bacon&quot;, hash); // false</span><br></pre></td></tr></table></figure><p>自动生成随机盐和哈希值:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// bcrypt.hashSync(明文密码，随机盐的长度)</span><br><span class="line">var hash = bcrypt.hashSync(&#x27;bacon&#x27;, 8);</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;fs文件系统&quot;&gt;&lt;a href=&quot;#fs文件系统&quot; class=&quot;headerlink&quot; title=&quot;fs文件系统&quot;&gt;&lt;/a&gt;fs文件系统&lt;/h1&gt;&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;读取文件内容&quot;&gt;&lt;a href=&quot;#读</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="node.js" scheme="http://example.com/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>设计模式</title>
    <link href="http://example.com/2024/10/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/2024/10/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</id>
    <published>2024-10-11T16:00:44.000Z</published>
    <updated>2024-12-21T03:15:22.704Z</updated>
    
    <content type="html"><![CDATA[<h1 id="设计模式的分类"><a href="#设计模式的分类" class="headerlink" title="设计模式的分类"></a>设计模式的分类</h1><table><thead><tr><th align="left">模式 &amp; 描述</th><th align="left">包括</th></tr></thead><tbody><tr><td align="left"><strong>创建型模式</strong> 这些设计模式提供了一种在创建对象的同时隐藏创建逻辑的方式，而不是使用 new 运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活。</td><td align="left">工厂模式（Factory Pattern）抽象工厂模式（Abstract Factory Pattern）单例模式（Singleton Pattern）建造者模式（Builder Pattern）原型模式（Prototype Pattern）</td></tr><tr><td align="left"><strong>结构型模式</strong> 这些模式关注对象之间的组合和关系，旨在解决如何构建灵活且可复用的类和对象结构。</td><td align="left">适配器模式（Adapter Pattern）桥接模式（Bridge Pattern）过滤器模式（Filter、Criteria Pattern）组合模式（Composite Pattern）装饰器模式（Decorator Pattern）外观模式（Facade Pattern）享元模式（Flyweight Pattern）代理模式（Proxy Pattern）</td></tr><tr><td align="left"><strong>行为型模式</strong> 这些模式关注对象之间的通信和交互，旨在解决对象之间的责任分配和算法的封装。</td><td align="left">责任链模式（Chain of Responsibility Pattern）命令模式（Command Pattern）解释器模式（Interpreter Pattern）迭代器模式（Iterator Pattern）中介者模式（Mediator Pattern）备忘录模式（Memento Pattern）观察者模式（Observer Pattern）状态模式（State Pattern）空对象模式（Null Object Pattern）策略模式（Strategy Pattern）模板模式（Template Pattern）访问者模式（Visitor Pattern）</td></tr></tbody></table><div class="story post-story"><h2 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h2><h3 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h3><h4 id="表现形式"><a href="#表现形式" class="headerlink" title="表现形式"></a>表现形式</h4><p>调用工厂函数返回新对象</p><h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><ol><li>Vue3-createApp：将全局改变Vue实例的行为，移到Vue实例上</li><li>axios-create：基于自定义配置新建实例</li></ol><h3 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h3><h4 id="表现形式-1"><a href="#表现形式-1" class="headerlink" title="表现形式"></a>表现形式</h4><p>整个系统只有一个单例对象</p><h4 id="使用场景-1"><a href="#使用场景-1" class="headerlink" title="使用场景"></a>使用场景</h4><p>vant中的toast和notify组件</p><p>vue中的use方法</p><h4 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h4><h4 id="表现形式-2"><a href="#表现形式-2" class="headerlink" title="表现形式"></a>表现形式</h4><p>在对象之间定义一个一对多的依赖，当一个对象状态改变的时候，所有依赖的对象都会自动收到通知</p><h4 id="使用场景-2"><a href="#使用场景-2" class="headerlink" title="使用场景"></a>使用场景</h4><p>addEventListener</p><p>vue中的watch</p><p>react中的useEffect</p><h3 id="发布订阅模式"><a href="#发布订阅模式" class="headerlink" title="发布订阅模式"></a>发布订阅模式</h3><h4 id="表现形式-3"><a href="#表现形式-3" class="headerlink" title="表现形式"></a>表现形式</h4><p>与观察者模式相似，有中间商进行发布订阅</p><h4 id="使用场景-3"><a href="#使用场景-3" class="headerlink" title="使用场景"></a>使用场景</h4><p>pubsub.js</p><p>vue的provide与inject</p><h3 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h3><h4 id="表现形式-4"><a href="#表现形式-4" class="headerlink" title="表现形式"></a>表现形式</h4><p>复制一个已经存在的实例来返回新的实例，而不是新建实例</p><h4 id="使用场景-4"><a href="#使用场景-4" class="headerlink" title="使用场景"></a>使用场景</h4><p>Object.create()</p><p>vue的数组方法重写</p><h3 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h3><h4 id="表现形式-5"><a href="#表现形式-5" class="headerlink" title="表现形式"></a>表现形式</h4><p>为一个对象提供一个代用品或占位符，以便控制对它的访问</p><h4 id="使用场景-5"><a href="#使用场景-5" class="headerlink" title="使用场景"></a>使用场景</h4><p>缓存代理：第一次查询的数据通过接口获取，重复查询通过缓存获取</p><h3 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h3><h4 id="表现形式-6"><a href="#表现形式-6" class="headerlink" title="表现形式"></a>表现形式</h4><p>遍历容器中的每一个元素</p><h4 id="使用场景-6"><a href="#使用场景-6" class="headerlink" title="使用场景"></a>使用场景</h4><p>for in 和 for of</p><blockquote><p>区别：</p><ul><li>for in 遍历的是索引，继承而来的也可以遍历</li><li>for of 遍历的是值，继承而来的无法遍历，无法遍历对象</li></ul></blockquote><p>可迭代对象：实现迭代协议</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;设计模式的分类&quot;&gt;&lt;a href=&quot;#设计模式的分类&quot; class=&quot;headerlink&quot; title=&quot;设计模式的分类&quot;&gt;&lt;/a&gt;设计模式的分类&lt;/h1&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;模式 &amp;amp; 描述&lt;/th</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="面试八股" scheme="http://example.com/tags/%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1/"/>
    
  </entry>
  
  <entry>
    <title>linux</title>
    <link href="http://example.com/2024/10/11/linux/"/>
    <id>http://example.com/2024/10/11/linux/</id>
    <published>2024-10-11T15:25:06.000Z</published>
    <updated>2024-10-14T08:47:45.124Z</updated>
    
    <content type="html"><![CDATA[<h1 id="linux常用命令"><a href="#linux常用命令" class="headerlink" title="linux常用命令"></a>linux常用命令</h1><div class="story post-story"><h2 id="处理目录的常用命令"><a href="#处理目录的常用命令" class="headerlink" title="处理目录的常用命令"></a>处理目录的常用命令</h2><ul><li>ls（英文全拼：list files）: 列出目录及文件名</li><li>cd（英文全拼：change directory）：切换目录</li><li>pwd（英文全拼：print work directory）：显示目前的目录</li><li>mkdir（英文全拼：make directory）：创建一个新的目录</li><li>rmdir（英文全拼：remove directory）：删除一个空的目录</li><li>cp（英文全拼：copy file）: 复制文件或目录</li><li>rm（英文全拼：remove）: 删除文件或目录</li><li>mv（英文全拼：move file）: 移动文件与目录，或修改文件与目录的名称</li></ul><p>可以使用 *man [命令]*来查看各个命令的使用文档，如 ：man cp。</p><h3 id="ls-列出目录"><a href="#ls-列出目录" class="headerlink" title="ls (列出目录)"></a>ls (列出目录)</h3><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# ls [-aAdfFhilnrRSt] 目录名称</span><br><span class="line">[root@www ~]# ls [--color=&#123;never,auto,always&#125;] 目录名称</span><br><span class="line">[root@www ~]# ls [--full-time] 目录名称</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li>-a ：全部的文件，连同隐藏文件( 开头为 . 的文件) 一起列出来(常用)</li><li>-d ：仅列出目录本身，而不是列出目录内的文件数据(常用)</li><li>-l ：长数据串列出，包含文件的属性与权限等等数据；(常用)</li></ul><p>将目录下的所有文件列出来(含属性与隐藏档)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# ls -al ~</span><br></pre></td></tr></table></figure><p>~为根目录</p><h3 id="cd-切换目录"><a href="#cd-切换目录" class="headerlink" title="cd (切换目录)"></a>cd (切换目录)</h3><p>cd是Change Directory的缩写，这是用来变换工作目录的命令。</p><h3 id="pwd-显示目前所在的目录"><a href="#pwd-显示目前所在的目录" class="headerlink" title="pwd (显示目前所在的目录)"></a>pwd (显示目前所在的目录)</h3><p>pwd 是 <strong>Print Working Directory</strong> 的缩写，也就是显示目前所在目录的命令。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# pwd [-P]</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li><strong>-P</strong> ：显示出确实的路径，而非使用链接 (link) 路径。</li></ul><h3 id="mkdir-创建新目录"><a href="#mkdir-创建新目录" class="headerlink" title="mkdir (创建新目录)"></a>mkdir (创建新目录)</h3><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir [-mp] 目录名称</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li>-m ：配置文件的权限喔！直接配置，不需要看默认权限 (umask) 的脸色～</li><li>-p ：帮助你直接将所需要的目录(包含上一级目录)递归创建起来！</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cd /tmp</span><br><span class="line">[root@www tmp]# mkdir test    &lt;==创建一名为 test 的新目录</span><br><span class="line">[root@www tmp]# mkdir test1/test2/test3/test4</span><br><span class="line">mkdir: cannot create directory `test1/test2/test3/test4&#x27;: </span><br><span class="line">No such file or directory       &lt;== 没办法直接创建此目录啊！</span><br><span class="line">[root@www tmp]# mkdir -p test1/test2/test3/test4</span><br></pre></td></tr></table></figure><p>加了这个 -p 的选项，可以自行帮你创建多层目录！</p><p>实例：创建权限为 <strong>rwx–x–x</strong> 的目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@www tmp]# mkdir -m 711 test2</span><br><span class="line">[root@www tmp]# ls -l</span><br><span class="line">drwxr-xr-x  3 root  root 4096 Jul 18 12:50 test</span><br><span class="line">drwxr-xr-x  3 root  root 4096 Jul 18 12:53 test1</span><br><span class="line">drwx--x--x  2 root  root 4096 Jul 18 12:54 test2</span><br></pre></td></tr></table></figure><p>上面的权限部分，如果没有加上 -m 来强制配置属性，系统会使用默认属性。</p><p>如果我们使用 -m ，如上例我们给予 -m 711 来给予新的目录 drwx–x–x 的权限。</p><h3 id="rmdir-删除空的目录"><a href="#rmdir-删除空的目录" class="headerlink" title="rmdir (删除空的目录)"></a>rmdir (删除空的目录)</h3><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmdir [-p] 目录名称</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li><strong>-p ：</strong>从该目录起，一次删除多级空目录</li></ul><p>删除 runoob 目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@www tmp]# rmdir runoob/</span><br></pre></td></tr></table></figure><p>将 mkdir 实例中创建的目录(&#x2F;tmp 底下)删除掉！</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@www tmp]# ls -l   &lt;==看看有多少目录存在？</span><br><span class="line">drwxr-xr-x  3 root  root 4096 Jul 18 12:50 test</span><br><span class="line">drwxr-xr-x  3 root  root 4096 Jul 18 12:53 test1</span><br><span class="line">drwx--x--x  2 root  root 4096 Jul 18 12:54 test2</span><br><span class="line">[root@www tmp]# rmdir test   &lt;==可直接删除掉，没问题</span><br><span class="line">[root@www tmp]# rmdir test1  &lt;==因为尚有内容，所以无法删除！</span><br><span class="line">rmdir: `test1&#x27;: Directory not empty</span><br><span class="line">[root@www tmp]# rmdir -p test1/test2/test3/test4</span><br><span class="line">[root@www tmp]# ls -l        &lt;==您看看，底下的输出中test与test1不见了！</span><br><span class="line">drwx--x--x  2 root  root 4096 Jul 18 12:54 test2</span><br></pre></td></tr></table></figure><p>利用 -p 这个选项，立刻就可以将 test1&#x2F;test2&#x2F;test3&#x2F;test4 一次删除。</p><p>要注意的是，这个 rmdir 仅能删除空的目录，可以使用 rm 命令来删除非空目录。</p><h3 id="cp-复制文件或目录"><a href="#cp-复制文件或目录" class="headerlink" title="cp (复制文件或目录)"></a>cp (复制文件或目录)</h3><p>cp 即拷贝文件和目录。</p><p>语法:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cp [-adfilprsu] 来源档(source) 目标档(destination)</span><br><span class="line">[root@www ~]# cp [options] source1 source2 source3 .... directory</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li><strong>-a：</strong>相当於 -pdr 的意思，至於 pdr 请参考下列说明；(常用)</li><li><strong>-d：</strong>若来源档为链接档的属性(link file)，则复制链接档属性而非文件本身；</li><li><strong>-f：</strong>为强制(force)的意思，若目标文件已经存在且无法开启，则移除后再尝试一次；</li><li><strong>-i：</strong>若目标档(destination)已经存在时，在覆盖时会先询问动作的进行(常用)</li><li><strong>-l：</strong>进行硬式链接(hard link)的链接档创建，而非复制文件本身；</li><li><strong>-p：</strong>连同文件的属性一起复制过去，而非使用默认属性(备份常用)；</li><li><strong>-r：</strong>递归持续复制，用于目录的复制行为；(常用)</li><li><strong>-s：</strong>复制成为符号链接档 (symbolic link)，亦即『捷径』文件；</li><li><strong>-u：</strong>若 destination 比 source 旧才升级 destination ！</li></ul><p>用 root 身份，将 root 目录下的 .bashrc 复制到 &#x2F;tmp 下，并命名为 bashrc</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cp ~/.bashrc /tmp/bashrc</span><br><span class="line">[root@www ~]# cp -i ~/.bashrc /tmp/bashrc</span><br><span class="line">cp: overwrite `/tmp/bashrc&#x27;? n  &lt;==n不覆盖，y为覆盖</span><br></pre></td></tr></table></figure><h3 id="rm-移除文件或目录"><a href="#rm-移除文件或目录" class="headerlink" title="rm (移除文件或目录)"></a>rm (移除文件或目录)</h3><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm [-fir] 文件或目录</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li>-f ：就是 force 的意思，忽略不存在的文件，不会出现警告信息；</li><li>-i ：互动模式，在删除前会询问使用者是否动作</li><li>-r ：递归删除啊！最常用在目录的删除了！这是非常危险的选项！！！</li></ul><h3 id="mv-移动文件与目录，或修改名称"><a href="#mv-移动文件与目录，或修改名称" class="headerlink" title="mv (移动文件与目录，或修改名称)"></a>mv (移动文件与目录，或修改名称)</h3><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# mv [-fiu] source destination</span><br><span class="line">[root@www ~]# mv [options] source1 source2 source3 .... directory</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li>-f ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；</li><li>-i ：若目标文件 (destination) 已经存在时，就会询问是否覆盖！</li><li>-u ：若目标文件已经存在，且 source 比较新，才会升级 (update)</li></ul><p>复制一文件，创建一目录，将文件移动到目录中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cd /tmp</span><br><span class="line">[root@www tmp]# cp ~/.bashrc bashrc</span><br><span class="line">[root@www tmp]# mkdir mvtest</span><br><span class="line">[root@www tmp]# mv bashrc mvtest</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="查看文件"><a href="#查看文件" class="headerlink" title="查看文件"></a>查看文件</h2><h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h3><p>由第一行开始显示文件内容</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat [-AbEnTv]</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul><li>-A ：相当於 -vET 的整合选项，可列出一些特殊字符而不是空白而已；</li><li>-b ：列出行号，仅针对非空白行做行号显示，空白行不标行号！</li><li>-E ：将结尾的断行字节 $ 显示出来；</li><li>-n ：列印出行号，连同空白行也会有行号，与 -b 的选项不同；</li><li>-T ：将 [tab] 按键以 ^I 显示出来；</li><li>-v ：列出一些看不出来的特殊字符</li></ul><p>检看 &#x2F;etc&#x2F;issue 这个文件的内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cat /etc/issue</span><br><span class="line">CentOS release 6.4 (Final)</span><br><span class="line">Kernel \r on an \m</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h2><h3 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h3><p>touch命令用于修改文件或者目录的时间属性，包括存取时间和更改时间。若文件不存在，系统会建立一个新的文件。</p><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch [-acfm][-d&lt;日期时间&gt;][-r&lt;参考文件或目录&gt;] [-t&lt;日期时间&gt;][--help][--version][文件或目录…]</span><br></pre></td></tr></table></figure><ul><li><strong>参数说明</strong>：</li><li>a 改变档案的读取时间记录。</li><li>m 改变档案的修改时间记录。</li><li>c 假如目的档案不存在，不会建立新的档案。与 –no-create 的效果一样。</li><li>f 不使用，是为了与其他 unix 系统的相容性而保留。</li><li>r 使用参考档的时间记录，与 –file 的效果一样。</li><li>d 设定时间与日期，可以使用各种不同的格式。</li><li>t 设定档案的时间记录，格式与 date 指令相同。</li><li>–no-create 不会建立新档案。</li><li>–help 列出指令格式。</li><li>–version 列出版本讯息。</li></ul></div><div class="story post-story"><h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><p><img src="/../images/vim.gif" class="lazyload" data-srcset="/../images/vim.gif" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;linux常用命令&quot;&gt;&lt;a href=&quot;#linux常用命令&quot; class=&quot;headerlink&quot; title=&quot;linux常用命令&quot;&gt;&lt;/a&gt;linux常用命令&lt;/h1&gt;&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;处理目录的常用</summary>
      
    
    
    
    
    <category term="linux" scheme="http://example.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>2024-10-9</title>
    <link href="http://example.com/2024/10/09/2024-10-9/"/>
    <id>http://example.com/2024/10/09/2024-10-9/</id>
    <published>2024-10-09T15:58:54.000Z</published>
    <updated>2024-10-09T16:11:22.592Z</updated>
    
    <content type="html"><![CDATA[<p><strong>好累好累，每天高强度学习，脑子转不过来了555，明天应该可以把vue3项目做完吧</strong></p><p><img src="/../images/34.jpg" class="lazyload" data-srcset="/../images/34.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="累趴的猫学长"></p><p><img src="/../images/35.jpg" class="lazyload" data-srcset="/../images/35.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="夕阳"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;好累好累，每天高强度学习，脑子转不过来了555，明天应该可以把vue3项目做完吧&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/../images/34.jpg&quot; class=&quot;lazyload&quot; data-srcset=&quot;/../images/34</summary>
      
    
    
    
    <category term="随笔" scheme="http://example.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>vue3</title>
    <link href="http://example.com/2024/10/02/vue3/"/>
    <id>http://example.com/2024/10/02/vue3/</id>
    <published>2024-10-02T15:00:05.000Z</published>
    <updated>2025-03-02T14:57:17.070Z</updated>
    
    <content type="html"><![CDATA[<h1 id="组合式API-reactive和ref函数"><a href="#组合式API-reactive和ref函数" class="headerlink" title="组合式API - reactive和ref函数"></a>组合式API - reactive和ref函数</h1><div class="story post-story"><h2 id="1-reactive"><a href="#1-reactive" class="headerlink" title="1. reactive"></a>1. reactive</h2><blockquote><p>接受对象类型数据的参数传入并返回一个响应式的对象</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"> // 导入</span><br><span class="line"> import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"> // 执行函数 传入参数 变量接收</span><br><span class="line"> const state = reactive(&#123;</span><br><span class="line">   msg:&#x27;this is msg&#x27;</span><br><span class="line"> &#125;)</span><br><span class="line"> const setState = ()=&gt;&#123;</span><br><span class="line">   // 修改数据更新视图</span><br><span class="line">   state.msg = &#x27;this is new msg&#x27;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &#123;&#123; state.msg &#125;&#125;</span><br><span class="line">  &lt;button @click=&quot;setState&quot;&gt;change msg&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="2-ref"><a href="#2-ref" class="headerlink" title="2. ref"></a>2. ref</h2><blockquote><p>接收简单类型或者对象类型的数据传入并返回一个响应式的对象</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"> // 导入</span><br><span class="line"> import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"> // 执行函数 传入参数 变量接收</span><br><span class="line"> const count = ref(0)</span><br><span class="line"> const setCount = ()=&gt;&#123;</span><br><span class="line">   // 修改数据更新视图必须加上.value</span><br><span class="line">   count.value++</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;setCount&quot;&gt;&#123;&#123;count&#125;&#125;&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="3-reactive-对比-ref"><a href="#3-reactive-对比-ref" class="headerlink" title="3. reactive 对比 ref"></a>3. reactive 对比 ref</h2><ol><li>都是用来生成响应式数据</li><li>不同点<ol><li>reactive不能处理简单类型的数据</li><li>ref参数类型支持更好，但是必须通过.value做访问和修改</li><li>ref函数内部的实现依赖于reactive函数</li></ol></li></ol><h1 id="组合式API-computed"><a href="#组合式API-computed" class="headerlink" title="组合式API - computed"></a>组合式API - computed</h1><blockquote><p>计算属性基本思想和Vue2保持一致，组合式API下的计算属性只是修改了API写法</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 导入</span><br><span class="line">import &#123;ref, computed &#125; from &#x27;vue&#x27;</span><br><span class="line">// 原始数据</span><br><span class="line">const count = ref(0)</span><br><span class="line">// 计算属性</span><br><span class="line">const doubleCount = computed(()=&gt;count.value * 2)</span><br><span class="line"></span><br><span class="line">// 原始数据</span><br><span class="line">const list = ref([1,2,3,4,5,6,7,8])</span><br><span class="line">// 计算属性list</span><br><span class="line">const filterList = computed(()=&gt;list.value.filter(item=&gt;item &gt; 2))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="组合式API-watch"><a href="#组合式API-watch" class="headerlink" title="组合式API - watch"></a>组合式API - watch</h1><blockquote><p>侦听一个或者多个数据的变化，数据变化时执行回调函数，俩个额外参数 immediate控制立刻执行，deep开启深度侦听</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const count = ref(0)</span><br><span class="line">  // 2. 调用watch 侦听变化</span><br><span class="line">  watch(count, (newValue, oldValue)=&gt;&#123;</span><br><span class="line">    console.log(`count发生了变化，老值为$&#123;oldValue&#125;,新值为$&#123;newValue&#125;`)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="2-侦听多个数据"><a href="#2-侦听多个数据" class="headerlink" title="2. 侦听多个数据"></a>2. 侦听多个数据</h2><blockquote><p>侦听多个数据，第一个参数可以改写成数组的写法</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const count = ref(0)</span><br><span class="line">  const name = ref(&#x27;cp&#x27;)</span><br><span class="line">  // 2. 调用watch 侦听变化</span><br><span class="line">  watch([count, name], ([newCount, newName],[oldCount,oldName])=&gt;&#123;</span><br><span class="line">    console.log(`count或者name变化了，[newCount, newName],[oldCount,oldName])</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="3-immediate"><a href="#3-immediate" class="headerlink" title="3. immediate"></a>3. immediate</h2><blockquote><p>在侦听器创建时立即出发回调，响应式数据变化之后继续执行回调</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const count = ref(0)</span><br><span class="line">  // 2. 调用watch 侦听变化</span><br><span class="line">  watch(count, (newValue, oldValue)=&gt;&#123;</span><br><span class="line">    console.log(`count发生了变化，老值为$&#123;oldValue&#125;,新值为$&#123;newValue&#125;`)</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">    immediate: true</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="4-deep"><a href="#4-deep" class="headerlink" title="4. deep"></a>4. deep</h2><blockquote><p>通过watch监听的ref对象默认是浅层侦听的，直接修改嵌套的对象属性不会触发回调执行，需要开启deep</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const state = ref(&#123; count: 0 &#125;)</span><br><span class="line">  // 2. 监听对象state</span><br><span class="line">  watch(state, ()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;数据变化了&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  const changeStateByCount = ()=&gt;&#123;</span><br><span class="line">    // 直接修改不会引发回调执行</span><br><span class="line">    state.value.count++</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const state = ref(&#123; count: 0 &#125;)</span><br><span class="line">  // 2. 监听对象state 并开启deep</span><br><span class="line">  watch(state, ()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;数据变化了&#x27;)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">  const changeStateByCount = ()=&gt;&#123;</span><br><span class="line">    // 此时修改可以触发回调</span><br><span class="line">    state.value.count++</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="组合式API-生命周期函数"><a href="#组合式API-生命周期函数" class="headerlink" title="组合式API - 生命周期函数"></a>组合式API - 生命周期函数</h1></div><div class="story post-story"><h2 id="1-API"><a href="#1-API" class="headerlink" title="1. API"></a>1. API</h2><ul><li>setup()</li><li>onBeforemount()</li><li>onMounted()</li><li>onBeforeUpdate()</li><li>onUpdated()</li><li>onBeforeUnMount()</li><li>onUnMounted()</li></ul></div><div class="story post-story"><h2 id="2-生命周期函数基本使用"><a href="#2-生命周期函数基本使用" class="headerlink" title="2. 生命周期函数基本使用"></a>2. 生命周期函数基本使用</h2><blockquote><ol><li>导入生命周期函数</li><li>执行生命周期函数，传入回调</li></ol></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;scirpt setup&gt;</span><br><span class="line">import &#123; onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">onMounted(()=&gt;&#123;</span><br><span class="line">  // 自定义逻辑</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="3-执行多次"><a href="#3-执行多次" class="headerlink" title="3. 执行多次"></a>3. 执行多次</h2><blockquote><p>生命周期函数执行多次的时候，会按照顺序依次执行</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;scirpt setup&gt;</span><br><span class="line">import &#123; onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">onMounted(()=&gt;&#123;</span><br><span class="line">  // 自定义逻辑</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">onMounted(()=&gt;&#123;</span><br><span class="line">  // 自定义逻辑</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="组合式API-父子通信"><a href="#组合式API-父子通信" class="headerlink" title="组合式API - 父子通信"></a>组合式API - 父子通信</h1></div><div class="story post-story"><h2 id="1-父传子"><a href="#1-父传子" class="headerlink" title="1. 父传子"></a>1. 父传子</h2><blockquote><p>基本思想</p><ol><li>父组件中给子组件绑定属性</li><li>子组件内部通过props选项接收数据</li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//App.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">SonCom</span> <span class="attr">message</span>=<span class="string">&quot;this is a message&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">SonCom</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">SonCom</span> <span class="keyword">from</span> <span class="string">&#x27;./SonCom.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//SonCom.vue</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; message &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">message</span>:<span class="title class_">String</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="2-子传父"><a href="#2-子传父" class="headerlink" title="2. 子传父"></a>2. 子传父</h2><blockquote><p>基本思想</p><ol><li>父组件中给子组件标签通过@绑定事件</li><li>子组件内部通过 emit 方法触发事件</li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//App.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">SonCom</span> @<span class="attr">get-message</span>=<span class="string">&quot;messageHandler&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">SonCom</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">SonCom</span> <span class="keyword">from</span> <span class="string">&#x27;./SonCom.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">messageHandler</span> = (<span class="params">message</span>)=&gt;&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(message)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//SonCom.vue</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sendMsg&quot;</span>&gt;</span>点我发送信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;get-message&#x27;</span>])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">sendMsg</span> = (<span class="params"></span>)=&gt;&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">emit</span>(<span class="string">&#x27;get-message&#x27;</span>,<span class="string">&quot;this is son message&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="组合式API-模版引用"><a href="#组合式API-模版引用" class="headerlink" title="组合式API - 模版引用"></a>组合式API - 模版引用</h1><blockquote><p>概念：通过 ref标识 获取真实的 dom对象或者组件实例对象</p></blockquote></div><div class="story post-story"><h2 id="1-基本使用"><a href="#1-基本使用" class="headerlink" title="1. 基本使用"></a>1. 基本使用</h2><blockquote><p>实现步骤：</p><ol><li>调用ref函数生成一个ref对象</li><li>通过ref标识绑定ref对象到标签</li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">ref</span>=<span class="string">&quot;h1Ref&quot;</span>&gt;</span>我是dom标签对象h1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> h1Ref = <span class="title function_">ref</span>(<span class="literal">null</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="2-defineExpose"><a href="#2-defineExpose" class="headerlink" title="2. defineExpose"></a>2. defineExpose</h2><blockquote><p>默认情况下在 <script setup>语法糖下组件内部的属性和方法是不开放给父组件访问的，可以通过defineExpose编译宏指定哪些属性和方法容许访问<br>说明：指定testMsg属性可以被访问到</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> testMsg = <span class="title function_">ref</span>(<span class="string">&quot;this is a test message&quot;</span>)</span><br><span class="line"><span class="title function_">defineExpose</span>(&#123;</span><br><span class="line">  testMsg</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="组合式API-provide和inject"><a href="#组合式API-provide和inject" class="headerlink" title="组合式API - provide和inject"></a>组合式API - provide和inject</h1><p>顶层组件向任意的底层组件传递数据和方法，实现跨层组件通信</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//顶层组件</span></span><br><span class="line"><span class="title function_">provide</span>(<span class="string">&#x27;key&#x27;</span>,refObj)</span><br><span class="line"><span class="comment">//底层组件</span></span><br><span class="line"><span class="keyword">const</span> refObj = <span class="title function_">inject</span>(<span class="string">&#x27;key&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//顶层组件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">func</span> = (<span class="params"></span>)=&gt;&#123;&#125;</span><br><span class="line"><span class="title function_">provide</span>(<span class="string">&#x27;key&#x27;</span>,func)</span><br><span class="line"><span class="comment">//底层组件</span></span><br><span class="line"><span class="keyword">const</span> func = <span class="title function_">inject</span>(<span class="string">&#x27;key&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="pinia"><a href="#pinia" class="headerlink" title="pinia"></a>pinia</h1><p>Pinia 是 Vue 的专属状态管理库，可以实现跨组件或页面共享状态，是 vuex 状态管理工具的替代品，</p><p>更加轻量级，支持ts、支持服务端渲染、支持 <code>Vue DevTools</code>。</p><p>移除 <code>mutations</code>，只剩下 <code>state</code> 、 <code>actions</code> 、 <code>getters</code> 。</p><p>无需手动添加每个 <code>store</code>，模块默认情况下创建就自动注册。</p><h1 id="创建空Vue项目并安装Pinia"><a href="#创建空Vue项目并安装Pinia" class="headerlink" title="创建空Vue项目并安装Pinia"></a>创建空Vue项目并安装Pinia</h1><h3 id="1-创建空Vue项目"><a href="#1-创建空Vue项目" class="headerlink" title="1. 创建空Vue项目"></a>1. 创建空Vue项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init vue@latest</span><br></pre></td></tr></table></figure><h3 id="2-安装Pinia并注册"><a href="#2-安装Pinia并注册" class="headerlink" title="2. 安装Pinia并注册"></a>2. 安装Pinia并注册</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i pinia</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"><span class="comment">// 以插件的形式注册</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">createPinia</span>())</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="实现counter"><a href="#实现counter" class="headerlink" title="实现counter"></a>实现counter</h1><blockquote><p>核心步骤：</p><ol><li>定义store</li><li>组件使用store</li></ol></blockquote><p>1- 定义store</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCounterStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;counter&#x27;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// 数据 （state）</span></span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 修改数据的方法 （action）</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    count.<span class="property">value</span>++</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 以对象形式返回</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    count,</span><br><span class="line">    increment</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2- 组件使用store</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入use方法</span><br><span class="line">import &#123; useCounterStore &#125; from &#x27;@/stores/counter&#x27;</span><br><span class="line">  // 2. 执行方法得到store store里有数据和方法</span><br><span class="line">  const counterStore = useCounterStore()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;button @click=&quot;counterStore.increment&quot;&gt;</span><br><span class="line">    &#123;&#123; counterStore.count &#125;&#125;</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h1 id="实现getters"><a href="#实现getters" class="headerlink" title="实现getters"></a>实现getters</h1><blockquote><p>getters直接使用计算属性即可实现</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数据（state）</span></span><br><span class="line"><span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"><span class="comment">// getter (computed)</span></span><br><span class="line"><span class="keyword">const</span> doubleCount = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> count.<span class="property">value</span> * <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h1 id="实现actions"><a href="#实现actions" class="headerlink" title="实现actions"></a>实现actions</h1><blockquote><p>思想：action函数既支持同步也支持异步，和在组件中发送网络请求写法保持一致<br>步骤：</p><ol><li>store中定义action</li><li>组件中触发action</li></ol></blockquote><p>1- store中定义action</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">API_URL</span> = <span class="string">&#x27;http://geek.itheima.net/v1_0/channels&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCounterStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;counter&#x27;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// 数据</span></span><br><span class="line">  <span class="keyword">const</span> list = <span class="title function_">ref</span>([])</span><br><span class="line">  <span class="comment">// 异步action</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">loadList</span> = <span class="keyword">async</span> (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="variable constant_">API_URL</span>)</span><br><span class="line">    list.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">channels</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    list,</span><br><span class="line">    loadList</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>2- 组件中调用action</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useCounterStore &#125; from &#x27;@/stores/counter&#x27;</span><br><span class="line">  const counterStore = useCounterStore()</span><br><span class="line">  // 调用异步action</span><br><span class="line">  counterStore.loadList()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;item in counterStore.list&quot; :key=&quot;item.id&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h1 id="storeToRefs保持响应式解构"><a href="#storeToRefs保持响应式解构" class="headerlink" title="storeToRefs保持响应式解构"></a>storeToRefs保持响应式解构</h1><blockquote><p>直接基于store进行解构赋值，响应式数据（state和getter）会丢失响应式特性，使用storeToRefs辅助保持响应式</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  import &#123; storeToRefs &#125; from &#x27;pinia&#x27;</span><br><span class="line">import &#123; useCounterStore &#125; from &#x27;@/stores/counter&#x27;</span><br><span class="line">  const counterStore = useCounterStore()</span><br><span class="line">  // 使用它storeToRefs包裹之后解构保持响应式</span><br><span class="line">  const &#123; count &#125; = storeToRefs(counterStore)</span><br><span class="line"></span><br><span class="line">  const &#123; increment &#125; = counterStore</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;button @click=&quot;increment&quot;&gt;</span><br><span class="line">    &#123;&#123; count &#125;&#125;</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="Pinia持久化存储"><a href="#Pinia持久化存储" class="headerlink" title="Pinia持久化存储"></a>Pinia持久化存储</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i pinia-plugin-persistedstate</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> piniaPluginPersistedstate <span class="keyword">from</span> <span class="string">&#x27;pinia-plugin-persistedstate&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line">pinia.<span class="title function_">use</span>(piniaPluginPersistedstate)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义store时</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useStore = <span class="title function_">defineStore</span>(</span><br><span class="line">  <span class="string">&#x27;main&#x27;</span>,</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> someState = <span class="title function_">ref</span>(<span class="string">&#x27;hello pinia&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123; someState &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">persist</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h1 id="全局组件统一插件化"><a href="#全局组件统一插件化" class="headerlink" title="全局组件统一插件化"></a>全局组件统一插件化</h1></div><div class="story post-story"><h2 id="插件化开发"><a href="#插件化开发" class="headerlink" title="插件化开发"></a>插件化开发</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 把components中的所组件都进行全局化注册</span></span><br><span class="line"><span class="comment">// 通过插件的方式</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ImageView</span> <span class="keyword">from</span> <span class="string">&#x27;./ImageView/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Sku</span> <span class="keyword">from</span> <span class="string">&#x27;./XtxSku/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> componentPlugin = &#123;</span><br><span class="line">  <span class="title function_">install</span> (app) &#123;</span><br><span class="line">    <span class="comment">// app.component(&#x27;组件名字&#x27;，组件配置对象)</span></span><br><span class="line">    app.<span class="title function_">component</span>(<span class="string">&#x27;XtxImageView&#x27;</span>, <span class="title class_">ImageView</span>)</span><br><span class="line">    app.<span class="title function_">component</span>(<span class="string">&#x27;XtxSku&#x27;</span>, <span class="title class_">Sku</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="插件注册"><a href="#插件注册" class="headerlink" title="插件注册"></a>插件注册</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 引入全局组件插件</span><br><span class="line">import &#123; componentPlugin &#125; from &#x27;@/components&#x27;</span><br><span class="line"></span><br><span class="line">app.use(componentPlugin)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="响应式"><a href="#响应式" class="headerlink" title="响应式"></a>响应式</h2><p>原理就是数据劫持结合发布者-订阅者模式，Vue在初始化数据时，会使用<code>Object.defineProperty</code>重新定义data中的所有属性，劫持各个属性的setter和getter，读取属性时触发getter方法，修改属性时触发setter方法，在方法中记录相应的数据依赖，在数据发生改变时，通知观察者更新视图。Vue3改用<code>Proxy</code>替代Object.defineProperty。Proxy可以直接监听对象和数组的变化，并且有多种拦截方法。</p></div><div class="story post-story"><h2 id="MVVM的理解"><a href="#MVVM的理解" class="headerlink" title="MVVM的理解"></a>MVVM的理解</h2><p><code>MVVM</code>是一种软件架构模式，<code>MVVM</code> 分为 <code>Model</code>、<code>View</code>、<code>ViewModel</code>：</p><ul><li>xxxxxxxxxx import { ElLoading } from 'element-plus'import 'element-plus/theme-chalk/el-loading.css'// 跳转前router.beforeEach((to,from,next)=>{  ElLoading.service({    fullscreen: true,    text: 'Loading...'  })  window.scrollTo(0,0)  next()})// 跳转后router.afterEach((to)=>{  setTimeout(()=>{    const loadingInstance = ElLoading.service()    loadingInstance.close()  },1000)  document.title = to.meta.title || 'my project'})jsx</li><li><code>View</code>代表UI视图，负责数据的展示；</li><li><code>ViewModel</code>负责监听<code>Model</code>中数据的改变并且控制视图的更新，处理用户交互操作；</li></ul></div><div class="story post-story"><h2 id="vue和react的区别，有什么相同"><a href="#vue和react的区别，有什么相同" class="headerlink" title="vue和react的区别，有什么相同"></a>vue和react的区别，有什么相同</h2><p><strong>不同：</strong></p><ul><li>模版语法不同，<code>react</code>采用JSX语法，<code>vue</code>使用基于HTML的模版语法</li><li>数据绑定不同，<code>vue</code> 使用双向数据绑定，<code>react</code> 则需要手动控制组件的状态和属性。</li><li>状态管理不同，<code>vue</code>使用<code>vuex</code>状态管理，<code>react</code>使用<code>redux</code>状态管理</li><li>组件通信不同，<code>vue</code>使用<code>props</code>和事件的方式进行父子组件通信，<code>react</code>则通过<code>props</code>和回调函数的方式进行通信。</li><li>生命周期不同，<code>vue</code>有8个生命周期钩子，<code>react</code>有10个</li><li>响应式原理不同，<code>vue</code>使用双向绑定来实现数据更新，<code>react</code>则通过单向数据流来实现</li></ul><p><strong>相同</strong>：</p><ul><li><strong>组件化开发</strong>：<code>Vue</code> 和 <code>React</code> 都采用了组件化开发的方式，将用户界面划分为独立、可复用的组件，从而使代码更加模块化、可维护和可扩展。</li><li><strong>虚拟 DOM</strong>：<code>Vue</code> 和 <code>React</code> 都使用虚拟 DOM 技术，通过在 <code>JavaScript</code> 和真实 DOM 之间建立一个轻量级的虚拟 DOM 层，实现高效的 DOM 更新和渲染。</li><li><strong>响应式更新</strong>：<code>Vue</code> 和 <code>React</code> 都支持响应式更新，即当数据发生变化时，会自动更新相关的组件和视图，以保持用户界面的同步性。</li><li><strong>集成能力</strong>：<code>Vue</code> 和 <code>React</code> 都具有良好的集成能力，可以与其他库和框架进行整合，例如 <code>Vue</code> 可以与 <code>Vuex</code>、<code>Vue Router</code> 等配套使用，<code>React</code> 可以与 <code>Redux</code>、<code>React Router</code> 等配套使用。</li></ul></div><div class="story post-story"><h2 id="Vue2和Vue3有哪些区别"><a href="#Vue2和Vue3有哪些区别" class="headerlink" title="Vue2和Vue3有哪些区别"></a>Vue2和Vue3有哪些区别</h2><ul><li><code>Vue2</code>使用的是<code>optionsAPI </code>，<code>Vue3</code>使用<code>composition API</code>，更好的组织代码，提高代码可维护性</li><li><code>Vue3</code>使用<code>Proxy</code>代理实现了新的响应式系统，比<code>Vue2</code>有着更好的性能和更准确的数据变化追踪能力。</li><li><code>Vue3</code>引入了Teleport组件，可以将DOM元素渲染到DOM数的其他位置，用于创建模态框、弹出框等。</li><li><code>Vue3</code>全局API名称发生了变化，同时新增了<code>watchEffect</code>、<code>Hooks</code>等功能</li><li><code>Vue3</code>对<code>TypeScript</code>的支持更加友好</li><li><code>Vue3</code>核心库的依赖更少，减少打包体积</li><li>3支持更好的<code>Tree Shanking</code>，可以更加精确的按需要引入模块</li></ul></div><div class="story post-story"><h2 id="SPA的理解，有什么优缺点"><a href="#SPA的理解，有什么优缺点" class="headerlink" title="SPA的理解，有什么优缺点"></a>SPA的理解，有什么优缺点</h2><p>SPA（单页应用）是一种前端应用程序的架构模式，它通过在加载应用程序时只加载单个 <code>HTML</code> 页面，并通过使用 <code>JavaScript</code> 动态地更新页面内容，从而实现无刷新的用户体验。</p></div><div class="story post-story"><h2 id="SPA和多页面有什么区别"><a href="#SPA和多页面有什么区别" class="headerlink" title="SPA和多页面有什么区别"></a>SPA和多页面有什么区别</h2><p><strong>区别</strong></p><ul><li><strong>页面加载方式</strong>：在多页面应用中，每个页面都是独立的 HTML 文件，每次导航时需要重新加载整个页面。而在 <code>SPA</code> 中，初始加载时只加载一个 HTML 页面，后续的导航通过 <code>JavaScript</code> 动态地更新页面内容，无需重新加载整个页面。</li><li><strong>用户体验</strong>：<code>SPA</code> 提供了流畅、快速的用户体验，因为页面切换时无需等待整个页面的重新加载，只有需要的数据和资源会被加载，减少了页面刷新的延迟。多页面应用则可能会有页面刷新的延迟，给用户带来较长的等待时间。</li><li><strong>代码复用</strong>：<code>SPA</code> 通常采用组件化开发的方式，可以在不同的页面中复用组件，提高代码的可维护性和可扩展性。多页面应用的每个页面都是独立的，组件复用的机会较少。</li><li><strong>路由管理</strong>：在多页面应用中，页面之间的导航和路由由服务器处理，每个页面对应一个不同的 <code>URL</code>。而在 <code>SPA</code> 中，前端负责管理页面的导航和路由，通过前端路由库（如 <code>React Router</code> 或 <code>Vue Router</code>）来管理不同路径对应的组件。</li><li><strong>SEO（搜索引擎优化）</strong>：由于多页面应用的每个页面都是独立的 HTML 文件，搜索引擎可以直接索引和抓取每个页面的内容，有利于搜索引擎优化。相比之下，<code>SPA</code> 的内容是通过 <code>JavaScript</code> 动态生成的，搜索引擎的爬虫可能无法正确地获取和索引页面的内容，需要采取额外的优化措施。</li><li>服务器负载：<code>SPA</code> 只需初始加载时获取 <code>HTML</code>、<code>CSS</code> 和 <code>JavaScript</code> 文件，后续的页面更新和数据获取通常通过 API 请求完成，减轻了服务器的负载。而多页面应用每次导航都需要从服务器获取整个页面的内容。</li></ul><p><strong>优点</strong></p><ul><li><strong>用户体验</strong>：<code>SPA</code> 提供了流畅、快速的用户体验，在页面加载后，只有需要的数据和资源会被加载，减少了页面刷新的延迟。</li><li><strong>响应式交互</strong>：由于 <code>SPA</code> 依赖于异步数据加载和前端路由，可以实现实时更新和动态加载内容，使用户可以快速地与应用程序交互。</li><li><strong>代码复用</strong>：<code>SPA</code> 通常采用组件化开发的方式，提高了代码的可维护性和可扩展性。</li><li><strong>服务器负载较低</strong>：由于只有初始页面加载时需要从服务器获取 <code>HTML</code>、<code>CSS</code> 和 <code>JavaScript</code> 文件，减轻了服务器的负载。</li></ul><p><strong>缺点</strong>：</p><ul><li><strong>首次加载时间</strong>：<code>SPA</code> 首次加载时需要下载较大的 <code>JavaScript</code> 文件，这可能导致初始加载时间较长。</li><li><strong>SEO（搜索引擎优化）问题</strong>：由于 <code>SPA</code> 的内容是通过 <code>JavaScript</code> 动态生成的，搜索引擎的爬虫可能无法正确地获取和索引页面的内容。</li><li><strong>内存占用</strong>：<code>SPA</code> 在用户浏览应用程序时保持单个页面的状态，这可能导致较高的内存占用。</li><li><strong>安全性</strong>：由于 <code>SPA</code> 通常使用 <code>API</code> 进行数据获取，因此需要特别注意安全性。</li></ul></div><div class="story post-story"><h2 id="Vue的性能优化有哪些"><a href="#Vue的性能优化有哪些" class="headerlink" title="Vue的性能优化有哪些"></a>Vue的性能优化有哪些</h2><h3 id="编码阶段"><a href="#编码阶段" class="headerlink" title="编码阶段"></a>编码阶段</h3><ul><li><code>v-if</code>和<code>v-for</code>不一起使用</li><li><code>v-for</code>保证<code>key</code>的唯一性</li><li>使用<code>keep-alive</code>缓存组件</li><li><code>v-if</code>和<code>v-show</code>酌情使用</li><li>路由懒加载、异步组件</li><li>图片懒加载</li><li>节流防抖</li><li>第三方模块按需引入</li><li>服务端与渲染</li></ul><h3 id="打包优化"><a href="#打包优化" class="headerlink" title="打包优化"></a>打包优化</h3><ul><li>压缩代码</li><li>使用CDN加载第三方模块</li><li>抽离公共文件</li></ul><h3 id="用户体验"><a href="#用户体验" class="headerlink" title="用户体验"></a>用户体验</h3><ul><li>骨架屏</li><li>客户端缓存</li></ul><h3 id="SEO优化"><a href="#SEO优化" class="headerlink" title="SEO优化"></a>SEO优化</h3><ul><li>预渲染</li><li>服务端渲染</li><li>合理使用 <code>meta</code> 标签</li></ul></div><div class="story post-story"><h2 id="Vue生命周期"><a href="#Vue生命周期" class="headerlink" title="Vue生命周期"></a>Vue生命周期</h2><p><strong>创建前后：</strong></p><ul><li><code>beforeCreate（创建前）：</code> 数据观测和初始化事件还未开始，不能访问<code>data</code>、<code>computed</code>、<code>watch</code>、<code>methods</code>上的数据方法。</li><li><code>created(创建后)：</code>实例创建完成，可以访问<code>data</code>、<code>computed</code>、<code>watch</code>、<code>methods</code>上的数据方法，但此时渲染节点还未挂在到DOM上，所以不能访问。</li></ul><p><strong>挂载前后：</strong></p><ul><li><code>beforeMount（挂载前）:</code> Vue实例还未挂在到页面HTML上，此时可以发起服务器请求</li><li><code>mounted（挂载后）:</code>Vue实例已经挂在完毕，可以操作DOM</li></ul><p><strong>更新前后：</strong></p><ul><li><code>beforeUpdate（更新前）:</code> 数据更新之前调用，还未渲染页面</li><li><code>updated（更新后）:</code>DOM重新渲染，此时数据和界面都是新的。</li></ul><p><strong>销毁前后：</strong></p><ul><li><code>beforeDestorye（销毁前）:</code>实例销毁前调用，这时候能够获取到<code>this</code></li><li><code>destoryed（销毁后）:</code>实例销毁后调用，实例完全被销毁。</li></ul></div><div class="story post-story"><h2 id="常用的属性、指令有哪些"><a href="#常用的属性、指令有哪些" class="headerlink" title="常用的属性、指令有哪些"></a>常用的属性、指令有哪些</h2><p><strong>属性</strong>：</p><ul><li><code>data</code>：用于定义组件的初始数据。</li><li><code>props</code>：用于传递数据给子组件。</li><li><code>computed</code>：用于定义计算属性。</li><li><code>methods</code>：用于定义组件的方法。</li><li><code>watch</code>：用于监听组件的数据变化。</li><li><code>components</code>：用于注册子组件。可以通过 <code>components</code> 属性将其他组件注册为当前组件的子组件，从而在模板中使用这些子组件。</li></ul><p><strong>指令</strong>：</p><ul><li><code>v-if</code>：条件渲染指令，根据表达式的真假来决定是否渲染元素。</li><li><code>v-show</code>：条件显示指令，根据表达式的真假来决定元素的显示和隐藏。</li><li><code>v-for</code>：列表渲染指令，用于根据数据源循环渲染元素列表。</li><li><code>v-bind</code>：属性绑定指令，用于动态绑定元素属性到 <code>Vue</code> 实例的数据。</li><li><code>v-on</code>：事件绑定指令，用于监听 <code>DOM</code> 事件，并执行对应的 <code>Vue</code> 方法。</li><li><code>v-model</code>：双向数据绑定指令，用于在表单元素和 <code>Vue</code> 实例的数据之间建立双向绑定关系。</li><li><code>v-text</code>：文本插值指令，用于将数据插入到元素的文本内容中。</li><li><code>v-html</code>：<code>HTML</code> 插值指令，用于将数据作为 <code>HTML</code> 解析并插入到元素中。</li></ul></div><div class="story post-story"><h2 id="Computed-和-Watch-的区别"><a href="#Computed-和-Watch-的区别" class="headerlink" title="Computed 和 Watch 的区别"></a>Computed 和 Watch 的区别</h2><p><code>computed</code>计算属性，通过对已有的属性值进行计算得到一个新值。它需要依赖于其他的数据，当数据发生变化时，<code>computed</code>会自动计算更新。<code>computed</code>属性值会被缓存，只有当依赖数据发生变化时才会重新计算，这样可以避免重复计算提高性能。</p><p><code>watch</code>用于监听数据的变化，并在变化时执行一些操作。它可以监听单个数据或者数组，当数据发生变化时会执行对应的回调函数，和<code>computed</code>不同的是<code>watch</code>不会有缓存。</p></div><div class="story post-story"><h2 id="Vue组件通信"><a href="#Vue组件通信" class="headerlink" title="Vue组件通信"></a>Vue组件通信</h2><p>父传子</p><ul><li>props</li><li>$children</li><li>$refs</li></ul><p>子传父</p><ul><li>$emit</li><li>$parent</li></ul><p>兄弟组件</p><ul><li>provied</li><li>inject</li><li>eventBus</li><li>Vuex</li></ul></div><div class="story post-story"><h2 id="常见的事件修饰符及其作用"><a href="#常见的事件修饰符及其作用" class="headerlink" title="常见的事件修饰符及其作用"></a>常见的事件修饰符及其作用</h2><ul><li><code>.stop</code>阻止冒泡</li><li><code>.prevent</code>阻止默认事件</li><li><code>.capture</code> ：与事件冒泡的方向相反，事件捕获由外到内；</li><li>.<code>self</code> ：只会触发自己范围内的事件，不包含子元素；</li><li><code>.once</code>：只会触发一次。</li></ul></div><div class="story post-story"><h2 id="v-if和v-show的区别"><a href="#v-if和v-show的区别" class="headerlink" title="v-if和v-show的区别"></a>v-if和v-show的区别</h2><p><code>v-if</code>元素不可见，直接删除DOM，有更高的切换消耗。 <code>v-show</code>通过设置元素<code>display: none</code>控制显示隐藏，更高的初始渲染消耗。</p></div><div class="story post-story"><h2 id="v-html-的原理"><a href="#v-html-的原理" class="headerlink" title="v-html 的原理"></a>v-html 的原理</h2><p>会先移除节点下的所有节点，调用<code>html</code>方法，通过<code>addProp</code>添加<code>innerHTML</code>属性，归根结底还是设置<code>innerHTML</code>为<code>v-html</code>的值。</p></div><div class="story post-story"><h2 id="v-model-是如何实现的，语法糖实际是什么？"><a href="#v-model-是如何实现的，语法糖实际是什么？" class="headerlink" title="v-model 是如何实现的，语法糖实际是什么？"></a>v-model 是如何实现的，语法糖实际是什么？</h2><p>Vue 中数据双向绑定是一个指令<code>v-model</code>，可以绑定一个响应式数据到视图，同时视图的变化能改变该值。</p><ul><li><strong>当作用在表单上</strong>：通过<code>v-bind:value</code>绑定数据，<code>v-on:input</code>来监听数据变化并修改<code>value</code></li><li><strong>当作用在组件上</strong>：本质上是一个父子通信语法糖，通过<code>props</code>和<code>$emit</code>实现。</li></ul></div><div class="story post-story"><h2 id="data为什么是一个函数而不是对象"><a href="#data为什么是一个函数而不是对象" class="headerlink" title="data为什么是一个函数而不是对象"></a>data为什么是一个函数而不是对象</h2><p>因为对象是一个引用类型，如果<code>data</code>是一个对象的情况下会造成多个组件共用一个<code>data</code>，<code>data</code>为一个函数，每个组件都会有自己的私有数据空间，不会干扰其他组件的运行。</p></div><div class="story post-story"><h2 id="mixin-和-mixins-区别"><a href="#mixin-和-mixins-区别" class="headerlink" title="mixin 和 mixins 区别"></a>mixin 和 mixins 区别</h2><ul><li><code>mixin</code> 用于全局混入，会影响到每个组件实例，通常插件都是这样做初始化的。</li><li><code>mixins</code> 应该是最常使用的扩展组件的方式了。如果多个组件中有相同的业务逻辑，就可以将这些逻辑剥离出来，通过 <code>mixins</code> 混入代码，比如上拉下拉加载数据这种逻辑等等。</li></ul></div><div class="story post-story"><h2 id="路由的hash和history模式的区别"><a href="#路由的hash和history模式的区别" class="headerlink" title="路由的hash和history模式的区别"></a>路由的hash和history模式的区别</h2><p><strong>hash模式</strong> 开发中默认的模式，地址栏URL后携带<code>#</code>，后面为路由。 原理是通过<code>onhashchange()</code>事件监听<code>hash</code>值变化，在页面<code>hash</code>值发生变化后，<code>window</code>就可以监听到事件改变，并按照规则加载相应的代码。<code>hash</code>值变化对应的URL都会被记录下来，这样就能实现浏览器历史页面前进后退。</p><p><strong>history模式</strong> <code>history</code>模式中URL没有<code>#</code>，这样相对<code>hash</code>模式更好看，但是需要后台配置支持。</p><p><code>history</code>原理是使用<code>HTML5 history</code>提供的<code>pushState</code>、<code>replaceState</code>两个API，用于浏览器记录历史浏览栈，并且在修改URL时不会触发页面刷新和后台数据请求。</p></div><div class="story post-story"><h2 id="router和route的区别"><a href="#router和route的区别" class="headerlink" title="router和route的区别"></a>router和route的区别</h2><ul><li><code>$route</code> 是路由信息，包括<code>path</code>、<code>params</code>、<code>query</code>、<code>name</code>等路由信息参数</li><li><code>$router</code> 是路由实例，包含了路由跳转方法、钩子函数等</li></ul></div><div class="story post-story"><h2 id="如何设置动态路由"><a href="#如何设置动态路由" class="headerlink" title="如何设置动态路由"></a>如何设置动态路由</h2><ul><li>params传参<ul><li>路由配置： <code>/index/:id</code></li><li>路由跳转：<code>this.$router.push(&#123;name: &#39;index&#39;, params: &#123;id: &quot;zs&quot;&#125;&#125;);</code></li><li>路由参数获取：<code>$route.params.id</code></li><li>最后形成的路由：<code>/index/zs</code></li></ul></li><li>query传参<ul><li>路由配置：<code>/index</code>正常的路由配置</li><li>路由跳转：<code>this.$rouetr.push(&#123;path: &#39;index&#39;, query:&#123;id: &quot;zs&quot;&#125;&#125;);</code></li><li>路由参数获取：<code>$route.query.id</code></li><li>最后形成的路由：<code>/index?id=zs</code></li></ul></li></ul><p><strong>区别</strong></p><ul><li>获取参数方式不一样，一个通过<code>$route.params</code>，一个通过 <code>$route.query</code></li><li>参数的生命周期不一样，<code>query</code>参数在URL地址栏中显示不容易丢失，<code>params</code>参数不会在地址栏显示，刷新后会消失</li></ul></div><div class="story post-story"><h2 id="路由守卫"><a href="#路由守卫" class="headerlink" title="路由守卫"></a>路由守卫</h2><ul><li>全局前置钩子：<code>beforeEach</code>、<code>beforeResolve</code>、<code>afterEach</code></li><li>路由独享守卫：<code>beforeEnter</code></li><li>组件内钩子：<code>beforeRouterEnter</code>、<code>beforeRouterUpdate</code>、<code>beforeRouterLeave</code></li></ul></div><div class="story post-story"><h2 id="Vue中key的作用"><a href="#Vue中key的作用" class="headerlink" title="Vue中key的作用"></a>Vue中key的作用</h2><p><code>key</code>的作用主要是为了高效的更新虚拟DOM，其原理是<code>vue</code>在<code>patch</code>过程中通过<code>key</code>可以精准判断两个节点是否是同一个，从而避免频繁更新不同元素，减少<code>DOM</code>操作量，提高性能。</p></div><div class="story post-story"><h2 id="为什么不建议用index作为key"><a href="#为什么不建议用index作为key" class="headerlink" title="为什么不建议用index作为key?"></a>为什么不建议用index作为key?</h2><p>如果将数组下标作为<code>key</code>值，那么当列表发生变化时，可能会导致<code>key</code>值发生改变，从而引发不必要的组件重新渲染，甚至会导致性能问题。例如，当删除列表中某个元素时，其后面的所有元素的下标都会发生改变，导致<code>Vue</code>重新渲染整个列表。</p></div><div class="story post-story"><h2 id="为什么v-for和v-if不能一起使用"><a href="#为什么v-for和v-if不能一起使用" class="headerlink" title="为什么v-for和v-if不能一起使用"></a>为什么v-for和v-if不能一起使用</h2><p><code>v-for</code>比<code>v-if</code>优先级更高，一起使用的话每次渲染列表时都要执行一次条件判断，造成不必要的计算，影响性能。</p><h1 id="原理知识"><a href="#原理知识" class="headerlink" title="原理知识"></a>原理知识</h1></div><div class="story post-story"><h2 id="双向数据绑定的原理"><a href="#双向数据绑定的原理" class="headerlink" title="双向数据绑定的原理"></a>双向数据绑定的原理</h2><p>采用<strong>数据劫持</strong>结合<strong>发布者-订阅者模式</strong>的方式，<code>data</code>数据在初始化的时候，会实例化一个<code>Observe</code>类，在它会将<code>data</code>数据进行递归遍历，并通过<code>Object.defineProperty</code>方法，给每个值添加上一个<code>getter</code>和一个<code>setter</code>。在数据读取的时候会触发<code>getter</code>进行依赖（Watcher）收集，当数据改变时，会触发<code>setter</code>，对刚刚收集的依赖进行触发，并且更新<code>watcher</code>通知视图进行渲染。</p></div><div class="story post-story"><h2 id="使用-Object-defineProperty-来进行数据劫持有什么缺点？"><a href="#使用-Object-defineProperty-来进行数据劫持有什么缺点？" class="headerlink" title="使用 Object.defineProperty() 来进行数据劫持有什么缺点？"></a>使用 Object.defineProperty() 来进行数据劫持有什么缺点？</h2><p>该方法只能监听到数据的修改，监听不到数据的新增和删除，从而不能触发组件更新渲染。vue2中会对数组的新增删除方法<code>push、pop、shift、unshift、splice、sort、reserve</code>通过重写的形式，在拦截里面进行手动收集触发依赖更新。</p></div><div class="story post-story"><h2 id="和Vue3相比有什么区别？"><a href="#和Vue3相比有什么区别？" class="headerlink" title="和Vue3相比有什么区别？"></a>和Vue3相比有什么区别？</h2><p><code>Vue3</code>采用了<code>Proxy</code>代理的方式，<code>Proxy</code>是ES6引入的一个新特性，它提供了一个用于创建代理对象的构造函数。它是对整个对象的监听和拦截，可以对对象所有操作进行处理。而<code>Object.defineProperty</code>只能监听单个属性的读写，无法监听新增、删除等操作。</p></div><div class="story post-story"><h2 id="Vue是如何收集依赖的？"><a href="#Vue是如何收集依赖的？" class="headerlink" title="Vue是如何收集依赖的？"></a>Vue是如何收集依赖的？</h2><p>依赖收集发生在<code>defineReactive()</code>方法中，在方法内<code>new Dep()</code>实例化一个<code>Dep()</code>实例，然后在<code>getter</code>中通过<code>dep.depend()</code>方法对数据依赖进行收集，然后在<code>settter</code>中通过<code>dep.notify()</code>通知更新。整个<code>Dep</code>其实就是一个观察者，吧收集的依赖存储起来，在需要的时候进行调用。在收集数据依赖的时候，会为数据创建一个<code>Watcher</code>，当数据发生改变通知每个<code>Watcher</code>，由<code>Wathcer</code>进行更新渲染。</p></div><div class="story post-story"><h2 id="slot是什么？有什么作用？原理是什么？"><a href="#slot是什么？有什么作用？原理是什么？" class="headerlink" title="slot是什么？有什么作用？原理是什么？"></a>slot是什么？有什么作用？原理是什么？</h2><p><code>slot</code>插槽，一般在封装组件的时候使用，在组件内不知道以那种形式来展示内容时，可以用<code>slot</code>来占据位置，最终展示形式由父组件以内容形式传递过来，主要分为三种：</p><ul><li><strong>默认插槽</strong>：又名匿名插槽，当<code>slot</code>没有指定<code>name</code>属性值的时候一个默认显示插槽，一个组件内只有有一个匿名插槽。</li><li><strong>具名插槽</strong>：带有具体名字的插槽，也就是带有<code>name</code>属性的<code>slot</code>，一个组件可以出现多个具名插槽。</li><li><strong>作用域插槽</strong>：默认插槽、具名插槽的一个变体，可以是匿名插槽，也可以是具名插槽，该插槽的不同点是在子组件渲染作用域插槽时，可以将子组件内部的数据传递给父组件，让父组件根据子组件的传递过来的数据决定如何渲染该插槽。</li></ul><p>实现原理：当子组件<code>vm</code>实例化时，获取到父组件传入的<code>slot</code>标签的内容，存放在<code>vm.$slot</code>中，默认插槽为<code>vm.$slot.default</code>，具名插槽为<code>vm.$slot.xxx</code>，xxx 为插槽名，当组件执行渲染函数时候，遇到<code>slot</code>标签，使用<code>$slot</code>中的内容进行替换，此时可以为插槽传递数据，若存在数据，则可称该插槽为作用域插槽。</p></div><div class="story post-story"><h2 id="对keep-alive的理解，它是如何实现的，具体缓存的是什么？"><a href="#对keep-alive的理解，它是如何实现的，具体缓存的是什么？" class="headerlink" title="对keep-alive的理解，它是如何实现的，具体缓存的是什么？"></a>对keep-alive的理解，它是如何实现的，具体缓存的是什么？</h2><p><code>keep-alive</code>是Vue.js的一个内置组件。它能够将不活动的组件实例保存在内存中，而不是直接将其销毁，它是一个抽象组件，不会被渲染到真实DOM中，也不会出现在父组件链中。</p><ul><li><code>include</code> 字符串或正则表达式，只有名称匹配的组件会被匹配；</li><li><code>exclude</code> 字符串或正则表达式，任何名称匹配的组件都不会被缓存；</li><li><code>max</code> 数字，最多可以缓存多少组件实例。</li></ul><p><strong>2 个生命周期 activated ， deactivated</strong></p><ul><li><code>activated</code>：当缓存的组件被激活时，该钩子函数被调用。可以在该钩子函数中进行一些状态恢复、数据更新等操作。</li><li><code>deactivated</code>：当缓存的组件被停用时，该钩子函数被调用。可以在该钩子函数中进行一些状态保存、数据清理等操作。</li></ul><p><code>keep-alive</code>内部其实是一个函数式组件，没有<code>template</code>标签。在<code>render</code>中通过获取组件的<code>name</code>和<code>include、exclude</code>进行匹配。匹配不成功，则不需要进行缓存，直接返回该组件的<code>vnode</code>。</p><p>匹配成功就进行缓存，获取组件的<code>key</code>在<code>cache</code>中进行查找，如果存在，则将他原来位置上的<code> key</code> 给移除，同时将这个组件的 <code>key</code> 放到数组最后面（<code>LRU</code>）也就实现了<code>max</code>功能。</p><p>不存在的话，就需要对组件进行缓存。将当前组件<code>push(key)</code>添加到尾部，然后再判断当前缓存的<code>max</code>是否超出指定个数，如果超出直接将第一个组件销毁（缓存淘汰策略LRU）。</p><blockquote><p>LRU（<strong>Least recently used</strong>，最近最少使用）算法根据数据的历史访问记录来进行淘汰数据，其核心思想是“如果数据最近被访问过，那么将来被访问的几率也更高”。</p></blockquote></div><div class="story post-story"><h2 id="nextTick-原理及作用"><a href="#nextTick-原理及作用" class="headerlink" title="$nextTick 原理及作用"></a>$nextTick 原理及作用</h2><p>Vue 的 <code>nextTick</code> 其本质是对 <code>JavaScript</code> 执行原理 <code>EventLoop</code> 的一种应用。 <code>nextTick</code>是将回调函数放到一个异步队列中，保证在异步更新DOM的<code>watcher</code>后面，从而获取到更新后的DOM。</p><p>因为在<code>created()</code>钩子函数中，页面的DOM还未渲染，这时候也没办法操作DOM，所以，此时如果想要操作DOM，必须将操作的代码放在<code>nextTick()</code>的回调函数中。</p></div><div class="story post-story"><h2 id="Vue模版编译原理"><a href="#Vue模版编译原理" class="headerlink" title="Vue模版编译原理"></a>Vue模版编译原理</h2><p>模版编译主要过程：<code>template ---&gt; ast ---&gt; render</code>，分别对象三个方法</p><ul><li><code>parse</code> 函数解析 <code>template</code></li><li><code>optimize</code> 函数优化静态内容</li><li><code>generate</code> 函数创建 <code>render</code> 函数字符串</li></ul><p>调用<code>parse</code>方法，将<code>template</code>转化为<code>AST</code>（抽象语法树），<code>AST</code>定义了三种类型，一种<code>html</code>标签，一种文本，一种插值表达式，并且通过 <code>children</code> 这个字段层层嵌套形成了树状的结构。</p><p><code>optimize</code>方法对<code>AST</code>树进行静态内容优化，分析出哪些是静态节点，给其打一个标记，为后续更新渲染可以直接跳过静态节点做优化。</p><p><code>generate</code>将<code>AST</code>抽象语法树编译成 <code>render</code>字符串，最后通过<code>new Function(render)</code>生成可执行的<code>render</code>函数</p><h1 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h1></div><div class="story post-story"><h2 id="Vuex-的原理"><a href="#Vuex-的原理" class="headerlink" title="Vuex 的原理"></a>Vuex 的原理</h2><p><code>Vuex</code>是专门为<code>Vue</code>设计的状态管理，当<code>Vue</code>从<code>store</code>中读取数据后，数据发生改变，组件中的数据也会发生变化。 <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/11c6fb9fc9d144259275183cc8fcf9a6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=701&h=551&e=png&b=ffffff" class="lazyload" data-srcset="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/11c6fb9fc9d144259275183cc8fcf9a6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=701&h=551&e=png&b=ffffff" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><ul><li><code>Vue Components</code> 负责接收用户操作交互行为，执行dispatch触发对应的action进行回应</li><li><code>dispatch</code>唯一能执行action的方法</li><li><code>action</code>用来接收components的交互行为，包含异步同步操作</li><li><code>commit</code>对mutation进行提交，唯一能执行mutation的方法</li><li><code>mutation</code>唯一可以修改state状态的方法</li><li><code>state</code>页面状态管理容器，用于存储状态</li><li><code>getters</code>读取state方法</li></ul><p>Vue组件接收交互行为，调用<code>dispatch</code>方法触发<code>action</code>相关处理，若页面状态需要改变，则调用<code>commit</code>方法提交<code>mutation</code>修改<code>state</code>，通过<code>getters</code>获取到<code>state</code>新值，重新渲染<code>Vue Components</code>，界面随之更新。</p></div><div class="story post-story"><h2 id="Vuex中action和mutation的区别"><a href="#Vuex中action和mutation的区别" class="headerlink" title="Vuex中action和mutation的区别"></a>Vuex中action和mutation的区别</h2><ul><li><code>mutation</code>更专注于修改<code>state</code>，必须是同步执行。</li><li><code>action</code>提交的是<code>mutation</code>，而不是直接更新数据，可以是异步的，如业务代码，异步请求。</li><li><code>action</code>可以包含多个<code>mutation</code></li></ul></div><div class="story post-story"><h2 id="Vuex-和-localStorage-的区别"><a href="#Vuex-和-localStorage-的区别" class="headerlink" title="Vuex 和 localStorage 的区别"></a>Vuex 和 localStorage 的区别</h2><ul><li><code>Vuex</code>存储在内存中，页面关闭刷新就会消失。而<code>localstorage</code>存储在本地，读取内存比读取硬盘速度要快</li><li><code>Vuex</code>应用于组件之间的传值，<code>localstorage</code>主要用于不同页面之间的传递</li><li><code>Vuex</code>是响应式的，<code>localstorage</code>需要刷新</li></ul><h1 id="虚拟DOM"><a href="#虚拟DOM" class="headerlink" title="虚拟DOM"></a>虚拟DOM</h1></div><div class="story post-story"><h2 id="对虚拟DOM的理解"><a href="#对虚拟DOM的理解" class="headerlink" title="对虚拟DOM的理解"></a>对虚拟DOM的理解</h2><p>虚拟DOM就是用JS对象来表述DOM节点，是对真实DOM的一层抽象。可以通过一些列操作使这个棵树映射到真实DOM上。</p><p>如在<code>Vue</code>中，会把代码转换为虚拟DOM，在最终渲染到页面，在每次数据发生变化前，都会缓存一份虚拟DOM，通过<code>diff</code>算法来对比新旧虚拟DOM记录到一个对象中按需更新，最后创建真实DOM，从而提升页面渲染性能。</p></div><div class="story post-story"><h2 id="虚拟DOM就一定比真实DOM更快吗"><a href="#虚拟DOM就一定比真实DOM更快吗" class="headerlink" title="虚拟DOM就一定比真实DOM更快吗"></a>虚拟DOM就一定比真实DOM更快吗</h2><p><strong>虚拟DOM不一定比真实DOM更快，而是在特定情况下可以提供更好的性能。</strong></p><p>在复杂情况下，虚拟DOM可以比真实DOM操作更快，因为它是在内存中维护一个虚拟的DOM树，将真实DOM操作转换为对虚拟DOM的操作，然后通过<code>diff</code>算法找出需要更新的部分，最后只变更这部分到真实DOM就可以。在频繁变更下，它可以批量处理这些变化从而减少对真实DOM的访问和操作，减少浏览器的回流重绘，提高页面渲染性能。</p><p>而在一下简单场景下，直接操作真实DOM可能会更快，当更新操作很少或者只是局部改变时，直接操作真实DOM比操作虚拟DOM更高效，省去了虚拟DOM的计算、对比开销。</p></div><div class="story post-story"><h2 id="虚拟DOM的解析过程"><a href="#虚拟DOM的解析过程" class="headerlink" title="虚拟DOM的解析过程"></a>虚拟DOM的解析过程</h2><ul><li>首先对将要插入到文档中的 DOM 树结构进行分析，使用 js 对象将其表示出来，比如一个元素对象，包含 <code>TagName</code>、<code>props</code> 和 <code>Children</code> 这些属性。然后将这个 js 对象树给保存下来，最后再将 DOM 片段插入到文档中。</li><li>当页面的状态发生改变，需要对页面的 DOM 的结构进行调整的时候，首先根据变更的状态，重新构建起一棵对象树，然后将这棵新的对象树和旧的对象树进行比较，记录下两棵树的的差异。</li><li>最后将记录的有差异的地方应用到真正的 DOM 树中去，这样视图就更新了。</li></ul></div><div class="story post-story"><h2 id="DIFF算法原理"><a href="#DIFF算法原理" class="headerlink" title="DIFF算法原理"></a>DIFF算法原理</h2><p><code>diff</code>的目的是找出差异，最小化的更新视图。 <code>diff</code>算法发生在视图更新阶段，当数据发生变化的时候，<code>diff</code>会对新旧虚拟DOM进行对比，只渲染有变化的部分。</p><ol><li><p>对比是不是同类型标签，不是同类型直接替换</p></li><li><p>如果是同类型标签，执行<code>patchVnode</code>方法，判断新旧<code>vnode</code>是否相等。如果相等，直接返回。</p></li><li><p>新旧</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vnode</span><br></pre></td></tr></table></figure><p>不相等，需要比对新旧节点，比对原则是以新节点为主，主要分为以下几种。</p><ol><li><code>newVnode</code> 和 <code>oldVnode</code>都有文本节点，用新节点替换旧节点。</li><li><code>newVnode</code>有子节点，<code>oldVnode</code>没有，新增<code>newVnode</code>的子节点。</li><li><code>newVnode</code>没有子节点，<code>oldVnode</code>有子节点，删除<code>oldVnode</code>中的子节点。</li><li><code>newVnode</code>和<code>oldVnode</code>都有子节点，通过<code>updateChildren</code>对比子节点。</li></ol></li></ol><p><strong>双端diff</strong></p><p><code>updateChildren</code>方法用来对比子节点是否相同，将新旧节点同级进行比对，减少比对次数。会创建4个指针，分别指向新旧两个节点的首尾，首和尾指针向中间移动。</p><p>每次对比下两个头指针指向的节点、两个尾指针指向的节点，头和尾指向的节点，是不是 key是一样的，也就是可复用的。如果是重复的，直接patch更新一下，如果是头尾节点，需要进行移动位置，结果以新节点的为主。</p><p>如果都没有可以复用的节点，就从旧的<code>vnode</code>中查找，然后进行移动，没有找到就插入一个新节点。</p><p>当比对结束后，此时新节点还有剩余，就批量增加，如果旧节点有剩余就批量删除。</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;组合式API-reactive和ref函数&quot;&gt;&lt;a href=&quot;#组合式API-reactive和ref函数&quot; class=&quot;headerlink&quot; title=&quot;组合式API - reactive和ref函数&quot;&gt;&lt;/a&gt;组合式API - reactive和ref</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="vue3" scheme="http://example.com/tags/vue3/"/>
    
  </entry>
  
  <entry>
    <title>vue3-rabbit小兔鲜电商项目</title>
    <link href="http://example.com/2024/10/01/vue3-rabbit%E5%B0%8F%E5%85%94%E9%B2%9C%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/"/>
    <id>http://example.com/2024/10/01/vue3-rabbit%E5%B0%8F%E5%85%94%E9%B2%9C%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/</id>
    <published>2024-10-01T14:48:11.000Z</published>
    <updated>2025-01-21T13:30:04.330Z</updated>
    
    <content type="html"><![CDATA[<h1 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h1><p>vue3+JavaScript+vue-router+pinia+element-plus+axios+echarts+vueuse</p><h1 id="创建项目并整理目录"><a href="#创建项目并整理目录" class="headerlink" title="创建项目并整理目录"></a>创建项目并整理目录</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init vue@latest</span><br></pre></td></tr></table></figure><div class="story post-story"><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><table><thead><tr><th>文件夹</th><th>作用</th></tr></thead><tbody><tr><td>apis</td><td>接口</td></tr><tr><td>assets</td><td>静态资源</td></tr><tr><td>components</td><td>通用组件</td></tr><tr><td>composables</td><td>组合函数</td></tr><tr><td>directives</td><td>全局指令</td></tr><tr><td>router</td><td>路由Router</td></tr><tr><td>stores</td><td>Pinia仓库</td></tr><tr><td>styles</td><td>全局样式文件夹</td></tr><tr><td>utils</td><td>工具函数</td></tr><tr><td>views</td><td>页面级组件</td></tr></tbody></table><h1 id="关联远程github项目"><a href="#关联远程github项目" class="headerlink" title="关联远程github项目"></a>关联远程github项目</h1><p>git init </p><p>git add .</p><p>git commit -m “init”</p><p>git remote add origin …</p><p>git branch -M main</p><p>git push –set-upstream origin main</p><h1 id="jsconfig-json配置别名路径"><a href="#jsconfig-json配置别名路径" class="headerlink" title="jsconfig.json配置别名路径"></a>jsconfig.json配置别名路径</h1><blockquote><p>配置别名路径可以在写代码时联想提示路径</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;./&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;paths&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;src/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="elementPlus引入"><a href="#elementPlus引入" class="headerlink" title="elementPlus引入"></a>elementPlus引入</h1></div><div class="story post-story"><h2 id="安装elementPlus和自动导入插件"><a href="#安装elementPlus和自动导入插件" class="headerlink" title="安装elementPlus和自动导入插件"></a>安装elementPlus和自动导入插件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install element-plus</span><br><span class="line">npm install -D unplugin-vue-components unplugin-auto-import</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="配置自动按需导入"><a href="#配置自动按需导入" class="headerlink" title="配置自动按需导入"></a>配置自动按需导入</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入插件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 配置插件</span></span><br><span class="line">    <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="title class_">Components</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="测试组件"><a href="#测试组件" class="headerlink" title="测试组件"></a>测试组件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot;&gt;i am button&lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h1 id="定制elementPlus主题"><a href="#定制elementPlus主题" class="headerlink" title="定制elementPlus主题"></a>定制elementPlus主题</h1></div><div class="story post-story"><h2 id="安装sass"><a href="#安装sass" class="headerlink" title="安装sass"></a>安装sass</h2><blockquote><p>基于vite的项目默认不支持css预处理器，需要开发者单独安装</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i sass -D</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="准备定制化的样式文件"><a href="#准备定制化的样式文件" class="headerlink" title="准备定制化的样式文件"></a>准备定制化的样式文件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 只需要重写你需要的即可 */</span></span><br><span class="line">@forward <span class="string">&#x27;element-plus/theme-chalk/src/common/var.scss&#x27;</span> <span class="title function_">with</span> (</span><br><span class="line">  <span class="attr">$colors</span>: (</span><br><span class="line">    <span class="string">&#x27;primary&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 主色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #27ba9b,</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">&#x27;success&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 成功色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #1dc779,</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">&#x27;warning&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 警告色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #ffb302,</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">&#x27;danger&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 危险色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #e26237,</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">&#x27;error&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 错误色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #cf4444,</span><br><span class="line">    ),</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="自动导入配置"><a href="#自动导入配置" class="headerlink" title="自动导入配置"></a>自动导入配置</h2><blockquote><p>这里自动导入需要深入到elementPlus的组件中，按照官方的配置文档来</p><ol><li>自动导入定制化样式文件进行样式覆盖</li><li>按需定制主题配置 （需要安装 unplugin-element-plus）</li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fileURLToPath, <span class="variable constant_">URL</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;node:url&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">vue</span>(),</span><br><span class="line">    <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="title class_">Components</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>(&#123;<span class="attr">importStyle</span>: <span class="string">&quot;sass&quot;</span>&#125;)],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: <span class="title function_">fileURLToPath</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;./src&#x27;</span>, <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">url</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">preprocessorOptions</span>: &#123;</span><br><span class="line">      <span class="attr">scss</span>: &#123;</span><br><span class="line">        <span class="comment">// 自动导入定制化样式文件进行样式覆盖</span></span><br><span class="line">        <span class="attr">additionalData</span>: <span class="string">`</span></span><br><span class="line"><span class="string">          @use &quot;@/styles/element/index.scss&quot; as *;</span></span><br><span class="line"><span class="string">        `</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="axios安装并简单封装"><a href="#axios安装并简单封装" class="headerlink" title="axios安装并简单封装"></a>axios安装并简单封装</h1></div><div class="story post-story"><h2 id="安装axios"><a href="#安装axios" class="headerlink" title="安装axios"></a>安装axios</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i axios</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h2><blockquote><p>官方文档地址：<a href="https://axios-http.com/zh/docs/intro">https://axios-http.com/zh/docs/intro</a><br>基础配置通常包括：</p><ol><li>实例化 - baseURL + timeout</li><li>拦截器 - 携带token 401拦截等</li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useUserStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/stores/user&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/theme-chalk/el-message.css&#x27;</span></span><br><span class="line"><span class="comment">// 创建axios实例</span></span><br><span class="line"><span class="keyword">const</span> httpInstance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://pcapi-xiaotuxian-front-devtest.itheima.net&#x27;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">5000</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// axios请求拦截器</span></span><br><span class="line">httpInstance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> userStore = <span class="title function_">useUserStore</span>()</span><br><span class="line">    <span class="keyword">const</span> token = userStore.<span class="property">userInfo</span>.<span class="property">token</span></span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">        config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`Bearer <span class="subst">$&#123;token&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="function"><span class="params">e</span> =&gt;</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(e))</span><br><span class="line"></span><br><span class="line"><span class="comment">// axios响应式拦截器</span></span><br><span class="line">httpInstance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="property">data</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> userStore = <span class="title function_">useUserStore</span>()</span><br><span class="line">    <span class="title class_">ElMessage</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>,</span><br><span class="line">        <span class="attr">message</span>: e.<span class="property">response</span>.<span class="property">data</span>.<span class="property">message</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//401token失效处理</span></span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">response</span>.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">        userStore.<span class="title function_">clearUserInfo</span>()</span><br><span class="line">        router.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(e)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> httpInstance</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="封装请求函数并测试"><a href="#封装请求函数并测试" class="headerlink" title="封装请求函数并测试"></a>封装请求函数并测试</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;@/utils/http&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getCategoryAPI</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">http</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;home/category/head&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="路由整体设计"><a href="#路由整体设计" class="headerlink" title="路由整体设计"></a>路由整体设计</h1><p>路由设计原则：找页面的切换方式，如果是整体切换，则为一级路由，如果是在一级路由的内部进行的内容切换，则为二级路由</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  我是登录页</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  我是首页</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  我是home</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  我是分类</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// createRouter：创建router实例对象</span></span><br><span class="line"><span class="comment">// createWebHistory：创建history模式的路由</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Login/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Layout</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Layout/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Home/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Category</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Category/index.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line">  <span class="comment">// path和component对应关系的位置</span></span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">      <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Home</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Category</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Login</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><h1 id="静态资源引入和Error-Lens安装"><a href="#静态资源引入和Error-Lens安装" class="headerlink" title="静态资源引入和Error Lens安装"></a>静态资源引入和Error Lens安装</h1></div><div class="story post-story"><h2 id="静态资源引入"><a href="#静态资源引入" class="headerlink" title="静态资源引入"></a>静态资源引入</h2><ol><li>图片资源 - 把 images 文件夹放到 assets 目录下</li><li>样式资源 - 把 common.scss 文件放到 styles 目录下</li></ol></div><div class="story post-story"><h2 id="Error-Lens插件安装"><a href="#Error-Lens插件安装" class="headerlink" title="Error Lens插件安装"></a>Error Lens插件安装</h2><h1 id="scss变量自动导入"><a href="#scss变量自动导入" class="headerlink" title="scss变量自动导入"></a>scss变量自动导入</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//   <span class="attribute">src</span>/styles/<span class="selector-tag">var</span><span class="selector-class">.scss</span></span><br><span class="line">$xtxColor: <span class="number">#27ba9b</span>;</span><br><span class="line">$helpColor: <span class="number">#e26237</span>;</span><br><span class="line">$sucColor: <span class="number">#1dc779</span>;</span><br><span class="line">$warnColor: <span class="number">#ffb302</span>;</span><br><span class="line">$priceColor: <span class="number">#cf4444</span>;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">css<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    preprocessorOptions<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      scss<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="comment">// 自动导入scss文件</span></span><br><span class="line">        additionalData<span class="punctuation">:</span> `</span><br><span class="line">          @use <span class="string">&quot;@/styles/element/index.scss&quot;</span> as *;</span><br><span class="line">          @use <span class="string">&quot;@/styles/var.scss&quot;</span> as *;</span><br><span class="line">        `<span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="懒加载指令实现"><a href="#懒加载指令实现" class="headerlink" title="懒加载指令实现"></a>懒加载指令实现</h1></div><div class="story post-story"><h2 id="封装全局指令"><a href="#封装全局指令" class="headerlink" title="封装全局指令"></a>封装全局指令</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useIntersectionObserver &#125; <span class="keyword">from</span> <span class="string">&#x27;@vueuse/core&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> lazyPlugin = &#123;</span><br><span class="line">    <span class="title function_">install</span>(<span class="params">app</span>) &#123;</span><br><span class="line">        app.<span class="title function_">directive</span>(<span class="string">&#x27;img-lazy&#x27;</span>, &#123;</span><br><span class="line">            <span class="title function_">mounted</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">                <span class="comment">// el: 指令绑定的那个元素 img</span></span><br><span class="line">                <span class="comment">// binding: binding.value  指令等于号后面绑定的表达式的值  图片url</span></span><br><span class="line">                <span class="keyword">const</span> &#123; stop &#125; = <span class="title function_">useIntersectionObserver</span>(</span><br><span class="line">                    el,</span><br><span class="line">                    <span class="function">(<span class="params">[&#123; isIntersecting &#125;]</span>) =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (isIntersecting) &#123;</span><br><span class="line">                            el.<span class="property">src</span> = binding.<span class="property">value</span></span><br><span class="line">                            <span class="title function_">stop</span>()</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="注册全局指令"><a href="#注册全局指令" class="headerlink" title="注册全局指令"></a>注册全局指令</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局指令注册</span></span><br><span class="line"><span class="keyword">import</span> &#123; lazyPlugin &#125; <span class="keyword">from</span> <span class="string">&#x27;@/directives&#x27;</span></span><br><span class="line">app.<span class="title function_">use</span>(lazyPlugin)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="图片懒加载"><a href="#图片懒加载" class="headerlink" title="图片懒加载"></a>图片懒加载</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;home-product&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">HomePanel</span> <span class="attr">:title</span>=<span class="string">&quot;cate.name&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;cate in goodsProduct&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;cate.id&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">class</span>=<span class="string">&quot;cover&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指令替换 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-img-lazy</span>=<span class="string">&quot;cate.picture&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;goods in cate.goods&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;goods.id&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span> <span class="attr">class</span>=<span class="string">&quot;goods-item&quot;</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!-- 指令替换 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-img-lazy</span>=<span class="string">&quot;goods.picture&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">HomePanel</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="路由缓存"><a href="#路由缓存" class="headerlink" title="路由缓存"></a>路由缓存</h1><p>路由缓存问题：路由只有参数变化时，会复用组件实例，导致页面不更新</p><p>解决方法：</p><ol><li>不在意性能，在RouterView标签里加key属性</li><li>选择路由的onBeforeRouteUpdate方法</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onBeforeRouteUpdate</span>(<span class="function">(<span class="params">to</span>)=&gt;</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="路由切换自动滚动至顶部"><a href="#路由切换自动滚动至顶部" class="headerlink" title="路由切换自动滚动至顶部"></a>路由切换自动滚动至顶部</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line">  <span class="attr">routes</span>: [...</span><br><span class="line">  ],</span><br><span class="line">  <span class="title function_">scrollBehavior</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">top</span>:<span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="Pinia持久化存储"><a href="#Pinia持久化存储" class="headerlink" title="Pinia持久化存储"></a>Pinia持久化存储</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; loginAPI &#125; <span class="keyword">from</span> <span class="string">&quot;@/apis/user&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> userInfo = <span class="title function_">ref</span>(&#123;&#125;)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">getUserInfo</span> = <span class="keyword">async</span> (<span class="params">&#123; account, password &#125;</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">loginAPI</span>(&#123; account, password &#125;)</span><br><span class="line">        userInfo.<span class="property">value</span> = res.<span class="property">result</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">clearUserInfo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        userInfo.<span class="property">value</span> = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        userInfo,</span><br><span class="line">        getUserInfo,</span><br><span class="line">        clearUserInfo</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">persist</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="项目亮点"><a href="#项目亮点" class="headerlink" title="项目亮点"></a>项目亮点</h2><h5 id="1-自定义vue指令v-lazy-img"><a href="#1-自定义vue指令v-lazy-img" class="headerlink" title="1) 自定义vue指令v-lazy-img"></a>1) 自定义vue指令v-lazy-img</h5><p>背景: 电商平台项目有大量的商品图与详情图, 同时大量加载与渲染图片资源会挤占带宽, 首页白屏与加载时间过长,体验不好, 所以需要使用到图片懒加载。封装成vue指令是为了在项目各文件中更便捷使用。<br> 原理：使用vueUse函数库里的useIntersectionObserver函数，检测目标元素在窗口中是否可见。利用这个函数来定义懒加载插件,核心逻辑就是当图片进入到视口区域,就把url赋值给src,但是因为useIntersectionObserver对于元素的监听是一直存在的,这样就存在一个内存浪费的问题，虽然图片已经加载完毕了,但是鼠标滑动时仍然在监听，这时要调用函数的返回对象的stop函数,让它对于已经加载好的图片不再重复监听。</p><h5 id="2-axios的二次封装"><a href="#2-axios的二次封装" class="headerlink" title="2) axios的二次封装"></a>2) axios的二次封装</h5><p>引入axios并创建实例, 添加请求拦截器与响应拦截器, 在请求拦截器中，如果token存在，则在请求头中添加一个Authorization字段。在响应拦截器中，配置请求出错时的错误处理函数，使用element-plus的ELMessage组件来显示服务器返回的错误信息，如果返回状态码为401（未授权），就要进行token失效处理，需要清除用户信息并重定向到登录页面。</p><h6 id="为什么要在请求拦截器携带Token参数"><a href="#为什么要在请求拦截器携带Token参数" class="headerlink" title="为什么要在请求拦截器携带Token参数"></a>为什么要在请求拦截器携带Token参数</h6><p>Token作为用户标识，在很多个接口中都需要携带才可以正确获取数据。为了统一控制采取在请求拦截器携带的方案</p><h5 id="3-pinia在项目中的使用"><a href="#3-pinia在项目中的使用" class="headerlink" title="3)  pinia在项目中的使用"></a>3)  pinia在项目中的使用</h5><p>Pinia是Vue的专属的最新状态管理库，是Vuex状态管理工具的替代品</p><p>项目中使用到了pinia的模块：</p><ul><li>用户模块：获取用户信息并登录成功后储存用户信息、退出登录时清除用户信息</li><li>首页的nav模块：定义导航数据，接口获取导航。在首页导航与吸顶导航中调用，避免代码重复与冗余。</li><li>购物车模块：购物车的增删改查，清空购物车，以及一些总价、总数量等的计算属性</li></ul><h5 id="4）如何持久化本地pinia数据？"><a href="#4）如何持久化本地pinia数据？" class="headerlink" title="4）如何持久化本地pinia数据？"></a>4）如何持久化本地pinia数据？</h5><p>1、用户数据中有一个关键的数据叫做Token（用来标识当前用户是否登录），而Token持续一段时间才会过期<br> 2、Pinia的存储是基于内存的，刷新就丢失，为了保持登录状态就要做到刷新不丢失，需要配合持久化进行存储<br> 3、有两种方式，本地存储localStorage，以及pinia的插件pinia-plugin-persistedstate</p><h5 id="5）路由缓存问题，即路由跳转时，页面没有更新"><a href="#5）路由缓存问题，即路由跳转时，页面没有更新" class="headerlink" title="5）路由缓存问题，即路由跳转时，页面没有更新"></a>5）路由缓存问题，即路由跳转时，页面没有更新</h5><p>什么是路由缓存问题：使用带有参数的路由时需要注意的是，当用户从／users／johnny 导航到／users／jolyne 时，相同的组件实例将被重复使用。因为两个路由都渲染同个组件，比起销毁再创建，复用则显得更加高效。不过，这也意味着组件的生命周期钩子不会被调用。</p><p>问题：一级分类的切换正好满足上面的条件，组件实例复用，导致分类数据无法更新</p><p>解决问题的思路：</p><ol><li>让组件实例不复用，强制销毁重建 。<br> 给router-view添加key属性</li><li>监听路由变化，变化之后执行数据更新操作。<br> 当router更新时重新发送页面请求 <code>onBeforeRouteUpdate((to)=&gt;&#123;getNavList(to.params.id)&#125;)</code></li></ol><h5 id="6）瀑布流布局，实现商品列表的无限加载功能"><a href="#6）瀑布流布局，实现商品列表的无限加载功能" class="headerlink" title="6）瀑布流布局，实现商品列表的无限加载功能"></a>6）瀑布流布局，实现商品列表的无限加载功能</h5><p>需求背景：在商品筛选结果页与商品列表页，监听页面触底时重新触发列表数据的请求与加载，使得用户浏览行为不被打断。</p><p>核心实现逻辑：使用elementPlus提供的v-infinite-scroll指令监听是否满足触底条件，满足加载条件时让页数参数加一获取下一页数据，做新老数据拼接渲染。加载完毕结束监听。</p><h5 id="7）支付业务流程"><a href="#7）支付业务流程" class="headerlink" title="7）支付业务流程"></a>7）支付业务流程</h5><p><img src="/../images/20452763-915297011818974b.png" class="lazyload" data-srcset="/../images/20452763-915297011818974b.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="20452763-915297011818974b"></p><p>主要关注客户端与后端服务之间的交互</p><h5 id="8）定制路由滚动行为"><a href="#8）定制路由滚动行为" class="headerlink" title="8）定制路由滚动行为"></a>8）定制路由滚动行为</h5><p>当切换路由时，页面自动滚动到顶部，在router文件中进行配置</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  history: createWebHistory(<span class="keyword">import</span>.meta.env.BASE_URL),</span><br><span class="line">  routes: [],</span><br><span class="line">  <span class="comment">// 路由行为的配置项 切换路由时自动滚回顶部</span></span><br><span class="line">  scrollBehavior()&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      top:<span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="9）手动实现导航组件的吸顶展示功能"><a href="#9）手动实现导航组件的吸顶展示功能" class="headerlink" title="9）手动实现导航组件的吸顶展示功能"></a>9）手动实现导航组件的吸顶展示功能</h5><ul><li>需求背景：当首页页面过长时，使用吸顶效果，使得用户在滑动读取数据的时候把导航条一直固定在屏幕上方，以便用户快速操作和交互。</li><li>逻辑实现：vueuse中的获取滚动距离顶部的y轴参数，当滚动距离大于100（页面header部分的高度）时，添加show类名，实现吸顶效果</li></ul><h5 id="10）在路由页面，使用导航守卫，配置路由跳转前后的行为"><a href="#10）在路由页面，使用导航守卫，配置路由跳转前后的行为" class="headerlink" title="10）在路由页面，使用导航守卫，配置路由跳转前后的行为"></a>10）在路由页面，使用导航守卫，配置路由跳转前后的行为</h5><p>主要实现以下几点：<br> 1、配置页面跳转的loading动效<br> 2、切换路由时自动滚回页面顶部<br> 3、没有登录时，在地址栏输入url，不能直接跳转到相对应的页面<br> 4、页面标题随着meta进行变化</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElLoading</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/theme-chalk/el-loading.css&#x27;</span></span><br><span class="line"><span class="comment">// 跳转前</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="title class_">ElLoading</span>.<span class="title function_">service</span>(&#123;</span><br><span class="line">    <span class="attr">fullscreen</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&#x27;Loading...&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 跳转后</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> loadingInstance = <span class="title class_">ElLoading</span>.<span class="title function_">service</span>()</span><br><span class="line">    loadingInstance.<span class="title function_">close</span>()</span><br><span class="line">  &#125;,<span class="number">1000</span>)</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span> || <span class="string">&#x27;my project&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;技术栈&quot;&gt;&lt;a href=&quot;#技术栈&quot; class=&quot;headerlink&quot; title=&quot;技术栈&quot;&gt;&lt;/a&gt;技术栈&lt;/h1&gt;&lt;p&gt;vue3+JavaScript+vue-router+pinia+element-plus+axios+echarts+vueuse</summary>
      
    
    
    
    <category term="项目" scheme="http://example.com/categories/%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>2024-9-30</title>
    <link href="http://example.com/2024/09/30/2024-9-30/"/>
    <id>http://example.com/2024/09/30/2024-9-30/</id>
    <published>2024-09-30T12:56:07.000Z</published>
    <updated>2024-10-09T16:09:43.468Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="😀😀"><a href="#😀😀" class="headerlink" title="😀😀"></a>😀😀</h2><p><img src="/../images/30.jpg" class="lazyload" data-srcset="/../images/30.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="像动漫里的天空"></p><p><img src="/../images/31.jpg" class="lazyload" data-srcset="/../images/31.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p></div><div class="story post-story"><h2 id="发财了发财了！"><a href="#发财了发财了！" class="headerlink" title="发财了发财了！"></a>发财了发财了！</h2><p><img src="/../images/32.jpg" class="lazyload" data-srcset="/../images/32.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="研究生低保嘿嘿"></p><p><img src="/../images/33.jpg" class="lazyload" data-srcset="/../images/33.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="入学奖学金吼吼"></p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;😀😀&quot;&gt;&lt;a href=&quot;#😀😀&quot; class=&quot;headerlink&quot; title=&quot;😀😀&quot;&gt;&lt;/a&gt;😀😀&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/../images/30.jpg&quot; cla</summary>
      
    
    
    
    <category term="随笔" scheme="http://example.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>JavaScript</title>
    <link href="http://example.com/2024/09/28/JavaScript/"/>
    <id>http://example.com/2024/09/28/JavaScript/</id>
    <published>2024-09-28T03:21:13.000Z</published>
    <updated>2025-03-05T15:37:39.143Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="输入输出语句"><a href="#输入输出语句" class="headerlink" title="输入输出语句"></a>输入输出语句</h2><ul><li>prompt(info)</li><li>alert(msg)</li><li>console.log(msg)</li></ul></div><div class="story post-story"><h2 id="undefined与null"><a href="#undefined与null" class="headerlink" title="undefined与null"></a>undefined与null</h2><ul><li>undefined表示没有赋值，未定义数据类型</li><li>null表示值为空，空数据类型。如果一个变量里面确定存放的是对象，如果还没准备好对象，可以放一个null</li></ul></div><div class="story post-story"><h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><h3 id="隐式转换"><a href="#隐式转换" class="headerlink" title="隐式转换"></a>隐式转换</h3><ul><li><p>+号两边只要有一个是字符串，都会把另外一个转成字符串</p></li><li><p>-，*，&#x2F;，%：字符串转数字型后计算</p></li><li><p>+作为正号解析可以转换成数字型</p></li></ul><h3 id="显示转换"><a href="#显示转换" class="headerlink" title="显示转换"></a>显示转换</h3><ul><li><code>+|Number()|parseInt()|parseFloat()</code>:转换为数字型</li></ul></div><div class="story post-story"><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><table><thead><tr><th>方法&#x2F;属性</th><th>作用</th></tr></thead><tbody><tr><td>arr.length</td><td>获取数组长度</td></tr><tr><td>arr.at()</td><td>接收一个整数值并返回该索引对应的元素，允许正数和负数。负整数从数组中的最后一个元素开始倒数。</td></tr><tr><td>arr.concat()</td><td>合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组。可以用来拷贝数组</td></tr><tr><td>arr.every()</td><td>测试一个数组内的所有元素是否都能通过指定函数的测试。它返回一个布尔值。</td></tr><tr><td>arr.fill(element,i,j)</td><td>用一个固定值填充一个数组中从起始索引（默认为 <code>0</code>）到终止索引（默认为 <code>array.length</code>）内的全部元素。它返回修改后的数组。</td></tr><tr><td>arr.filter()</td><td>创建给定数组一部分的<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Shallow_copy">浅拷贝</a>，其包含通过所提供函数实现的测试的所有元素。</td></tr><tr><td>arr.find()</td><td>返回数组中满足提供的测试函数的第一个元素的值。否则返回 undefined。</td></tr><tr><td>arr.findIndex()</td><td>返回数组中满足提供的测试函数的第一个元素的索引。若没有找到对应元素则返回 -1。</td></tr><tr><td>arr.findLast()</td><td>反向迭代数组，并返回满足提供的测试函数的第一个元素的值。如果没有找到对应元素，则返回 undefined。</td></tr><tr><td>arr.findLastIndex()</td><td>反向迭代数组，并返回满足所提供的测试函数的第一个元素的索引。若没有找到对应元素，则返回 -1。</td></tr><tr><td>arr.flat(Infinity)</td><td>创建一个新的数组，并根据指定深度递归地将所有子数组元素拼接到新的数组中。</td></tr><tr><td>arr.forEach()</td><td>对数组的每个元素执行一次给定的函数。</td></tr><tr><td>arr.includes()</td><td>判断一个数组是否包含一个指定的值，根据情况，如果包含则返回 <code>true</code>，否则返回 <code>false</code>。</td></tr><tr><td>arr.indexOf()</td><td>返回数组中第一次出现给定元素的下标，如果不存在则返回 -1。</td></tr><tr><td>arr.join()</td><td>将一个数组（或一个类数组对象）的所有元素连接成一个字符串并返回这个字符串，用逗号或指定的分隔符字符串分隔。</td></tr><tr><td>arr.findLastIndexOf(element,fromIndex)</td><td>返回数组中给定元素最后一次出现的索引，如果不存在则返回 -1。该方法从 fromIndex 开始向前搜索数组。</td></tr><tr><td>arr.map()</td><td>创建一个新数组，这个新数组由原数组中的每个元素都调用一次提供的函数后的返回值组成。</td></tr><tr><td>arr.pop()</td><td>数组中删除最后一个元素，并返回该元素的值。</td></tr><tr><td>arr.push()</td><td>将指定的元素添加到数组的末尾，并返回新的数组长度。</td></tr><tr><td>arr.reduce((pre,current)&#x3D;&gt;func,initial)</td><td>对数组中的每个元素按序执行一个提供的 reducer 函数，每一次运行 reducer 会将先前元素的计算结果作为参数传入，最后将其结果汇总为单个返回值。</td></tr><tr><td>arr.reverse()</td><td>就地反转数组中的元素，并返回同一数组的引用。</td></tr><tr><td>arr.toReversed()</td><td>不改变原始数组的情况下反转数组中的元素。</td></tr><tr><td>arr.shift()</td><td>从数组中删除第一个元素，并返回该元素的值。</td></tr><tr><td>arr.slice(start,end)</td><td>返回一个新的数组对象，这一对象是一个由 start 和 end 决定的原数组的浅拷贝（包括 start，不包括 end），其中 start 和 end 代表了数组元素的索引。原始数组不会被改变。</td></tr><tr><td>arr.some()</td><td>测试数组中是否至少有一个元素通过了由提供的函数实现的测试。如果在数组中找到一个元素使得提供的函数返回 true，则返回 true；否则返回 false</td></tr><tr><td>arr.sort((a,b)&#x3D;&gt;a-b)</td><td>就地对数组的元素进行排序，并返回对相同数组的引用。默认排序是将元素转换为字符串，然后按照它们的 UTF-16 码元值升序排序。</td></tr><tr><td>arr.toSorted()</td><td>对数组的元素进行排序，不改变原数组，并返回新的数组。</td></tr><tr><td>arr.splice(splice(start, deleteCount, item1,……))</td><td>就地移除或者替换已存在的元素和&#x2F;或添加新的元素。</td></tr><tr><td>arr.toSpliced()</td><td>创建一个删除和&#x2F;或替换部分内容而不改变原数组的新数组。</td></tr><tr><td>arr.unshift()</td><td>将指定元素添加到数组的开头，并返回数组的新长度。</td></tr></tbody></table></div><div class="story post-story"><h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><table><thead><tr><th>属性&#x2F;方法</th><th>描述</th></tr></thead><tbody><tr><td>Object.keys(obj)</td><td>获得所有的属性名（数组）</td></tr><tr><td>Object.values(obj)</td><td>获得所有的属性值（数组）</td></tr><tr><td>Object.assign(copyObj,obj)</td><td>拷贝对象（浅拷贝）,常用以配置对象合并</td></tr><tr><td>Object.entries(obj)</td><td>返回对象的所有可枚举属性[key,value]数组</td></tr><tr><td>for(let key in obj)  obj[key]</td><td>遍历对象</td></tr><tr><td>Math.random()</td><td>生成0-1之间的随机数</td></tr><tr><td>Math.ceil()</td><td>向上取整</td></tr><tr><td>Math.floor()</td><td>向下取整</td></tr><tr><td>Math.max()</td><td>找最大值</td></tr><tr><td>Math.min()</td><td>找最小值</td></tr><tr><td>Math.pow()</td><td>幂运算</td></tr><tr><td>Math.abs()</td><td>绝对值</td></tr><tr><td>Math.sign()</td><td>获取符号</td></tr><tr><td>date.getfullYear()</td><td>以四位数字返回年份。</td></tr><tr><td>date.getMonth()</td><td>返回月份 (0 ~ 11)。</td></tr><tr><td>date.getDate()</td><td>返回一个月中的某一天 (1 ~ 31)。</td></tr><tr><td>date.getDay()</td><td>返回一周中的某一天 (0 ~ 6)。</td></tr><tr><td>date.getHours()</td><td>返回小时 (0 ~ 23)。</td></tr><tr><td>date.getMinutes()</td><td>返回分钟 (0 ~ 59)。</td></tr><tr><td>date.getSeconds()</td><td>返回秒数 (0 ~ 59)。</td></tr><tr><td>date.getTime()|+new Date()|Date.now()</td><td>获取时间戳</td></tr><tr><td>str.length</td><td>字符串的长度</td></tr><tr><td>str.concat(s)</td><td>连接两个或更多字符串，并返回新的字符串</td></tr><tr><td>str.endsWith(s[,检测位置索引号])</td><td>判断当前字符串是否是以指定的子字符串结尾的（区分大小写）</td></tr><tr><td>str.indexOf(s)</td><td>返回某个指定的字符串值在字符串中首次出现的位置</td></tr><tr><td>str.lastIndexOf(s)</td><td>从后向前搜索字符串，并从起始位置（0）开始计算返回字符串最后出现的位置。</td></tr><tr><td>str.includes(s[,检测位置索引号])</td><td>查找字符串中是否包含指定的子字符串</td></tr><tr><td>str.match(reg)</td><td>查找找到一个或多个正则表达式的匹配</td></tr><tr><td>str.split(‘分隔符’)</td><td>把字符串分割为字符串数组</td></tr><tr><td>str.substring(from,to)</td><td>提取字符串中两个指定的索引号[form,to)之间的字符</td></tr><tr><td>str.startsWith(s[,检测位置索引号])</td><td>查看字符串是否以指定的子字符串开头</td></tr><tr><td>str.toLowerCase()</td><td>把字符串转换为小写</td></tr><tr><td>str.toUpperCase()</td><td>把字符串转换为大写</td></tr><tr><td>str.substr(startIndex,n)</td><td>从起始索引号提取字符串中指定数目的字符。</td></tr><tr><td>str.replace()</td><td>在字符串中查找匹配的子串，并替换与正则表达式匹配的子串</td></tr><tr><td>str.replaceAll()</td><td>在字符串中查找匹配的子串，并替换与正则表达式匹配的所有子串</td></tr><tr><td>str.search()</td><td>查找与正则表达式相匹配的值,返回匹配的起始位置</td></tr><tr><td>str.trim()</td><td>去除字符串两边的空白</td></tr><tr><td>Number.EPSILON</td><td>JavaScript能表示的最小精度数</td></tr><tr><td>Number.isFinite()</td><td>检测是否为有限数</td></tr><tr><td>Number.isNaN()</td><td>检测是否为NaN</td></tr><tr><td>Number.parseInt()</td><td>转化为整数</td></tr><tr><td>Number.parseFloat()</td><td>转化为浮点数</td></tr><tr><td>Number.isInteger()</td><td>判断是否为整数</td></tr></tbody></table></div><div class="story post-story"><h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><h3 id="定义正则表达式"><a href="#定义正则表达式" class="headerlink" title="定义正则表达式"></a>定义正则表达式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/表达式/</span>修饰符</span><br></pre></td></tr></table></figure><h4 id="匹配字符"><a href="#匹配字符" class="headerlink" title="匹配字符"></a>匹配字符</h4><table><thead><tr><th>字符</th><th>描述</th></tr></thead><tbody><tr><td>.</td><td>匹配任意字符，除了\n、\r</td></tr><tr><td>abc</td><td>匹配对应的字符串</td></tr><tr><td>[abc]</td><td>查找方括号之间的任何字符</td></tr><tr><td>[^abc]</td><td>匹配除了括号内的字符以外的任意一个字符</td></tr><tr><td>[0-9]</td><td>查找任何从 0 至 9 的数字</td></tr><tr><td>(x|y)</td><td>查找任何以|分隔的选项，匹配不同模式</td></tr><tr><td>\d</td><td>查找数字</td></tr><tr><td>\s</td><td>查找空白字符,等于[\t\r\n\v\f]</td></tr><tr><td>\w</td><td>匹配数字、字母、下划线，等价于[0-9a-zA-Z_]</td></tr><tr><td>\D  \S  \W</td><td>与对应的小写形式相反</td></tr><tr><td>\b</td><td>匹配单词边界</td></tr><tr><td>\uxxxx</td><td>查找以十六进制数 xxxx 规定的 Unicode 字符</td></tr><tr><td>^</td><td>匹配字符串的开头</td></tr><tr><td>$</td><td>匹配字符串的结尾</td></tr></tbody></table><h4 id="量词"><a href="#量词" class="headerlink" title="量词"></a>量词</h4><ul><li><code>*</code>：匹配前面的模式零次或一次或多次。</li><li><code>+</code>：匹配前面的模式一次或多次。</li><li><code>?</code>：匹配前面的模式零次或一次。</li><li><code>&#123;n&#125;</code>：匹配前面的模式恰好 n 次。</li><li><code>&#123;n,&#125;</code>：匹配前面的模式至少 n 次。</li><li><code>&#123;n,m&#125;</code>：匹配前面的模式至少 n 次且不超过 m 次。</li></ul><h4 id="分组和捕获"><a href="#分组和捕获" class="headerlink" title="分组和捕获"></a>分组和捕获</h4><ul><li><code>( )</code>：用于分组和捕获子表达式。</li><li><code>(?: )</code>：用于分组但不捕获子表达式。</li></ul><h4 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h4><ul><li><p><code>i</code>:执行对大小写不敏感的匹配。</p></li><li><p><code>g</code>:全局匹配</p></li><li><p><code>m</code>:多行匹配</p></li></ul><h3 id="匹配"><a href="#匹配" class="headerlink" title="匹配"></a>匹配</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/she/</span></span><br><span class="line">string str = <span class="string">&#x27;sherlock-holmes&#x27;</span></span><br><span class="line">reg.<span class="title function_">test</span>(str)<span class="comment">//返回true|false</span></span><br><span class="line">reg.<span class="title function_">exec</span>(str)<span class="comment">//返回数组|null</span></span><br><span class="line">str.<span class="title function_">replace</span>(reg,<span class="string">&#x27;substitute&#x27;</span>)</span><br><span class="line">str.<span class="title function_">search</span>(reg)</span><br></pre></td></tr></table></figure><ul><li><p><strong>test()</strong> 方法用于检测一个字符串是否匹配某个模式。</p></li><li><p><strong>exec()</strong> 方法用于检索字符串中的正则表达式的匹配。</p></li><li><p><strong>search()</strong> 方法用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串，并返回子串的起始位置。</p></li><li><p><strong>replace()</strong> 方法用于在字符串中用一些字符串替换另一些字符串，或替换一个与正则表达式匹配的子串。</p></li></ul></div><div class="story post-story"><h2 id="DOM对象"><a href="#DOM对象" class="headerlink" title="DOM对象"></a>DOM对象</h2><h3 id="document对象"><a href="#document对象" class="headerlink" title="document对象"></a>document对象</h3><table><thead><tr><th>属性&#x2F;方法</th><th>描述</th></tr></thead><tbody><tr><td>document.querySelector()</td><td>返回文档中匹配指定的CSS选择器的第一元素</td></tr><tr><td>document.querySelectorAll()</td><td>返回文档中匹配的CSS选择器的所有元素节点列表</td></tr><tr><td>document.write()</td><td>向文档写 HTML 表达式 或 JavaScript 代码</td></tr><tr><td>document.createElement()</td><td>创建元素节点。</td></tr><tr><td>document.body</td><td>返回文档的body元素</td></tr><tr><td>document.documentElement</td><td>返回文档的根节点</td></tr><tr><td>document.title</td><td>返回当前文档的标题</td></tr></tbody></table><h3 id="DOM元素对象"><a href="#DOM元素对象" class="headerlink" title="DOM元素对象"></a>DOM元素对象</h3><table><thead><tr><th>属性&#x2F;方法</th><th align="left">描述</th></tr></thead><tbody><tr><td>element.innerHTML</td><td align="left">设置或者返回元素的内容（解析标签）。</td></tr><tr><td>element.innerText</td><td align="left">设置或者返回元素的文字内容（不解析标签）。</td></tr><tr><td>element.style</td><td align="left">设置或返回元素的样式属性。</td></tr><tr><td>element.src|title|value|type</td><td align="left">设置或返回元素的源|标题|值|类型。</td></tr><tr><td>element.className</td><td align="left">设置或返回元素的类名。</td></tr><tr><td>element.classList.add()|remove()|toggle()</td><td align="left">追加类名|移除类名|切换类名</td></tr><tr><td>element.dataset</td><td align="left">获取data-属性</td></tr><tr><td>element.addEventListener(‘事件类型’,Func，是否使用捕获机制)|on事件</td><td align="left">添加事件</td></tr><tr><td>element.removeEventListener(‘事件类型’,Func，是否使用捕获机制)</td><td align="left">解绑事件（匿名函数无法解绑）</td></tr><tr><td>element.parentNode</td><td align="left">返回元素的父节点</td></tr><tr><td>element.children</td><td align="left">返回元素的子元素的集合</td></tr><tr><td>element.nextElementSibling</td><td align="left">返回元素的下一个兄弟节点</td></tr><tr><td>element.previousElementSibling</td><td align="left">返回元素的上一个兄弟节点</td></tr><tr><td>element.appendChild(ele)</td><td align="left">为元素添加一个新的子元素</td></tr><tr><td>element.insertBefore(insertEle,ele)</td><td align="left">现有的子元素之前插入一个新的子元素</td></tr><tr><td>element.cloneNode(false|true)</td><td align="left">克隆某个元素,参数为true时，同时克隆子元素</td></tr><tr><td>element.removeChild(ele)</td><td align="left">删除一个子元素</td></tr></tbody></table><h3 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h3><table><thead><tr><th>属性&#x2F;方法</th><th>描述</th></tr></thead><tbody><tr><td>e.target</td><td>返回触发此事件的元素（事件的目标节点）。</td></tr><tr><td>e.type</td><td>返回当前 Event 对象表示的事件的名称。</td></tr><tr><td>e.currentTarget</td><td>返回其事件监听器触发该事件的元素。</td></tr><tr><td>e.timeStamp</td><td>返回事件生成的日期和时间。</td></tr><tr><td>e.preventDefault()</td><td>通知浏览器不要执行与事件关联的默认动作。</td></tr><tr><td>e.stopPropagation()</td><td>阻止冒泡。</td></tr></tbody></table></div><div class="story post-story"><h2 id="BOM对象"><a href="#BOM对象" class="headerlink" title="BOM对象"></a>BOM对象</h2><ul><li>window对象是一个全局对象，也可以说是JavaScript中的顶级对象</li><li>document、alert()、console都是window的属性和方法</li><li>所有通过var定义在全局作用域中的变量、函数都会变成window对象的属性和方法</li><li>window对象下的属性和方法调用时可以省略window</li></ul><h3 id="location对象"><a href="#location对象" class="headerlink" title="location对象"></a>location对象</h3><table><thead><tr><th>属性&#x2F;方法</th><th>描述</th></tr></thead><tbody><tr><td>location.href</td><td>返回完整的URL,可以用来跳转页面</td></tr><tr><td>location.hostname</td><td>返回URL的主机名</td></tr><tr><td>location.port</td><td>返回一个URL服务器使用的端口号</td></tr><tr><td>location.protocol</td><td>返回一个URL协议</td></tr><tr><td>location.search</td><td>返回一个URL的查询部分(?后部分)</td></tr><tr><td>location.hash</td><td>返回一个URL的锚部分(#后部分)</td></tr><tr><td>location.reload(true)</td><td>刷新页面</td></tr></tbody></table><h3 id="navigator对象"><a href="#navigator对象" class="headerlink" title="navigator对象"></a>navigator对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">!(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> userAgent = navigator.<span class="property">userAgent</span></span><br><span class="line">    <span class="keyword">const</span> android = userAgent.<span class="title function_">match</span>(<span class="regexp">/(Android);?[\s\/]+([\d.]+)?/</span>)</span><br><span class="line">    <span class="keyword">const</span> iphone = userAgent.<span class="title function_">match</span>(<span class="regexp">/(iPhone\sOS)\s([\d_]+)/</span>)</span><br><span class="line">    <span class="keyword">if</span>(android||iphone)&#123;</span><br><span class="line">        location.<span class="property">href</span> = <span class="string">&#x27;http://m.itcast.cn&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><h3 id="history对象"><a href="#history对象" class="headerlink" title="history对象"></a>history对象</h3><table><thead><tr><th>属性方法</th><th>作用</th></tr></thead><tbody><tr><td>history.length</td><td>返回历史列表中的网址数</td></tr><tr><td>history.back()</td><td>加载 history 列表中的前一个 URL</td></tr><tr><td>history.forword()</td><td>加载 history 列表中的下一个 URL</td></tr><tr><td>history.go(n)</td><td>加载 history 列表中的某个具体页面,正数前进、负数后退</td></tr></tbody></table><h3 id="localStorage对象"><a href="#localStorage对象" class="headerlink" title="localStorage对象"></a>localStorage对象</h3><table><thead><tr><th>属性&#x2F;方法</th><th>描述</th></tr></thead><tbody><tr><td>localStorage.length</td><td>返回存储对象中包含多少条数据</td></tr><tr><td>localStorage.key(n)</td><td>返回存储对象中第 <em>n</em> 个键的名称</td></tr><tr><td>localStorage.getItem(keyname)</td><td>返回指定键的值</td></tr><tr><td>localStorage.setItem(keyname,value)</td><td>添加键和值，如果对应的值存在，则更新该键对应的值</td></tr><tr><td>localStorage.removeItem(keyname)</td><td>移除键</td></tr><tr><td>localStorage.clear()</td><td>清除存储对象中所有的键</td></tr></tbody></table><ul><li>JSON.stringfy(复杂数据类型)</li><li>JSON.parse(json数据)</li></ul></div><div class="story post-story"><h2 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h2><ul><li>const timer &#x3D; setInterval(function(){},ms)</li><li>clearInterval(timer)</li><li>const timer &#x3D; setTimeout(Func,ms)</li><li>clearTimeout(timer)</li></ul></div><div class="story post-story"><h2 id="Base64转码"><a href="#Base64转码" class="headerlink" title="Base64转码"></a>Base64转码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fileInput&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;downloadButton&quot;</span> <span class="attr">disabled</span>&gt;</span>Download Decoded File<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> base64String = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1. 将文件转换为Base64</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;fileInput&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="title function_">async</span> (event) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> file = event.<span class="property">target</span>.<span class="property">files</span>[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (file) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 将 FileReader 包装为 Promise</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title function_">readFile</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="property">onloadstart</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;开始上传&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        base64String = e.<span class="property">target</span>.<span class="property">result</span>.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>]; <span class="comment">// 获取纯Base64部分</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Base64:&#x27;</span>, base64String);</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">resolve</span>(); <span class="comment">// 文件读取完成，解析 Promise</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;文件读取失败&#x27;</span>)); <span class="comment">// 文件读取失败，拒绝 Promise</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    reader.<span class="title function_">readAsDataURL</span>(file); <span class="comment">// 开始读取文件</span></span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">await</span> <span class="title function_">readFile</span>(); <span class="comment">// 等待文件读取完成</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;加载完毕&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;downloadButton&#x27;</span>).<span class="property">disabled</span> = <span class="literal">false</span>; <span class="comment">// 启用下载按钮</span></span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;文件读取失败:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2. 将Base64解码为文件并下载</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;downloadButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (!base64String) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;No Base64 data available.&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 将Base64字符串解码为二进制数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> binaryString = <span class="title function_">atob</span>(base64String);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(binaryString.<span class="property">length</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; binaryString.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">            bytes[i] = binaryString.<span class="title function_">charCodeAt</span>(i);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 创建Blob对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>([bytes], &#123; <span class="attr">type</span>: <span class="string">&#x27;application/octet-stream&#x27;</span> &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 创建下载链接</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> url = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        a.<span class="property">href</span> = url;</span></span><br><span class="line"><span class="language-javascript">        a.<span class="property">download</span> = <span class="string">&#x27;decoded_file&#x27;</span>; <span class="comment">// 设置下载文件名</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(a);</span></span><br><span class="line"><span class="language-javascript">        a.<span class="title function_">click</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 清理</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(a);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable constant_">URL</span>.<span class="title function_">revokeObjectURL</span>(url);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;输入输出语句&quot;&gt;&lt;a href=&quot;#输入输出语句&quot; class=&quot;headerlink&quot; title=&quot;输入输出语句&quot;&gt;&lt;/a&gt;输入输出语句&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;prompt(info)&lt;/li&gt;
</summary>
      
    
    
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>2024-9-26</title>
    <link href="http://example.com/2024/09/26/2024-9-26/"/>
    <id>http://example.com/2024/09/26/2024-9-26/</id>
    <published>2024-09-26T14:20:07.000Z</published>
    <updated>2024-10-09T16:11:04.056Z</updated>
    
    <content type="html"><![CDATA[<p><strong>学生证发啦</strong></p><p><img src="/../images/23.jpg" class="lazyload" data-srcset="/../images/23.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="太酷辣"></p><p><strong>学校里随机刷新的🐱学长</strong></p><p><img src="/../images/24.jpg" class="lazyload" data-srcset="/../images/24.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="宿舍楼"></p><p><img src="/../images/25.jpg" class="lazyload" data-srcset="/../images/25.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="社团活动"></p><p><img src="/../images/26.jpg" class="lazyload" data-srcset="/../images/26.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="窗前"></p><p><img src="/../images/27.jpg" class="lazyload" data-srcset="/../images/27.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p><img src="/../images/28.jpg" class="lazyload" data-srcset="/../images/28.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="路边"></p><p><img src="/../images/29.jpg" class="lazyload" data-srcset="/../images/29.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p><strong>今天把css的基础课程看完了，做了一个名侦探柯南旋转海报的网页</strong></p><p><a href="http://hzxbit.3vzhuji.cc/2024-9-26/">名侦探柯南旋转海报</a></p><p>明天看一下flex布局还有学一下组合数学和cpp。</p><p>唉，感觉翘课自学效率比较高，但是软院又发文件要求上课点名，被23科憨害惨了。。。</p><p>下学期要不要翘课出去实习呢？如果厦门没有合适的实习岗怎么办呢？</p><p>本以为考上可以休息一会儿，发现事情好像没有变少，</p><p>高中同学，大学同学有的已经工作了，有的还在谋出路，</p><p>我又要走去哪呢？</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;学生证发啦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/../images/23.jpg&quot; class=&quot;lazyload&quot; data-srcset=&quot;/../images/23.jpg&quot; srcset=&quot;data:image/gif;base64</summary>
      
    
    
    
    <category term="随笔" scheme="http://example.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>css</title>
    <link href="http://example.com/2024/09/23/css/"/>
    <id>http://example.com/2024/09/23/css/</id>
    <published>2024-09-23T05:03:55.000Z</published>
    <updated>2024-12-23T08:09:41.169Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="通配符选择器"><a href="#通配符选择器" class="headerlink" title="通配符选择器"></a>通配符选择器</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="字体属性"><a href="#字体属性" class="headerlink" title="字体属性"></a>字体属性</h2><ul><li>font-family:字体系列</li><li>font-size:字体大小 默认16px</li><li>font-weight:字体粗细 <code>normal|bold|bolder|lighter|number(默认400)</code></li><li>font-style:字体样式 <code>normal|italic</code></li><li>font: font-style font-weight font-size&#x2F;line-height font-family;</li></ul><p>font-size:14px&#x2F;1.5      1.5倍行高</p></div><div class="story post-story"><h2 id="文本属性"><a href="#文本属性" class="headerlink" title="文本属性"></a>文本属性</h2><ul><li>color:文本颜色</li><li>text-align:对齐方式<code> left|center|right</code></li><li>text-decoration:添加&#x2F;删除一条线<code>none|underline|overline|line-through</code></li><li>text-index:首行缩进                em为1个文字的大小</li><li>line-height:行间距    要比font-size大</li><li>text-shadow:h-shadow v-shadow blur color</li></ul></div><div class="story post-story"><h2 id="复合选择器"><a href="#复合选择器" class="headerlink" title="复合选择器"></a>复合选择器</h2><ul><li>div a     后代选择器</li><li>div&gt;a    子元素选择器</li><li>div,span  并集选择器</li><li>a:link|a:visited|a:hover|a:active 链接伪类选择器（LoVe HaTe顺序编写）</li><li>input:focus  focus伪类选择器</li><li>E:first-child</li><li>E:last-child</li><li>E:nth-child(n|even|odd|5n|n+3|-n+5)</li><li>E:first-of-type</li><li>E:last-of-type</li><li>E:nth-of-type(n|even|odd|5n|n+3|-n+5)</li></ul></div><div class="story post-story"><h2 id="显示模式"><a href="#显示模式" class="headerlink" title="显示模式"></a>显示模式</h2><ul><li><p>块元素</p><ul><li>自己独占一行</li><li>高度、宽度、外边距、内边距都可以控制</li><li>默认宽度是父级宽度的100%</li><li>（除了文字类块元素）里面可以放行内或块级元素</li></ul></li><li><p>行内元素</p><ul><li>相邻行内元素在一行上</li><li>设置宽高无效</li><li>默认宽度为内容宽度</li><li>行内元素只能容纳文本或者行内元素</li></ul></li><li><p>行内块元素：<code>&lt;img/&gt;&lt;input/&gt;&lt;td/&gt;</code></p><ul><li>相邻行内块元素在一行上</li><li>默认宽度为内容宽度</li><li>高度、宽度、外边距、内边距都可以控制</li></ul></li><li><p>显示模式切换： <code>display:none|block|inline</code></p></li><li><p>设置居中</p><table><thead><tr><th>类别</th><th>居中方法</th></tr></thead><tbody><tr><td>块级元素</td><td>margin-left:auto;margin-right auto;</td></tr><tr><td>行内元素</td><td>父级元素添加text-align:center;</td></tr><tr><td>行内块元素</td><td>父级元素添加text-align:center;</td></tr><tr><td>所有元素的垂直居中</td><td>line-height:height</td></tr><tr><td>行内块（图片）和文字居中对齐</td><td>vertical-align:middle</td></tr></tbody></table></li></ul></div><div class="story post-story"><h2 id="background"><a href="#background" class="headerlink" title="background"></a>background</h2><ul><li><p>background-image:url()</p></li><li><p>background-repeat:<code>repeat|no-repeat|repeat-x|repeat-y</code></p></li><li><p>background-attachment:<code>scroll|fixed</code></p></li><li><p>background-position: <code>x y|left center right|top center down</code></p></li><li><p>background-size:<code>x y|x|cover|contain</code>   cover可能显示不全，contain可能无法完全覆盖而显示空白</p></li><li><p>background:bg-color bg-image position&#x2F;bg-size bg-repeat bg-origin bg-attachment;</p><p>默认值为 transparent none  0% 0%&#x2F;auto repeat padding-box scroll;</p></li></ul></div><div class="story post-story"><h2 id="选择器优先级"><a href="#选择器优先级" class="headerlink" title="选择器优先级"></a>选择器优先级</h2><table><thead><tr><th>选择器</th><th>选择器权重</th></tr></thead><tbody><tr><td>继承或者*</td><td>0，0，0，0</td></tr><tr><td>元素选择器，伪元素选择器</td><td>0，0，0，1</td></tr><tr><td>类选择器，伪类选择器</td><td>0，0，1，0</td></tr><tr><td>ID选择器</td><td>0，1，0，0</td></tr><tr><td>行内样式</td><td>1，0，0，0</td></tr><tr><td>!important</td><td>∞</td></tr></tbody></table></div><div class="story post-story"><h2 id="边框"><a href="#边框" class="headerlink" title="边框"></a>边框</h2><ul><li>border-width:5px</li><li>border-style:<code>none|solid|dashed|dotted</code></li><li>border-color:</li><li>border-top|down|left|down:</li><li>border-collapse:<code>separate|collapse</code>  控制边框合并</li><li>border-radius:圆角边框</li><li>border:<code>border-width||border-style||border-color</code></li></ul></div><div class="story post-story"><h2 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h2><p>由内至外(均会影响盒子大小)：</p><ul><li>padding</li><li>border</li><li>margin：设置左右边距为auto居中盒子</li></ul><p>盒子阴影</p><p>box-shadow: h-shadow v-shadow blur spread color inset;</p></div><div class="story post-story"><h2 id="嵌套块元素的塌陷问题"><a href="#嵌套块元素的塌陷问题" class="headerlink" title="嵌套块元素的塌陷问题"></a>嵌套块元素的塌陷问题</h2><p>对于两个父子关系的块元素，父元素有上外边距同时子元素也有上外边距，此时父元素会塌陷比较大的外边距值</p><p>解决方案：</p><ol><li>为父元素定义上边框</li><li>为父元素定义内边距</li><li>为父元素添加overflow:hidden</li></ol></div><div class="story post-story"><h2 id="传统网页布局方式"><a href="#传统网页布局方式" class="headerlink" title="传统网页布局方式"></a>传统网页布局方式</h2><ul><li>标准流</li><li>浮动：多个块级元素横向排列</li><li>定位</li></ul><p>float:<code>none|left|right</code></p></div><div class="story post-story"><h2 id="浮动特性"><a href="#浮动特性" class="headerlink" title="浮动特性"></a>浮动特性</h2><ol><li>脱离标准流浮动到指定位置，不再保留原先位置</li><li>如果多个盒子设置了浮动，则它们会按照属性值一行内显示并且顶端对齐排列</li><li>浮动元素具有行内块元素特性</li></ol><p>流程：</p><ol><li>先用标准流的父元素排列上下位置，之后内部元素采取浮动排列左右位置</li><li>浮动的盒子只会影响浮动盒子后面的标准流，不会影响前面的标准流</li></ol></div><div class="story post-story"><h2 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h2><p>父元素未指定高度，子元素全部浮动，导致父元素高度为0的问题，解决方法：</p><ol><li><p>额外标签法</p><p>最后一个元素后添加块级元素清除浮动<code>&lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;</code></p></li><li><p>父元素添加overflow:hidden|auto|scroll;</p><p>缺点：无法显示溢出部分</p></li><li><p>:after伪元素法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>:<span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>:block;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">clear</span>:both;</span><br><span class="line">    <span class="attribute">visibility</span>:hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>父元素添加类名clearfix</p></li><li><p>双伪元素法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">     <span class="attribute">content</span>:<span class="string">&quot;&quot;</span>;    </span><br><span class="line">     <span class="attribute">display</span>:table;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">    <span class="attribute">clear</span>:both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></div><div class="story post-story"><h2 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h2><p>定位&#x3D;定位模式+边偏移</p><ul><li>定位模式      position:static|relative|absolute|fixed|sticky</li><li>边偏移          top|bottom|left|right</li></ul><h3 id="静态定位"><a href="#静态定位" class="headerlink" title="静态定位"></a>静态定位</h3><p>默认方式，没有边偏移。</p><h3 id="相对定位"><a href="#相对定位" class="headerlink" title="相对定位"></a>相对定位</h3><p>相对原来位置，原来的位置继续保留。</p><h3 id="绝对定位"><a href="#绝对定位" class="headerlink" title="绝对定位"></a>绝对定位</h3><p>相对最近一级祖先元素位置，若祖先元素无定位（静态定位）或无祖先元素，则相对浏览器。若要固定与祖先元素的某个位置，祖先元素应添加相对定位。原来的位置不保留。</p><h3 id="固定定位"><a href="#固定定位" class="headerlink" title="固定定位"></a>固定定位</h3><p>固定于浏览器可视区的位置，不随滚动条滚动，原来的位置不保留，特殊的绝对定位。</p><h3 id="粘性定位"><a href="#粘性定位" class="headerlink" title="粘性定位"></a>粘性定位</h3><p>相对定位+固定定位</p><p>以浏览器窗口为参照点移动元素，占有原来位置。</p><h3 id="定位叠放次序"><a href="#定位叠放次序" class="headerlink" title="定位叠放次序"></a>定位叠放次序</h3><p>z-index:取值越大越靠上</p><h3 id="定位的其他特性"><a href="#定位的其他特性" class="headerlink" title="定位的其他特性"></a>定位的其他特性</h3><p>绝对定位和固定定位也和浮动类似。</p><ol><li>行内元素添加绝对或者固定定位，可以直接设置宽度和高度。</li><li>块级元素添加绝对或者固定定位，不给宽度和高度，默认大小为内容的大小。</li><li>浮动、定位的盒子不会引起外边距合并的问题。</li><li>浮动的元素不会压住下面标准流的文字（可以用来做文字环绕），而绝对定位和固定定位会。</li></ol></div><div class="story post-story"><h2 id="元素的显示与隐藏"><a href="#元素的显示与隐藏" class="headerlink" title="元素的显示与隐藏"></a>元素的显示与隐藏</h2><ul><li>display:<code>none|block</code>  不保留位置</li><li>visibility:<code>hidden|visible</code>  保留位置</li><li>overflow:<code>visible|auto|hidden|scroll</code> （内容溢出元素框时，会发生什么。有定位的盒子慎用）</li></ul></div><div class="story post-story"><h2 id="精灵图"><a href="#精灵图" class="headerlink" title="精灵图"></a>精灵图</h2><p>将小背景图片整合到一张大图中，减少服务器接收和发送请求的次数，提高页面加载速度</p><p>background-position: -x -y;</p></div><div class="story post-story"><h2 id="字体图标"><a href="#字体图标" class="headerlink" title="字体图标"></a>字体图标</h2><ul><li><p>文件小</p></li><li><p>放大缩小不失真</p></li><li><p>灵活，可以改变颜色、产生阴影、透明效果、旋转等</p></li><li><p><a href="https://www.iconfont.cn/">iconfont-阿里巴巴矢量图标库</a></p></li></ul></div><div class="story post-story"><h2 id="三角形"><a href="#三角形" class="headerlink" title="三角形"></a>三角形</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>:<span class="number">50px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-left-color</span>:pink;//朝右的三角形</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="鼠标样式-表单轮廓线-f防止拖拽文本域"><a href="#鼠标样式-表单轮廓线-f防止拖拽文本域" class="headerlink" title="鼠标样式&amp;表单轮廓线&amp;f防止拖拽文本域"></a>鼠标样式&amp;表单轮廓线&amp;f防止拖拽文本域</h2><p>cursor:<code>default|pointer|move|text|no-allowed</code></p><p>outline:none</p><p>textarea{</p><p>​resize:none;</p><p>}</p></div><div class="story post-story"><h2 id="行内块和文字垂直居中对齐"><a href="#行内块和文字垂直居中对齐" class="headerlink" title="行内块和文字垂直居中对齐"></a>行内块和文字垂直居中对齐</h2><p>image{</p><p>​vertical-align:<code>top|bottom|middle</code>     可以解决图片底部默认空白的问题</p><p>}</p></div><div class="story post-story"><h2 id="文字省略号显示"><a href="#文字省略号显示" class="headerlink" title="文字省略号显示"></a>文字省略号显示</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">white-space</span>:norap;</span><br><span class="line">    <span class="attribute">text-overflow</span>:ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="视频-音频播放器"><a href="#视频-音频播放器" class="headerlink" title="视频&#x2F;音频播放器"></a>视频&#x2F;音频播放器</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">autoplay</span>=<span class="string">&quot;autoplay&quot;</span> <span class="attr">muted</span>=<span class="string">&quot;muted&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span> <span class="attr">loop</span>=<span class="string">&quot;loop&quot;</span> <span class="attr">poster</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">autoplay</span>=<span class="string">&quot;autoplay&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span> <span class="attr">loop</span>=<span class="string">&quot;loop&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h2><table><thead><tr><th>选择符</th><th>简介</th></tr></thead><tbody><tr><td>E[att&#x3D;”val”]</td><td>选择具有att属性的E元素</td></tr><tr><td>E[att&#x3D;”val”]]</td><td>选择具有att属性且属性值等于val的E元素</td></tr><tr><td>E[att^&#x3D;”val”]]</td><td>选择具有att属性且值以val开头的E元素</td></tr><tr><td>E[att$&#x3D;”val”]]</td><td>选择具有att属性且值以val结尾的E元素</td></tr><tr><td>E[att*&#x3D;”val”]]</td><td>选择具有att属性且值中含有val的E元素</td></tr></tbody></table></div><div class="story post-story"><h2 id="伪元素选择器"><a href="#伪元素选择器" class="headerlink" title="伪元素选择器"></a>伪元素选择器</h2><ul><li>before和after创建一个元素，但是属于行内元素</li><li>新创建的这个元素在文档树中是找不到的，所以我们称为伪元素</li><li>语法： element::before{}</li><li>before和after必须有content属性</li><li>before在父元素内容前面创建元素，after在父元素内容后面插入元素</li><li>伪元素选择器与标签选择器权重一样</li></ul></div><div class="story post-story"><h2 id="切换盒子模型"><a href="#切换盒子模型" class="headerlink" title="切换盒子模型"></a>切换盒子模型</h2><ol><li>box-sizing:content-box 盒子大小为width+padding+border</li><li>box-sizing:border-box 盒子大小为width</li></ol></div><div class="story post-story"><h2 id="CSS3过度"><a href="#CSS3过度" class="headerlink" title="CSS3过度"></a>CSS3过度</h2><p>鼠标悬浮时触发</p><p>transition:要过度的属性 花费时间(2s) 运动曲线(ease|liner) 何时开始(1s),要过度的属性 花费时间(2s) 运动曲线(ease) 何时开始(1s)；</p><p>全部变化，填all</p><h3 id="2D转换"><a href="#2D转换" class="headerlink" title="2D转换"></a>2D转换</h3><ul><li>tranform:translate(x,y);</li><li>tranform:translateX(x);</li><li>tranform:translateY(y);</li><li>transform:rotate(45deg);</li><li>transform:scale(x,y)</li><li>transform-origin: x y;     设置中心点</li></ul><h3 id="3D转换"><a href="#3D转换" class="headerlink" title="3D转换"></a>3D转换</h3><ul><li><p>transform:translate3d(x,y,z);</p></li><li><p>tranform:translateX(x);</p></li><li><p>tranform:translateY(y);</p></li><li><p>transform:translateZ(z);</p></li><li><p>perspective:   px; &#x2F;&#x2F;透视写在观察元素的父元素上</p></li><li><p>transform-style:preserve-3d; &#x2F;&#x2F;子元素开启立体空间</p></li></ul></div><div class="story post-story"><h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><ol><li><p>定义动画</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> move &#123;</span><br><span class="line">    <span class="number">0%</span>(<span class="selector-tag">from</span>) &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">0px</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span>(<span class="selector-tag">to</span>) &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">100px</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>调用动画</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">animation</span>: name duration timing-function delay <span class="built_in">iteration-count</span>(<span class="number">1</span>|infinite) <span class="built_in">direction</span>(normal|alternate) <span class="built_in">fill-mode</span>(backwords|forwords);</span><br></pre></td></tr></table></figure></li></ol></div><div class="story post-story"><h2 id="移动端常见布局"><a href="#移动端常见布局" class="headerlink" title="移动端常见布局"></a>移动端常见布局</h2><ul><li><p>单独制作移动端页面</p><ul><li>流式布局(百分比布局)</li><li>flex弹性布局</li><li>less+rem+媒体查询布局</li><li>混合布局</li></ul></li><li><p>响应式页面兼容移动端</p><ul><li>媒体查询</li><li>bootstrap</li></ul></li></ul></div><div class="story post-story"><h2 id="流式布局"><a href="#流式布局" class="headerlink" title="流式布局"></a>流式布局</h2><ul><li>max-width:   px;&#x2F;&#x2F;页面拉抻最大宽度</li><li>min-width:    px;&#x2F;&#x2F;页面拉抻最小宽度</li><li>width:x%</li></ul></div><div class="story post-story"><h2 id="flex布局"><a href="#flex布局" class="headerlink" title="flex布局"></a>flex布局</h2><p>与浮动效果相似,但默认不换行，装不下时自动缩小子元素宽度</p><p>给父元素添加 display:flex;</p><p>给子元素设置宽高或分配比例 flex:1;</p><h3 id="父元素属性"><a href="#父元素属性" class="headerlink" title="父元素属性"></a>父元素属性</h3><ul><li>flex-direction:<code>row|row-reverse|column|column-reverse</code>     设置主轴</li><li>justify-content:<code>flex-start|flex-end|center|space-around|space-between</code> 设置主轴子元素排列方式</li><li>flex-wrap:<code>nowrap|wrap</code>  是否换行</li><li>align-items:<code>flex-start|flex-end|center|stretch</code> 设置侧轴子元素排列方式(单行)</li><li>align-content:<code>flex-start|flex-end|center|space-around|space-between|stretch</code>  设置侧轴子元素排列方式(多行)</li><li>flex-flow: flex-direction flex-wrap;</li></ul><h3 id="子元素属性"><a href="#子元素属性" class="headerlink" title="子元素属性"></a>子元素属性</h3><ul><li>flex:   分配比例，可实现拉伸效果</li><li>align-self:    控制自己在侧轴的排列方式</li><li>order:     控制项目的排列顺序，越小越靠前，默认为0</li></ul></div><div class="story post-story"><h2 id="rem适配方案"><a href="#rem适配方案" class="headerlink" title="rem适配方案"></a>rem适配方案</h2><p>通过修改html里面的文字大小来改变页面中元素的大小</p><h3 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a>媒体查询</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//从小到大写，后面覆盖前面</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;style320<span class="selector-class">.css</span>&quot; media=&quot;screen and (<span class="attribute">max-width</span>:<span class="number">320px</span>)<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;link rel=&quot;</span>stylesheet<span class="string">&quot; href=&quot;</span>style640.css<span class="string">&quot; media=&quot;</span>screen and (min-width:<span class="number">640px</span>)<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;link rel=&quot;</span>stylesheet<span class="string">&quot; href=&quot;</span>style960.css<span class="string">&quot; media=&quot;</span>screen and (min-width:<span class="number">960px</span>)<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//或</span></span><br><span class="line"><span class="string">@media screen and (max-width:539px) &#123;</span></span><br><span class="line"><span class="string">    html&#123;</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@media screen and (min-width:540px) &#123;</span></span><br><span class="line"><span class="string">    html &#123;</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@media screen and (min-width:970px) &#123;</span></span><br><span class="line"><span class="string">    html &#123;</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="less"><a href="#less" class="headerlink" title="less"></a>less</h3><p>vscode插件：easy less，cssrem</p><p>基本语法</p><ul><li>@变量名:变量值</li><li>后代——嵌套</li><li>伪类&#x2F;伪元素选择器 &amp;:   &amp;::</li><li>运算符+-*&#x2F;   空格隔开</li><li>除法运算要加 ()</li><li>单位不同则取第一个值的单位</li><li>@import “” 导入less文件</li></ul><h3 id="元素大小取值方法"><a href="#元素大小取值方法" class="headerlink" title="元素大小取值方法"></a>元素大小取值方法</h3><p>页面元素的rem值&#x3D;页面元素值（px)&#x2F;font-size字体大小</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;通配符选择器&quot;&gt;&lt;a href=&quot;#通配符选择器&quot; class=&quot;headerlink&quot; title=&quot;通配符选择器&quot;&gt;&lt;/a&gt;通配符选择器&lt;/h2&gt;&lt;figure class=&quot;highlight cs</summary>
      
    
    
    
    
    <category term="css" scheme="http://example.com/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>面试八股</title>
    <link href="http://example.com/2024/09/21/%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1/"/>
    <id>http://example.com/2024/09/21/%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1/</id>
    <published>2024-09-21T12:28:26.000Z</published>
    <updated>2025-03-03T13:35:10.160Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h2><p>MVVM是一种软件架构模式，是Model、View、ViewModel的缩写。其中Model是数据层，包含数据和业务逻辑。View是UI组件。ViewModel是连接Model和View的桥梁，它一边管理数据，一边控制视图更新。</p></div><div class="story post-story"><h2 id="Vue和React有什么区别"><a href="#Vue和React有什么区别" class="headerlink" title="Vue和React有什么区别"></a>Vue和React有什么区别</h2><ul><li>模板语法：React采用JSX，Vue采用基于HTML的模板语法</li><li>数据绑定：Vue实现了双向的数据绑定，React需要手动控制组件的属性和状态</li><li>状态管理：Vue采用Vuex&#x2F;Pinia，React使用Redux</li><li>组件通信不同：Vue采用props和事件来实现父子组件通信，React采用props和回调函数实现</li><li>生命周期不同：Vue有8个生命周期钩子，React有10个</li><li>响应式原理不同：Vue使用双向数据绑定来实现数据更新，React使用单向数据流来实现</li></ul></div><div class="story post-story"><h2 id="平时怎么学习前端的"><a href="#平时怎么学习前端的" class="headerlink" title="平时怎么学习前端的"></a>平时怎么学习前端的</h2><p>我通过在线网站比如MDN、W3School还有一些纸质书，比如《你不知道的JavaScript》来学习前端的基础知识。</p><p>然后我选择了Vue框架进行深入学习、通过官方文档和教程掌握其核心概念，比如组件化、状态管理、路由。</p><p>我通过一些项目、电商页面、微信小程序这些来巩固自己所学的知识，并且在做项目期间熟练掌握了git版本控</p><p>制工具的使用，也对webpack、vite等构建工具有了初步的了解。</p><p>空闲之余，我也会阅读一些技术博客，比如语雀、掘金、CSDN。也会定期刷刷leetcode提升自己的算法能力。</p></div><div class="story post-story"><h2 id="介绍项目"><a href="#介绍项目" class="headerlink" title="介绍项目"></a>介绍项目</h2><h2 id="项目中的一个接口"><a href="#项目中的一个接口" class="headerlink" title="项目中的一个接口"></a>项目中的一个接口</h2><h2 id="项目中遇到的一个困难"><a href="#项目中遇到的一个困难" class="headerlink" title="项目中遇到的一个困难"></a>项目中遇到的一个困难</h2><h2 id="为什么选择前端"><a href="#为什么选择前端" class="headerlink" title="为什么选择前端"></a>为什么选择前端</h2><p>相比较于后端而言，前端更靠近用户交互，很多效果都可以直接看到，很有意思也很有成就感。</p></div><div class="story post-story"><h2 id="未来对职业的规划，想发展的城市"><a href="#未来对职业的规划，想发展的城市" class="headerlink" title="未来对职业的规划，想发展的城市"></a>未来对职业的规划，想发展的城市</h2><h2 id="确定this的值"><a href="#确定this的值" class="headerlink" title="确定this的值"></a>确定this的值</h2><p>在非严格模式下，总是指向同一个对象，在严格模式下可以是任意值</p><table><thead><tr><th></th><th>非严格模式</th><th>严格模式</th></tr></thead><tbody><tr><td>全局环境</td><td>window</td><td>window</td></tr><tr><td>直接调用</td><td>window</td><td>undefined</td></tr><tr><td>对象方法调用</td><td>调用者</td><td>调用者</td></tr></tbody></table><p>开启严格模式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="指定this的值"><a href="#指定this的值" class="headerlink" title="指定this的值"></a>指定this的值</h2><ul><li><p>调用时指定</p><ol><li><p>call方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func.call(thisArg,arg1,arg2...)</span><br></pre></td></tr></table></figure></li><li><p>apply方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func.apply(thisArg,[arg1,arg2...])</span><br></pre></td></tr></table></figure></li></ol></li><li><p>创建时指定</p><ol><li><p>bind方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const bindFunc = func.bind(thisArg,arg1,arg2...)</span><br></pre></td></tr></table></figure></li><li><p>箭头函数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const dog = &#123;</span><br><span class="line">name:&#x27;ason&#x27;,</span><br><span class="line">eat()&#123;</span><br><span class="line">setTimeout(()=&gt;&#123;</span><br><span class="line">console.log(this)//输出eat()的调用者dog</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ul><h3 id="面试回答"><a href="#面试回答" class="headerlink" title="面试回答:"></a>面试回答:</h3><ul><li><code>call</code>与<code>apply</code>,<code>bind</code>都可以改变函数内部this指向</li><li>call和apply传递的参数形式不一样</li><li>bind不会立即调用函数，而是返回一个新函数</li><li>箭头函数:创建时会绑定上一级作用域中的<code>this</code></li></ul></div><div class="story post-story"><h2 id="手写call方法与apply方法"><a href="#手写call方法与apply方法" class="headerlink" title="手写call方法与apply方法"></a>手写call方法与apply方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myCall</span> = <span class="keyword">function</span>(<span class="params">thisArg,...args</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> key = <span class="title class_">Symbol</span>(<span class="string">&#x27;key&#x27;</span>)</span><br><span class="line">    thisArg[key] = <span class="variable language_">this</span></span><br><span class="line">    <span class="keyword">const</span> res = thisArg[key](...args)</span><br><span class="line">    <span class="keyword">delete</span> thisArg[key]</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myApply</span> = <span class="keyword">function</span>(<span class="params">thisArg,args</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> key = <span class="title class_">Symbol</span>(<span class="string">&#x27;key&#x27;</span>)</span><br><span class="line">    thisArg[key] = <span class="variable language_">this</span></span><br><span class="line">    <span class="keyword">const</span> res = thisArg[key](args)</span><br><span class="line">    <span class="keyword">delete</span> thisArg[key]</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;hzx&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">numA,numB</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(numA,numB)</span><br><span class="line">    <span class="keyword">return</span> numA+numB</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func2</span>(<span class="params">[numA,numB]</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(numA,numB)</span><br><span class="line">    <span class="keyword">return</span> numA+numB</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res = func.<span class="title function_">myCall</span>(person,<span class="number">2</span>,<span class="number">8</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;myCall返回值为：&#x27;</span>,res)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res2 = func2.<span class="title function_">myApply</span>(person,[<span class="number">2</span>,<span class="number">8</span>])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;myApply的返回值为：&#x27;</span>,res2)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="面试回答："><a href="#面试回答：" class="headerlink" title="面试回答："></a>面试回答：</h3><p>手写call方法的步骤为</p><ol><li>在<code>function</code>的原型上添加<code>myCall</code>方法,保证所有函数都可以调用</li><li>方法内部,通过动态为对象添加方法的形式来指定<code>this</code>指向</li><li>调用完毕之后通过<code>delete</code>关键字删除上一步动态增加的方法</li><li>方法的名字通过<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol">Symbol</a>进行设置,避免和默认名重复</li><li>使用剩余参数的形式传递参数2-参数n(函数参数)</li></ol><p>手写apply方法</p><ol><li>在<code>function</code>的原型上添加<code>myApply</code>方法,保证所有函数都可以调用</li><li>方法内部,通过动态为对象添加方法的形式来指定<code>this</code>指向</li><li>调用完毕之后通过<code>delete</code>关键字删除上一步动态增加的方法</li><li>方法的名字通过<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol">Symbol</a>进行设置,避免和默认名重复</li><li>直接使用数组传递函数的参数,内部调用时结合<code>...</code>运算符展开数组</li></ol></div><div class="story post-story"><h2 id="手写bind方法"><a href="#手写bind方法" class="headerlink" title="手写bind方法"></a>手写bind方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myBind</span> = <span class="keyword">function</span>(<span class="params">thisArg,...args1</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">...args2</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">call</span>(thisArg,...args1,...args2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;hzx&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">numA,numB,numC,numD</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(numA,numB,numC,numD)</span><br><span class="line">    <span class="keyword">return</span> numA+numB+numC+numD</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bindFunc = func.<span class="title function_">myBind</span>(person,<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="keyword">const</span> res = <span class="title function_">bindFunc</span>(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;myBind返回值为：&#x27;</span>,res)</span><br></pre></td></tr></table></figure><h3 id="面试回答-1"><a href="#面试回答-1" class="headerlink" title="面试回答:"></a>面试回答:</h3><p>手写bind方法</p><ol><li><code>function</code>原型上添加<code>myBind</code>函数,参数1为绑定的this,参数2-参数2为绑定的参数</li><li>内部返回一个新箭头函数,目的是绑定作用域中的this</li><li>返回的函数内部,通过<code>call</code>进行this和参数绑定</li><li>通过<code>call</code>的参数2和参数3指定绑定的参数,和调用时传递的参数</li></ol></div><div class="story post-story"><h2 id="JavaScript静态属性和私有属性"><a href="#JavaScript静态属性和私有属性" class="headerlink" title="JavaScript静态属性和私有属性"></a>JavaScript静态属性和私有属性</h2><h3 id="面试回答-2"><a href="#面试回答-2" class="headerlink" title="面试回答:"></a>面试回答:</h3><p>class实现继承</p><ol><li>子类通过<code>extends</code>继承继承父类</li><li>子类如果需要重新定义构造函数,必须在内部通过<code>super</code>关键字调用父类的构造函数</li></ol><p>静态：类通过static关键字定义静态方法。不能在类的实例上调用静态方法，而应该通过类本身调用。</p><p>私有：类属性默认共有，可以使用增加哈希前缀#的方法来定义私有类字段，声明和访问时也需要加上,只能在类的内部访问。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> 静态属性</span><br><span class="line">    <span class="keyword">static</span> 静态方法() &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    #私有属性</span><br><span class="line">    #私有方法() &#123; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">info</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.#私有属性</span><br><span class="line">        <span class="variable language_">this</span>.#私有方法()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Test</span>.静态属性</span><br><span class="line"><span class="title class_">Test</span>.静态方法()</span><br></pre></td></tr></table></figure><h3 id="面试回答-3"><a href="#面试回答-3" class="headerlink" title="面试回答:"></a>面试回答:</h3><p>class语法补充</p><ol><li><p>class中私有属性&#x2F;方法</p><ol><li><strong>定义和使用时</strong>需要使用关键字<code>#</code></li><li>私有属性只能在类的内部使用,外部无法使用(代码中)</li><li><strong>Chrome</strong>的控制台中为了方便调试,可以直接访问</li></ol></li><li><p>class中静态属性&#x2F;方法</p><ol><li><strong>定义和使用时</strong>需要使用关键字<code>static</code></li><li>通过类访问</li><li>静态方法中的<code>this</code>是类</li></ol></li></ol></div><div class="story post-story"><h2 id="寄生组合继承"><a href="#寄生组合继承" class="headerlink" title="寄生组合继承"></a>寄生组合继承</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayHi</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你好，我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="title class_">Person</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>,name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Person</span>,&#123;</span><br><span class="line">    <span class="attr">constructor</span>:&#123;</span><br><span class="line">        <span class="attr">value</span>:<span class="title class_">Student</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="面试回答-4"><a href="#面试回答-4" class="headerlink" title="面试回答:"></a>面试回答:</h3><p>ES5-寄生组合式继承</p><ol><li>寄生组合式继承的核心步骤是:通过构造函数来继承属性,通过原型链来继承方法</li><li>寄生组合式继承和组合式继承的区别是:原型链的继承并没有调用父类的构造函数,而是直接基于父类的原型创建一个新副本实现继承</li></ol></div><div class="story post-story"><h2 id="fetch方法"><a href="#fetch方法" class="headerlink" title="fetch方法"></a>fetch方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="variable constant_">URL</span>);</span><br><span class="line">res.<span class="property">status</span></span><br><span class="line"><span class="keyword">const</span> data = <span class="keyword">await</span> res.<span class="title function_">json</span>();</span><br></pre></td></tr></table></figure><p>生成查询字符串：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(&#123;<span class="attr">pname</span>:<span class="string">&#x27;广东省&#x27;</span>,<span class="attr">cname</span>:<span class="string">&#x27;深圳市&#x27;</span>&#125;)</span><br><span class="line">p.<span class="title function_">toString</span>()</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;file&quot;</span> <span class="keyword">class</span>=<span class="string">&quot;file&quot;</span> accept=<span class="string">&quot;image/*&quot;</span>&gt;</span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.file&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="comment">// 生成FormData对象并添加数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">const</span> data = <span class="keyword">new</span> <span class="title class_">FormData</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     data.<span class="title function_">append</span>(<span class="string">&#x27;img&#x27;</span>, <span class="variable language_">this</span>.<span class="property">files</span>[<span class="number">0</span>])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/uploadimg&#x27;</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="attr">body</span>: data</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="keyword">const</span> json = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="variable language_">console</span>.<span class="title function_">log</span>(json)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 通过headers设置请求头</span></span><br><span class="line">      <span class="keyword">const</span> headers = <span class="keyword">new</span> <span class="title class_">Headers</span>()</span><br><span class="line">      <span class="comment">// 通过 content-type指定请求体数据格式</span></span><br><span class="line">      headers.<span class="title function_">append</span>(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;application/json&#x27;</span>)</span><br><span class="line">      <span class="comment">// 参数1 url</span></span><br><span class="line">      <span class="comment">// 参数2 请求配置</span></span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/register&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,<span class="comment">// 请求方法</span></span><br><span class="line">        headers, <span class="comment">// 请求头</span></span><br><span class="line">        <span class="comment">// 请求体</span></span><br><span class="line">        <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">username</span>: <span class="string">&#x27;itheima9876&#x27;</span>, <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span> &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">const</span> json = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(json)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h2><h3 id="Generator-核心语法"><a href="#Generator-核心语法" class="headerlink" title="Generator-核心语法"></a>Generator-核心语法</h3><p><strong>核心语法:</strong></p><ol><li>如何定义生成器函数:</li><li>如何获取<code>generator</code>对象</li><li><code>yield</code>表达式的使用</li><li>通过<code>for of</code>获取每一个<code>yield</code>的值</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 通过function* 创建生成器函数 </span></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 遇到yield表达式时会暂停后续的操作</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;a&#x27;</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;b&#x27;</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;c&#x27;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;d&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. 调用函数获取生成器</span></span><br><span class="line"><span class="keyword">const</span> f = <span class="title function_">foo</span>()</span><br><span class="line"><span class="comment">// 3. 通过next方法获取yield 之后的表达式结果，会被包装到一个对象中</span></span><br><span class="line"><span class="comment">// 执行一次next 即可获取一次 yield之后的表达式结果</span></span><br><span class="line"><span class="keyword">const</span> res1 = f.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res1)<span class="comment">// &#123;value: &#x27;a&#x27;, done: false&#125;</span></span><br><span class="line"><span class="keyword">const</span> res2 = f.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res2)<span class="comment">// &#123;value: &#x27;b&#x27;, done: false&#125;</span></span><br><span class="line"><span class="keyword">const</span> res3 = f.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res3)<span class="comment">// &#123;value: &#x27;c&#x27;, done: false&#125;</span></span><br><span class="line"><span class="comment">// 最后一次可以拿到return的结果</span></span><br><span class="line"><span class="keyword">const</span> res4 = f.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res4)<span class="comment">// &#123;value: &#x27;d&#x27;, done: true&#125; </span></span><br><span class="line"><span class="comment">// done 为true之后，获取到的value为undefined</span></span><br><span class="line"><span class="keyword">const</span> res5 = f.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res5)<span class="comment">// &#123;value: undefined, done: true&#125; </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 通过for of 获取每一个yield之后的值，</span></span><br><span class="line"><span class="keyword">const</span> f2 = <span class="title function_">foo</span>()</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> iterator <span class="keyword">of</span> f2) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(iterator)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="面试回答-5"><a href="#面试回答-5" class="headerlink" title="面试回答:"></a>面试回答:</h3><p>Generator-核心语法</p><ol><li>可以通过生成器函数(<code>function* xxx()&#123;&#125;</code>)来生成<code>Generator</code>对象:</li><li>通过<code>Generator</code>对象的<code>next</code>方法可以获取<code>yield</code>表达式之后的结果</li></ol><h3 id="Generator-id生成器"><a href="#Generator-id生成器" class="headerlink" title="Generator-id生成器"></a>Generator-id生成器</h3><p>**需求:**使用<code>Generator</code>实现一个id生成器id</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">idGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 逻辑略</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> idMaker = <span class="title function_">idGenerator</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用next方法,获取id(每次累加1)</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">value</span>: id1 &#125; = idMaker.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(id1)</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">value</span>: id2 &#125; = idMaker.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(id2)</span><br></pre></td></tr></table></figure><p><strong>核心步骤:</strong></p><ol><li>定义生成器函数</li><li>内部使用循环,通过<code>yield</code>返回<code>id</code>并累加</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 通过function* 创建生成器函数 </span></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">generator</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> id = <span class="number">0</span></span><br><span class="line">  <span class="comment">// 无限循环</span></span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="comment">// id累加并返回</span></span><br><span class="line">    <span class="keyword">yield</span> id++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. 调用函数获取生成器</span></span><br><span class="line"><span class="keyword">const</span> idMaker = <span class="title function_">generator</span>()</span><br><span class="line"><span class="comment">// 3. 需要id的时候 通过next获取即可</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">value</span>: id1 &#125; = idMaker.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(id1)</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">value</span>: id2 &#125; = idMaker.<span class="title function_">next</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(id2)</span><br></pre></td></tr></table></figure><h3 id="面试回答-6"><a href="#面试回答-6" class="headerlink" title="面试回答:"></a>面试回答:</h3><p>Generator-id生成器</p><ol><li>生成器函数内部的代码会在调用<code>next</code>方法时执行,利用这一特点,可以实现任意的生成器,需要时调用<code>next</code>即可获取结果</li></ol><h3 id="Generator-流程控制"><a href="#Generator-流程控制" class="headerlink" title="Generator-流程控制"></a>Generator-流程控制</h3><p>遇到<code>yield</code>表达式时会<strong>暂停</strong>后续的操作</p><p>**需求:**使用<code>Generator</code>实现流程控制</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">weatherGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// 逻辑略</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">axios</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 获取Generator实例</span></span><br><span class="line"><span class="keyword">const</span> weather = <span class="title function_">weatherGenerator</span>()</span><br><span class="line"><span class="comment">// 依次获取 北上广深的天气 (axios)</span></span><br><span class="line">weather.<span class="title function_">next</span>()</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;getWeather&quot;</span>&gt;</span>天气查询<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/axios/1.3.6/axios.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * 需求：流程控制，依次查询，北上广深的天气预报</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * 参考code: 北京 110100  上海 310100  广州 440100 深圳 440300</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * 接口文档: https://apifox.com/apidoc/project-1937884/api-49760220</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">   * */</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span>* <span class="title function_">weatherGenerator</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 北京</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">yield</span> <span class="title function_">axios</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/weather?city=110100&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 上海</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">yield</span> <span class="title function_">axios</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/weather?city=310100&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 广州</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">yield</span> <span class="title function_">axios</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/weather?city=440100&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 深圳</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">yield</span> <span class="title function_">axios</span>(<span class="string">&#x27;http://hmajax.itheima.net/api/weather?city=440300&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cityWeather = <span class="title function_">weatherGenerator</span>()</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.getWeather&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    cityWeather.<span class="title function_">next</span>().<span class="property">value</span>.<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> cityWeather.<span class="title function_">next</span>().<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript">    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> cityWeather.<span class="title function_">next</span>().<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="面试回答-7"><a href="#面试回答-7" class="headerlink" title="面试回答:"></a>面试回答:</h3><p>Generator-流程控制</p><ol><li>使用<code>Generator</code>控制流程的本质是利用<code>yield</code>关键字来分隔逻辑比如示例中依次调用了多个接口,通过<code>yield</code>分隔,通过<code>next</code>来触发调用</li></ol></div><div class="story post-story"><h2 id="函数柯里化"><a href="#函数柯里化" class="headerlink" title="函数柯里化"></a>函数柯里化</h2><p>柯里化是把接收多个参数的函数变换成接收一个单一参数的函数，并返回接收剩余参数而且返回结果的新函数的技术。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">sum</span>(a,b)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">b</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> a + b</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">sum</span>(a)(b)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//改写函数sum实现：参数传递到5个即可实现累加</span></span><br><span class="line"><span class="keyword">const</span> nums = []</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">...args</span>)&#123;</span><br><span class="line">    nums.<span class="title function_">push</span>(..<span class="property">args</span>)</span><br><span class="line">    <span class="keyword">if</span>(nums.<span class="property">length</span>&gt; = <span class="number">5</span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> res = nums.<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">5</span>).<span class="title function_">reduce</span>(<span class="function">(<span class="params">p,c</span>)=&gt;</span>p+c,<span class="number">0</span>)</span><br><span class="line">        nums = []</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sum</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sumMaker</span>(<span class="params">length</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> nums = []</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">...args</span>)&#123;</span><br><span class="line">        nums.<span class="title function_">push</span>(..<span class="property">args</span>)</span><br><span class="line">        <span class="keyword">if</span>(nums.<span class="property">length</span>&gt; = length)&#123;</span><br><span class="line">            <span class="keyword">const</span> res = nums.<span class="title function_">slice</span>(<span class="number">0</span>,length).<span class="title function_">reduce</span>(<span class="function">(<span class="params">p,c</span>)=&gt;</span>p+c,<span class="number">0</span>)</span><br><span class="line">            nums = []</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> sum</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> typeofTest = <span class="keyword">function</span> (<span class="params">type</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">thing</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">typeof</span> thing === type</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;MVVM&quot;&gt;&lt;a href=&quot;#MVVM&quot; class=&quot;headerlink&quot; title=&quot;MVVM&quot;&gt;&lt;/a&gt;MVVM&lt;/h2&gt;&lt;p&gt;MVVM是一种软件架构模式，是Model、View、ViewMo</summary>
      
    
    
    
    <category term="学习笔记" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="面试八股" scheme="http://example.com/tags/%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1/"/>
    
  </entry>
  
</feed>
